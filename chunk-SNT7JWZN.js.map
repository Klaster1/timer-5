{"version":3,"sources":["node_modules/@angular/material/fesm2022/option-BzhYL_xC.mjs","node_modules/@angular/material/fesm2022/module-BDiw_nWS.mjs","node_modules/date-fns/endOfMonth.js","node_modules/date-fns/_lib/defaultOptions.js","node_modules/date-fns/endOfWeek.js","node_modules/date-fns/endOfYear.js","node_modules/date-fns/startOfMonth.js","node_modules/date-fns/startOfWeek.js","node_modules/date-fns/startOfYear.js","node_modules/date-fns/addDays.js","node_modules/date-fns/subDays.js","node_modules/date-fns/addMonths.js","node_modules/date-fns/subMonths.js","node_modules/date-fns/addWeeks.js","node_modules/date-fns/subWeeks.js","node_modules/date-fns/addYears.js","node_modules/date-fns/subYears.js","src/app/domain/date-time.ts","node_modules/date-fns/locale/en-US/_lib/formatDistance.js","node_modules/date-fns/locale/_lib/buildFormatLongFn.js","node_modules/date-fns/locale/en-US/_lib/formatLong.js","node_modules/date-fns/locale/en-US/_lib/formatRelative.js","node_modules/date-fns/locale/_lib/buildLocalizeFn.js","node_modules/date-fns/locale/en-US/_lib/localize.js","node_modules/date-fns/locale/_lib/buildMatchFn.js","node_modules/date-fns/locale/_lib/buildMatchPatternFn.js","node_modules/date-fns/locale/en-US/_lib/match.js","node_modules/date-fns/locale/en-US.js","node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js","node_modules/date-fns/_lib/normalizeDates.js","node_modules/date-fns/differenceInCalendarDays.js","node_modules/date-fns/getDayOfYear.js","node_modules/date-fns/startOfISOWeek.js","node_modules/date-fns/getISOWeekYear.js","node_modules/date-fns/startOfISOWeekYear.js","node_modules/date-fns/getISOWeek.js","node_modules/date-fns/getWeekYear.js","node_modules/date-fns/startOfWeekYear.js","node_modules/date-fns/getWeek.js","node_modules/date-fns/_lib/addLeadingZeros.js","node_modules/date-fns/_lib/format/lightFormatters.js","node_modules/date-fns/_lib/format/formatters.js","node_modules/date-fns/_lib/format/longFormatters.js","node_modules/date-fns/_lib/protectedTokens.js","node_modules/date-fns/format.js","node_modules/uplot/dist/uPlot.esm.js","src/app/screen-tasks/tasks-filter/timeline-chart-uplot.ts","src/app/screen-tasks/tasks-filter/tasks-filter.ts","src/app/screen-tasks/tasks-filter/tasks-filter.html"],"sourcesContent":["import { _IdGenerator } from '@angular/cdk/a11y';\nimport { ENTER, SPACE, hasModifierKey } from '@angular/cdk/keycodes';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, booleanAttribute, Component, ViewEncapsulation, ChangeDetectionStrategy, Input, ElementRef, ChangeDetectorRef, signal, EventEmitter, isSignal, Output, ViewChild } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { M as MatRipple } from './ripple-BYgV4oZC.mjs';\nimport { M as MatPseudoCheckbox } from './pseudo-checkbox-DDmgx3P4.mjs';\nimport { _ as _StructuralStylesLoader } from './structural-styles-CObeNzjn.mjs';\nimport { _CdkPrivateStyleLoader, _VisuallyHiddenLoader } from '@angular/cdk/private';\n\n/**\n * Injection token used to provide the parent component to options.\n */\nconst _c0 = [\"*\", [[\"mat-option\"], [\"ng-container\"]]];\nconst _c1 = [\"*\", \"mat-option, ng-container\"];\nconst _c2 = [\"text\"];\nconst _c3 = [[[\"mat-icon\"]], \"*\"];\nconst _c4 = [\"mat-icon\", \"*\"];\nfunction MatOption_Conditional_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-pseudo-checkbox\", 1);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.disabled)(\"state\", ctx_r0.selected ? \"checked\" : \"unchecked\");\n  }\n}\nfunction MatOption_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-pseudo-checkbox\", 3);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r0.disabled);\n  }\n}\nfunction MatOption_Conditional_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"(\", ctx_r0.group.label, \")\");\n  }\n}\nconst MAT_OPTION_PARENT_COMPONENT = /*#__PURE__*/new InjectionToken('MAT_OPTION_PARENT_COMPONENT');\n\n// Notes on the accessibility pattern used for `mat-optgroup`.\n// The option group has two different \"modes\": regular and inert. The regular mode uses the\n// recommended a11y pattern which has `role=\"group\"` on the group element with `aria-labelledby`\n// pointing to the label. This works for `mat-select`, but it seems to hit a bug for autocomplete\n// under VoiceOver where the group doesn't get read out at all. The bug appears to be that if\n// there's __any__ a11y-related attribute on the group (e.g. `role` or `aria-labelledby`),\n// VoiceOver on Safari won't read it out.\n// We've introduced the `inert` mode as a workaround. Under this mode, all a11y attributes are\n// removed from the group, and we get the screen reader to read out the group label by mirroring it\n// inside an invisible element in the option. This is sub-optimal, because the screen reader will\n// repeat the group label on each navigation, whereas the default pattern only reads the group when\n// the user enters a new group. The following alternate approaches were considered:\n// 1. Reading out the group label using the `LiveAnnouncer` solves the problem, but we can't control\n//    when the text will be read out so sometimes it comes in too late or never if the user\n//    navigates quickly.\n// 2. `<mat-option aria-describedby=\"groupLabel\"` - This works on Safari, but VoiceOver in Chrome\n//    won't read out the description at all.\n// 3. `<mat-option aria-labelledby=\"optionLabel groupLabel\"` - This works on Chrome, but Safari\n//     doesn't read out the text at all. Furthermore, on\n/**\n * Injection token that can be used to reference instances of `MatOptgroup`. It serves as\n * alternative token to the actual `MatOptgroup` class which could cause unnecessary\n * retention of the class and its component metadata.\n */\nconst MAT_OPTGROUP = /*#__PURE__*/new InjectionToken('MatOptgroup');\n/**\n * Component that is used to group instances of `mat-option`.\n */\nlet MatOptgroup = /*#__PURE__*/(() => {\n  class MatOptgroup {\n    /** Label for the option group. */\n    label;\n    /** whether the option group is disabled. */\n    disabled = false;\n    /** Unique id for the underlying label. */\n    _labelId = inject(_IdGenerator).getId('mat-optgroup-label-');\n    /** Whether the group is in inert a11y mode. */\n    _inert;\n    constructor() {\n      const parent = inject(MAT_OPTION_PARENT_COMPONENT, {\n        optional: true\n      });\n      this._inert = parent?.inertGroups ?? false;\n    }\n    static ɵfac = function MatOptgroup_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatOptgroup)();\n    };\n    static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: MatOptgroup,\n      selectors: [[\"mat-optgroup\"]],\n      hostAttrs: [1, \"mat-mdc-optgroup\"],\n      hostVars: 3,\n      hostBindings: function MatOptgroup_HostBindings(rf, ctx) {\n        if (rf & 2) {\n          i0.ɵɵattribute(\"role\", ctx._inert ? null : \"group\")(\"aria-disabled\", ctx._inert ? null : ctx.disabled.toString())(\"aria-labelledby\", ctx._inert ? null : ctx._labelId);\n        }\n      },\n      inputs: {\n        label: \"label\",\n        disabled: [2, \"disabled\", \"disabled\", booleanAttribute]\n      },\n      exportAs: [\"matOptgroup\"],\n      features: [i0.ɵɵProvidersFeature([{\n        provide: MAT_OPTGROUP,\n        useExisting: MatOptgroup\n      }])],\n      ngContentSelectors: _c1,\n      decls: 5,\n      vars: 4,\n      consts: [[\"role\", \"presentation\", 1, \"mat-mdc-optgroup-label\", 3, \"id\"], [1, \"mdc-list-item__primary-text\"]],\n      template: function MatOptgroup_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵprojectionDef(_c0);\n          i0.ɵɵelementStart(0, \"span\", 0)(1, \"span\", 1);\n          i0.ɵɵtext(2);\n          i0.ɵɵprojection(3);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵprojection(4, 1);\n        }\n        if (rf & 2) {\n          i0.ɵɵclassProp(\"mdc-list-item--disabled\", ctx.disabled);\n          i0.ɵɵproperty(\"id\", ctx._labelId);\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\"\", ctx.label, \" \");\n        }\n      },\n      styles: [\".mat-mdc-optgroup{color:var(--mat-optgroup-label-text-color, var(--mat-sys-on-surface-variant));font-family:var(--mat-optgroup-label-text-font, var(--mat-sys-title-small-font));line-height:var(--mat-optgroup-label-text-line-height, var(--mat-sys-title-small-line-height));font-size:var(--mat-optgroup-label-text-size, var(--mat-sys-title-small-size));letter-spacing:var(--mat-optgroup-label-text-tracking, var(--mat-sys-title-small-tracking));font-weight:var(--mat-optgroup-label-text-weight, var(--mat-sys-title-small-weight))}.mat-mdc-optgroup-label{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;outline:none}.mat-mdc-optgroup-label.mdc-list-item--disabled{opacity:.38}.mat-mdc-optgroup-label .mdc-list-item__primary-text{font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;white-space:normal;color:inherit}\\n\"],\n      encapsulation: 2,\n      changeDetection: 0\n    });\n  }\n  return MatOptgroup;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/** Event object emitted by MatOption when selected or deselected. */\nclass MatOptionSelectionChange {\n  source;\n  isUserInput;\n  constructor(/** Reference to the option that emitted the event. */\n  source, /** Whether the change in the option's value was a result of a user action. */\n  isUserInput = false) {\n    this.source = source;\n    this.isUserInput = isUserInput;\n  }\n}\n/**\n * Single option inside of a `<mat-select>` element.\n */\nlet MatOption = /*#__PURE__*/(() => {\n  class MatOption {\n    _element = inject(ElementRef);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _parent = inject(MAT_OPTION_PARENT_COMPONENT, {\n      optional: true\n    });\n    group = inject(MAT_OPTGROUP, {\n      optional: true\n    });\n    _signalDisableRipple = false;\n    _selected = false;\n    _active = false;\n    _mostRecentViewValue = '';\n    /** Whether the wrapping component is in multiple selection mode. */\n    get multiple() {\n      return this._parent && this._parent.multiple;\n    }\n    /** Whether or not the option is currently selected. */\n    get selected() {\n      return this._selected;\n    }\n    /** The form value of the option. */\n    value;\n    /** The unique ID of the option. */\n    id = inject(_IdGenerator).getId('mat-option-');\n    /** Whether the option is disabled. */\n    get disabled() {\n      return this.group && this.group.disabled || this._disabled();\n    }\n    set disabled(value) {\n      this._disabled.set(value);\n    }\n    _disabled = signal(false);\n    /** Whether ripples for the option are disabled. */\n    get disableRipple() {\n      return this._signalDisableRipple ? this._parent.disableRipple() : !!this._parent?.disableRipple;\n    }\n    /** Whether to display checkmark for single-selection. */\n    get hideSingleSelectionIndicator() {\n      return !!(this._parent && this._parent.hideSingleSelectionIndicator);\n    }\n    /** Event emitted when the option is selected or deselected. */\n    // tslint:disable-next-line:no-output-on-prefix\n    onSelectionChange = new EventEmitter();\n    /** Element containing the option's text. */\n    _text;\n    /** Emits when the state of the option changes and any parents have to be notified. */\n    _stateChanges = new Subject();\n    constructor() {\n      const styleLoader = inject(_CdkPrivateStyleLoader);\n      styleLoader.load(_StructuralStylesLoader);\n      styleLoader.load(_VisuallyHiddenLoader);\n      this._signalDisableRipple = !!this._parent && isSignal(this._parent.disableRipple);\n    }\n    /**\n     * Whether or not the option is currently active and ready to be selected.\n     * An active option displays styles as if it is focused, but the\n     * focus is actually retained somewhere else. This comes in handy\n     * for components like autocomplete where focus must remain on the input.\n     */\n    get active() {\n      return this._active;\n    }\n    /**\n     * The displayed value of the option. It is necessary to show the selected option in the\n     * select's trigger.\n     */\n    get viewValue() {\n      // TODO(kara): Add input property alternative for node envs.\n      return (this._text?.nativeElement.textContent || '').trim();\n    }\n    /** Selects the option. */\n    select(emitEvent = true) {\n      if (!this._selected) {\n        this._selected = true;\n        this._changeDetectorRef.markForCheck();\n        if (emitEvent) {\n          this._emitSelectionChangeEvent();\n        }\n      }\n    }\n    /** Deselects the option. */\n    deselect(emitEvent = true) {\n      if (this._selected) {\n        this._selected = false;\n        this._changeDetectorRef.markForCheck();\n        if (emitEvent) {\n          this._emitSelectionChangeEvent();\n        }\n      }\n    }\n    /** Sets focus onto this option. */\n    focus(_origin, options) {\n      // Note that we aren't using `_origin`, but we need to keep it because some internal consumers\n      // use `MatOption` in a `FocusKeyManager` and we need it to match `FocusableOption`.\n      const element = this._getHostElement();\n      if (typeof element.focus === 'function') {\n        element.focus(options);\n      }\n    }\n    /**\n     * This method sets display styles on the option to make it appear\n     * active. This is used by the ActiveDescendantKeyManager so key\n     * events will display the proper options as active on arrow key events.\n     */\n    setActiveStyles() {\n      if (!this._active) {\n        this._active = true;\n        this._changeDetectorRef.markForCheck();\n      }\n    }\n    /**\n     * This method removes display styles on the option that made it appear\n     * active. This is used by the ActiveDescendantKeyManager so key\n     * events will display the proper options as active on arrow key events.\n     */\n    setInactiveStyles() {\n      if (this._active) {\n        this._active = false;\n        this._changeDetectorRef.markForCheck();\n      }\n    }\n    /** Gets the label to be used when determining whether the option should be focused. */\n    getLabel() {\n      return this.viewValue;\n    }\n    /** Ensures the option is selected when activated from the keyboard. */\n    _handleKeydown(event) {\n      if ((event.keyCode === ENTER || event.keyCode === SPACE) && !hasModifierKey(event)) {\n        this._selectViaInteraction();\n        // Prevent the page from scrolling down and form submits.\n        event.preventDefault();\n      }\n    }\n    /**\n     * `Selects the option while indicating the selection came from the user. Used to\n     * determine if the select's view -> model callback should be invoked.`\n     */\n    _selectViaInteraction() {\n      if (!this.disabled) {\n        this._selected = this.multiple ? !this._selected : true;\n        this._changeDetectorRef.markForCheck();\n        this._emitSelectionChangeEvent(true);\n      }\n    }\n    /** Returns the correct tabindex for the option depending on disabled state. */\n    // This method is only used by `MatLegacyOption`. Keeping it here to avoid breaking the types.\n    // That's because `MatLegacyOption` use `MatOption` type in a few places such as\n    // `MatOptionSelectionChange`. It is safe to delete this when `MatLegacyOption` is deleted.\n    _getTabIndex() {\n      return this.disabled ? '-1' : '0';\n    }\n    /** Gets the host DOM element. */\n    _getHostElement() {\n      return this._element.nativeElement;\n    }\n    ngAfterViewChecked() {\n      // Since parent components could be using the option's label to display the selected values\n      // (e.g. `mat-select`) and they don't have a way of knowing if the option's label has changed\n      // we have to check for changes in the DOM ourselves and dispatch an event. These checks are\n      // relatively cheap, however we still limit them only to selected options in order to avoid\n      // hitting the DOM too often.\n      if (this._selected) {\n        const viewValue = this.viewValue;\n        if (viewValue !== this._mostRecentViewValue) {\n          if (this._mostRecentViewValue) {\n            this._stateChanges.next();\n          }\n          this._mostRecentViewValue = viewValue;\n        }\n      }\n    }\n    ngOnDestroy() {\n      this._stateChanges.complete();\n    }\n    /** Emits the selection change event. */\n    _emitSelectionChangeEvent(isUserInput = false) {\n      this.onSelectionChange.emit(new MatOptionSelectionChange(this, isUserInput));\n    }\n    static ɵfac = function MatOption_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatOption)();\n    };\n    static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: MatOption,\n      selectors: [[\"mat-option\"]],\n      viewQuery: function MatOption_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c2, 7);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._text = _t.first);\n        }\n      },\n      hostAttrs: [\"role\", \"option\", 1, \"mat-mdc-option\", \"mdc-list-item\"],\n      hostVars: 11,\n      hostBindings: function MatOption_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"click\", function MatOption_click_HostBindingHandler() {\n            return ctx._selectViaInteraction();\n          })(\"keydown\", function MatOption_keydown_HostBindingHandler($event) {\n            return ctx._handleKeydown($event);\n          });\n        }\n        if (rf & 2) {\n          i0.ɵɵdomProperty(\"id\", ctx.id);\n          i0.ɵɵattribute(\"aria-selected\", ctx.selected)(\"aria-disabled\", ctx.disabled.toString());\n          i0.ɵɵclassProp(\"mdc-list-item--selected\", ctx.selected)(\"mat-mdc-option-multiple\", ctx.multiple)(\"mat-mdc-option-active\", ctx.active)(\"mdc-list-item--disabled\", ctx.disabled);\n        }\n      },\n      inputs: {\n        value: \"value\",\n        id: \"id\",\n        disabled: [2, \"disabled\", \"disabled\", booleanAttribute]\n      },\n      outputs: {\n        onSelectionChange: \"onSelectionChange\"\n      },\n      exportAs: [\"matOption\"],\n      ngContentSelectors: _c4,\n      decls: 8,\n      vars: 5,\n      consts: [[\"text\", \"\"], [\"aria-hidden\", \"true\", 1, \"mat-mdc-option-pseudo-checkbox\", 3, \"disabled\", \"state\"], [1, \"mdc-list-item__primary-text\"], [\"state\", \"checked\", \"aria-hidden\", \"true\", \"appearance\", \"minimal\", 1, \"mat-mdc-option-pseudo-checkbox\", 3, \"disabled\"], [1, \"cdk-visually-hidden\"], [\"aria-hidden\", \"true\", \"mat-ripple\", \"\", 1, \"mat-mdc-option-ripple\", \"mat-focus-indicator\", 3, \"matRippleTrigger\", \"matRippleDisabled\"]],\n      template: function MatOption_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵprojectionDef(_c3);\n          i0.ɵɵconditionalCreate(0, MatOption_Conditional_0_Template, 1, 2, \"mat-pseudo-checkbox\", 1);\n          i0.ɵɵprojection(1);\n          i0.ɵɵelementStart(2, \"span\", 2, 0);\n          i0.ɵɵprojection(4, 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵconditionalCreate(5, MatOption_Conditional_5_Template, 1, 1, \"mat-pseudo-checkbox\", 3);\n          i0.ɵɵconditionalCreate(6, MatOption_Conditional_6_Template, 2, 1, \"span\", 4);\n          i0.ɵɵelement(7, \"div\", 5);\n        }\n        if (rf & 2) {\n          i0.ɵɵconditional(ctx.multiple ? 0 : -1);\n          i0.ɵɵadvance(5);\n          i0.ɵɵconditional(!ctx.multiple && ctx.selected && !ctx.hideSingleSelectionIndicator ? 5 : -1);\n          i0.ɵɵadvance();\n          i0.ɵɵconditional(ctx.group && ctx.group._inert ? 6 : -1);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"matRippleTrigger\", ctx._getHostElement())(\"matRippleDisabled\", ctx.disabled || ctx.disableRipple);\n        }\n      },\n      dependencies: [MatPseudoCheckbox, MatRipple],\n      styles: [\".mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:\\\"\\\";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:\\\"\\\"}\\n\"],\n      encapsulation: 2,\n      changeDetection: 0\n    });\n  }\n  return MatOption;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Counts the amount of option group labels that precede the specified option.\n * @param optionIndex Index of the option at which to start counting.\n * @param options Flat list of all of the options.\n * @param optionGroups Flat list of all of the option groups.\n * @docs-private\n */\nfunction _countGroupLabelsBeforeOption(optionIndex, options, optionGroups) {\n  if (optionGroups.length) {\n    let optionsArray = options.toArray();\n    let groups = optionGroups.toArray();\n    let groupCounter = 0;\n    for (let i = 0; i < optionIndex + 1; i++) {\n      if (optionsArray[i].group && optionsArray[i].group === groups[groupCounter]) {\n        groupCounter++;\n      }\n    }\n    return groupCounter;\n  }\n  return 0;\n}\n/**\n * Determines the position to which to scroll a panel in order for an option to be into view.\n * @param optionOffset Offset of the option from the top of the panel.\n * @param optionHeight Height of the options.\n * @param currentScrollPosition Current scroll position of the panel.\n * @param panelHeight Height of the panel.\n * @docs-private\n */\nfunction _getOptionScrollPosition(optionOffset, optionHeight, currentScrollPosition, panelHeight) {\n  if (optionOffset < currentScrollPosition) {\n    return optionOffset;\n  }\n  if (optionOffset + optionHeight > currentScrollPosition + panelHeight) {\n    return Math.max(0, optionOffset - panelHeight + optionHeight);\n  }\n  return currentScrollPosition;\n}\nexport { MatOption as M, _countGroupLabelsBeforeOption as _, MatOptgroup as a, _getOptionScrollPosition as b, MAT_OPTION_PARENT_COMPONENT as c, MAT_OPTGROUP as d, MatOptionSelectionChange as e };\n","import { createRepositionScrollStrategy, CdkConnectedOverlay, CdkOverlayOrigin, OverlayModule } from '@angular/cdk/overlay';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, Injector, ChangeDetectorRef, ElementRef, Renderer2, signal, EventEmitter, HostAttributeToken, booleanAttribute, numberAttribute, Component, ViewEncapsulation, ChangeDetectionStrategy, ContentChildren, ContentChild, Input, ViewChild, Output, Directive, NgModule } from '@angular/core';\nimport { ViewportRuler, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _IdGenerator, LiveAnnouncer, removeAriaReferencedId, addAriaReferencedId, ActiveDescendantKeyManager } from '@angular/cdk/a11y';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { hasModifierKey, ENTER, SPACE, A, ESCAPE, DOWN_ARROW, UP_ARROW, LEFT_ARROW, RIGHT_ARROW } from '@angular/cdk/keycodes';\nimport { NgControl, Validators, NgForm, FormGroupDirective } from '@angular/forms';\nimport { Subject, defer, merge } from 'rxjs';\nimport { startWith, switchMap, filter, map, takeUntil, take } from 'rxjs/operators';\nimport { NgClass } from '@angular/common';\nimport { h as MAT_FORM_FIELD, k as MatFormFieldControl } from './form-field-C9DZXojn.mjs';\nimport { _ as _animationsDisabled } from './animation-DfMFjxHu.mjs';\nimport { _ as _countGroupLabelsBeforeOption, b as _getOptionScrollPosition, c as MAT_OPTION_PARENT_COMPONENT, M as MatOption, d as MAT_OPTGROUP } from './option-BzhYL_xC.mjs';\nimport { E as ErrorStateMatcher } from './error-options-DCNQlTOA.mjs';\nimport { _ as _ErrorStateTracker } from './error-state-Dtb1IHM-.mjs';\nimport { M as MatOptionModule } from './index-DwiL-HGk.mjs';\nimport { M as MatCommonModule } from './common-module-cKSwHniA.mjs';\nimport { M as MatFormFieldModule } from './module-DzZHEh7B.mjs';\n\n// Note that these have been copied over verbatim from\n// `material/select` so that we don't have to expose them publicly.\n/**\n * Returns an exception to be thrown when attempting to change a select's `multiple` option\n * after initialization.\n * @docs-private\n */\nconst _c0 = [\"trigger\"];\nconst _c1 = [\"panel\"];\nconst _c2 = [[[\"mat-select-trigger\"]], \"*\"];\nconst _c3 = [\"mat-select-trigger\", \"*\"];\nfunction MatSelect_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.placeholder);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵprojection(0);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.triggerValue);\n  }\n}\nfunction MatSelect_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵconditionalCreate(1, MatSelect_Conditional_5_Conditional_1_Template, 1, 0)(2, MatSelect_Conditional_5_Conditional_2_Template, 2, 1, \"span\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r1.customTrigger ? 1 : 2);\n  }\n}\nfunction MatSelect_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12, 1);\n    i0.ɵɵlistener(\"keydown\", function MatSelect_ng_template_10_Template_div_keydown_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._handleKeydown($event));\n    });\n    i0.ɵɵprojection(2, 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(i0.ɵɵinterpolate1(\"mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open \", ctx_r1._getPanelTheme()));\n    i0.ɵɵclassProp(\"mat-select-panel-animations-enabled\", !ctx_r1._animationsDisabled);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.panelClass);\n    i0.ɵɵattribute(\"id\", ctx_r1.id + \"-panel\")(\"aria-multiselectable\", ctx_r1.multiple)(\"aria-label\", ctx_r1.ariaLabel || null)(\"aria-labelledby\", ctx_r1._getPanelAriaLabelledby());\n  }\n}\nfunction getMatSelectDynamicMultipleError() {\n  return Error('Cannot change `multiple` mode of select after initialization.');\n}\n/**\n * Returns an exception to be thrown when attempting to assign a non-array value to a select\n * in `multiple` mode. Note that `undefined` and `null` are still valid values to allow for\n * resetting the value.\n * @docs-private\n */\nfunction getMatSelectNonArrayValueError() {\n  return Error('Value must be an array in multiple-selection mode.');\n}\n/**\n * Returns an exception to be thrown when assigning a non-function value to the comparator\n * used to determine if a value corresponds to an option. Note that whether the function\n * actually takes two values and returns a boolean is not checked.\n */\nfunction getMatSelectNonFunctionValueError() {\n  return Error('`compareWith` must be a function.');\n}\n\n/** Injection token that determines the scroll handling while a select is open. */\nconst MAT_SELECT_SCROLL_STRATEGY = /*#__PURE__*/new InjectionToken('mat-select-scroll-strategy', {\n  providedIn: 'root',\n  factory: () => {\n    const injector = inject(Injector);\n    return () => createRepositionScrollStrategy(injector);\n  }\n});\n/**\n * @docs-private\n * @deprecated No longer used, will be removed.\n * @breaking-change 21.0.0\n */\nfunction MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY(_overlay) {\n  const injector = inject(Injector);\n  return () => createRepositionScrollStrategy(injector);\n}\n/** Injection token that can be used to provide the default options the select module. */\nconst MAT_SELECT_CONFIG = /*#__PURE__*/new InjectionToken('MAT_SELECT_CONFIG');\n/**\n * @docs-private\n * @deprecated No longer used, will be removed.\n * @breaking-change 21.0.0\n */\nconst MAT_SELECT_SCROLL_STRATEGY_PROVIDER = {\n  provide: MAT_SELECT_SCROLL_STRATEGY,\n  deps: [],\n  useFactory: MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY\n};\n/**\n * Injection token that can be used to reference instances of `MatSelectTrigger`. It serves as\n * alternative token to the actual `MatSelectTrigger` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst MAT_SELECT_TRIGGER = /*#__PURE__*/new InjectionToken('MatSelectTrigger');\n/** Change event object that is emitted when the select value has changed. */\nclass MatSelectChange {\n  source;\n  value;\n  constructor(/** Reference to the select that emitted the change event. */\n  source, /** Current value of the select that emitted the event. */\n  value) {\n    this.source = source;\n    this.value = value;\n  }\n}\nlet MatSelect = /*#__PURE__*/(() => {\n  class MatSelect {\n    _viewportRuler = inject(ViewportRuler);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _elementRef = inject(ElementRef);\n    _dir = inject(Directionality, {\n      optional: true\n    });\n    _idGenerator = inject(_IdGenerator);\n    _renderer = inject(Renderer2);\n    _parentFormField = inject(MAT_FORM_FIELD, {\n      optional: true\n    });\n    ngControl = inject(NgControl, {\n      self: true,\n      optional: true\n    });\n    _liveAnnouncer = inject(LiveAnnouncer);\n    _defaultOptions = inject(MAT_SELECT_CONFIG, {\n      optional: true\n    });\n    _animationsDisabled = _animationsDisabled();\n    _initialized = new Subject();\n    _cleanupDetach;\n    /** All of the defined select options. */\n    options;\n    // TODO(crisbeto): this is only necessary for the non-MDC select, but it's technically a\n    // public API so we have to keep it. It should be deprecated and removed eventually.\n    /** All of the defined groups of options. */\n    optionGroups;\n    /** User-supplied override of the trigger element. */\n    customTrigger;\n    /**\n     * This position config ensures that the top \"start\" corner of the overlay\n     * is aligned with with the top \"start\" of the origin by default (overlapping\n     * the trigger completely). If the panel cannot fit below the trigger, it\n     * will fall back to a position above the trigger.\n     */\n    _positions = [{\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'top'\n    }, {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'top'\n    }, {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above'\n    }, {\n      originX: 'end',\n      originY: 'top',\n      overlayX: 'end',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above'\n    }];\n    /** Scrolls a particular option into the view. */\n    _scrollOptionIntoView(index) {\n      const option = this.options.toArray()[index];\n      if (option) {\n        const panel = this.panel.nativeElement;\n        const labelCount = _countGroupLabelsBeforeOption(index, this.options, this.optionGroups);\n        const element = option._getHostElement();\n        if (index === 0 && labelCount === 1) {\n          // If we've got one group label before the option and we're at the top option,\n          // scroll the list to the top. This is better UX than scrolling the list to the\n          // top of the option, because it allows the user to read the top group's label.\n          panel.scrollTop = 0;\n        } else {\n          panel.scrollTop = _getOptionScrollPosition(element.offsetTop, element.offsetHeight, panel.scrollTop, panel.offsetHeight);\n        }\n      }\n    }\n    /** Called when the panel has been opened and the overlay has settled on its final position. */\n    _positioningSettled() {\n      this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n    }\n    /** Creates a change event object that should be emitted by the select. */\n    _getChangeEvent(value) {\n      return new MatSelectChange(this, value);\n    }\n    /** Factory function used to create a scroll strategy for this select. */\n    _scrollStrategyFactory = inject(MAT_SELECT_SCROLL_STRATEGY);\n    /** Whether or not the overlay panel is open. */\n    _panelOpen = false;\n    /** Comparison function to specify which option is displayed. Defaults to object equality. */\n    _compareWith = (o1, o2) => o1 === o2;\n    /** Unique id for this input. */\n    _uid = this._idGenerator.getId('mat-select-');\n    /** Current `aria-labelledby` value for the select trigger. */\n    _triggerAriaLabelledBy = null;\n    /**\n     * Keeps track of the previous form control assigned to the select.\n     * Used to detect if it has changed.\n     */\n    _previousControl;\n    /** Emits whenever the component is destroyed. */\n    _destroy = new Subject();\n    /** Tracks the error state of the select. */\n    _errorStateTracker;\n    /**\n     * Emits whenever the component state changes and should cause the parent\n     * form-field to update. Implemented as part of `MatFormFieldControl`.\n     * @docs-private\n     */\n    stateChanges = new Subject();\n    /**\n     * Disable the automatic labeling to avoid issues like #27241.\n     * @docs-private\n     */\n    disableAutomaticLabeling = true;\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    userAriaDescribedBy;\n    /** Deals with the selection logic. */\n    _selectionModel;\n    /** Manages keyboard events for options in the panel. */\n    _keyManager;\n    /** Ideal origin for the overlay panel. */\n    _preferredOverlayOrigin;\n    /** Width of the overlay panel. */\n    _overlayWidth;\n    /** `View -> model callback called when value changes` */\n    _onChange = () => {};\n    /** `View -> model callback called when select has been touched` */\n    _onTouched = () => {};\n    /** ID for the DOM node containing the select's value. */\n    _valueId = this._idGenerator.getId('mat-select-value-');\n    /** Strategy that will be used to handle scrolling while the select panel is open. */\n    _scrollStrategy;\n    _overlayPanelClass = this._defaultOptions?.overlayPanelClass || '';\n    /** Whether the select is focused. */\n    get focused() {\n      return this._focused || this._panelOpen;\n    }\n    _focused = false;\n    /** A name for this control that can be used by `mat-form-field`. */\n    controlType = 'mat-select';\n    /** Trigger that opens the select. */\n    trigger;\n    /** Panel containing the select options. */\n    panel;\n    /** Overlay pane containing the options. */\n    _overlayDir;\n    /** Classes to be passed to the select panel. Supports the same syntax as `ngClass`. */\n    panelClass;\n    /** Whether the select is disabled. */\n    disabled = false;\n    /** Whether ripples in the select are disabled. */\n    get disableRipple() {\n      return this._disableRipple();\n    }\n    set disableRipple(value) {\n      this._disableRipple.set(value);\n    }\n    _disableRipple = signal(false);\n    /** Tab index of the select. */\n    tabIndex = 0;\n    /** Whether checkmark indicator for single-selection options is hidden. */\n    get hideSingleSelectionIndicator() {\n      return this._hideSingleSelectionIndicator;\n    }\n    set hideSingleSelectionIndicator(value) {\n      this._hideSingleSelectionIndicator = value;\n      this._syncParentProperties();\n    }\n    _hideSingleSelectionIndicator = this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n    /** Placeholder to be shown if no value has been selected. */\n    get placeholder() {\n      return this._placeholder;\n    }\n    set placeholder(value) {\n      this._placeholder = value;\n      this.stateChanges.next();\n    }\n    _placeholder;\n    /** Whether the component is required. */\n    get required() {\n      return this._required ?? this.ngControl?.control?.hasValidator(Validators.required) ?? false;\n    }\n    set required(value) {\n      this._required = value;\n      this.stateChanges.next();\n    }\n    _required;\n    /** Whether the user should be allowed to select multiple options. */\n    get multiple() {\n      return this._multiple;\n    }\n    set multiple(value) {\n      if (this._selectionModel && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectDynamicMultipleError();\n      }\n      this._multiple = value;\n    }\n    _multiple = false;\n    /** Whether to center the active option over the trigger. */\n    disableOptionCentering = this._defaultOptions?.disableOptionCentering ?? false;\n    /**\n     * Function to compare the option values with the selected values. The first argument\n     * is a value from an option. The second is a value from the selection. A boolean\n     * should be returned.\n     */\n    get compareWith() {\n      return this._compareWith;\n    }\n    set compareWith(fn) {\n      if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectNonFunctionValueError();\n      }\n      this._compareWith = fn;\n      if (this._selectionModel) {\n        // A different comparator means the selection could change.\n        this._initializeSelection();\n      }\n    }\n    /** Value of the select control. */\n    get value() {\n      return this._value;\n    }\n    set value(newValue) {\n      const hasAssigned = this._assignValue(newValue);\n      if (hasAssigned) {\n        this._onChange(newValue);\n      }\n    }\n    _value;\n    /** Aria label of the select. */\n    ariaLabel = '';\n    /** Input that can be used to specify the `aria-labelledby` attribute. */\n    ariaLabelledby;\n    /** Object used to control when error messages are shown. */\n    get errorStateMatcher() {\n      return this._errorStateTracker.matcher;\n    }\n    set errorStateMatcher(value) {\n      this._errorStateTracker.matcher = value;\n    }\n    /** Time to wait in milliseconds after the last keystroke before moving focus to an item. */\n    typeaheadDebounceInterval;\n    /**\n     * Function used to sort the values in a select in multiple mode.\n     * Follows the same logic as `Array.prototype.sort`.\n     */\n    sortComparator;\n    /** Unique id of the element. */\n    get id() {\n      return this._id;\n    }\n    set id(value) {\n      this._id = value || this._uid;\n      this.stateChanges.next();\n    }\n    _id;\n    /** Whether the select is in an error state. */\n    get errorState() {\n      return this._errorStateTracker.errorState;\n    }\n    set errorState(value) {\n      this._errorStateTracker.errorState = value;\n    }\n    /**\n     * Width of the panel. If set to `auto`, the panel will match the trigger width.\n     * If set to null or an empty string, the panel will grow to match the longest option's text.\n     */\n    panelWidth = this._defaultOptions && typeof this._defaultOptions.panelWidth !== 'undefined' ? this._defaultOptions.panelWidth : 'auto';\n    /**\n     * By default selecting an option with a `null` or `undefined` value will reset the select's\n     * value. Enable this option if the reset behavior doesn't match your requirements and instead\n     * the nullable options should become selected. The value of this input can be controlled app-wide\n     * using the `MAT_SELECT_CONFIG` injection token.\n     */\n    canSelectNullableOptions = this._defaultOptions?.canSelectNullableOptions ?? false;\n    /** Combined stream of all of the child options' change events. */\n    optionSelectionChanges = defer(() => {\n      const options = this.options;\n      if (options) {\n        return options.changes.pipe(startWith(options), switchMap(() => merge(...options.map(option => option.onSelectionChange))));\n      }\n      return this._initialized.pipe(switchMap(() => this.optionSelectionChanges));\n    });\n    /** Event emitted when the select panel has been toggled. */\n    openedChange = new EventEmitter();\n    /** Event emitted when the select has been opened. */\n    _openedStream = this.openedChange.pipe(filter(o => o), map(() => {}));\n    /** Event emitted when the select has been closed. */\n    _closedStream = this.openedChange.pipe(filter(o => !o), map(() => {}));\n    /** Event emitted when the selected value has been changed by the user. */\n    selectionChange = new EventEmitter();\n    /**\n     * Event that emits whenever the raw value of the select changes. This is here primarily\n     * to facilitate the two-way binding for the `value` input.\n     * @docs-private\n     */\n    valueChange = new EventEmitter();\n    constructor() {\n      const defaultErrorStateMatcher = inject(ErrorStateMatcher);\n      const parentForm = inject(NgForm, {\n        optional: true\n      });\n      const parentFormGroup = inject(FormGroupDirective, {\n        optional: true\n      });\n      const tabIndex = inject(new HostAttributeToken('tabindex'), {\n        optional: true\n      });\n      if (this.ngControl) {\n        // Note: we provide the value accessor through here, instead of\n        // the `providers` to avoid running into a circular import.\n        this.ngControl.valueAccessor = this;\n      }\n      // Note that we only want to set this when the defaults pass it in, otherwise it should\n      // stay as `undefined` so that it falls back to the default in the key manager.\n      if (this._defaultOptions?.typeaheadDebounceInterval != null) {\n        this.typeaheadDebounceInterval = this._defaultOptions.typeaheadDebounceInterval;\n      }\n      this._errorStateTracker = new _ErrorStateTracker(defaultErrorStateMatcher, this.ngControl, parentFormGroup, parentForm, this.stateChanges);\n      this._scrollStrategy = this._scrollStrategyFactory();\n      this.tabIndex = tabIndex == null ? 0 : parseInt(tabIndex) || 0;\n      // Force setter to be called in case id was not specified.\n      this.id = this.id;\n    }\n    ngOnInit() {\n      this._selectionModel = new SelectionModel(this.multiple);\n      this.stateChanges.next();\n      this._viewportRuler.change().pipe(takeUntil(this._destroy)).subscribe(() => {\n        if (this.panelOpen) {\n          this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n          this._changeDetectorRef.detectChanges();\n        }\n      });\n    }\n    ngAfterContentInit() {\n      this._initialized.next();\n      this._initialized.complete();\n      this._initKeyManager();\n      this._selectionModel.changed.pipe(takeUntil(this._destroy)).subscribe(event => {\n        event.added.forEach(option => option.select());\n        event.removed.forEach(option => option.deselect());\n      });\n      this.options.changes.pipe(startWith(null), takeUntil(this._destroy)).subscribe(() => {\n        this._resetOptions();\n        this._initializeSelection();\n      });\n    }\n    ngDoCheck() {\n      const newAriaLabelledby = this._getTriggerAriaLabelledby();\n      const ngControl = this.ngControl;\n      // We have to manage setting the `aria-labelledby` ourselves, because part of its value\n      // is computed as a result of a content query which can cause this binding to trigger a\n      // \"changed after checked\" error.\n      if (newAriaLabelledby !== this._triggerAriaLabelledBy) {\n        const element = this._elementRef.nativeElement;\n        this._triggerAriaLabelledBy = newAriaLabelledby;\n        if (newAriaLabelledby) {\n          element.setAttribute('aria-labelledby', newAriaLabelledby);\n        } else {\n          element.removeAttribute('aria-labelledby');\n        }\n      }\n      if (ngControl) {\n        // The disabled state might go out of sync if the form group is swapped out. See #17860.\n        if (this._previousControl !== ngControl.control) {\n          if (this._previousControl !== undefined && ngControl.disabled !== null && ngControl.disabled !== this.disabled) {\n            this.disabled = ngControl.disabled;\n          }\n          this._previousControl = ngControl.control;\n        }\n        this.updateErrorState();\n      }\n    }\n    ngOnChanges(changes) {\n      // Updating the disabled state is handled by the input, but we need to additionally let\n      // the parent form field know to run change detection when the disabled state changes.\n      if (changes['disabled'] || changes['userAriaDescribedBy']) {\n        this.stateChanges.next();\n      }\n      if (changes['typeaheadDebounceInterval'] && this._keyManager) {\n        this._keyManager.withTypeAhead(this.typeaheadDebounceInterval);\n      }\n    }\n    ngOnDestroy() {\n      this._cleanupDetach?.();\n      this._keyManager?.destroy();\n      this._destroy.next();\n      this._destroy.complete();\n      this.stateChanges.complete();\n      this._clearFromModal();\n    }\n    /** Toggles the overlay panel open or closed. */\n    toggle() {\n      this.panelOpen ? this.close() : this.open();\n    }\n    /** Opens the overlay panel. */\n    open() {\n      if (!this._canOpen()) {\n        return;\n      }\n      // It's important that we read this as late as possible, because doing so earlier will\n      // return a different element since it's based on queries in the form field which may\n      // not have run yet. Also this needs to be assigned before we measure the overlay width.\n      if (this._parentFormField) {\n        this._preferredOverlayOrigin = this._parentFormField.getConnectedOverlayOrigin();\n      }\n      this._cleanupDetach?.();\n      this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n      this._applyModalPanelOwnership();\n      this._panelOpen = true;\n      this._overlayDir.positionChange.pipe(take(1)).subscribe(() => {\n        this._changeDetectorRef.detectChanges();\n        this._positioningSettled();\n      });\n      this._overlayDir.attachOverlay();\n      this._keyManager.withHorizontalOrientation(null);\n      this._highlightCorrectOption();\n      this._changeDetectorRef.markForCheck();\n      // Required for the MDC form field to pick up when the overlay has been opened.\n      this.stateChanges.next();\n      // Simulate the animation event before we moved away from `@angular/animations`.\n      Promise.resolve().then(() => this.openedChange.emit(true));\n    }\n    /**\n     * Track which modal we have modified the `aria-owns` attribute of. When the combobox trigger is\n     * inside an aria-modal, we apply aria-owns to the parent modal with the `id` of the options\n     * panel. Track the modal we have changed so we can undo the changes on destroy.\n     */\n    _trackedModal = null;\n    /**\n     * If the autocomplete trigger is inside of an `aria-modal` element, connect\n     * that modal to the options panel with `aria-owns`.\n     *\n     * For some browser + screen reader combinations, when navigation is inside\n     * of an `aria-modal` element, the screen reader treats everything outside\n     * of that modal as hidden or invisible.\n     *\n     * This causes a problem when the combobox trigger is _inside_ of a modal, because the\n     * options panel is rendered _outside_ of that modal, preventing screen reader navigation\n     * from reaching the panel.\n     *\n     * We can work around this issue by applying `aria-owns` to the modal with the `id` of\n     * the options panel. This effectively communicates to assistive technology that the\n     * options panel is part of the same interaction as the modal.\n     *\n     * At time of this writing, this issue is present in VoiceOver.\n     * See https://github.com/angular/components/issues/20694\n     */\n    _applyModalPanelOwnership() {\n      // TODO(http://github.com/angular/components/issues/26853): consider de-duplicating this with\n      // the `LiveAnnouncer` and any other usages.\n      //\n      // Note that the selector here is limited to CDK overlays at the moment in order to reduce the\n      // section of the DOM we need to look through. This should cover all the cases we support, but\n      // the selector can be expanded if it turns out to be too narrow.\n      const modal = this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal=\"true\"]');\n      if (!modal) {\n        // Most commonly, the autocomplete trigger is not inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      if (this._trackedModal) {\n        removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      }\n      addAriaReferencedId(modal, 'aria-owns', panelId);\n      this._trackedModal = modal;\n    }\n    /** Clears the reference to the listbox overlay element from the modal it was added to. */\n    _clearFromModal() {\n      if (!this._trackedModal) {\n        // Most commonly, the autocomplete trigger is not used inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      this._trackedModal = null;\n    }\n    /** Closes the overlay panel and focuses the host element. */\n    close() {\n      if (this._panelOpen) {\n        this._panelOpen = false;\n        this._exitAndDetach();\n        this._keyManager.withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr');\n        this._changeDetectorRef.markForCheck();\n        this._onTouched();\n        // Required for the MDC form field to pick up when the overlay has been closed.\n        this.stateChanges.next();\n        // Simulate the animation event before we moved away from `@angular/animations`.\n        Promise.resolve().then(() => this.openedChange.emit(false));\n      }\n    }\n    /** Triggers the exit animation and detaches the overlay at the end. */\n    _exitAndDetach() {\n      if (this._animationsDisabled || !this.panel) {\n        this._detachOverlay();\n        return;\n      }\n      this._cleanupDetach?.();\n      this._cleanupDetach = () => {\n        cleanupEvent();\n        clearTimeout(exitFallbackTimer);\n        this._cleanupDetach = undefined;\n      };\n      const panel = this.panel.nativeElement;\n      const cleanupEvent = this._renderer.listen(panel, 'animationend', event => {\n        if (event.animationName === '_mat-select-exit') {\n          this._cleanupDetach?.();\n          this._detachOverlay();\n        }\n      });\n      // Since closing the overlay depends on the animation, we have a fallback in case the panel\n      // doesn't animate. This can happen in some internal tests that do `* {animation: none}`.\n      const exitFallbackTimer = setTimeout(() => {\n        this._cleanupDetach?.();\n        this._detachOverlay();\n      }, 200);\n      panel.classList.add('mat-select-panel-exit');\n    }\n    /** Detaches the current overlay directive. */\n    _detachOverlay() {\n      this._overlayDir.detachOverlay();\n      // Some of the overlay detachment logic depends on change detection.\n      // Mark for check to ensure that things get picked up in a timely manner.\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Sets the select's value. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param value New value to be written to the model.\n     */\n    writeValue(value) {\n      this._assignValue(value);\n    }\n    /**\n     * Saves a callback function to be invoked when the select's value\n     * changes from user input. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the value changes.\n     */\n    registerOnChange(fn) {\n      this._onChange = fn;\n    }\n    /**\n     * Saves a callback function to be invoked when the select is blurred\n     * by the user. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the component has been touched.\n     */\n    registerOnTouched(fn) {\n      this._onTouched = fn;\n    }\n    /**\n     * Disables the select. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param isDisabled Sets whether the component is disabled.\n     */\n    setDisabledState(isDisabled) {\n      this.disabled = isDisabled;\n      this._changeDetectorRef.markForCheck();\n      this.stateChanges.next();\n    }\n    /** Whether or not the overlay panel is open. */\n    get panelOpen() {\n      return this._panelOpen;\n    }\n    /** The currently selected option. */\n    get selected() {\n      return this.multiple ? this._selectionModel?.selected || [] : this._selectionModel?.selected[0];\n    }\n    /** The value displayed in the trigger. */\n    get triggerValue() {\n      if (this.empty) {\n        return '';\n      }\n      if (this._multiple) {\n        const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n        if (this._isRtl()) {\n          selectedOptions.reverse();\n        }\n        // TODO(crisbeto): delimiter should be configurable for proper localization.\n        return selectedOptions.join(', ');\n      }\n      return this._selectionModel.selected[0].viewValue;\n    }\n    /** Refreshes the error state of the select. */\n    updateErrorState() {\n      this._errorStateTracker.updateErrorState();\n    }\n    /** Whether the element is in RTL mode. */\n    _isRtl() {\n      return this._dir ? this._dir.value === 'rtl' : false;\n    }\n    /** Handles all keydown events on the select. */\n    _handleKeydown(event) {\n      if (!this.disabled) {\n        this.panelOpen ? this._handleOpenKeydown(event) : this._handleClosedKeydown(event);\n      }\n    }\n    /** Handles keyboard events while the select is closed. */\n    _handleClosedKeydown(event) {\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW || keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW;\n      const isOpenKey = keyCode === ENTER || keyCode === SPACE;\n      const manager = this._keyManager;\n      // Open the select on ALT + arrow key to match the native <select>\n      if (!manager.isTyping() && isOpenKey && !hasModifierKey(event) || (this.multiple || event.altKey) && isArrowKey) {\n        event.preventDefault(); // prevents the page from scrolling down when pressing space\n        this.open();\n      } else if (!this.multiple) {\n        const previouslySelectedOption = this.selected;\n        manager.onKeydown(event);\n        const selectedOption = this.selected;\n        // Since the value has changed, we need to announce it ourselves.\n        if (selectedOption && previouslySelectedOption !== selectedOption) {\n          // We set a duration on the live announcement, because we want the live element to be\n          // cleared after a while so that users can't navigate to it using the arrow keys.\n          this._liveAnnouncer.announce(selectedOption.viewValue, 10000);\n        }\n      }\n    }\n    /** Handles keyboard events when the selected is open. */\n    _handleOpenKeydown(event) {\n      const manager = this._keyManager;\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW;\n      const isTyping = manager.isTyping();\n      if (isArrowKey && event.altKey) {\n        // Close the select on ALT + arrow key to match the native <select>\n        event.preventDefault();\n        this.close();\n        // Don't do anything in this case if the user is typing,\n        // because the typing sequence can include the space key.\n      } else if (!isTyping && (keyCode === ENTER || keyCode === SPACE) && manager.activeItem && !hasModifierKey(event)) {\n        event.preventDefault();\n        manager.activeItem._selectViaInteraction();\n      } else if (!isTyping && this._multiple && keyCode === A && event.ctrlKey) {\n        event.preventDefault();\n        const hasDeselectedOptions = this.options.some(opt => !opt.disabled && !opt.selected);\n        this.options.forEach(option => {\n          if (!option.disabled) {\n            hasDeselectedOptions ? option.select() : option.deselect();\n          }\n        });\n      } else {\n        const previouslyFocusedIndex = manager.activeItemIndex;\n        manager.onKeydown(event);\n        if (this._multiple && isArrowKey && event.shiftKey && manager.activeItem && manager.activeItemIndex !== previouslyFocusedIndex) {\n          manager.activeItem._selectViaInteraction();\n        }\n      }\n    }\n    /** Handles keyboard events coming from the overlay. */\n    _handleOverlayKeydown(event) {\n      // TODO(crisbeto): prior to #30363 this was being handled inside the overlay directive, but we\n      // need control over the animation timing so we do it manually. We should remove the `keydown`\n      // listener from `.mat-mdc-select-panel` and handle all the events here. That may cause\n      // further test breakages so it's left for a follow-up.\n      if (event.keyCode === ESCAPE && !hasModifierKey(event)) {\n        event.preventDefault();\n        this.close();\n      }\n    }\n    _onFocus() {\n      if (!this.disabled) {\n        this._focused = true;\n        this.stateChanges.next();\n      }\n    }\n    /**\n     * Calls the touched callback only if the panel is closed. Otherwise, the trigger will\n     * \"blur\" to the panel when it opens, causing a false positive.\n     */\n    _onBlur() {\n      this._focused = false;\n      this._keyManager?.cancelTypeahead();\n      if (!this.disabled && !this.panelOpen) {\n        this._onTouched();\n        this._changeDetectorRef.markForCheck();\n        this.stateChanges.next();\n      }\n    }\n    /** Returns the theme to be used on the panel. */\n    _getPanelTheme() {\n      return this._parentFormField ? `mat-${this._parentFormField.color}` : '';\n    }\n    /** Whether the select has a value. */\n    get empty() {\n      return !this._selectionModel || this._selectionModel.isEmpty();\n    }\n    _initializeSelection() {\n      // Defer setting the value in order to avoid the \"Expression\n      // has changed after it was checked\" errors from Angular.\n      Promise.resolve().then(() => {\n        if (this.ngControl) {\n          this._value = this.ngControl.value;\n        }\n        this._setSelectionByValue(this._value);\n        this.stateChanges.next();\n      });\n    }\n    /**\n     * Sets the selected option based on a value. If no option can be\n     * found with the designated value, the select trigger is cleared.\n     */\n    _setSelectionByValue(value) {\n      this.options.forEach(option => option.setInactiveStyles());\n      this._selectionModel.clear();\n      if (this.multiple && value) {\n        if (!Array.isArray(value) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n          throw getMatSelectNonArrayValueError();\n        }\n        value.forEach(currentValue => this._selectOptionByValue(currentValue));\n        this._sortValues();\n      } else {\n        const correspondingOption = this._selectOptionByValue(value);\n        // Shift focus to the active item. Note that we shouldn't do this in multiple\n        // mode, because we don't know what option the user interacted with last.\n        if (correspondingOption) {\n          this._keyManager.updateActiveItem(correspondingOption);\n        } else if (!this.panelOpen) {\n          // Otherwise reset the highlighted option. Note that we only want to do this while\n          // closed, because doing it while open can shift the user's focus unnecessarily.\n          this._keyManager.updateActiveItem(-1);\n        }\n      }\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Finds and selects and option based on its value.\n     * @returns Option that has the corresponding value.\n     */\n    _selectOptionByValue(value) {\n      const correspondingOption = this.options.find(option => {\n        // Skip options that are already in the model. This allows us to handle cases\n        // where the same primitive value is selected multiple times.\n        if (this._selectionModel.isSelected(option)) {\n          return false;\n        }\n        try {\n          // Treat null as a special reset value.\n          return (option.value != null || this.canSelectNullableOptions) && this._compareWith(option.value, value);\n        } catch (error) {\n          if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            // Notify developers of errors in their comparator.\n            console.warn(error);\n          }\n          return false;\n        }\n      });\n      if (correspondingOption) {\n        this._selectionModel.select(correspondingOption);\n      }\n      return correspondingOption;\n    }\n    /** Assigns a specific value to the select. Returns whether the value has changed. */\n    _assignValue(newValue) {\n      // Always re-assign an array, because it might have been mutated.\n      if (newValue !== this._value || this._multiple && Array.isArray(newValue)) {\n        if (this.options) {\n          this._setSelectionByValue(newValue);\n        }\n        this._value = newValue;\n        return true;\n      }\n      return false;\n    }\n    // `skipPredicate` determines if key manager should avoid putting a given option in the tab\n    // order. Allow disabled list items to receive focus via keyboard to align with WAI ARIA\n    // recommendation.\n    //\n    // Normally WAI ARIA's instructions are to exclude disabled items from the tab order, but it\n    // makes a few exceptions for compound widgets.\n    //\n    // From [Developing a Keyboard Interface](\n    // https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/):\n    //   \"For the following composite widget elements, keep them focusable when disabled: Options in a\n    //   Listbox...\"\n    //\n    // The user can focus disabled options using the keyboard, but the user cannot click disabled\n    // options.\n    _skipPredicate = option => {\n      if (this.panelOpen) {\n        // Support keyboard focusing disabled options in an ARIA listbox.\n        return false;\n      }\n      // When the panel is closed, skip over disabled options. Support options via the UP/DOWN arrow\n      // keys on a closed select. ARIA listbox interaction pattern is less relevant when the panel is\n      // closed.\n      return option.disabled;\n    };\n    /** Gets how wide the overlay panel should be. */\n    _getOverlayWidth(preferredOrigin) {\n      if (this.panelWidth === 'auto') {\n        const refToMeasure = preferredOrigin instanceof CdkOverlayOrigin ? preferredOrigin.elementRef : preferredOrigin || this._elementRef;\n        return refToMeasure.nativeElement.getBoundingClientRect().width;\n      }\n      return this.panelWidth === null ? '' : this.panelWidth;\n    }\n    /** Syncs the parent state with the individual options. */\n    _syncParentProperties() {\n      if (this.options) {\n        for (const option of this.options) {\n          option._changeDetectorRef.markForCheck();\n        }\n      }\n    }\n    /** Sets up a key manager to listen to keyboard events on the overlay panel. */\n    _initKeyManager() {\n      this._keyManager = new ActiveDescendantKeyManager(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr').withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(['shiftKey']).skipPredicate(this._skipPredicate);\n      this._keyManager.tabOut.subscribe(() => {\n        if (this.panelOpen) {\n          // Select the active item when tabbing away. This is consistent with how the native\n          // select behaves. Note that we only want to do this in single selection mode.\n          if (!this.multiple && this._keyManager.activeItem) {\n            this._keyManager.activeItem._selectViaInteraction();\n          }\n          // Restore focus to the trigger before closing. Ensures that the focus\n          // position won't be lost if the user got focus into the overlay.\n          this.focus();\n          this.close();\n        }\n      });\n      this._keyManager.change.subscribe(() => {\n        if (this._panelOpen && this.panel) {\n          this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n        } else if (!this._panelOpen && !this.multiple && this._keyManager.activeItem) {\n          this._keyManager.activeItem._selectViaInteraction();\n        }\n      });\n    }\n    /** Drops current option subscriptions and IDs and resets from scratch. */\n    _resetOptions() {\n      const changedOrDestroyed = merge(this.options.changes, this._destroy);\n      this.optionSelectionChanges.pipe(takeUntil(changedOrDestroyed)).subscribe(event => {\n        this._onSelect(event.source, event.isUserInput);\n        if (event.isUserInput && !this.multiple && this._panelOpen) {\n          this.close();\n          this.focus();\n        }\n      });\n      // Listen to changes in the internal state of the options and react accordingly.\n      // Handles cases like the labels of the selected options changing.\n      merge(...this.options.map(option => option._stateChanges)).pipe(takeUntil(changedOrDestroyed)).subscribe(() => {\n        // `_stateChanges` can fire as a result of a change in the label's DOM value which may\n        // be the result of an expression changing. We have to use `detectChanges` in order\n        // to avoid \"changed after checked\" errors (see #14793).\n        this._changeDetectorRef.detectChanges();\n        this.stateChanges.next();\n      });\n    }\n    /** Invoked when an option is clicked. */\n    _onSelect(option, isUserInput) {\n      const wasSelected = this._selectionModel.isSelected(option);\n      if (!this.canSelectNullableOptions && option.value == null && !this._multiple) {\n        option.deselect();\n        this._selectionModel.clear();\n        if (this.value != null) {\n          this._propagateChanges(option.value);\n        }\n      } else {\n        if (wasSelected !== option.selected) {\n          option.selected ? this._selectionModel.select(option) : this._selectionModel.deselect(option);\n        }\n        if (isUserInput) {\n          this._keyManager.setActiveItem(option);\n        }\n        if (this.multiple) {\n          this._sortValues();\n          if (isUserInput) {\n            // In case the user selected the option with their mouse, we\n            // want to restore focus back to the trigger, in order to\n            // prevent the select keyboard controls from clashing with\n            // the ones from `mat-option`.\n            this.focus();\n          }\n        }\n      }\n      if (wasSelected !== this._selectionModel.isSelected(option)) {\n        this._propagateChanges();\n      }\n      this.stateChanges.next();\n    }\n    /** Sorts the selected values in the selected based on their order in the panel. */\n    _sortValues() {\n      if (this.multiple) {\n        const options = this.options.toArray();\n        this._selectionModel.sort((a, b) => {\n          return this.sortComparator ? this.sortComparator(a, b, options) : options.indexOf(a) - options.indexOf(b);\n        });\n        this.stateChanges.next();\n      }\n    }\n    /** Emits change event to set the model value. */\n    _propagateChanges(fallbackValue) {\n      let valueToEmit;\n      if (this.multiple) {\n        valueToEmit = this.selected.map(option => option.value);\n      } else {\n        valueToEmit = this.selected ? this.selected.value : fallbackValue;\n      }\n      this._value = valueToEmit;\n      this.valueChange.emit(valueToEmit);\n      this._onChange(valueToEmit);\n      this.selectionChange.emit(this._getChangeEvent(valueToEmit));\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Highlights the selected item. If no option is selected, it will highlight\n     * the first *enabled* option.\n     */\n    _highlightCorrectOption() {\n      if (this._keyManager) {\n        if (this.empty) {\n          // Find the index of the first *enabled* option. Avoid calling `_keyManager.setActiveItem`\n          // because it activates the first option that passes the skip predicate, rather than the\n          // first *enabled* option.\n          let firstEnabledOptionIndex = -1;\n          for (let index = 0; index < this.options.length; index++) {\n            const option = this.options.get(index);\n            if (!option.disabled) {\n              firstEnabledOptionIndex = index;\n              break;\n            }\n          }\n          this._keyManager.setActiveItem(firstEnabledOptionIndex);\n        } else {\n          this._keyManager.setActiveItem(this._selectionModel.selected[0]);\n        }\n      }\n    }\n    /** Whether the panel is allowed to open. */\n    _canOpen() {\n      return !this._panelOpen && !this.disabled && this.options?.length > 0 && !!this._overlayDir;\n    }\n    /** Focuses the select element. */\n    focus(options) {\n      this._elementRef.nativeElement.focus(options);\n    }\n    /** Gets the aria-labelledby for the select panel. */\n    _getPanelAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      const labelId = this._parentFormField?.getLabelId() || null;\n      const labelExpression = labelId ? labelId + ' ' : '';\n      return this.ariaLabelledby ? labelExpression + this.ariaLabelledby : labelId;\n    }\n    /** Determines the `aria-activedescendant` to be set on the host. */\n    _getAriaActiveDescendant() {\n      if (this.panelOpen && this._keyManager && this._keyManager.activeItem) {\n        return this._keyManager.activeItem.id;\n      }\n      return null;\n    }\n    /** Gets the aria-labelledby of the select component trigger. */\n    _getTriggerAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      let value = this._parentFormField?.getLabelId() || '';\n      if (this.ariaLabelledby) {\n        value += ' ' + this.ariaLabelledby;\n      }\n      // The value should not be used for the trigger's aria-labelledby,\n      // but this currently \"breaks\" accessibility tests since they complain\n      // there is no aria-labelledby. This is because they are not setting an\n      // appropriate label on the form field or select.\n      // TODO: remove this conditional after fixing clients by ensuring their\n      // selects have a label applied.\n      if (!value) {\n        value = this._valueId;\n      }\n      return value;\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    get describedByIds() {\n      const element = this._elementRef.nativeElement;\n      const existingDescribedBy = element.getAttribute('aria-describedby');\n      return existingDescribedBy?.split(' ') || [];\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    setDescribedByIds(ids) {\n      if (ids.length) {\n        this._elementRef.nativeElement.setAttribute('aria-describedby', ids.join(' '));\n      } else {\n        this._elementRef.nativeElement.removeAttribute('aria-describedby');\n      }\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    onContainerClick() {\n      this.focus();\n      this.open();\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    get shouldLabelFloat() {\n      // Since the panel doesn't overlap the trigger, we\n      // want the label to only float when there's a value.\n      return this.panelOpen || !this.empty || this.focused && !!this.placeholder;\n    }\n    static ɵfac = function MatSelect_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelect)();\n    };\n    static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: MatSelect,\n      selectors: [[\"mat-select\"]],\n      contentQueries: function MatSelect_ContentQueries(rf, ctx, dirIndex) {\n        if (rf & 1) {\n          i0.ɵɵcontentQuery(dirIndex, MAT_SELECT_TRIGGER, 5);\n          i0.ɵɵcontentQuery(dirIndex, MatOption, 5);\n          i0.ɵɵcontentQuery(dirIndex, MAT_OPTGROUP, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.customTrigger = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.options = _t);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.optionGroups = _t);\n        }\n      },\n      viewQuery: function MatSelect_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(CdkConnectedOverlay, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.trigger = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.panel = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._overlayDir = _t.first);\n        }\n      },\n      hostAttrs: [\"role\", \"combobox\", \"aria-haspopup\", \"listbox\", 1, \"mat-mdc-select\"],\n      hostVars: 19,\n      hostBindings: function MatSelect_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"keydown\", function MatSelect_keydown_HostBindingHandler($event) {\n            return ctx._handleKeydown($event);\n          })(\"focus\", function MatSelect_focus_HostBindingHandler() {\n            return ctx._onFocus();\n          })(\"blur\", function MatSelect_blur_HostBindingHandler() {\n            return ctx._onBlur();\n          });\n        }\n        if (rf & 2) {\n          i0.ɵɵattribute(\"id\", ctx.id)(\"tabindex\", ctx.disabled ? -1 : ctx.tabIndex)(\"aria-controls\", ctx.panelOpen ? ctx.id + \"-panel\" : null)(\"aria-expanded\", ctx.panelOpen)(\"aria-label\", ctx.ariaLabel || null)(\"aria-required\", ctx.required.toString())(\"aria-disabled\", ctx.disabled.toString())(\"aria-invalid\", ctx.errorState)(\"aria-activedescendant\", ctx._getAriaActiveDescendant());\n          i0.ɵɵclassProp(\"mat-mdc-select-disabled\", ctx.disabled)(\"mat-mdc-select-invalid\", ctx.errorState)(\"mat-mdc-select-required\", ctx.required)(\"mat-mdc-select-empty\", ctx.empty)(\"mat-mdc-select-multiple\", ctx.multiple);\n        }\n      },\n      inputs: {\n        userAriaDescribedBy: [0, \"aria-describedby\", \"userAriaDescribedBy\"],\n        panelClass: \"panelClass\",\n        disabled: [2, \"disabled\", \"disabled\", booleanAttribute],\n        disableRipple: [2, \"disableRipple\", \"disableRipple\", booleanAttribute],\n        tabIndex: [2, \"tabIndex\", \"tabIndex\", value => value == null ? 0 : numberAttribute(value)],\n        hideSingleSelectionIndicator: [2, \"hideSingleSelectionIndicator\", \"hideSingleSelectionIndicator\", booleanAttribute],\n        placeholder: \"placeholder\",\n        required: [2, \"required\", \"required\", booleanAttribute],\n        multiple: [2, \"multiple\", \"multiple\", booleanAttribute],\n        disableOptionCentering: [2, \"disableOptionCentering\", \"disableOptionCentering\", booleanAttribute],\n        compareWith: \"compareWith\",\n        value: \"value\",\n        ariaLabel: [0, \"aria-label\", \"ariaLabel\"],\n        ariaLabelledby: [0, \"aria-labelledby\", \"ariaLabelledby\"],\n        errorStateMatcher: \"errorStateMatcher\",\n        typeaheadDebounceInterval: [2, \"typeaheadDebounceInterval\", \"typeaheadDebounceInterval\", numberAttribute],\n        sortComparator: \"sortComparator\",\n        id: \"id\",\n        panelWidth: \"panelWidth\",\n        canSelectNullableOptions: [2, \"canSelectNullableOptions\", \"canSelectNullableOptions\", booleanAttribute]\n      },\n      outputs: {\n        openedChange: \"openedChange\",\n        _openedStream: \"opened\",\n        _closedStream: \"closed\",\n        selectionChange: \"selectionChange\",\n        valueChange: \"valueChange\"\n      },\n      exportAs: [\"matSelect\"],\n      features: [i0.ɵɵProvidersFeature([{\n        provide: MatFormFieldControl,\n        useExisting: MatSelect\n      }, {\n        provide: MAT_OPTION_PARENT_COMPONENT,\n        useExisting: MatSelect\n      }]), i0.ɵɵNgOnChangesFeature],\n      ngContentSelectors: _c3,\n      decls: 11,\n      vars: 9,\n      consts: [[\"fallbackOverlayOrigin\", \"cdkOverlayOrigin\", \"trigger\", \"\"], [\"panel\", \"\"], [\"cdk-overlay-origin\", \"\", 1, \"mat-mdc-select-trigger\", 3, \"click\"], [1, \"mat-mdc-select-value\"], [1, \"mat-mdc-select-placeholder\", \"mat-mdc-select-min-line\"], [1, \"mat-mdc-select-value-text\"], [1, \"mat-mdc-select-arrow-wrapper\"], [1, \"mat-mdc-select-arrow\"], [\"viewBox\", \"0 0 24 24\", \"width\", \"24px\", \"height\", \"24px\", \"focusable\", \"false\", \"aria-hidden\", \"true\"], [\"d\", \"M7 10l5 5 5-5z\"], [\"cdk-connected-overlay\", \"\", \"cdkConnectedOverlayLockPosition\", \"\", \"cdkConnectedOverlayHasBackdrop\", \"\", \"cdkConnectedOverlayBackdropClass\", \"cdk-overlay-transparent-backdrop\", 3, \"detach\", \"backdropClick\", \"overlayKeydown\", \"cdkConnectedOverlayDisableClose\", \"cdkConnectedOverlayPanelClass\", \"cdkConnectedOverlayScrollStrategy\", \"cdkConnectedOverlayOrigin\", \"cdkConnectedOverlayPositions\", \"cdkConnectedOverlayWidth\", \"cdkConnectedOverlayFlexibleDimensions\"], [1, \"mat-mdc-select-min-line\"], [\"role\", \"listbox\", \"tabindex\", \"-1\", 3, \"keydown\", \"ngClass\"]],\n      template: function MatSelect_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵprojectionDef(_c2);\n          i0.ɵɵelementStart(0, \"div\", 2, 0);\n          i0.ɵɵlistener(\"click\", function MatSelect_Template_div_click_0_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.open());\n          });\n          i0.ɵɵelementStart(3, \"div\", 3);\n          i0.ɵɵconditionalCreate(4, MatSelect_Conditional_4_Template, 2, 1, \"span\", 4)(5, MatSelect_Conditional_5_Template, 3, 1, \"span\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(8, \"svg\", 8);\n          i0.ɵɵelement(9, \"path\", 9);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(10, MatSelect_ng_template_10_Template, 3, 10, \"ng-template\", 10);\n          i0.ɵɵlistener(\"detach\", function MatSelect_Template_ng_template_detach_10_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.close());\n          })(\"backdropClick\", function MatSelect_Template_ng_template_backdropClick_10_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.close());\n          })(\"overlayKeydown\", function MatSelect_Template_ng_template_overlayKeydown_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx._handleOverlayKeydown($event));\n          });\n        }\n        if (rf & 2) {\n          const fallbackOverlayOrigin_r4 = i0.ɵɵreference(1);\n          i0.ɵɵadvance(3);\n          i0.ɵɵattribute(\"id\", ctx._valueId);\n          i0.ɵɵadvance();\n          i0.ɵɵconditional(ctx.empty ? 4 : 5);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"cdkConnectedOverlayDisableClose\", true)(\"cdkConnectedOverlayPanelClass\", ctx._overlayPanelClass)(\"cdkConnectedOverlayScrollStrategy\", ctx._scrollStrategy)(\"cdkConnectedOverlayOrigin\", ctx._preferredOverlayOrigin || fallbackOverlayOrigin_r4)(\"cdkConnectedOverlayPositions\", ctx._positions)(\"cdkConnectedOverlayWidth\", ctx._overlayWidth)(\"cdkConnectedOverlayFlexibleDimensions\", true);\n        }\n      },\n      dependencies: [CdkOverlayOrigin, CdkConnectedOverlay, NgClass],\n      styles: [\"@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:\\\" \\\";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}\\n\"],\n      encapsulation: 2,\n      changeDetection: 0\n    });\n  }\n  return MatSelect;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Allows the user to customize the trigger that is displayed when the select has a value.\n */\nlet MatSelectTrigger = /*#__PURE__*/(() => {\n  class MatSelectTrigger {\n    static ɵfac = function MatSelectTrigger_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelectTrigger)();\n    };\n    static ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: MatSelectTrigger,\n      selectors: [[\"mat-select-trigger\"]],\n      features: [i0.ɵɵProvidersFeature([{\n        provide: MAT_SELECT_TRIGGER,\n        useExisting: MatSelectTrigger\n      }])]\n    });\n  }\n  return MatSelectTrigger;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSelectModule = /*#__PURE__*/(() => {\n  class MatSelectModule {\n    static ɵfac = function MatSelectModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelectModule)();\n    };\n    static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n      type: MatSelectModule\n    });\n    static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n      providers: [MAT_SELECT_SCROLL_STRATEGY_PROVIDER],\n      imports: [OverlayModule, MatOptionModule, MatCommonModule, CdkScrollableModule, MatFormFieldModule, MatOptionModule, MatCommonModule]\n    });\n  }\n  return MatSelectModule;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nexport { MatSelectModule as M, MAT_SELECT_SCROLL_STRATEGY as a, MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY as b, MAT_SELECT_CONFIG as c, MAT_SELECT_SCROLL_STRATEGY_PROVIDER as d, MAT_SELECT_TRIGGER as e, MatSelectChange as f, MatSelect as g, MatSelectTrigger as h };\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;","let defaultOptions = {};\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfYear} function options.\n */\n\n/**\n * @name endOfYear\n * @category Year Helpers\n * @summary Return the end of a year for the given date.\n *\n * @description\n * Return the end of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The end of a year\n *\n * @example\n * // The end of a year for 2 September 2014 11:55:00:\n * const result = endOfYear(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Wed Dec 31 2014 23:59:59.999\n */\nexport function endOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  _date.setFullYear(year + 1, 0, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfYear;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfMonth} function options.\n */\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date. The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments.\n * Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed,\n * or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link subDays} function options.\n */\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount, options) {\n  return addDays(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subDays;","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMonths} function options.\n */\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n * @param options - The options object\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(options?.in || date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The subMonths function options.\n */\n\n/**\n * @name subMonths\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the months subtracted\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * const result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function subMonths(date, amount, options) {\n  return addMonths(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subMonths;","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link addWeeks} function options.\n */\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of weeks to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be added.\n * @param options - An object with options\n *\n * @returns The new date with the weeks added\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\nexport function addWeeks(date, amount, options) {\n  return addDays(date, amount * 7, options);\n}\n\n// Fallback for modularized imports:\nexport default addWeeks;","import { addWeeks } from \"./addWeeks.js\";\n\n/**\n * The {@link subWeeks} function options.\n */\n\n/**\n * @name subWeeks\n * @category Week Helpers\n * @summary Subtract the specified number of weeks from the given date.\n *\n * @description\n * Subtract the specified number of weeks from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the weeks subtracted\n *\n * @example\n * // Subtract 4 weeks from 1 September 2014:\n * const result = subWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Aug 04 2014 00:00:00\n */\nexport function subWeeks(date, amount, options) {\n  return addWeeks(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subWeeks;","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The {@link addYears} function options.\n */\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be added.\n * @param options - The options\n *\n * @returns The new date with the years added\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\nexport function addYears(date, amount, options) {\n  return addMonths(date, amount * 12, options);\n}\n\n// Fallback for modularized imports:\nexport default addYears;","import { addYears } from \"./addYears.js\";\n\n/**\n * The {@link subYears} function options.\n */\n\n/**\n * @name subYears\n * @category Year Helpers\n * @summary Subtract the specified number of years from the given date.\n *\n * @description\n * Subtract the specified number of years from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the years subtracted\n *\n * @example\n * // Subtract 5 years from 1 September 2014:\n * const result = subYears(new Date(2014, 8, 1), 5)\n * //=> Tue Sep 01 2009 00:00:00\n */\nexport function subYears(date, amount, options) {\n  return addYears(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subYears;","import { assertNever } from '@app/utils/assert';\nimport { pad2 } from '@app/utils/number';\n\nexport type Duration = Milliseconds;\nexport type Seconds = number;\nexport type Milliseconds = number;\nexport type DurationFn = (now: Milliseconds) => Duration;\n\nexport const formatHours = (value: Duration): string => {\n  if (value <= 0) return '00:00';\n\n  return (['h', 'm'] as const)\n    .map((part) => {\n      switch (part) {\n        case 'h':\n          return pad2(~~(value / 3600000));\n        case 'm':\n          return pad2(~~((value % 3600000) / 60000));\n        default:\n          return assertNever(part);\n      }\n    })\n    .join(':');\n};\n\nexport const daysToMilliseconds = (days: number): Milliseconds => days * 24 * 60 * 60 * 1000;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\"\n  },\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\"\n  },\n  halfAMinute: \"half a minute\",\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\"\n  },\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\"\n  },\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\"\n  },\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\"\n  },\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\"\n  },\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\"\n  },\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\"\n  },\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\"\n  },\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\"\n  },\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\"\n  },\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\"\n  },\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\"\n  },\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\"\n  }\n};\nexport const formatDistance = (token, count, options) => {\n  let result;\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n  return result;\n};","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.js\";\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\"\n};\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\"\n};\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\"\n};\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\"\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\"\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\"\n  })\n};","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\"\n};\nexport const formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];","/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.js\";\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"]\n};\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"]\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n  wide: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n};\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n};\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  }\n};\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  }\n};\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\nexport const localize = {\n  ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\"\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: quarter => quarter - 1\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\"\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\"\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\"\n  })\n};","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, pattern => pattern.test(matchedString)) :\n    // [TODO] -- I challenge you to fix the type\n    findKey(parsePatterns, pattern => pattern.test(matchedString));\n    let value;\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback ?\n    // [TODO] -- I challenge you to fix the type\n    options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n\n    // [TODO] I challenge you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}","import { buildMatchFn } from \"../../_lib/buildMatchFn.js\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.js\";\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nconst parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: value => parseInt(value, 10)\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: index => index + 1\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\"\n  })\n};","import { formatDistance } from \"./en-US/_lib/formatDistance.js\";\nimport { formatLong } from \"./en-US/_lib/formatLong.js\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.js\";\nimport { localize } from \"./en-US/_lib/localize.js\";\nimport { match } from \"./en-US/_lib/match.js\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1\n  }\n};\n\n// Fallback for modularized imports:\nexport default enUS;","import { toDate } from \"../toDate.js\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(Date.UTC(_date.getFullYear(), _date.getMonth(), _date.getDate(), _date.getHours(), _date.getMinutes(), _date.getSeconds(), _date.getMilliseconds()));\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}","import { constructFrom } from \"../constructFrom.js\";\nexport function normalizeDates(context, ...dates) {\n  const normalize = constructFrom.bind(null, context || dates.find(date => typeof date === \"object\"));\n  return dates.map(normalize);\n}","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(options?.in, laterDate, earlierDate);\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, {\n    ...options,\n    weekStartsOn: 1\n  });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\"\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, {\n          width: \"abbreviated\"\n        });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, {\n          width: \"narrow\"\n        });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, {\n          width: \"wide\"\n        });\n    }\n  },\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, {\n        unit: \"year\"\n      });\n    }\n    return lightFormatters.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, {\n        unit: \"year\"\n      });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), {\n        unit: \"date\"\n      });\n    }\n    return lightFormatters.d(date, token);\n  },\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, {\n        unit: \"dayOfYear\"\n      });\n    }\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\"\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, {\n          unit: \"day\"\n        });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"aaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"bbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.h(date, token);\n  },\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.H(date, token);\n  },\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), {\n        unit: \"minute\"\n      });\n    }\n    return lightFormatters.m(date, token);\n  },\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), {\n        unit: \"second\"\n      });\n    }\n    return lightFormatters.s(date, token);\n  },\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  }\n};\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({\n        width: \"short\"\n      });\n    case \"PP\":\n      return formatLong.date({\n        width: \"medium\"\n      });\n    case \"PPP\":\n      return formatLong.date({\n        width: \"long\"\n      });\n    case \"PPPP\":\n    default:\n      return formatLong.date({\n        width: \"full\"\n      });\n  }\n};\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({\n        width: \"short\"\n      });\n    case \"pp\":\n      return formatLong.time({\n        width: \"medium\"\n      });\n    case \"ppp\":\n      return formatLong.time({\n        width: \"long\"\n      });\n    case \"pppp\":\n    default:\n      return formatLong.time({\n        width: \"full\"\n      });\n  }\n};\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n  let dateTimeFormat;\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"short\"\n      });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"medium\"\n      });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"long\"\n      });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: \"full\"\n      });\n      break;\n  }\n  return dateTimeFormat.replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong)).replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport { isProtectedDayOfYearToken, isProtectedWeekYearToken, warnOrThrowProtectedError } from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const originalDate = toDate(date, options?.in);\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n  let parts = formatStr.match(longFormattingTokensRegExp).map(substring => {\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n      const longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale.formatLong);\n    }\n    return substring;\n  }).join(\"\").match(formattingTokensRegExp).map(substring => {\n    // Replace two single quote characters with one single quote character\n    if (substring === \"''\") {\n      return {\n        isToken: false,\n        value: \"'\"\n      };\n    }\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"'\") {\n      return {\n        isToken: false,\n        value: cleanEscapedString(substring)\n      };\n    }\n    if (formatters[firstCharacter]) {\n      return {\n        isToken: true,\n        value: substring\n      };\n    }\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError(\"Format string contains an unescaped latin alphabet character `\" + firstCharacter + \"`\");\n    }\n    return {\n      isToken: false,\n      value: substring\n    };\n  });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale\n  };\n  return parts.map(part => {\n    if (!part.isToken) return part.value;\n    const token = part.value;\n    if (!options?.useAdditionalWeekYearTokens && isProtectedWeekYearToken(token) || !options?.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(token)) {\n      warnOrThrowProtectedError(token, formatStr, String(date));\n    }\n    const formatter = formatters[token[0]];\n    return formatter(originalDate, token, locale.localize, formatterOptions);\n  }).join(\"\");\n}\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n  if (!matched) {\n    return input;\n  }\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;","/**\n* Copyright (c) 2025, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uPlot.js (μPlot)\n* A small, fast chart for time series, lines, areas, ohlc & bars\n* https://github.com/leeoniya/uPlot (v1.6.32)\n*/\n\nconst FEAT_TIME = true;\nconst pre = \"u-\";\nconst UPLOT = \"uplot\";\nconst ORI_HZ = pre + \"hz\";\nconst ORI_VT = pre + \"vt\";\nconst TITLE = pre + \"title\";\nconst WRAP = pre + \"wrap\";\nconst UNDER = pre + \"under\";\nconst OVER = pre + \"over\";\nconst AXIS = pre + \"axis\";\nconst OFF = pre + \"off\";\nconst SELECT = pre + \"select\";\nconst CURSOR_X = pre + \"cursor-x\";\nconst CURSOR_Y = pre + \"cursor-y\";\nconst CURSOR_PT = pre + \"cursor-pt\";\nconst LEGEND = pre + \"legend\";\nconst LEGEND_LIVE = pre + \"live\";\nconst LEGEND_INLINE = pre + \"inline\";\nconst LEGEND_SERIES = pre + \"series\";\nconst LEGEND_MARKER = pre + \"marker\";\nconst LEGEND_LABEL = pre + \"label\";\nconst LEGEND_VALUE = pre + \"value\";\nconst WIDTH = \"width\";\nconst HEIGHT = \"height\";\nconst TOP = \"top\";\nconst BOTTOM = \"bottom\";\nconst LEFT = \"left\";\nconst RIGHT = \"right\";\nconst hexBlack = \"#000\";\nconst transparent = hexBlack + \"0\";\nconst mousemove = \"mousemove\";\nconst mousedown = \"mousedown\";\nconst mouseup = \"mouseup\";\nconst mouseenter = \"mouseenter\";\nconst mouseleave = \"mouseleave\";\nconst dblclick = \"dblclick\";\nconst resize = \"resize\";\nconst scroll = \"scroll\";\nconst change = \"change\";\nconst dppxchange = \"dppxchange\";\nconst LEGEND_DISP = \"--\";\nconst domEnv = typeof window != 'undefined';\nconst doc = domEnv ? document : null;\nconst win = domEnv ? window : null;\nconst nav = domEnv ? navigator : null;\nlet pxRatio;\n\n//export const canHover = domEnv && !win.matchMedia('(hover: none)').matches;\n\nlet query;\nfunction setPxRatio() {\n  let _pxRatio = devicePixelRatio;\n\n  // during print preview, Chrome fires off these dppx queries even without changes\n  if (pxRatio != _pxRatio) {\n    pxRatio = _pxRatio;\n    query && off(change, query, setPxRatio);\n    query = matchMedia(`(min-resolution: ${pxRatio - 0.001}dppx) and (max-resolution: ${pxRatio + 0.001}dppx)`);\n    on(change, query, setPxRatio);\n    win.dispatchEvent(new CustomEvent(dppxchange));\n  }\n}\nfunction addClass(el, c) {\n  if (c != null) {\n    let cl = el.classList;\n    !cl.contains(c) && cl.add(c);\n  }\n}\nfunction remClass(el, c) {\n  let cl = el.classList;\n  cl.contains(c) && cl.remove(c);\n}\nfunction setStylePx(el, name, value) {\n  el.style[name] = value + \"px\";\n}\nfunction placeTag(tag, cls, targ, refEl) {\n  let el = doc.createElement(tag);\n  if (cls != null) addClass(el, cls);\n  if (targ != null) targ.insertBefore(el, refEl);\n  return el;\n}\nfunction placeDiv(cls, targ) {\n  return placeTag(\"div\", cls, targ);\n}\nconst xformCache = new WeakMap();\nfunction elTrans(el, xPos, yPos, xMax, yMax) {\n  let xform = \"translate(\" + xPos + \"px,\" + yPos + \"px)\";\n  let xformOld = xformCache.get(el);\n  if (xform != xformOld) {\n    el.style.transform = xform;\n    xformCache.set(el, xform);\n    if (xPos < 0 || yPos < 0 || xPos > xMax || yPos > yMax) addClass(el, OFF);else remClass(el, OFF);\n  }\n}\nconst colorCache = new WeakMap();\nfunction elColor(el, background, borderColor) {\n  let newColor = background + borderColor;\n  let oldColor = colorCache.get(el);\n  if (newColor != oldColor) {\n    colorCache.set(el, newColor);\n    el.style.background = background;\n    el.style.borderColor = borderColor;\n  }\n}\nconst sizeCache = new WeakMap();\nfunction elSize(el, newWid, newHgt, centered) {\n  let newSize = newWid + \"\" + newHgt;\n  let oldSize = sizeCache.get(el);\n  if (newSize != oldSize) {\n    sizeCache.set(el, newSize);\n    el.style.height = newHgt + \"px\";\n    el.style.width = newWid + \"px\";\n    el.style.marginLeft = centered ? -newWid / 2 + \"px\" : 0;\n    el.style.marginTop = centered ? -newHgt / 2 + \"px\" : 0;\n  }\n}\nconst evOpts = {\n  passive: true\n};\nconst evOpts2 = {\n  ...evOpts,\n  capture: true\n};\nfunction on(ev, el, cb, capt) {\n  el.addEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\nfunction off(ev, el, cb, capt) {\n  el.removeEventListener(ev, cb, evOpts);\n}\ndomEnv && setPxRatio();\n\n// binary search for index of closest value\nfunction closestIdx(num, arr, lo, hi) {\n  let mid;\n  lo = lo || 0;\n  hi = hi || arr.length - 1;\n  let bitwise = hi <= 2147483647;\n  while (hi - lo > 1) {\n    mid = bitwise ? lo + hi >> 1 : floor((lo + hi) / 2);\n    if (arr[mid] < num) lo = mid;else hi = mid;\n  }\n  if (num - arr[lo] <= arr[hi] - num) return lo;\n  return hi;\n}\nfunction makeIndexOfs(predicate) {\n  let indexOfs = (data, _i0, _i1) => {\n    let i0 = -1;\n    let i1 = -1;\n    for (let i = _i0; i <= _i1; i++) {\n      if (predicate(data[i])) {\n        i0 = i;\n        break;\n      }\n    }\n    for (let i = _i1; i >= _i0; i--) {\n      if (predicate(data[i])) {\n        i1 = i;\n        break;\n      }\n    }\n    return [i0, i1];\n  };\n  return indexOfs;\n}\nconst notNullish = v => v != null;\nconst isPositive = v => v != null && v > 0;\nconst nonNullIdxs = makeIndexOfs(notNullish);\nconst positiveIdxs = makeIndexOfs(isPositive);\nfunction getMinMax(data, _i0, _i1, sorted = 0, log = false) {\n  //\tconsole.log(\"getMinMax()\");\n\n  let getEdgeIdxs = log ? positiveIdxs : nonNullIdxs;\n  let predicate = log ? isPositive : notNullish;\n  [_i0, _i1] = getEdgeIdxs(data, _i0, _i1);\n  let _min = data[_i0];\n  let _max = data[_i0];\n  if (_i0 > -1) {\n    if (sorted == 1) {\n      _min = data[_i0];\n      _max = data[_i1];\n    } else if (sorted == -1) {\n      _min = data[_i1];\n      _max = data[_i0];\n    } else {\n      for (let i = _i0; i <= _i1; i++) {\n        let v = data[i];\n        if (predicate(v)) {\n          if (v < _min) _min = v;else if (v > _max) _max = v;\n        }\n      }\n    }\n  }\n  return [_min ?? inf, _max ?? -inf]; // todo: fix to return nulls\n}\nfunction rangeLog(min, max, base, fullMags) {\n  let minSign = sign(min);\n  let maxSign = sign(max);\n  if (min == max) {\n    if (minSign == -1) {\n      min *= base;\n      max /= base;\n    } else {\n      min /= base;\n      max *= base;\n    }\n  }\n  let logFn = base == 10 ? log10 : log2;\n  let growMinAbs = minSign == 1 ? floor : ceil;\n  let growMaxAbs = maxSign == 1 ? ceil : floor;\n  let minExp = growMinAbs(logFn(abs(min)));\n  let maxExp = growMaxAbs(logFn(abs(max)));\n  let minIncr = pow(base, minExp);\n  let maxIncr = pow(base, maxExp);\n\n  // fix values like Math.pow(10, -5) === 0.000009999999999999999\n  if (base == 10) {\n    if (minExp < 0) minIncr = roundDec(minIncr, -minExp);\n    if (maxExp < 0) maxIncr = roundDec(maxIncr, -maxExp);\n  }\n  if (fullMags || base == 2) {\n    min = minIncr * minSign;\n    max = maxIncr * maxSign;\n  } else {\n    min = incrRoundDn(min, minIncr);\n    max = incrRoundUp(max, maxIncr);\n  }\n  return [min, max];\n}\nfunction rangeAsinh(min, max, base, fullMags) {\n  let minMax = rangeLog(min, max, base, fullMags);\n  if (min == 0) minMax[0] = 0;\n  if (max == 0) minMax[1] = 0;\n  return minMax;\n}\nconst rangePad = 0.1;\nconst autoRangePart = {\n  mode: 3,\n  pad: rangePad\n};\nconst _eqRangePart = {\n  pad: 0,\n  soft: null,\n  mode: 0\n};\nconst _eqRange = {\n  min: _eqRangePart,\n  max: _eqRangePart\n};\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction rangeNum(_min, _max, mult, extra) {\n  if (isObj(mult)) return _rangeNum(_min, _max, mult);\n  _eqRangePart.pad = mult;\n  _eqRangePart.soft = extra ? 0 : null;\n  _eqRangePart.mode = extra ? 3 : 0;\n  return _rangeNum(_min, _max, _eqRange);\n}\n\n// nullish coalesce\nfunction ifNull(lh, rh) {\n  return lh == null ? rh : lh;\n}\n\n// checks if given index range in an array contains a non-null value\n// aka a range-bounded Array.some()\nfunction hasData(data, idx0, idx1) {\n  idx0 = ifNull(idx0, 0);\n  idx1 = ifNull(idx1, data.length - 1);\n  while (idx0 <= idx1) {\n    if (data[idx0] != null) return true;\n    idx0++;\n  }\n  return false;\n}\nfunction _rangeNum(_min, _max, cfg) {\n  let cmin = cfg.min;\n  let cmax = cfg.max;\n  let padMin = ifNull(cmin.pad, 0);\n  let padMax = ifNull(cmax.pad, 0);\n  let hardMin = ifNull(cmin.hard, -inf);\n  let hardMax = ifNull(cmax.hard, inf);\n  let softMin = ifNull(cmin.soft, inf);\n  let softMax = ifNull(cmax.soft, -inf);\n  let softMinMode = ifNull(cmin.mode, 0);\n  let softMaxMode = ifNull(cmax.mode, 0);\n  let delta = _max - _min;\n  let deltaMag = log10(delta);\n  let scalarMax = max(abs(_min), abs(_max));\n  let scalarMag = log10(scalarMax);\n  let scalarMagDelta = abs(scalarMag - deltaMag);\n\n  // this handles situations like 89.7, 89.69999999999999\n  // by assuming 0.001x deltas are precision errors\n  //\tif (delta > 0 && delta < abs(_max) / 1e3)\n  //\t\tdelta = 0;\n\n  // treat data as flat if delta is less than 1e-24\n  // or range is 11+ orders of magnitude below raw values, e.g. 99999999.99999996 - 100000000.00000004\n  if (delta < 1e-24 || scalarMagDelta > 10) {\n    delta = 0;\n\n    // if soft mode is 2 and all vals are flat at 0, avoid the 0.1 * 1e3 fallback\n    // this prevents 0,0,0 from ranging to -100,100 when softMin/softMax are -1,1\n    if (_min == 0 || _max == 0) {\n      delta = 1e-24;\n      if (softMinMode == 2 && softMin != inf) padMin = 0;\n      if (softMaxMode == 2 && softMax != -inf) padMax = 0;\n    }\n  }\n  let nonZeroDelta = delta || scalarMax || 1e3;\n  let mag = log10(nonZeroDelta);\n  let base = pow(10, floor(mag));\n  let _padMin = nonZeroDelta * (delta == 0 ? _min == 0 ? .1 : 1 : padMin);\n  let _newMin = roundDec(incrRoundDn(_min - _padMin, base / 10), 24);\n  let _softMin = _min >= softMin && (softMinMode == 1 || softMinMode == 3 && _newMin <= softMin || softMinMode == 2 && _newMin >= softMin) ? softMin : inf;\n  let minLim = max(hardMin, _newMin < _softMin && _min >= _softMin ? _softMin : min(_softMin, _newMin));\n  let _padMax = nonZeroDelta * (delta == 0 ? _max == 0 ? .1 : 1 : padMax);\n  let _newMax = roundDec(incrRoundUp(_max + _padMax, base / 10), 24);\n  let _softMax = _max <= softMax && (softMaxMode == 1 || softMaxMode == 3 && _newMax >= softMax || softMaxMode == 2 && _newMax <= softMax) ? softMax : -inf;\n  let maxLim = min(hardMax, _newMax > _softMax && _max <= _softMax ? _softMax : max(_softMax, _newMax));\n  if (minLim == maxLim && minLim == 0) maxLim = 100;\n  return [minLim, maxLim];\n}\n\n// alternative: https://stackoverflow.com/a/2254896\nconst numFormatter = new Intl.NumberFormat(domEnv ? nav.language : 'en-US');\nconst fmtNum = val => numFormatter.format(val);\nconst M = Math;\nconst PI = M.PI;\nconst abs = M.abs;\nconst floor = M.floor;\nconst round = M.round;\nconst ceil = M.ceil;\nconst min = M.min;\nconst max = M.max;\nconst pow = M.pow;\nconst sign = M.sign;\nconst log10 = M.log10;\nconst log2 = M.log2;\n// TODO: seems like this needs to match asinh impl if the passed v is tweaked?\nconst sinh = (v, linthresh = 1) => M.sinh(v) * linthresh;\nconst asinh = (v, linthresh = 1) => M.asinh(v / linthresh);\nconst inf = Infinity;\nfunction numIntDigits(x) {\n  return (log10((x ^ x >> 31) - (x >> 31)) | 0) + 1;\n}\nfunction clamp(num, _min, _max) {\n  return min(max(num, _min), _max);\n}\nfunction isFn(v) {\n  return typeof v == \"function\";\n}\nfunction fnOrSelf(v) {\n  return isFn(v) ? v : () => v;\n}\nconst noop = () => {};\n\n// note: these identity fns may get deoptimized if reused for different arg types\n// a TS version would enforce they stay monotyped and require making variants\nconst retArg0 = _0 => _0;\nconst retArg1 = (_0, _1) => _1;\nconst retNull = _ => null;\nconst retTrue = _ => true;\nconst retEq = (a, b) => a == b;\nconst regex6 = /\\.\\d*?(?=9{6,}|0{6,})/gm;\n\n// e.g. 17999.204999999998 -> 17999.205\nconst fixFloat = val => {\n  if (isInt(val) || fixedDec.has(val)) return val;\n  const str = `${val}`;\n  const match = str.match(regex6);\n  if (match == null) return val;\n  let len = match[0].length - 1;\n\n  // e.g. 1.0000000000000001e-24\n  if (str.indexOf('e-') != -1) {\n    let [num, exp] = str.split('e');\n    return +`${fixFloat(num)}e${exp}`;\n  }\n  return roundDec(val, len);\n};\nfunction incrRound(num, incr) {\n  return fixFloat(roundDec(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundUp(num, incr) {\n  return fixFloat(ceil(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundDn(num, incr) {\n  return fixFloat(floor(fixFloat(num / incr)) * incr);\n}\n\n// https://stackoverflow.com/a/48764436\n// rounds half away from zero\nfunction roundDec(val, dec = 0) {\n  if (isInt(val)) return val;\n  //\telse if (dec == 0)\n  //\t\treturn round(val);\n\n  let p = 10 ** dec;\n  let n = val * p * (1 + Number.EPSILON);\n  return round(n) / p;\n}\nconst fixedDec = new Map();\nfunction guessDec(num) {\n  return ((\"\" + num).split(\".\")[1] || \"\").length;\n}\nfunction genIncrs(base, minExp, maxExp, mults) {\n  let incrs = [];\n  let multDec = mults.map(guessDec);\n  for (let exp = minExp; exp < maxExp; exp++) {\n    let expa = abs(exp);\n    let mag = roundDec(pow(base, exp), expa);\n    for (let i = 0; i < mults.length; i++) {\n      let _incr = base == 10 ? +`${mults[i]}e${exp}` : mults[i] * mag;\n      let dec = (exp >= 0 ? 0 : expa) + (exp >= multDec[i] ? 0 : multDec[i]);\n      let incr = base == 10 ? _incr : roundDec(_incr, dec);\n      incrs.push(incr);\n      fixedDec.set(incr, dec);\n    }\n  }\n  return incrs;\n}\n\n//export const assign = Object.assign;\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\nconst nullNullTuple = [null, null];\nconst isArr = Array.isArray;\nconst isInt = Number.isInteger;\nconst isUndef = v => v === void 0;\nfunction isStr(v) {\n  return typeof v == 'string';\n}\nfunction isObj(v) {\n  let is = false;\n  if (v != null) {\n    let c = v.constructor;\n    is = c == null || c == Object;\n  }\n  return is;\n}\nfunction fastIsObj(v) {\n  return v != null && typeof v == 'object';\n}\nconst TypedArray = Object.getPrototypeOf(Uint8Array);\nconst __proto__ = \"__proto__\";\nfunction copy(o, _isObj = isObj) {\n  let out;\n  if (isArr(o)) {\n    let val = o.find(v => v != null);\n    if (isArr(val) || _isObj(val)) {\n      out = Array(o.length);\n      for (let i = 0; i < o.length; i++) out[i] = copy(o[i], _isObj);\n    } else out = o.slice();\n  } else if (o instanceof TypedArray)\n    // also (ArrayBuffer.isView(o) && !(o instanceof DataView))\n    out = o.slice();else if (_isObj(o)) {\n    out = {};\n    for (let k in o) {\n      if (k != __proto__) out[k] = copy(o[k], _isObj);\n    }\n  } else out = o;\n  return out;\n}\nfunction assign(targ) {\n  let args = arguments;\n  for (let i = 1; i < args.length; i++) {\n    let src = args[i];\n    for (let key in src) {\n      if (key != __proto__) {\n        if (isObj(targ[key])) assign(targ[key], copy(src[key]));else targ[key] = copy(src[key]);\n      }\n    }\n  }\n  return targ;\n}\n\n// nullModes\nconst NULL_REMOVE = 0; // nulls are converted to undefined (e.g. for spanGaps: true)\nconst NULL_RETAIN = 1; // nulls are retained, with alignment artifacts set to undefined (default)\nconst NULL_EXPAND = 2; // nulls are expanded to include any adjacent alignment artifacts\n\n// sets undefined values to nulls when adjacent to existing nulls (minesweeper)\nfunction nullExpand(yVals, nullIdxs, alignedLen) {\n  for (let i = 0, xi, lastNullIdx = -1; i < nullIdxs.length; i++) {\n    let nullIdx = nullIdxs[i];\n    if (nullIdx > lastNullIdx) {\n      xi = nullIdx - 1;\n      while (xi >= 0 && yVals[xi] == null) yVals[xi--] = null;\n      xi = nullIdx + 1;\n      while (xi < alignedLen && yVals[xi] == null) yVals[lastNullIdx = xi++] = null;\n    }\n  }\n}\n\n// nullModes is a tables-matched array indicating how to treat nulls in each series\n// output is sorted ASC on the joined field (table[0]) and duplicate join values are collapsed\nfunction join(tables, nullModes) {\n  if (allHeadersSame(tables)) {\n    //\tconsole.log('cheap join!');\n\n    let table = tables[0].slice();\n    for (let i = 1; i < tables.length; i++) table.push(...tables[i].slice(1));\n    if (!isAsc(table[0])) table = sortCols(table);\n    return table;\n  }\n  let xVals = new Set();\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    let len = xs.length;\n    for (let i = 0; i < len; i++) xVals.add(xs[i]);\n  }\n  let data = [Array.from(xVals).sort((a, b) => a - b)];\n  let alignedLen = data[0].length;\n  let xIdxs = new Map();\n  for (let i = 0; i < alignedLen; i++) xIdxs.set(data[0][i], i);\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    for (let si = 1; si < t.length; si++) {\n      let ys = t[si];\n      let yVals = Array(alignedLen).fill(undefined);\n      let nullMode = nullModes ? nullModes[ti][si] : NULL_RETAIN;\n      let nullIdxs = [];\n      for (let i = 0; i < ys.length; i++) {\n        let yVal = ys[i];\n        let alignedIdx = xIdxs.get(xs[i]);\n        if (yVal === null) {\n          if (nullMode != NULL_REMOVE) {\n            yVals[alignedIdx] = yVal;\n            if (nullMode == NULL_EXPAND) nullIdxs.push(alignedIdx);\n          }\n        } else yVals[alignedIdx] = yVal;\n      }\n      nullExpand(yVals, nullIdxs, alignedLen);\n      data.push(yVals);\n    }\n  }\n  return data;\n}\nconst microTask = typeof queueMicrotask == \"undefined\" ? fn => Promise.resolve().then(fn) : queueMicrotask;\n\n// TODO: https://github.com/dy/sort-ids (~2x faster for 1e5+ arrays)\nfunction sortCols(table) {\n  let head = table[0];\n  let rlen = head.length;\n  let idxs = Array(rlen);\n  for (let i = 0; i < idxs.length; i++) idxs[i] = i;\n  idxs.sort((i0, i1) => head[i0] - head[i1]);\n  let table2 = [];\n  for (let i = 0; i < table.length; i++) {\n    let row = table[i];\n    let row2 = Array(rlen);\n    for (let j = 0; j < rlen; j++) row2[j] = row[idxs[j]];\n    table2.push(row2);\n  }\n  return table2;\n}\n\n// test if we can do cheap join (all join fields same)\nfunction allHeadersSame(tables) {\n  let vals0 = tables[0][0];\n  let len0 = vals0.length;\n  for (let i = 1; i < tables.length; i++) {\n    let vals1 = tables[i][0];\n    if (vals1.length != len0) return false;\n    if (vals1 != vals0) {\n      for (let j = 0; j < len0; j++) {\n        if (vals1[j] != vals0[j]) return false;\n      }\n    }\n  }\n  return true;\n}\nfunction isAsc(vals, samples = 100) {\n  const len = vals.length;\n\n  // empty or single value\n  if (len <= 1) return true;\n\n  // skip leading & trailing nullish\n  let firstIdx = 0;\n  let lastIdx = len - 1;\n  while (firstIdx <= lastIdx && vals[firstIdx] == null) firstIdx++;\n  while (lastIdx >= firstIdx && vals[lastIdx] == null) lastIdx--;\n\n  // all nullish or one value surrounded by nullish\n  if (lastIdx <= firstIdx) return true;\n  const stride = max(1, floor((lastIdx - firstIdx + 1) / samples));\n  for (let prevVal = vals[firstIdx], i = firstIdx + stride; i <= lastIdx; i += stride) {\n    const v = vals[i];\n    if (v != null) {\n      if (v <= prevVal) return false;\n      prevVal = v;\n    }\n  }\n  return true;\n}\nconst months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nfunction slice3(str) {\n  return str.slice(0, 3);\n}\nconst days3 = days.map(slice3);\nconst months3 = months.map(slice3);\nconst engNames = {\n  MMMM: months,\n  MMM: months3,\n  WWWW: days,\n  WWW: days3\n};\nfunction zeroPad2(int) {\n  return (int < 10 ? '0' : '') + int;\n}\nfunction zeroPad3(int) {\n  return (int < 10 ? '00' : int < 100 ? '0' : '') + int;\n}\n\n/*\nfunction suffix(int) {\n\tlet mod10 = int % 10;\n\n\treturn int + (\n\t\tmod10 == 1 && int != 11 ? \"st\" :\n\t\tmod10 == 2 && int != 12 ? \"nd\" :\n\t\tmod10 == 3 && int != 13 ? \"rd\" : \"th\"\n\t);\n}\n*/\n\nconst subs = {\n  // 2019\n  YYYY: d => d.getFullYear(),\n  // 19\n  YY: d => (d.getFullYear() + '').slice(2),\n  // July\n  MMMM: (d, names) => names.MMMM[d.getMonth()],\n  // Jul\n  MMM: (d, names) => names.MMM[d.getMonth()],\n  // 07\n  MM: d => zeroPad2(d.getMonth() + 1),\n  // 7\n  M: d => d.getMonth() + 1,\n  // 09\n  DD: d => zeroPad2(d.getDate()),\n  // 9\n  D: d => d.getDate(),\n  // Monday\n  WWWW: (d, names) => names.WWWW[d.getDay()],\n  // Mon\n  WWW: (d, names) => names.WWW[d.getDay()],\n  // 03\n  HH: d => zeroPad2(d.getHours()),\n  // 3\n  H: d => d.getHours(),\n  // 9 (12hr, unpadded)\n  h: d => {\n    let h = d.getHours();\n    return h == 0 ? 12 : h > 12 ? h - 12 : h;\n  },\n  // AM\n  AA: d => d.getHours() >= 12 ? 'PM' : 'AM',\n  // am\n  aa: d => d.getHours() >= 12 ? 'pm' : 'am',\n  // a\n  a: d => d.getHours() >= 12 ? 'p' : 'a',\n  // 09\n  mm: d => zeroPad2(d.getMinutes()),\n  // 9\n  m: d => d.getMinutes(),\n  // 09\n  ss: d => zeroPad2(d.getSeconds()),\n  // 9\n  s: d => d.getSeconds(),\n  // 374\n  fff: d => zeroPad3(d.getMilliseconds())\n};\nfunction fmtDate(tpl, names) {\n  names = names || engNames;\n  let parts = [];\n  let R = /\\{([a-z]+)\\}|[^{]+/gi,\n    m;\n  while (m = R.exec(tpl)) parts.push(m[0][0] == '{' ? subs[m[1]] : m[0]);\n  return d => {\n    let out = '';\n    for (let i = 0; i < parts.length; i++) out += typeof parts[i] == \"string\" ? parts[i] : parts[i](d, names);\n    return out;\n  };\n}\nconst localTz = new Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone/53652131#53652131\nfunction tzDate(date, tz) {\n  let date2;\n\n  // perf optimization\n  if (tz == 'UTC' || tz == 'Etc/UTC') date2 = new Date(+date + date.getTimezoneOffset() * 6e4);else if (tz == localTz) date2 = date;else {\n    date2 = new Date(date.toLocaleString('en-US', {\n      timeZone: tz\n    }));\n    date2.setMilliseconds(date.getMilliseconds());\n  }\n  return date2;\n}\n\n//export const series = [];\n\n// default formatters:\n\nconst onlyWhole = v => v % 1 == 0;\nconst allMults = [1, 2, 2.5, 5];\n\n// ...0.01, 0.02, 0.025, 0.05, 0.1, 0.2, 0.25, 0.5\nconst decIncrs = genIncrs(10, -32, 0, allMults);\n\n// 1, 2, 2.5, 5, 10, 20, 25, 50...\nconst oneIncrs = genIncrs(10, 0, 32, allMults);\n\n// 1, 2,      5, 10, 20, 25, 50...\nconst wholeIncrs = oneIncrs.filter(onlyWhole);\nconst numIncrs = decIncrs.concat(oneIncrs);\nconst NL = \"\\n\";\nconst yyyy = \"{YYYY}\";\nconst NLyyyy = NL + yyyy;\nconst md = \"{M}/{D}\";\nconst NLmd = NL + md;\nconst NLmdyy = NLmd + \"/{YY}\";\nconst aa = \"{aa}\";\nconst hmm = \"{h}:{mm}\";\nconst hmmaa = hmm + aa;\nconst NLhmmaa = NL + hmmaa;\nconst ss = \":{ss}\";\nconst _ = null;\nfunction genTimeStuffs(ms) {\n  let s = ms * 1e3,\n    m = s * 60,\n    h = m * 60,\n    d = h * 24,\n    mo = d * 30,\n    y = d * 365;\n\n  // min of 1e-3 prevents setting a temporal x ticks too small since Date objects cannot advance ticks smaller than 1ms\n  let subSecIncrs = ms == 1 ? genIncrs(10, 0, 3, allMults).filter(onlyWhole) : genIncrs(10, -3, 0, allMults);\n  let timeIncrs = subSecIncrs.concat([\n  // minute divisors (# of secs)\n  s, s * 5, s * 10, s * 15, s * 30,\n  // hour divisors (# of mins)\n  m, m * 5, m * 10, m * 15, m * 30,\n  // day divisors (# of hrs)\n  h, h * 2, h * 3, h * 4, h * 6, h * 8, h * 12,\n  // month divisors TODO: need more?\n  d, d * 2, d * 3, d * 4, d * 5, d * 6, d * 7, d * 8, d * 9, d * 10, d * 15,\n  // year divisors (# months, approx)\n  mo, mo * 2, mo * 3, mo * 4, mo * 6,\n  // century divisors\n  y, y * 2, y * 5, y * 10, y * 25, y * 50, y * 100]);\n\n  // [0]:   minimum num secs in the tick incr\n  // [1]:   default tick format\n  // [2-7]: rollover tick formats\n  // [8]:   mode: 0: replace [1] -> [2-7], 1: concat [1] + [2-7]\n  const _timeAxisStamps = [\n  //   tick incr    default          year                    month   day                   hour    min       sec   mode\n  [y, yyyy, _, _, _, _, _, _, 1], [d * 28, \"{MMM}\", NLyyyy, _, _, _, _, _, 1], [d, md, NLyyyy, _, _, _, _, _, 1], [h, \"{h}\" + aa, NLmdyy, _, NLmd, _, _, _, 1], [m, hmmaa, NLmdyy, _, NLmd, _, _, _, 1], [s, ss, NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1], [ms, ss + \".{fff}\", NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1]];\n\n  // the ensures that axis ticks, values & grid are aligned to logical temporal breakpoints and not an arbitrary timestamp\n  // https://www.timeanddate.com/time/dst/\n  // https://www.timeanddate.com/time/dst/2019.html\n  // https://www.epochconverter.com/timezones\n  function timeAxisSplits(tzDate) {\n    return (self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace) => {\n      let splits = [];\n      let isYr = foundIncr >= y;\n      let isMo = foundIncr >= mo && foundIncr < y;\n\n      // get the timezone-adjusted date\n      let minDate = tzDate(scaleMin);\n      let minDateTs = roundDec(minDate * ms, 3);\n\n      // get ts of 12am (this lands us at or before the original scaleMin)\n      let minMin = mkDate(minDate.getFullYear(), isYr ? 0 : minDate.getMonth(), isMo || isYr ? 1 : minDate.getDate());\n      let minMinTs = roundDec(minMin * ms, 3);\n      if (isMo || isYr) {\n        let moIncr = isMo ? foundIncr / mo : 0;\n        let yrIncr = isYr ? foundIncr / y : 0;\n        //\tlet tzOffset = scaleMin - minDateTs;\t\t// needed?\n        let split = minDateTs == minMinTs ? minDateTs : roundDec(mkDate(minMin.getFullYear() + yrIncr, minMin.getMonth() + moIncr, 1) * ms, 3);\n        let splitDate = new Date(round(split / ms));\n        let baseYear = splitDate.getFullYear();\n        let baseMonth = splitDate.getMonth();\n        for (let i = 0; split <= scaleMax; i++) {\n          let next = mkDate(baseYear + yrIncr * i, baseMonth + moIncr * i, 1);\n          let offs = next - tzDate(roundDec(next * ms, 3));\n          split = roundDec((+next + offs) * ms, 3);\n          if (split <= scaleMax) splits.push(split);\n        }\n      } else {\n        let incr0 = foundIncr >= d ? d : foundIncr;\n        let tzOffset = floor(scaleMin) - floor(minDateTs);\n        let split = minMinTs + tzOffset + incrRoundUp(minDateTs - minMinTs, incr0);\n        splits.push(split);\n        let date0 = tzDate(split);\n        let prevHour = date0.getHours() + date0.getMinutes() / m + date0.getSeconds() / h;\n        let incrHours = foundIncr / h;\n        let minSpace = self.axes[axisIdx]._space;\n        let pctSpace = foundSpace / minSpace;\n        while (1) {\n          split = roundDec(split + foundIncr, ms == 1 ? 0 : 3);\n          if (split > scaleMax) break;\n          if (incrHours > 1) {\n            let expectedHour = floor(roundDec(prevHour + incrHours, 6)) % 24;\n            let splitDate = tzDate(split);\n            let actualHour = splitDate.getHours();\n            let dstShift = actualHour - expectedHour;\n            if (dstShift > 1) dstShift = -1;\n            split -= dstShift * h;\n            prevHour = (prevHour + incrHours) % 24;\n\n            // add a tick only if it's further than 70% of the min allowed label spacing\n            let prevSplit = splits[splits.length - 1];\n            let pctIncr = roundDec((split - prevSplit) / foundIncr, 3);\n            if (pctIncr * pctSpace >= .7) splits.push(split);\n          } else splits.push(split);\n        }\n      }\n      return splits;\n    };\n  }\n  return [timeIncrs, _timeAxisStamps, timeAxisSplits];\n}\nconst [timeIncrsMs, _timeAxisStampsMs, timeAxisSplitsMs] = genTimeStuffs(1);\nconst [timeIncrsS, _timeAxisStampsS, timeAxisSplitsS] = genTimeStuffs(1e-3);\n\n// base 2\ngenIncrs(2, -53, 53, [1]);\n\n/*\nconsole.log({\n\tdecIncrs,\n\toneIncrs,\n\twholeIncrs,\n\tnumIncrs,\n\ttimeIncrs,\n\tfixedDec,\n});\n*/\n\nfunction timeAxisStamps(stampCfg, fmtDate) {\n  return stampCfg.map(s => s.map((v, i) => i == 0 || i == 8 || v == null ? v : fmtDate(i == 1 || s[8] == 0 ? v : s[1] + v)));\n}\n\n// TODO: will need to accept spaces[] and pull incr into the loop when grid will be non-uniform, eg for log scales.\n// currently we ignore this for months since they're *nearly* uniform and the added complexity is not worth it\nfunction timeAxisVals(tzDate, stamps) {\n  return (self, splits, axisIdx, foundSpace, foundIncr) => {\n    let s = stamps.find(s => foundIncr >= s[0]) || stamps[stamps.length - 1];\n\n    // these track boundaries when a full label is needed again\n    let prevYear;\n    let prevMnth;\n    let prevDate;\n    let prevHour;\n    let prevMins;\n    let prevSecs;\n    return splits.map(split => {\n      let date = tzDate(split);\n      let newYear = date.getFullYear();\n      let newMnth = date.getMonth();\n      let newDate = date.getDate();\n      let newHour = date.getHours();\n      let newMins = date.getMinutes();\n      let newSecs = date.getSeconds();\n      let stamp = newYear != prevYear && s[2] || newMnth != prevMnth && s[3] || newDate != prevDate && s[4] || newHour != prevHour && s[5] || newMins != prevMins && s[6] || newSecs != prevSecs && s[7] || s[1];\n      prevYear = newYear;\n      prevMnth = newMnth;\n      prevDate = newDate;\n      prevHour = newHour;\n      prevMins = newMins;\n      prevSecs = newSecs;\n      return stamp(date);\n    });\n  };\n}\n\n// for when axis.values is defined as a static fmtDate template string\nfunction timeAxisVal(tzDate, dateTpl) {\n  let stamp = fmtDate(dateTpl);\n  return (self, splits, axisIdx, foundSpace, foundIncr) => splits.map(split => stamp(tzDate(split)));\n}\nfunction mkDate(y, m, d) {\n  return new Date(y, m, d);\n}\nfunction timeSeriesStamp(stampCfg, fmtDate) {\n  return fmtDate(stampCfg);\n}\nconst _timeSeriesStamp = '{YYYY}-{MM}-{DD} {h}:{mm}{aa}';\nfunction timeSeriesVal(tzDate, stamp) {\n  return (self, val, seriesIdx, dataIdx) => dataIdx == null ? LEGEND_DISP : stamp(tzDate(val));\n}\nfunction legendStroke(self, seriesIdx) {\n  let s = self.series[seriesIdx];\n  return s.width ? s.stroke(self, seriesIdx) : s.points.width ? s.points.stroke(self, seriesIdx) : null;\n}\nfunction legendFill(self, seriesIdx) {\n  return self.series[seriesIdx].fill(self, seriesIdx);\n}\nconst legendOpts = {\n  show: true,\n  live: true,\n  isolate: false,\n  mount: noop,\n  markers: {\n    show: true,\n    width: 2,\n    stroke: legendStroke,\n    fill: legendFill,\n    dash: \"solid\"\n  },\n  idx: null,\n  idxs: null,\n  values: []\n};\nfunction cursorPointShow(self, si) {\n  let o = self.cursor.points;\n  let pt = placeDiv();\n  let size = o.size(self, si);\n  setStylePx(pt, WIDTH, size);\n  setStylePx(pt, HEIGHT, size);\n  let mar = size / -2;\n  setStylePx(pt, \"marginLeft\", mar);\n  setStylePx(pt, \"marginTop\", mar);\n  let width = o.width(self, si, size);\n  width && setStylePx(pt, \"borderWidth\", width);\n  return pt;\n}\nfunction cursorPointFill(self, si) {\n  let sp = self.series[si].points;\n  return sp._fill || sp._stroke;\n}\nfunction cursorPointStroke(self, si) {\n  let sp = self.series[si].points;\n  return sp._stroke || sp._fill;\n}\nfunction cursorPointSize(self, si) {\n  let sp = self.series[si].points;\n  return sp.size;\n}\nconst moveTuple = [0, 0];\nfunction cursorMove(self, mouseLeft1, mouseTop1) {\n  moveTuple[0] = mouseLeft1;\n  moveTuple[1] = mouseTop1;\n  return moveTuple;\n}\nfunction filtBtn0(self, targ, handle, onlyTarg = true) {\n  return e => {\n    e.button == 0 && (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nfunction filtTarg(self, targ, handle, onlyTarg = true) {\n  return e => {\n    (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nconst cursorOpts = {\n  show: true,\n  x: true,\n  y: true,\n  lock: false,\n  move: cursorMove,\n  points: {\n    one: false,\n    show: cursorPointShow,\n    size: cursorPointSize,\n    width: 0,\n    stroke: cursorPointStroke,\n    fill: cursorPointFill\n  },\n  bind: {\n    mousedown: filtBtn0,\n    mouseup: filtBtn0,\n    click: filtBtn0,\n    // legend clicks, not .u-over clicks\n    dblclick: filtBtn0,\n    mousemove: filtTarg,\n    mouseleave: filtTarg,\n    mouseenter: filtTarg\n  },\n  drag: {\n    setScale: true,\n    x: true,\n    y: false,\n    dist: 0,\n    uni: null,\n    click: (self, e) => {\n      //\te.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    },\n    _x: false,\n    _y: false\n  },\n  focus: {\n    dist: (self, seriesIdx, dataIdx, valPos, curPos) => valPos - curPos,\n    prox: -1,\n    bias: 0\n  },\n  hover: {\n    skip: [void 0],\n    prox: null,\n    bias: 0\n  },\n  left: -10,\n  top: -10,\n  idx: null,\n  dataIdx: null,\n  idxs: null,\n  event: null\n};\nconst axisLines = {\n  show: true,\n  stroke: \"rgba(0,0,0,0.07)\",\n  width: 2\n  //\tdash: [],\n};\nconst grid = assign({}, axisLines, {\n  filter: retArg1\n});\nconst ticks = assign({}, grid, {\n  size: 10\n});\nconst border = assign({}, axisLines, {\n  show: false\n});\nconst font = '12px system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nconst labelFont = \"bold \" + font;\nconst lineGap = 1.5; // font-size multiplier\n\nconst xAxisOpts = {\n  show: true,\n  scale: \"x\",\n  stroke: hexBlack,\n  space: 50,\n  gap: 5,\n  alignTo: 1,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 2,\n  //\tclass: \"x-vals\",\n  //\tincrs: timeIncrs,\n  //\tvalues: timeVals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\nconst numSeriesLabel = \"Value\";\nconst timeSeriesLabel = \"Time\";\nconst xSeriesOpts = {\n  show: true,\n  scale: \"x\",\n  auto: false,\n  sorted: 1,\n  //\tlabel: \"Time\",\n  //\tvalue: v => stamp(new Date(v * 1e3)),\n\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: []\n};\nfunction numAxisVals(self, splits, axisIdx, foundSpace, foundIncr) {\n  return splits.map(v => v == null ? \"\" : fmtNum(v));\n}\nfunction numAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let splits = [];\n  let numDec = fixedDec.get(foundIncr) || 0;\n  scaleMin = forceMin ? scaleMin : roundDec(incrRoundUp(scaleMin, foundIncr), numDec);\n  for (let val = scaleMin; val <= scaleMax; val = roundDec(val + foundIncr, numDec)) splits.push(Object.is(val, -0) ? 0 : val); // coalesces -0\n\n  return splits;\n}\n\n// this doesnt work for sin, which needs to come off from 0 independently in pos and neg dirs\nfunction logAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  const splits = [];\n  const logBase = self.scales[self.axes[axisIdx].scale].log;\n  const logFn = logBase == 10 ? log10 : log2;\n  const exp = floor(logFn(scaleMin));\n  foundIncr = pow(logBase, exp);\n\n  // boo: 10 ** -24 === 1.0000000000000001e-24\n  // this grabs the proper 1e-24 one\n  if (logBase == 10) foundIncr = numIncrs[closestIdx(foundIncr, numIncrs)];\n  let split = scaleMin;\n  let nextMagIncr = foundIncr * logBase;\n  if (logBase == 10) nextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n  do {\n    splits.push(split);\n    split = split + foundIncr;\n    if (logBase == 10 && !fixedDec.has(split)) split = roundDec(split, fixedDec.get(foundIncr));\n    if (split >= nextMagIncr) {\n      foundIncr = split;\n      nextMagIncr = foundIncr * logBase;\n      if (logBase == 10) nextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n    }\n  } while (split <= scaleMax);\n  return splits;\n}\nfunction asinhAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let sc = self.scales[self.axes[axisIdx].scale];\n  let linthresh = sc.asinh;\n  let posSplits = scaleMax > linthresh ? logAxisSplits(self, axisIdx, max(linthresh, scaleMin), scaleMax, foundIncr) : [linthresh];\n  let zero = scaleMax >= 0 && scaleMin <= 0 ? [0] : [];\n  let negSplits = scaleMin < -linthresh ? logAxisSplits(self, axisIdx, max(linthresh, -scaleMax), -scaleMin, foundIncr) : [linthresh];\n  return negSplits.reverse().map(v => -v).concat(zero, posSplits);\n}\nconst RE_ALL = /./;\nconst RE_12357 = /[12357]/;\nconst RE_125 = /[125]/;\nconst RE_1 = /1/;\nconst _filt = (splits, distr, re, keepMod) => splits.map((v, i) => distr == 4 && v == 0 || i % keepMod == 0 && re.test(v.toExponential()[v < 0 ? 1 : 0]) ? v : null);\nfunction log10AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let sc = self.scales[scaleKey];\n\n  //\tif (sc.distr == 3 && sc.log == 2)\n  //\t\treturn splits;\n\n  let valToPos = self.valToPos;\n  let minSpace = axis._space;\n  let _10 = valToPos(10, scaleKey);\n  let re = valToPos(9, scaleKey) - _10 >= minSpace ? RE_ALL : valToPos(7, scaleKey) - _10 >= minSpace ? RE_12357 : valToPos(5, scaleKey) - _10 >= minSpace ? RE_125 : RE_1;\n  if (re == RE_1) {\n    let magSpace = abs(valToPos(1, scaleKey) - _10);\n    if (magSpace < minSpace) return _filt(splits.slice().reverse(), sc.distr, re, ceil(minSpace / magSpace)).reverse(); // max->min skip\n  }\n  return _filt(splits, sc.distr, re, 1);\n}\nfunction log2AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let minSpace = axis._space;\n  let valToPos = self.valToPos;\n  let magSpace = abs(valToPos(1, scaleKey) - valToPos(2, scaleKey));\n  if (magSpace < minSpace) return _filt(splits.slice().reverse(), 3, RE_ALL, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\n  return splits;\n}\nfunction numSeriesVal(self, val, seriesIdx, dataIdx) {\n  return dataIdx == null ? LEGEND_DISP : val == null ? \"\" : fmtNum(val);\n}\nconst yAxisOpts = {\n  show: true,\n  scale: \"y\",\n  stroke: hexBlack,\n  space: 30,\n  gap: 5,\n  alignTo: 1,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 3,\n  //\tclass: \"y-vals\",\n  //\tincrs: numIncrs,\n  //\tvalues: (vals, space) => vals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\n\n// takes stroke width\nfunction ptDia(width, mult) {\n  let dia = 3 + (width || 1) * 2;\n  return roundDec(dia * mult, 3);\n}\nfunction seriesPointsShow(self, si) {\n  let {\n    scale,\n    idxs\n  } = self.series[0];\n  let xData = self._data[0];\n  let p0 = self.valToPos(xData[idxs[0]], scale, true);\n  let p1 = self.valToPos(xData[idxs[1]], scale, true);\n  let dim = abs(p1 - p0);\n  let s = self.series[si];\n  //\tconst dia = ptDia(s.width, pxRatio);\n  let maxPts = dim / (s.points.space * pxRatio);\n  return idxs[1] - idxs[0] <= maxPts;\n}\nconst facet = {\n  scale: null,\n  auto: true,\n  sorted: 0,\n  // internal caches\n  min: inf,\n  max: -inf\n};\nconst gaps = (self, seriesIdx, idx0, idx1, nullGaps) => nullGaps;\nconst xySeriesOpts = {\n  show: true,\n  auto: true,\n  sorted: 0,\n  gaps,\n  alpha: 1,\n  facets: [assign({}, facet, {\n    scale: 'x'\n  }), assign({}, facet, {\n    scale: 'y'\n  })]\n};\nconst ySeriesOpts = {\n  scale: \"y\",\n  auto: true,\n  sorted: 0,\n  show: true,\n  spanGaps: false,\n  gaps,\n  alpha: 1,\n  points: {\n    show: seriesPointsShow,\n    filter: null\n    //  paths:\n    //\tstroke: \"#000\",\n    //\tfill: \"#fff\",\n    //\twidth: 1,\n    //\tsize: 10,\n  },\n  //\tlabel: \"Value\",\n  //\tvalue: v => v,\n  values: null,\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: [],\n  path: null,\n  clip: null\n};\nfunction clampScale(self, val, scaleMin, scaleMax, scaleKey) {\n  /*\n  \tif (val < 0) {\n  \t\tlet cssHgt = self.bbox.height / pxRatio;\n  \t\tlet absPos = self.valToPos(abs(val), scaleKey);\n  \t\tlet fromBtm = cssHgt - absPos;\n  \t\treturn self.posToVal(cssHgt + fromBtm, scaleKey);\n  \t}\n  */\n  return scaleMin / 10;\n}\nconst xScaleOpts = {\n  time: FEAT_TIME,\n  auto: true,\n  distr: 1,\n  log: 10,\n  asinh: 1,\n  min: null,\n  max: null,\n  dir: 1,\n  ori: 0\n};\nconst yScaleOpts = assign({}, xScaleOpts, {\n  time: false,\n  ori: 1\n});\nconst syncs = {};\nfunction _sync(key, opts) {\n  let s = syncs[key];\n  if (!s) {\n    s = {\n      key,\n      plots: [],\n      sub(plot) {\n        s.plots.push(plot);\n      },\n      unsub(plot) {\n        s.plots = s.plots.filter(c => c != plot);\n      },\n      pub(type, self, x, y, w, h, i) {\n        for (let j = 0; j < s.plots.length; j++) s.plots[j] != self && s.plots[j].pub(type, self, x, y, w, h, i);\n      }\n    };\n    if (key != null) syncs[key] = s;\n  }\n  return s;\n}\nconst BAND_CLIP_FILL = 1 << 0;\nconst BAND_CLIP_STROKE = 1 << 1;\nfunction orient(u, seriesIdx, cb) {\n  const mode = u.mode;\n  const series = u.series[seriesIdx];\n  const data = mode == 2 ? u._data[seriesIdx] : u._data;\n  const scales = u.scales;\n  const bbox = u.bbox;\n  let dx = data[0],\n    dy = mode == 2 ? data[1] : data[seriesIdx],\n    sx = mode == 2 ? scales[series.facets[0].scale] : scales[u.series[0].scale],\n    sy = mode == 2 ? scales[series.facets[1].scale] : scales[series.scale],\n    l = bbox.left,\n    t = bbox.top,\n    w = bbox.width,\n    h = bbox.height,\n    H = u.valToPosH,\n    V = u.valToPosV;\n  return sx.ori == 0 ? cb(series, dx, dy, sx, sy, H, V, l, t, w, h, moveToH, lineToH, rectH, arcH, bezierCurveToH) : cb(series, dx, dy, sx, sy, V, H, t, l, h, w, moveToV, lineToV, rectV, arcV, bezierCurveToV);\n}\nfunction bandFillClipDirs(self, seriesIdx) {\n  let fillDir = 0;\n\n  // 2 bits, -1 | 1\n  let clipDirs = 0;\n  let bands = ifNull(self.bands, EMPTY_ARR);\n  for (let i = 0; i < bands.length; i++) {\n    let b = bands[i];\n\n    // is a \"from\" band edge\n    if (b.series[0] == seriesIdx) fillDir = b.dir;\n    // is a \"to\" band edge\n    else if (b.series[1] == seriesIdx) {\n      if (b.dir == 1) clipDirs |= 1;else clipDirs |= 2;\n    }\n  }\n  return [fillDir, clipDirs == 1 ? -1 :\n  // neg only\n  clipDirs == 2 ? 1 :\n  // pos only\n  clipDirs == 3 ? 2 :\n  // both\n  0 // neither\n  ];\n}\nfunction seriesFillTo(self, seriesIdx, dataMin, dataMax, bandFillDir) {\n  let mode = self.mode;\n  let series = self.series[seriesIdx];\n  let scaleKey = mode == 2 ? series.facets[1].scale : series.scale;\n  let scale = self.scales[scaleKey];\n  return bandFillDir == -1 ? scale.min : bandFillDir == 1 ? scale.max : scale.distr == 3 ? scale.dir == 1 ? scale.min : scale.max : 0;\n}\n\n// creates inverted band clip path (from stroke path -> yMax || yMin)\n// clipDir is always inverse of fillDir\n// default clip dir is upwards (1), since default band fill is downwards/fillBelowTo (-1) (highIdx -> lowIdx)\nfunction clipBandLine(self, seriesIdx, idx0, idx1, strokePath, clipDir) {\n  return orient(self, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n    let pxRound = series.pxRound;\n    const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n    const lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n    let frIdx, toIdx;\n    if (dir == 1) {\n      frIdx = idx0;\n      toIdx = idx1;\n    } else {\n      frIdx = idx1;\n      toIdx = idx0;\n    }\n\n    // path start\n    let x0 = pxRound(valToPosX(dataX[frIdx], scaleX, xDim, xOff));\n    let y0 = pxRound(valToPosY(dataY[frIdx], scaleY, yDim, yOff));\n    // path end x\n    let x1 = pxRound(valToPosX(dataX[toIdx], scaleX, xDim, xOff));\n    // upper or lower y limit\n    let yLimit = pxRound(valToPosY(clipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n    let clip = new Path2D(strokePath);\n    lineTo(clip, x1, yLimit);\n    lineTo(clip, x0, yLimit);\n    lineTo(clip, x0, y0);\n    return clip;\n  });\n}\nfunction clipGaps(gaps, ori, plotLft, plotTop, plotWid, plotHgt) {\n  let clip = null;\n\n  // create clip path (invert gaps and non-gaps)\n  if (gaps.length > 0) {\n    clip = new Path2D();\n    const rect = ori == 0 ? rectH : rectV;\n    let prevGapEnd = plotLft;\n    for (let i = 0; i < gaps.length; i++) {\n      let g = gaps[i];\n      if (g[1] > g[0]) {\n        let w = g[0] - prevGapEnd;\n        w > 0 && rect(clip, prevGapEnd, plotTop, w, plotTop + plotHgt);\n        prevGapEnd = g[1];\n      }\n    }\n    let w = plotLft + plotWid - prevGapEnd;\n\n    // hack to ensure we expand the clip enough to avoid cutting off strokes at edges\n    let maxStrokeWidth = 10;\n    w > 0 && rect(clip, prevGapEnd, plotTop - maxStrokeWidth / 2, w, plotTop + plotHgt + maxStrokeWidth);\n  }\n  return clip;\n}\nfunction addGap(gaps, fromX, toX) {\n  let prevGap = gaps[gaps.length - 1];\n  if (prevGap && prevGap[0] == fromX)\n    // TODO: gaps must be encoded at stroke widths?\n    prevGap[1] = toX;else gaps.push([fromX, toX]);\n}\nfunction findGaps(xs, ys, idx0, idx1, dir, pixelForX, align) {\n  let gaps = [];\n  let len = xs.length;\n  for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n    let yVal = ys[i];\n    if (yVal === null) {\n      let fr = i,\n        to = i;\n      if (dir == 1) {\n        while (++i <= idx1 && ys[i] === null) to = i;\n      } else {\n        while (--i >= idx0 && ys[i] === null) to = i;\n      }\n      let frPx = pixelForX(xs[fr]);\n      let toPx = to == fr ? frPx : pixelForX(xs[to]);\n\n      // if value adjacent to edge null is same pixel, then it's partially\n      // filled and gap should start at next pixel\n      let fri2 = fr - dir;\n      let frPx2 = align <= 0 && fri2 >= 0 && fri2 < len ? pixelForX(xs[fri2]) : frPx;\n      //\tif (frPx2 == frPx)\n      //\t\tfrPx++;\n      //\telse\n      frPx = frPx2;\n      let toi2 = to + dir;\n      let toPx2 = align >= 0 && toi2 >= 0 && toi2 < len ? pixelForX(xs[toi2]) : toPx;\n      //\tif (toPx2 == toPx)\n      //\t\ttoPx--;\n      //\telse\n      toPx = toPx2;\n      if (toPx >= frPx) gaps.push([frPx, toPx]); // addGap\n    }\n  }\n  return gaps;\n}\nfunction pxRoundGen(pxAlign) {\n  return pxAlign == 0 ? retArg0 : pxAlign == 1 ? round : v => incrRound(v, pxAlign);\n}\n\n/*\n// inefficient linear interpolation that does bi-directinal scans on each call\nexport function costlyLerp(i, idx0, idx1, _dirX, dataY) {\n\tlet prevNonNull = nonNullIdx(dataY, _dirX == 1 ? idx0 : idx1, i, -_dirX);\n\tlet nextNonNull = nonNullIdx(dataY, i, _dirX == 1 ? idx1 : idx0,  _dirX);\n\n\tlet prevVal = dataY[prevNonNull];\n\tlet nextVal = dataY[nextNonNull];\n\n\treturn prevVal + (i - prevNonNull) / (nextNonNull - prevNonNull) * (nextVal - prevVal);\n}\n*/\n\nfunction rect(ori) {\n  let moveTo = ori == 0 ? moveToH : moveToV;\n  let arcTo = ori == 0 ? (p, x1, y1, x2, y2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  } : (p, y1, x1, y2, x2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  };\n  let rect = ori == 0 ? (p, x, y, w, h) => {\n    p.rect(x, y, w, h);\n  } : (p, y, x, h, w) => {\n    p.rect(x, y, w, h);\n  };\n\n  // TODO (pending better browser support): https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/roundRect\n  return (p, x, y, w, h, endRad = 0, baseRad = 0) => {\n    if (endRad == 0 && baseRad == 0) rect(p, x, y, w, h);else {\n      endRad = min(endRad, w / 2, h / 2);\n      baseRad = min(baseRad, w / 2, h / 2);\n\n      // adapted from https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-using-html-canvas/7838871#7838871\n      moveTo(p, x + endRad, y);\n      arcTo(p, x + w, y, x + w, y + h, endRad);\n      arcTo(p, x + w, y + h, x, y + h, baseRad);\n      arcTo(p, x, y + h, x, y, baseRad);\n      arcTo(p, x, y, x + w, y, endRad);\n      p.closePath();\n    }\n  };\n}\n\n// orientation-inverting canvas functions\nconst moveToH = (p, x, y) => {\n  p.moveTo(x, y);\n};\nconst moveToV = (p, y, x) => {\n  p.moveTo(x, y);\n};\nconst lineToH = (p, x, y) => {\n  p.lineTo(x, y);\n};\nconst lineToV = (p, y, x) => {\n  p.lineTo(x, y);\n};\nconst rectH = rect(0);\nconst rectV = rect(1);\nconst arcH = (p, x, y, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst arcV = (p, y, x, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst bezierCurveToH = (p, bp1x, bp1y, bp2x, bp2y, p2x, p2y) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\nconst bezierCurveToV = (p, bp1y, bp1x, bp2y, bp2x, p2y, p2x) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\n\n// TODO: drawWrap(seriesIdx, drawPoints) (save, restore, translate, clip)\nfunction points(opts) {\n  return (u, seriesIdx, idx0, idx1, filtIdxs) => {\n    //\tlog(\"drawPoints()\", arguments);\n\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let {\n        pxRound,\n        points\n      } = series;\n      let moveTo, arc;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        arc = arcH;\n      } else {\n        moveTo = moveToV;\n        arc = arcV;\n      }\n      const width = roundDec(points.width * pxRatio, 3);\n      let rad = (points.size - points.width) / 2 * pxRatio;\n      let dia = roundDec(rad * 2, 3);\n      let fill = new Path2D();\n      let clip = new Path2D();\n      let {\n        left: lft,\n        top: top,\n        width: wid,\n        height: hgt\n      } = u.bbox;\n      rectH(clip, lft - dia, top - dia, wid + dia * 2, hgt + dia * 2);\n      const drawPoint = pi => {\n        if (dataY[pi] != null) {\n          let x = pxRound(valToPosX(dataX[pi], scaleX, xDim, xOff));\n          let y = pxRound(valToPosY(dataY[pi], scaleY, yDim, yOff));\n          moveTo(fill, x + rad, y);\n          arc(fill, x, y, rad, 0, PI * 2);\n        }\n      };\n      if (filtIdxs) filtIdxs.forEach(drawPoint);else {\n        for (let pi = idx0; pi <= idx1; pi++) drawPoint(pi);\n      }\n      return {\n        stroke: width > 0 ? fill : null,\n        fill,\n        clip,\n        flags: BAND_CLIP_FILL | BAND_CLIP_STROKE\n      };\n    });\n  };\n}\nfunction _drawAcc(lineTo) {\n  return (stroke, accX, minY, maxY, inY, outY) => {\n    if (minY != maxY) {\n      if (inY != minY && outY != minY) lineTo(stroke, accX, minY);\n      if (inY != maxY && outY != maxY) lineTo(stroke, accX, maxY);\n      lineTo(stroke, accX, outY);\n    }\n  };\n}\nconst drawAccH = _drawAcc(lineToH);\nconst drawAccV = _drawAcc(lineToV);\nfunction linear(opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      [idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo, drawAcc;\n      if (scaleX.ori == 0) {\n        lineTo = lineToH;\n        drawAcc = drawAccH;\n      } else {\n        lineTo = lineToV;\n        drawAcc = drawAccV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let hasGap = false;\n\n      // decimate when number of points >= 4x available pixels\n      const decimate = idx1 - idx0 >= xDim * 4;\n      if (decimate) {\n        let xForPixel = pos => u.posToVal(pos, scaleX.key, true);\n        let minY = null,\n          maxY = null,\n          inY,\n          outY,\n          drawnAtX;\n        let accX = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n        let idx0px = pixelForX(dataX[idx0]);\n        let idx1px = pixelForX(dataX[idx1]);\n\n        // tracks limit of current x bucket to avoid having to get x pixel for every x value\n        let nextAccXVal = xForPixel(dir == 1 ? idx0px + 1 : idx1px - 1);\n        for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n          let xVal = dataX[i];\n          let reuseAccX = dir == 1 ? xVal < nextAccXVal : xVal > nextAccXVal;\n          let x = reuseAccX ? accX : pixelForX(xVal);\n          let yVal = dataY[i];\n          if (x == accX) {\n            if (yVal != null) {\n              outY = yVal;\n              if (minY == null) {\n                lineTo(stroke, x, pixelForY(outY));\n                inY = minY = maxY = outY;\n              } else {\n                if (outY < minY) minY = outY;else if (outY > maxY) maxY = outY;\n              }\n            } else {\n              if (yVal === null) hasGap = true;\n            }\n          } else {\n            if (minY != null) drawAcc(stroke, accX, pixelForY(minY), pixelForY(maxY), pixelForY(inY), pixelForY(outY));\n            if (yVal != null) {\n              outY = yVal;\n              lineTo(stroke, x, pixelForY(outY));\n              minY = maxY = inY = outY;\n            } else {\n              minY = maxY = null;\n              if (yVal === null) hasGap = true;\n            }\n            accX = x;\n            nextAccXVal = xForPixel(accX + dir);\n          }\n        }\n        if (minY != null && minY != maxY && drawnAtX != accX) drawAcc(stroke, accX, pixelForY(minY), pixelForY(maxY), pixelForY(inY), pixelForY(outY));\n      } else {\n        for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n          let yVal = dataY[i];\n          if (yVal === null) hasGap = true;else if (yVal != null) lineTo(stroke, pixelForX(dataX[i]), pixelForY(yVal));\n        }\n      }\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillToVal = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillToVal);\n        let frX = pixelForX(dataX[idx0]);\n        let toX = pixelForX(dataX[idx1]);\n        if (dir == -1) [toX, frX] = [frX, toX];\n        lineTo(fill, toX, fillToY);\n        lineTo(fill, frX, fillToY);\n      }\n      if (!series.spanGaps) {\n        // skip in mode: 2?\n        //\tconsole.time('gaps');\n        let gaps = [];\n        hasGap && gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\n\n// BUG: align: -1 behaves like align: 1 when scale.dir: -1\nfunction stepped(opts) {\n  const align = ifNull(opts.align, 1);\n  // whether to draw ascenders/descenders at null/gap bondaries\n  const ascDesc = ifNull(opts.ascDesc, false);\n  const alignGaps = ifNull(opts.alignGaps, 0);\n  const extend = ifNull(opts.extend, false);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      [idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n      let pxRound = series.pxRound;\n      let {\n        left,\n        width\n      } = u.bbox;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      let prevYPos = pixelForY(dataY[dir == 1 ? idx0 : idx1]);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let firstXPosExt = firstXPos;\n      if (extend && align == -1) {\n        firstXPosExt = left;\n        lineTo(stroke, firstXPosExt, prevYPos);\n      }\n      lineTo(stroke, firstXPos, prevYPos);\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal1 = dataY[i];\n        if (yVal1 == null) continue;\n        let x1 = pixelForX(dataX[i]);\n        let y1 = pixelForY(yVal1);\n        if (align == 1) lineTo(stroke, x1, prevYPos);else lineTo(stroke, prevXPos, y1);\n        lineTo(stroke, x1, y1);\n        prevYPos = y1;\n        prevXPos = x1;\n      }\n      let prevXPosExt = prevXPos;\n      if (extend && align == 1) {\n        prevXPosExt = left + width;\n        lineTo(stroke, prevXPosExt, prevYPos);\n      }\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPosExt, fillToY);\n        lineTo(fill, firstXPosExt, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        // expand/contract clips for ascenders/descenders\n        let halfStroke = series.width * pxRatio / 2;\n        let startsOffset = ascDesc || align == 1 ? halfStroke : -halfStroke;\n        let endsOffset = ascDesc || align == -1 ? -halfStroke : halfStroke;\n        gaps.forEach(g => {\n          g[0] += startsOffset;\n          g[1] += endsOffset;\n        });\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\nfunction findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid = inf) {\n  if (dataX.length > 1) {\n    // prior index with non-undefined y data\n    let prevIdx = null;\n\n    // scan full dataset for smallest adjacent delta\n    // will not work properly for non-linear x scales, since does not do expensive valToPosX calcs till end\n    for (let i = 0, minDelta = Infinity; i < dataX.length; i++) {\n      if (dataY[i] !== undefined) {\n        if (prevIdx != null) {\n          let delta = abs(dataX[i] - dataX[prevIdx]);\n          if (delta < minDelta) {\n            minDelta = delta;\n            colWid = abs(valToPosX(dataX[i], scaleX, xDim, xOff) - valToPosX(dataX[prevIdx], scaleX, xDim, xOff));\n          }\n        }\n        prevIdx = i;\n      }\n    }\n  }\n  return colWid;\n}\nfunction bars(opts) {\n  opts = opts || EMPTY_OBJ;\n  const size = ifNull(opts.size, [0.6, inf, 1]);\n  const align = opts.align || 0;\n  const _extraGap = opts.gap || 0;\n  let ro = opts.radius;\n  ro =\n  // [valueRadius, baselineRadius]\n  ro == null ? [0, 0] : typeof ro == 'number' ? [ro, 0] : ro;\n  const radiusFn = fnOrSelf(ro);\n  const gapFactor = 1 - size[0];\n  const _maxWidth = ifNull(size[1], inf);\n  const _minWidth = ifNull(size[2], 1);\n  const disp = ifNull(opts.disp, EMPTY_OBJ);\n  const _each = ifNull(opts.each, _ => {});\n  const {\n    fill: dispFills,\n    stroke: dispStrokes\n  } = disp;\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let _align = align;\n      let extraGap = _extraGap * pxRatio;\n      let maxWidth = _maxWidth * pxRatio;\n      let minWidth = _minWidth * pxRatio;\n      let valRadius, baseRadius;\n      if (scaleX.ori == 0) [valRadius, baseRadius] = radiusFn(u, seriesIdx);else [baseRadius, valRadius] = radiusFn(u, seriesIdx);\n      const _dirX = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      //\tconst _dirY = scaleY.dir * (scaleY.ori == 1 ? 1 : -1);\n\n      let rect = scaleX.ori == 0 ? rectH : rectV;\n      let each = scaleX.ori == 0 ? _each : (u, seriesIdx, i, top, lft, hgt, wid) => {\n        _each(u, seriesIdx, i, lft, top, wid, hgt);\n      };\n\n      // band where this series is the \"from\" edge\n      let band = ifNull(u.bands, EMPTY_ARR).find(b => b.series[0] == seriesIdx);\n      let fillDir = band != null ? band.dir : 0;\n      let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, fillDir);\n      let fillToY = pxRound(valToPosY(fillTo, scaleY, yDim, yOff));\n\n      // barWid is to center of stroke\n      let xShift,\n        barWid,\n        fullGap,\n        colWid = xDim;\n      let strokeWidth = pxRound(series.width * pxRatio);\n      let multiPath = false;\n      let fillColors = null;\n      let fillPaths = null;\n      let strokeColors = null;\n      let strokePaths = null;\n      if (dispFills != null && (strokeWidth == 0 || dispStrokes != null)) {\n        multiPath = true;\n        fillColors = dispFills.values(u, seriesIdx, idx0, idx1);\n        fillPaths = new Map();\n        new Set(fillColors).forEach(color => {\n          if (color != null) fillPaths.set(color, new Path2D());\n        });\n        if (strokeWidth > 0) {\n          strokeColors = dispStrokes.values(u, seriesIdx, idx0, idx1);\n          strokePaths = new Map();\n          new Set(strokeColors).forEach(color => {\n            if (color != null) strokePaths.set(color, new Path2D());\n          });\n        }\n      }\n      let {\n        x0,\n        size\n      } = disp;\n      if (x0 != null && size != null) {\n        _align = 1;\n        dataX = x0.values(u, seriesIdx, idx0, idx1);\n        if (x0.unit == 2) dataX = dataX.map(pct => u.posToVal(xOff + pct * xDim, scaleX.key, true));\n\n        // assumes uniform sizes, for now\n        let sizes = size.values(u, seriesIdx, idx0, idx1);\n        if (size.unit == 2) barWid = sizes[0] * xDim;else barWid = valToPosX(sizes[0], scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff); // assumes linear scale (delta from 0)\n\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid - barWid;\n        fullGap = gapWid + extraGap;\n      } else {\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid * gapFactor;\n        fullGap = gapWid + extraGap;\n        barWid = colWid - fullGap;\n      }\n      if (fullGap < 1) fullGap = 0;\n      if (strokeWidth >= barWid / 2) strokeWidth = 0;\n\n      // for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n      if (fullGap < 5) pxRound = retArg0;\n      let insetStroke = fullGap > 0;\n      let rawBarWid = colWid - fullGap - (insetStroke ? strokeWidth : 0);\n      barWid = pxRound(clamp(rawBarWid, minWidth, maxWidth));\n      xShift = (_align == 0 ? barWid / 2 : _align == _dirX ? 0 : barWid) - _align * _dirX * ((_align == 0 ? extraGap / 2 : 0) + (insetStroke ? strokeWidth / 2 : 0));\n      const _paths = {\n        stroke: null,\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: 0\n      }; // disp, geom\n\n      const stroke = multiPath ? null : new Path2D();\n      let dataY0 = null;\n      if (band != null) dataY0 = u.data[band.series[1]];else {\n        let {\n          y0,\n          y1\n        } = disp;\n        if (y0 != null && y1 != null) {\n          dataY = y1.values(u, seriesIdx, idx0, idx1);\n          dataY0 = y0.values(u, seriesIdx, idx0, idx1);\n        }\n      }\n      let radVal = valRadius * barWid;\n      let radBase = baseRadius * barWid;\n      for (let i = _dirX == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += _dirX) {\n        let yVal = dataY[i];\n        if (yVal == null) continue;\n        if (dataY0 != null) {\n          let yVal0 = dataY0[i] ?? 0;\n          if (yVal - yVal0 == 0) continue;\n          fillToY = valToPosY(yVal0, scaleY, yDim, yOff);\n        }\n        let xVal = scaleX.distr != 2 || disp != null ? dataX[i] : i;\n\n        // TODO: all xPos can be pre-computed once for all series in aligned set\n        let xPos = valToPosX(xVal, scaleX, xDim, xOff);\n        let yPos = valToPosY(ifNull(yVal, fillTo), scaleY, yDim, yOff);\n        let lft = pxRound(xPos - xShift);\n        let btm = pxRound(max(yPos, fillToY));\n        let top = pxRound(min(yPos, fillToY));\n        // this includes the stroke\n        let barHgt = btm - top;\n        if (yVal != null) {\n          // && yVal != fillTo (0 height bar)\n          let rv = yVal < 0 ? radBase : radVal;\n          let rb = yVal < 0 ? radVal : radBase;\n          if (multiPath) {\n            if (strokeWidth > 0 && strokeColors[i] != null) rect(strokePaths.get(strokeColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n            if (fillColors[i] != null) rect(fillPaths.get(fillColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          } else rect(stroke, lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          each(u, seriesIdx, i, lft - strokeWidth / 2, top, barWid + strokeWidth, barHgt);\n        }\n      }\n      if (strokeWidth > 0) _paths.stroke = multiPath ? strokePaths : stroke;else if (!multiPath) {\n        _paths._fill = series.width == 0 ? series._fill : series._stroke ?? series._fill;\n        _paths.width = 0;\n      }\n      _paths.fill = multiPath ? fillPaths : stroke;\n      return _paths;\n    });\n  };\n}\nfunction splineInterp(interp, opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      [idx0, idx1] = nonNullIdxs(dataY, idx0, idx1);\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let moveTo, bezierCurveTo, lineTo;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        lineTo = lineToH;\n        bezierCurveTo = bezierCurveToH;\n      } else {\n        moveTo = moveToV;\n        lineTo = lineToV;\n        bezierCurveTo = bezierCurveToV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let xCoords = [];\n      let yCoords = [];\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal = dataY[i];\n        if (yVal != null) {\n          let xVal = dataX[i];\n          let xPos = pixelForX(xVal);\n          xCoords.push(prevXPos = xPos);\n          yCoords.push(pixelForY(dataY[i]));\n        }\n      }\n      const _paths = {\n        stroke: interp(xCoords, yCoords, moveTo, lineTo, bezierCurveTo, pxRound),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPos, fillToY);\n        lineTo(fill, firstXPos, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n\n      //  if FEAT_PATHS: false in rollup.config.js\n      //\tu.ctx.save();\n      //\tu.ctx.beginPath();\n      //\tu.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n      //\tu.ctx.clip();\n      //\tu.ctx.strokeStyle = u.series[sidx].stroke;\n      //\tu.ctx.stroke(stroke);\n      //\tu.ctx.fillStyle = u.series[sidx].fill;\n      //\tu.ctx.fill(fill);\n      //\tu.ctx.restore();\n      //\treturn null;\n    });\n  };\n}\nfunction monotoneCubic(opts) {\n  return splineInterp(_monotoneCubic, opts);\n}\n\n// Monotone Cubic Spline interpolation, adapted from the Chartist.js implementation:\n// https://github.com/gionkunz/chartist-js/blob/e7e78201bffe9609915e5e53cfafa29a5d6c49f9/src/scripts/interpolation.js#L240-L369\nfunction _monotoneCubic(xs, ys, moveTo, lineTo, bezierCurveTo, pxRound) {\n  const n = xs.length;\n  if (n < 2) return null;\n  const path = new Path2D();\n  moveTo(path, xs[0], ys[0]);\n  if (n == 2) lineTo(path, xs[1], ys[1]);else {\n    let ms = Array(n),\n      ds = Array(n - 1),\n      dys = Array(n - 1),\n      dxs = Array(n - 1);\n\n    // calc deltas and derivative\n    for (let i = 0; i < n - 1; i++) {\n      dys[i] = ys[i + 1] - ys[i];\n      dxs[i] = xs[i + 1] - xs[i];\n      ds[i] = dys[i] / dxs[i];\n    }\n\n    // determine desired slope (m) at each point using Fritsch-Carlson method\n    // http://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation\n    ms[0] = ds[0];\n    for (let i = 1; i < n - 1; i++) {\n      if (ds[i] === 0 || ds[i - 1] === 0 || ds[i - 1] > 0 !== ds[i] > 0) ms[i] = 0;else {\n        ms[i] = 3 * (dxs[i - 1] + dxs[i]) / ((2 * dxs[i] + dxs[i - 1]) / ds[i - 1] + (dxs[i] + 2 * dxs[i - 1]) / ds[i]);\n        if (!isFinite(ms[i])) ms[i] = 0;\n      }\n    }\n    ms[n - 1] = ds[n - 2];\n    for (let i = 0; i < n - 1; i++) {\n      bezierCurveTo(path, xs[i] + dxs[i] / 3, ys[i] + ms[i] * dxs[i] / 3, xs[i + 1] - dxs[i] / 3, ys[i + 1] - ms[i + 1] * dxs[i] / 3, xs[i + 1], ys[i + 1]);\n    }\n  }\n  return path;\n}\nconst cursorPlots = new Set();\nfunction invalidateRects() {\n  for (let u of cursorPlots) u.syncRect(true);\n}\nif (domEnv) {\n  on(resize, win, invalidateRects);\n  on(scroll, win, invalidateRects, true);\n  on(dppxchange, win, () => {\n    uPlot.pxRatio = pxRatio;\n  });\n}\nconst linearPath = linear();\nconst pointsPath = points();\nfunction setDefaults(d, xo, yo, initY) {\n  let d2 = initY ? [d[0], d[1]].concat(d.slice(2)) : [d[0]].concat(d.slice(1));\n  return d2.map((o, i) => setDefault(o, i, xo, yo));\n}\nfunction setDefaults2(d, xyo) {\n  return d.map((o, i) => i == 0 ? {} : assign({}, xyo, o)); // todo: assign() will not merge facet arrays\n}\nfunction setDefault(o, i, xo, yo) {\n  return assign({}, i == 0 ? xo : yo, o);\n}\nfunction snapNumX(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : [dataMin, dataMax];\n}\nconst snapTimeX = snapNumX;\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction snapNumY(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, rangePad, true);\n}\nfunction snapLogY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeLog(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapLogX = snapLogY;\nfunction snapAsinhY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeAsinh(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapAsinhX = snapAsinhY;\n\n// dim is logical (getClientBoundingRect) pixels, not canvas pixels\nfunction findIncr(minVal, maxVal, incrs, dim, minSpace) {\n  let intDigits = max(numIntDigits(minVal), numIntDigits(maxVal));\n  let delta = maxVal - minVal;\n  let incrIdx = closestIdx(minSpace / dim * delta, incrs);\n  do {\n    let foundIncr = incrs[incrIdx];\n    let foundSpace = dim * foundIncr / delta;\n    if (foundSpace >= minSpace && intDigits + (foundIncr < 5 ? fixedDec.get(foundIncr) : 0) <= 17) return [foundIncr, foundSpace];\n  } while (++incrIdx < incrs.length);\n  return [0, 0];\n}\nfunction pxRatioFont(font) {\n  let fontSize, fontSizeCss;\n  font = font.replace(/(\\d+)px/, (m, p1) => (fontSize = round((fontSizeCss = +p1) * pxRatio)) + 'px');\n  return [font, fontSize, fontSizeCss];\n}\nfunction syncFontSize(axis) {\n  if (axis.show) {\n    [axis.font, axis.labelFont].forEach(f => {\n      let size = roundDec(f[2] * pxRatio, 1);\n      f[0] = f[0].replace(/[0-9.]+px/, size + 'px');\n      f[1] = size;\n    });\n  }\n}\nfunction uPlot(opts, data, then) {\n  const self = {\n    mode: ifNull(opts.mode, 1)\n  };\n  const mode = self.mode;\n  function getHPos(val, scale, dim, off) {\n    let pct = scale.valToPct(val);\n    return off + dim * (scale.dir == -1 ? 1 - pct : pct);\n  }\n  function getVPos(val, scale, dim, off) {\n    let pct = scale.valToPct(val);\n    return off + dim * (scale.dir == -1 ? pct : 1 - pct);\n  }\n  function getPos(val, scale, dim, off) {\n    return scale.ori == 0 ? getHPos(val, scale, dim, off) : getVPos(val, scale, dim, off);\n  }\n  self.valToPosH = getHPos;\n  self.valToPosV = getVPos;\n  let ready = false;\n  self.status = 0;\n  const root = self.root = placeDiv(UPLOT);\n  if (opts.id != null) root.id = opts.id;\n  addClass(root, opts.class);\n  if (opts.title) {\n    let title = placeDiv(TITLE, root);\n    title.textContent = opts.title;\n  }\n  const can = placeTag(\"canvas\");\n  const ctx = self.ctx = can.getContext(\"2d\");\n  const wrap = placeDiv(WRAP, root);\n  on(\"click\", wrap, e => {\n    if (e.target === over) {\n      let didDrag = mouseLeft1 != mouseLeft0 || mouseTop1 != mouseTop0;\n      didDrag && drag.click(self, e);\n    }\n  }, true);\n  const under = self.under = placeDiv(UNDER, wrap);\n  wrap.appendChild(can);\n  const over = self.over = placeDiv(OVER, wrap);\n  opts = copy(opts);\n  const pxAlign = +ifNull(opts.pxAlign, 1);\n  const pxRound = pxRoundGen(pxAlign);\n  (opts.plugins || []).forEach(p => {\n    if (p.opts) opts = p.opts(self, opts) || opts;\n  });\n  const ms = opts.ms || 1e-3;\n  const series = self.series = mode == 1 ? setDefaults(opts.series || [], xSeriesOpts, ySeriesOpts, false) : setDefaults2(opts.series || [null], xySeriesOpts);\n  const axes = self.axes = setDefaults(opts.axes || [], xAxisOpts, yAxisOpts, true);\n  const scales = self.scales = {};\n  const bands = self.bands = opts.bands || [];\n  bands.forEach(b => {\n    b.fill = fnOrSelf(b.fill || null);\n    b.dir = ifNull(b.dir, -1);\n  });\n  const xScaleKey = mode == 2 ? series[1].facets[0].scale : series[0].scale;\n  const drawOrderMap = {\n    axes: drawAxesGrid,\n    series: drawSeries\n  };\n  const drawOrder = (opts.drawOrder || [\"axes\", \"series\"]).map(key => drawOrderMap[key]);\n  function initValToPct(sc) {\n    const getVal = sc.distr == 3 ? val => log10(val > 0 ? val : sc.clamp(self, val, sc.min, sc.max, sc.key)) : sc.distr == 4 ? val => asinh(val, sc.asinh) : sc.distr == 100 ? val => sc.fwd(val) : val => val;\n    return val => {\n      let _val = getVal(val);\n      let {\n        _min,\n        _max\n      } = sc;\n      let delta = _max - _min;\n      return (_val - _min) / delta;\n    };\n  }\n  function initScale(scaleKey) {\n    let sc = scales[scaleKey];\n    if (sc == null) {\n      let scaleOpts = (opts.scales || EMPTY_OBJ)[scaleKey] || EMPTY_OBJ;\n      if (scaleOpts.from != null) {\n        // ensure parent is initialized\n        initScale(scaleOpts.from);\n        // dependent scales inherit\n        let sc = assign({}, scales[scaleOpts.from], scaleOpts, {\n          key: scaleKey\n        });\n        sc.valToPct = initValToPct(sc);\n        scales[scaleKey] = sc;\n      } else {\n        sc = scales[scaleKey] = assign({}, scaleKey == xScaleKey ? xScaleOpts : yScaleOpts, scaleOpts);\n        sc.key = scaleKey;\n        let isTime = sc.time;\n        let rn = sc.range;\n        let rangeIsArr = isArr(rn);\n        if (scaleKey != xScaleKey || mode == 2 && !isTime) {\n          // if range array has null limits, it should be auto\n          if (rangeIsArr && (rn[0] == null || rn[1] == null)) {\n            rn = {\n              min: rn[0] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[0],\n                soft: rn[0]\n              },\n              max: rn[1] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[1],\n                soft: rn[1]\n              }\n            };\n            rangeIsArr = false;\n          }\n          if (!rangeIsArr && isObj(rn)) {\n            let cfg = rn;\n            // this is similar to snapNumY\n            rn = (self, dataMin, dataMax) => dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, cfg);\n          }\n        }\n        sc.range = fnOrSelf(rn || (isTime ? snapTimeX : scaleKey == xScaleKey ? sc.distr == 3 ? snapLogX : sc.distr == 4 ? snapAsinhX : snapNumX : sc.distr == 3 ? snapLogY : sc.distr == 4 ? snapAsinhY : snapNumY));\n        sc.auto = fnOrSelf(rangeIsArr ? false : sc.auto);\n        sc.clamp = fnOrSelf(sc.clamp || clampScale);\n\n        // caches for expensive ops like asinh() & log()\n        sc._min = sc._max = null;\n        sc.valToPct = initValToPct(sc);\n      }\n    }\n  }\n  initScale(\"x\");\n  initScale(\"y\");\n\n  // TODO: init scales from facets in mode: 2\n  if (mode == 1) {\n    series.forEach(s => {\n      initScale(s.scale);\n    });\n  }\n  axes.forEach(a => {\n    initScale(a.scale);\n  });\n  for (let k in opts.scales) initScale(k);\n  const scaleX = scales[xScaleKey];\n  const xScaleDistr = scaleX.distr;\n  let valToPosX, valToPosY;\n  if (scaleX.ori == 0) {\n    addClass(root, ORI_HZ);\n    valToPosX = getHPos;\n    valToPosY = getVPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotWid;\n    \txOffCan = plotLft;\n    \tyDimCan = plotHgt;\n    \tyOffCan = plotTop;\n    \t\txDimCss = plotWidCss;\n    \txOffCss = plotLftCss;\n    \tyDimCss = plotHgtCss;\n    \tyOffCss = plotTopCss;\n    };\n    */\n  } else {\n    addClass(root, ORI_VT);\n    valToPosX = getVPos;\n    valToPosY = getHPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotHgt;\n    \txOffCan = plotTop;\n    \tyDimCan = plotWid;\n    \tyOffCan = plotLft;\n    \t\txDimCss = plotHgtCss;\n    \txOffCss = plotTopCss;\n    \tyDimCss = plotWidCss;\n    \tyOffCss = plotLftCss;\n    };\n    */\n  }\n  const pendScales = {};\n\n  // explicitly-set initial scales\n  for (let k in scales) {\n    let sc = scales[k];\n    if (sc.min != null || sc.max != null) {\n      pendScales[k] = {\n        min: sc.min,\n        max: sc.max\n      };\n      sc.min = sc.max = null;\n    }\n  }\n\n  //\tself.tz = opts.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const _tzDate = opts.tzDate || (ts => new Date(round(ts / ms)));\n  const _fmtDate = opts.fmtDate || fmtDate;\n  const _timeAxisSplits = ms == 1 ? timeAxisSplitsMs(_tzDate) : timeAxisSplitsS(_tzDate);\n  const _timeAxisVals = timeAxisVals(_tzDate, timeAxisStamps(ms == 1 ? _timeAxisStampsMs : _timeAxisStampsS, _fmtDate));\n  const _timeSeriesVal = timeSeriesVal(_tzDate, timeSeriesStamp(_timeSeriesStamp, _fmtDate));\n  const activeIdxs = [];\n  const legend = self.legend = assign({}, legendOpts, opts.legend);\n  const cursor = self.cursor = assign({}, cursorOpts, {\n    drag: {\n      y: mode == 2\n    }\n  }, opts.cursor);\n  const showLegend = legend.show;\n  const showCursor = cursor.show;\n  const markers = legend.markers;\n  {\n    legend.idxs = activeIdxs;\n    markers.width = fnOrSelf(markers.width);\n    markers.dash = fnOrSelf(markers.dash);\n    markers.stroke = fnOrSelf(markers.stroke);\n    markers.fill = fnOrSelf(markers.fill);\n  }\n  let legendTable;\n  let legendHead;\n  let legendBody;\n  let legendRows = [];\n  let legendCells = [];\n  let legendCols;\n  let multiValLegend = false;\n  let NULL_LEGEND_VALUES = {};\n  if (legend.live) {\n    const getMultiVals = series[1] ? series[1].values : null;\n    multiValLegend = getMultiVals != null;\n    legendCols = multiValLegend ? getMultiVals(self, 1, 0) : {\n      _: 0\n    };\n    for (let k in legendCols) NULL_LEGEND_VALUES[k] = LEGEND_DISP;\n  }\n  if (showLegend) {\n    legendTable = placeTag(\"table\", LEGEND, root);\n    legendBody = placeTag(\"tbody\", null, legendTable);\n\n    // allows legend to be moved out of root\n    legend.mount(self, legendTable);\n    if (multiValLegend) {\n      legendHead = placeTag(\"thead\", null, legendTable, legendBody);\n      let head = placeTag(\"tr\", null, legendHead);\n      placeTag(\"th\", null, head);\n      for (var key in legendCols) placeTag(\"th\", LEGEND_LABEL, head).textContent = key;\n    } else {\n      addClass(legendTable, LEGEND_INLINE);\n      legend.live && addClass(legendTable, LEGEND_LIVE);\n    }\n  }\n  const son = {\n    show: true\n  };\n  const soff = {\n    show: false\n  };\n  function initLegendRow(s, i) {\n    if (i == 0 && (multiValLegend || !legend.live || mode == 2)) return nullNullTuple;\n    let cells = [];\n    let row = placeTag(\"tr\", LEGEND_SERIES, legendBody, legendBody.childNodes[i]);\n    addClass(row, s.class);\n    if (!s.show) addClass(row, OFF);\n    let label = placeTag(\"th\", null, row);\n    if (markers.show) {\n      let indic = placeDiv(LEGEND_MARKER, label);\n      if (i > 0) {\n        let width = markers.width(self, i);\n        if (width) indic.style.border = width + \"px \" + markers.dash(self, i) + \" \" + markers.stroke(self, i);\n        indic.style.background = markers.fill(self, i);\n      }\n    }\n    let text = placeDiv(LEGEND_LABEL, label);\n    if (s.label instanceof HTMLElement) text.appendChild(s.label);else text.textContent = s.label;\n    if (i > 0) {\n      if (!markers.show) text.style.color = s.width > 0 ? markers.stroke(self, i) : markers.fill(self, i);\n      onMouse(\"click\", label, e => {\n        if (cursor._lock) return;\n        setCursorEvent(e);\n        let seriesIdx = series.indexOf(s);\n        if ((e.ctrlKey || e.metaKey) != legend.isolate) {\n          // if any other series is shown, isolate this one. else show all\n          let isolate = series.some((s, i) => i > 0 && i != seriesIdx && s.show);\n          series.forEach((s, i) => {\n            i > 0 && setSeries(i, isolate ? i == seriesIdx ? son : soff : son, true, syncOpts.setSeries);\n          });\n        } else setSeries(seriesIdx, {\n          show: !s.show\n        }, true, syncOpts.setSeries);\n      }, false);\n      if (cursorFocus) {\n        onMouse(mouseenter, label, e => {\n          if (cursor._lock) return;\n          setCursorEvent(e);\n          setSeries(series.indexOf(s), FOCUS_TRUE, true, syncOpts.setSeries);\n        }, false);\n      }\n    }\n    for (var key in legendCols) {\n      let v = placeTag(\"td\", LEGEND_VALUE, row);\n      v.textContent = \"--\";\n      cells.push(v);\n    }\n    return [row, cells];\n  }\n  const mouseListeners = new Map();\n  function onMouse(ev, targ, fn, onlyTarg = true) {\n    const targListeners = mouseListeners.get(targ) || {};\n    const listener = cursor.bind[ev](self, targ, fn, onlyTarg);\n    if (listener) {\n      on(ev, targ, targListeners[ev] = listener);\n      mouseListeners.set(targ, targListeners);\n    }\n  }\n  function offMouse(ev, targ, fn) {\n    const targListeners = mouseListeners.get(targ) || {};\n    for (let k in targListeners) {\n      if (ev == null || k == ev) {\n        off(k, targ, targListeners[k]);\n        delete targListeners[k];\n      }\n    }\n    if (ev == null) mouseListeners.delete(targ);\n  }\n  let fullWidCss = 0;\n  let fullHgtCss = 0;\n  let plotWidCss = 0;\n  let plotHgtCss = 0;\n\n  // plot margins to account for axes\n  let plotLftCss = 0;\n  let plotTopCss = 0;\n\n  // previous values for diffing\n  let _plotLftCss = plotLftCss;\n  let _plotTopCss = plotTopCss;\n  let _plotWidCss = plotWidCss;\n  let _plotHgtCss = plotHgtCss;\n  let plotLft = 0;\n  let plotTop = 0;\n  let plotWid = 0;\n  let plotHgt = 0;\n  self.bbox = {};\n  let shouldSetScales = false;\n  let shouldSetSize = false;\n  let shouldConvergeSize = false;\n  let shouldSetCursor = false;\n  let shouldSetSelect = false;\n  let shouldSetLegend = false;\n  function _setSize(width, height, force) {\n    if (force || width != self.width || height != self.height) calcSize(width, height);\n    resetYSeries(false);\n    shouldConvergeSize = true;\n    shouldSetSize = true;\n    commit();\n  }\n  function calcSize(width, height) {\n    //\tlog(\"calcSize()\", arguments);\n\n    self.width = fullWidCss = plotWidCss = width;\n    self.height = fullHgtCss = plotHgtCss = height;\n    plotLftCss = plotTopCss = 0;\n    calcPlotRect();\n    calcAxesRects();\n    let bb = self.bbox;\n    plotLft = bb.left = incrRound(plotLftCss * pxRatio, 0.5);\n    plotTop = bb.top = incrRound(plotTopCss * pxRatio, 0.5);\n    plotWid = bb.width = incrRound(plotWidCss * pxRatio, 0.5);\n    plotHgt = bb.height = incrRound(plotHgtCss * pxRatio, 0.5);\n\n    //\tupdOriDims();\n  }\n\n  // ensures size calc convergence\n  const CYCLE_LIMIT = 3;\n  function convergeSize() {\n    let converged = false;\n    let cycleNum = 0;\n    while (!converged) {\n      cycleNum++;\n      let axesConverged = axesCalc(cycleNum);\n      let paddingConverged = paddingCalc(cycleNum);\n      converged = cycleNum == CYCLE_LIMIT || axesConverged && paddingConverged;\n      if (!converged) {\n        calcSize(self.width, self.height);\n        shouldSetSize = true;\n      }\n    }\n  }\n  function setSize({\n    width,\n    height\n  }) {\n    _setSize(width, height);\n  }\n  self.setSize = setSize;\n\n  // accumulate axis offsets, reduce canvas width\n  function calcPlotRect() {\n    // easements for edge labels\n    let hasTopAxis = false;\n    let hasBtmAxis = false;\n    let hasRgtAxis = false;\n    let hasLftAxis = false;\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let {\n          side,\n          _size\n        } = axis;\n        let isVt = side % 2;\n        let labelSize = axis.label != null ? axis.labelSize : 0;\n        let fullSize = _size + labelSize;\n        if (fullSize > 0) {\n          if (isVt) {\n            plotWidCss -= fullSize;\n            if (side == 3) {\n              plotLftCss += fullSize;\n              hasLftAxis = true;\n            } else hasRgtAxis = true;\n          } else {\n            plotHgtCss -= fullSize;\n            if (side == 0) {\n              plotTopCss += fullSize;\n              hasTopAxis = true;\n            } else hasBtmAxis = true;\n          }\n        }\n      }\n    });\n    sidesWithAxes[0] = hasTopAxis;\n    sidesWithAxes[1] = hasRgtAxis;\n    sidesWithAxes[2] = hasBtmAxis;\n    sidesWithAxes[3] = hasLftAxis;\n\n    // hz padding\n    plotWidCss -= _padding[1] + _padding[3];\n    plotLftCss += _padding[3];\n\n    // vt padding\n    plotHgtCss -= _padding[2] + _padding[0];\n    plotTopCss += _padding[0];\n  }\n  function calcAxesRects() {\n    // will accum +\n    let off1 = plotLftCss + plotWidCss;\n    let off2 = plotTopCss + plotHgtCss;\n    // will accum -\n    let off3 = plotLftCss;\n    let off0 = plotTopCss;\n    function incrOffset(side, size) {\n      switch (side) {\n        case 1:\n          off1 += size;\n          return off1 - size;\n        case 2:\n          off2 += size;\n          return off2 - size;\n        case 3:\n          off3 -= size;\n          return off3 + size;\n        case 0:\n          off0 -= size;\n          return off0 + size;\n      }\n    }\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let side = axis.side;\n        axis._pos = incrOffset(side, axis._size);\n        if (axis.label != null) axis._lpos = incrOffset(side, axis.labelSize);\n      }\n    });\n  }\n  if (cursor.dataIdx == null) {\n    let hov = cursor.hover;\n    let skip = hov.skip = new Set(hov.skip ?? []);\n    skip.add(void 0); // alignment artifacts\n    let prox = hov.prox = fnOrSelf(hov.prox);\n    let bias = hov.bias ??= 0;\n\n    // TODO: only scan between in-view idxs (i0, i1)\n    cursor.dataIdx = (self, seriesIdx, cursorIdx, valAtPosX) => {\n      if (seriesIdx == 0) return cursorIdx;\n      let idx2 = cursorIdx;\n      let _prox = prox(self, seriesIdx, cursorIdx, valAtPosX) ?? inf;\n      let withProx = _prox >= 0 && _prox < inf;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n      let cursorLft = cursor.left;\n      let xValues = data[0];\n      let yValues = data[seriesIdx];\n      if (skip.has(yValues[cursorIdx])) {\n        idx2 = null;\n        let nonNullLft = null,\n          nonNullRgt = null,\n          j;\n        if (bias == 0 || bias == -1) {\n          j = cursorIdx;\n          while (nonNullLft == null && j-- > 0) {\n            if (!skip.has(yValues[j])) nonNullLft = j;\n          }\n        }\n        if (bias == 0 || bias == 1) {\n          j = cursorIdx;\n          while (nonNullRgt == null && j++ < yValues.length) {\n            if (!skip.has(yValues[j])) nonNullRgt = j;\n          }\n        }\n        if (nonNullLft != null || nonNullRgt != null) {\n          if (withProx) {\n            let lftPos = nonNullLft == null ? -Infinity : valToPosX(xValues[nonNullLft], scaleX, xDim, 0);\n            let rgtPos = nonNullRgt == null ? Infinity : valToPosX(xValues[nonNullRgt], scaleX, xDim, 0);\n            let lftDelta = cursorLft - lftPos;\n            let rgtDelta = rgtPos - cursorLft;\n            if (lftDelta <= rgtDelta) {\n              if (lftDelta <= _prox) idx2 = nonNullLft;\n            } else {\n              if (rgtDelta <= _prox) idx2 = nonNullRgt;\n            }\n          } else {\n            idx2 = nonNullRgt == null ? nonNullLft : nonNullLft == null ? nonNullRgt : cursorIdx - nonNullLft <= nonNullRgt - cursorIdx ? nonNullLft : nonNullRgt;\n          }\n        }\n      } else if (withProx) {\n        let dist = abs(cursorLft - valToPosX(xValues[cursorIdx], scaleX, xDim, 0));\n        if (dist > _prox) idx2 = null;\n      }\n      return idx2;\n    };\n  }\n  const setCursorEvent = e => {\n    cursor.event = e;\n  };\n  cursor.idxs = activeIdxs;\n  cursor._lock = false;\n  let points = cursor.points;\n  points.show = fnOrSelf(points.show);\n  points.size = fnOrSelf(points.size);\n  points.stroke = fnOrSelf(points.stroke);\n  points.width = fnOrSelf(points.width);\n  points.fill = fnOrSelf(points.fill);\n  const focus = self.focus = assign({}, opts.focus || {\n    alpha: 0.3\n  }, cursor.focus);\n  const cursorFocus = focus.prox >= 0;\n  const cursorOnePt = cursorFocus && points.one;\n\n  // series-intersection markers\n  let cursorPts = [];\n  // position caches in CSS pixels\n  let cursorPtsLft = [];\n  let cursorPtsTop = [];\n  function initCursorPt(s, si) {\n    let pt = points.show(self, si);\n    if (pt instanceof HTMLElement) {\n      addClass(pt, CURSOR_PT);\n      addClass(pt, s.class);\n      elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n      over.insertBefore(pt, cursorPts[si]);\n      return pt;\n    }\n  }\n  function initSeries(s, i) {\n    if (mode == 1 || i > 0) {\n      let isTime = mode == 1 && scales[s.scale].time;\n      let sv = s.value;\n      s.value = isTime ? isStr(sv) ? timeSeriesVal(_tzDate, timeSeriesStamp(sv, _fmtDate)) : sv || _timeSeriesVal : sv || numSeriesVal;\n      s.label = s.label || (isTime ? timeSeriesLabel : numSeriesLabel);\n    }\n    if (cursorOnePt || i > 0) {\n      s.width = s.width == null ? 1 : s.width;\n      s.paths = s.paths || linearPath || retNull;\n      s.fillTo = fnOrSelf(s.fillTo || seriesFillTo);\n      s.pxAlign = +ifNull(s.pxAlign, pxAlign);\n      s.pxRound = pxRoundGen(s.pxAlign);\n      s.stroke = fnOrSelf(s.stroke || null);\n      s.fill = fnOrSelf(s.fill || null);\n      s._stroke = s._fill = s._paths = s._focus = null;\n      let _ptDia = ptDia(max(1, s.width), 1);\n      let points = s.points = assign({}, {\n        size: _ptDia,\n        width: max(1, _ptDia * .2),\n        stroke: s.stroke,\n        space: _ptDia * 2,\n        paths: pointsPath,\n        _stroke: null,\n        _fill: null\n      }, s.points);\n      points.show = fnOrSelf(points.show);\n      points.filter = fnOrSelf(points.filter);\n      points.fill = fnOrSelf(points.fill);\n      points.stroke = fnOrSelf(points.stroke);\n      points.paths = fnOrSelf(points.paths);\n      points.pxAlign = s.pxAlign;\n    }\n    if (showLegend) {\n      let rowCells = initLegendRow(s, i);\n      legendRows.splice(i, 0, rowCells[0]);\n      legendCells.splice(i, 0, rowCells[1]);\n      legend.values.push(null); // NULL_LEGEND_VALS not yet avil here :(\n    }\n    if (showCursor) {\n      activeIdxs.splice(i, 0, null);\n      let pt = null;\n      if (cursorOnePt) {\n        if (i == 0) pt = initCursorPt(s, i);\n      } else if (i > 0) pt = initCursorPt(s, i);\n      cursorPts.splice(i, 0, pt);\n      cursorPtsLft.splice(i, 0, 0);\n      cursorPtsTop.splice(i, 0, 0);\n    }\n    fire(\"addSeries\", i);\n  }\n  function addSeries(opts, si) {\n    si = si == null ? series.length : si;\n    opts = mode == 1 ? setDefault(opts, si, xSeriesOpts, ySeriesOpts) : setDefault(opts, si, {}, xySeriesOpts);\n    series.splice(si, 0, opts);\n    initSeries(series[si], si);\n  }\n  self.addSeries = addSeries;\n  function delSeries(i) {\n    series.splice(i, 1);\n    if (showLegend) {\n      legend.values.splice(i, 1);\n      legendCells.splice(i, 1);\n      let tr = legendRows.splice(i, 1)[0];\n      offMouse(null, tr.firstChild);\n      tr.remove();\n    }\n    if (showCursor) {\n      activeIdxs.splice(i, 1);\n      cursorPts.splice(i, 1)[0].remove();\n      cursorPtsLft.splice(i, 1);\n      cursorPtsTop.splice(i, 1);\n    }\n\n    // TODO: de-init no-longer-needed scales?\n\n    fire(\"delSeries\", i);\n  }\n  self.delSeries = delSeries;\n  const sidesWithAxes = [false, false, false, false];\n  function initAxis(axis, i) {\n    axis._show = axis.show;\n    if (axis.show) {\n      let isVt = axis.side % 2;\n      let sc = scales[axis.scale];\n\n      // this can occur if all series specify non-default scales\n      if (sc == null) {\n        axis.scale = isVt ? series[1].scale : xScaleKey;\n        sc = scales[axis.scale];\n      }\n\n      // also set defaults for incrs & values based on axis distr\n      let isTime = sc.time;\n      axis.size = fnOrSelf(axis.size);\n      axis.space = fnOrSelf(axis.space);\n      axis.rotate = fnOrSelf(axis.rotate);\n      if (isArr(axis.incrs)) {\n        axis.incrs.forEach(incr => {\n          !fixedDec.has(incr) && fixedDec.set(incr, guessDec(incr));\n        });\n      }\n      axis.incrs = fnOrSelf(axis.incrs || (sc.distr == 2 ? wholeIncrs : isTime ? ms == 1 ? timeIncrsMs : timeIncrsS : numIncrs));\n      axis.splits = fnOrSelf(axis.splits || (isTime && sc.distr == 1 ? _timeAxisSplits : sc.distr == 3 ? logAxisSplits : sc.distr == 4 ? asinhAxisSplits : numAxisSplits));\n      axis.stroke = fnOrSelf(axis.stroke);\n      axis.grid.stroke = fnOrSelf(axis.grid.stroke);\n      axis.ticks.stroke = fnOrSelf(axis.ticks.stroke);\n      axis.border.stroke = fnOrSelf(axis.border.stroke);\n      let av = axis.values;\n      axis.values =\n      // static array of tick values\n      isArr(av) && !isArr(av[0]) ? fnOrSelf(av) :\n      // temporal\n      isTime ?\n      // config array of fmtDate string tpls\n      isArr(av) ? timeAxisVals(_tzDate, timeAxisStamps(av, _fmtDate)) :\n      // fmtDate string tpl\n      isStr(av) ? timeAxisVal(_tzDate, av) : av || _timeAxisVals : av || numAxisVals;\n      axis.filter = fnOrSelf(axis.filter || (sc.distr >= 3 && sc.log == 10 ? log10AxisValsFilt : sc.distr == 3 && sc.log == 2 ? log2AxisValsFilt : retArg1));\n      axis.font = pxRatioFont(axis.font);\n      axis.labelFont = pxRatioFont(axis.labelFont);\n      axis._size = axis.size(self, null, i, 0);\n      axis._space = axis._rotate = axis._incrs = axis._found =\n      // foundIncrSpace\n      axis._splits = axis._values = null;\n      if (axis._size > 0) {\n        sidesWithAxes[i] = true;\n        axis._el = placeDiv(AXIS, wrap);\n      }\n\n      // debug\n      //\taxis._el.style.background = \"#\"  + Math.floor(Math.random()*16777215).toString(16) + '80';\n    }\n  }\n  function autoPadSide(self, side, sidesWithAxes, cycleNum) {\n    let [hasTopAxis, hasRgtAxis, hasBtmAxis, hasLftAxis] = sidesWithAxes;\n    let ori = side % 2;\n    let size = 0;\n    if (ori == 0 && (hasLftAxis || hasRgtAxis)) size = side == 0 && !hasTopAxis || side == 2 && !hasBtmAxis ? round(xAxisOpts.size / 3) : 0;\n    if (ori == 1 && (hasTopAxis || hasBtmAxis)) size = side == 1 && !hasRgtAxis || side == 3 && !hasLftAxis ? round(yAxisOpts.size / 2) : 0;\n    return size;\n  }\n  const padding = self.padding = (opts.padding || [autoPadSide, autoPadSide, autoPadSide, autoPadSide]).map(p => fnOrSelf(ifNull(p, autoPadSide)));\n  const _padding = self._padding = padding.map((p, i) => p(self, i, sidesWithAxes, 0));\n  let dataLen;\n\n  // rendered data window\n  let i0 = null;\n  let i1 = null;\n  const idxs = mode == 1 ? series[0].idxs : null;\n  let data0 = null;\n  let viaAutoScaleX = false;\n  function setData(_data, _resetScales) {\n    data = _data == null ? [] : _data;\n    self.data = self._data = data;\n    if (mode == 2) {\n      dataLen = 0;\n      for (let i = 1; i < series.length; i++) dataLen += data[i][0].length;\n    } else {\n      if (data.length == 0) self.data = self._data = data = [[]];\n      data0 = data[0];\n      dataLen = data0.length;\n      let scaleData = data;\n      if (xScaleDistr == 2) {\n        scaleData = data.slice();\n        let _data0 = scaleData[0] = Array(dataLen);\n        for (let i = 0; i < dataLen; i++) _data0[i] = i;\n      }\n      self._data = data = scaleData;\n    }\n    resetYSeries(true);\n    fire(\"setData\");\n\n    // forces x axis tick values to re-generate when neither x scale nor y scale changes\n    // in ordinal mode, scale range is by index, so will not change if new data has same length, but tick values are from data\n    if (xScaleDistr == 2) {\n      shouldConvergeSize = true;\n\n      /* or somewhat cheaper, and uglier:\n      if (ready) {\n      \t// logic extracted from axesCalc()\n      \tlet i = 0;\n      \tlet axis = axes[i];\n      \tlet _splits = axis._splits.map(i => data0[i]);\n      \tlet [_incr, _space] = axis._found;\n      \tlet incr = data0[_splits[1]] - data0[_splits[0]];\n      \taxis._values = axis.values(self, axis.filter(self, _splits, i, _space, incr), i, _space, incr);\n      }\n      */\n    }\n    if (_resetScales !== false) {\n      let xsc = scaleX;\n      if (xsc.auto(self, viaAutoScaleX)) autoScaleX();else _setScale(xScaleKey, xsc.min, xsc.max);\n      shouldSetCursor = shouldSetCursor || cursor.left >= 0;\n      shouldSetLegend = true;\n      commit();\n    }\n  }\n  self.setData = setData;\n  function autoScaleX() {\n    viaAutoScaleX = true;\n    let _min, _max;\n    if (mode == 1) {\n      if (dataLen > 0) {\n        i0 = idxs[0] = 0;\n        i1 = idxs[1] = dataLen - 1;\n        _min = data[0][i0];\n        _max = data[0][i1];\n        if (xScaleDistr == 2) {\n          _min = i0;\n          _max = i1;\n        } else if (_min == _max) {\n          if (xScaleDistr == 3) [_min, _max] = rangeLog(_min, _min, scaleX.log, false);else if (xScaleDistr == 4) [_min, _max] = rangeAsinh(_min, _min, scaleX.log, false);else if (scaleX.time) _max = _min + round(86400 / ms);else [_min, _max] = rangeNum(_min, _max, rangePad, true);\n        }\n      } else {\n        i0 = idxs[0] = _min = null;\n        i1 = idxs[1] = _max = null;\n      }\n    }\n    _setScale(xScaleKey, _min, _max);\n  }\n  let ctxStroke, ctxFill, ctxWidth, ctxDash, ctxJoin, ctxCap, ctxFont, ctxAlign, ctxBaseline;\n  let ctxAlpha;\n  function setCtxStyle(stroke, width, dash, cap, fill, join) {\n    stroke ??= transparent;\n    dash ??= EMPTY_ARR;\n    cap ??= \"butt\"; // (‿|‿)\n    fill ??= transparent;\n    join ??= \"round\";\n    if (stroke != ctxStroke) ctx.strokeStyle = ctxStroke = stroke;\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (width != ctxWidth) ctx.lineWidth = ctxWidth = width;\n    if (join != ctxJoin) ctx.lineJoin = ctxJoin = join;\n    if (cap != ctxCap) ctx.lineCap = ctxCap = cap;\n    if (dash != ctxDash) ctx.setLineDash(ctxDash = dash);\n  }\n  function setFontStyle(font, fill, align, baseline) {\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (font != ctxFont) ctx.font = ctxFont = font;\n    if (align != ctxAlign) ctx.textAlign = ctxAlign = align;\n    if (baseline != ctxBaseline) ctx.textBaseline = ctxBaseline = baseline;\n  }\n  function accScale(wsc, psc, facet, data, sorted = 0) {\n    if (data.length > 0 && wsc.auto(self, viaAutoScaleX) && (psc == null || psc.min == null)) {\n      let _i0 = ifNull(i0, 0);\n      let _i1 = ifNull(i1, data.length - 1);\n\n      // only run getMinMax() for invalidated series data, else reuse\n      let minMax = facet.min == null ? getMinMax(data, _i0, _i1, sorted, wsc.distr == 3) : [facet.min, facet.max];\n\n      // initial min/max\n      wsc.min = min(wsc.min, facet.min = minMax[0]);\n      wsc.max = max(wsc.max, facet.max = minMax[1]);\n    }\n  }\n  const AUTOSCALE = {\n    min: null,\n    max: null\n  };\n  function setScales() {\n    //\tlog(\"setScales()\", arguments);\n\n    // implicitly add auto scales, and unranged scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && (\n      // scales that have never been set (on init)\n      sc.min == null ||\n      // or auto scales when the x scale was explicitly set\n      pendScales[xScaleKey] != null && sc.auto(self, viaAutoScaleX))) {\n        pendScales[k] = AUTOSCALE;\n      }\n    }\n\n    // implicitly add dependent scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && sc.from != null && pendScales[sc.from] != null) pendScales[k] = AUTOSCALE;\n    }\n\n    // explicitly setting the x-scale invalidates everything (acts as redraw)\n    if (pendScales[xScaleKey] != null) resetYSeries(true); // TODO: only reset series on auto scales?\n\n    let wipScales = {};\n    for (let k in pendScales) {\n      let psc = pendScales[k];\n      if (psc != null) {\n        let wsc = wipScales[k] = copy(scales[k], fastIsObj);\n        if (psc.min != null) assign(wsc, psc);else if (k != xScaleKey || mode == 2) {\n          if (dataLen == 0 && wsc.from == null) {\n            let minMax = wsc.range(self, null, null, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n          } else {\n            wsc.min = inf;\n            wsc.max = -inf;\n          }\n        }\n      }\n    }\n    if (dataLen > 0) {\n      // pre-range y-scales from y series' data values\n      series.forEach((s, i) => {\n        if (mode == 1) {\n          let k = s.scale;\n          let psc = pendScales[k];\n          if (psc == null) return;\n          let wsc = wipScales[k];\n          if (i == 0) {\n            let minMax = wsc.range(self, wsc.min, wsc.max, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n            i0 = closestIdx(wsc.min, data[0]);\n            i1 = closestIdx(wsc.max, data[0]);\n\n            // don't try to contract same or adjacent idxs\n            if (i1 - i0 > 1) {\n              // closest indices can be outside of view\n              if (data[0][i0] < wsc.min) i0++;\n              if (data[0][i1] > wsc.max) i1--;\n            }\n            s.min = data0[i0];\n            s.max = data0[i1];\n          } else if (s.show && s.auto) accScale(wsc, psc, s, data[i], s.sorted);\n          s.idxs[0] = i0;\n          s.idxs[1] = i1;\n        } else {\n          if (i > 0) {\n            if (s.show && s.auto) {\n              // TODO: only handles, assumes and requires facets[0] / 'x' scale, and facets[1] / 'y' scale\n              let [xFacet, yFacet] = s.facets;\n              let xScaleKey = xFacet.scale;\n              let yScaleKey = yFacet.scale;\n              let [xData, yData] = data[i];\n              let wscx = wipScales[xScaleKey];\n              let wscy = wipScales[yScaleKey];\n\n              // null can happen when only x is zoomed, but y has static range and doesnt get auto-added to pending\n              wscx != null && accScale(wscx, pendScales[xScaleKey], xFacet, xData, xFacet.sorted);\n              wscy != null && accScale(wscy, pendScales[yScaleKey], yFacet, yData, yFacet.sorted);\n\n              // temp\n              s.min = yFacet.min;\n              s.max = yFacet.max;\n            }\n          }\n        }\n      });\n\n      // range independent scales\n      for (let k in wipScales) {\n        let wsc = wipScales[k];\n        let psc = pendScales[k];\n        if (wsc.from == null && (psc == null || psc.min == null)) {\n          let minMax = wsc.range(self, wsc.min == inf ? null : wsc.min, wsc.max == -inf ? null : wsc.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n\n    // range dependent scales\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      if (wsc.from != null) {\n        let base = wipScales[wsc.from];\n        if (base.min == null) wsc.min = wsc.max = null;else {\n          let minMax = wsc.range(self, base.min, base.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n    let changed = {};\n    let anyChanged = false;\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      let sc = scales[k];\n      if (sc.min != wsc.min || sc.max != wsc.max) {\n        sc.min = wsc.min;\n        sc.max = wsc.max;\n        let distr = sc.distr;\n        sc._min = distr == 3 ? log10(sc.min) : distr == 4 ? asinh(sc.min, sc.asinh) : distr == 100 ? sc.fwd(sc.min) : sc.min;\n        sc._max = distr == 3 ? log10(sc.max) : distr == 4 ? asinh(sc.max, sc.asinh) : distr == 100 ? sc.fwd(sc.max) : sc.max;\n        changed[k] = anyChanged = true;\n      }\n    }\n    if (anyChanged) {\n      // invalidate paths of all series on changed scales\n      series.forEach((s, i) => {\n        if (mode == 2) {\n          if (i > 0 && changed.y) s._paths = null;\n        } else {\n          if (changed[s.scale]) s._paths = null;\n        }\n      });\n      for (let k in changed) {\n        shouldConvergeSize = true;\n        fire(\"setScale\", k);\n      }\n      if (showCursor && cursor.left >= 0) shouldSetCursor = shouldSetLegend = true;\n    }\n    for (let k in pendScales) pendScales[k] = null;\n  }\n\n  // grabs the nearest indices with y data outside of x-scale limits\n  function getOuterIdxs(ydata) {\n    let _i0 = clamp(i0 - 1, 0, dataLen - 1);\n    let _i1 = clamp(i1 + 1, 0, dataLen - 1);\n    while (ydata[_i0] == null && _i0 > 0) _i0--;\n    while (ydata[_i1] == null && _i1 < dataLen - 1) _i1++;\n    return [_i0, _i1];\n  }\n  function drawSeries() {\n    if (dataLen > 0) {\n      let shouldAlpha = series.some(s => s._focus) && ctxAlpha != focus.alpha;\n      if (shouldAlpha) ctx.globalAlpha = ctxAlpha = focus.alpha;\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          cacheStrokeFill(i, false);\n          cacheStrokeFill(i, true);\n          if (s._paths == null) {\n            let _ctxAlpha = ctxAlpha;\n            if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n            let _idxs = mode == 2 ? [0, data[i][0].length - 1] : getOuterIdxs(data[i]);\n            s._paths = s.paths(self, i, _idxs[0], _idxs[1]);\n            if (ctxAlpha != _ctxAlpha) ctx.globalAlpha = ctxAlpha = _ctxAlpha;\n          }\n        }\n      });\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          let _ctxAlpha = ctxAlpha;\n          if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n          s._paths != null && drawPath(i, false);\n          {\n            let _gaps = s._paths != null ? s._paths.gaps : null;\n            let show = s.points.show(self, i, i0, i1, _gaps);\n            let idxs = s.points.filter(self, i, show, _gaps);\n            if (show || idxs) {\n              s.points._paths = s.points.paths(self, i, i0, i1, idxs);\n              drawPath(i, true);\n            }\n          }\n          if (ctxAlpha != _ctxAlpha) ctx.globalAlpha = ctxAlpha = _ctxAlpha;\n          fire(\"drawSeries\", i);\n        }\n      });\n      if (shouldAlpha) ctx.globalAlpha = ctxAlpha = 1;\n    }\n  }\n  function cacheStrokeFill(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    s._stroke = s.stroke(self, si);\n    s._fill = s.fill(self, si);\n  }\n  function drawPath(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    let {\n      stroke,\n      fill,\n      clip: gapsClip,\n      flags,\n      _stroke: strokeStyle = s._stroke,\n      _fill: fillStyle = s._fill,\n      _width: width = s.width\n    } = s._paths;\n    width = roundDec(width * pxRatio, 3);\n    let boundsClip = null;\n    let offset = width % 2 / 2;\n    if (_points && fillStyle == null) fillStyle = width > 0 ? \"#fff\" : strokeStyle;\n    let _pxAlign = s.pxAlign == 1 && offset > 0;\n    _pxAlign && ctx.translate(offset, offset);\n    if (!_points) {\n      let lft = plotLft - width / 2,\n        top = plotTop - width / 2,\n        wid = plotWid + width,\n        hgt = plotHgt + width;\n      boundsClip = new Path2D();\n      boundsClip.rect(lft, top, wid, hgt);\n    }\n\n    // the points pathbuilder's gapsClip is its boundsClip, since points dont need gaps clipping, and bounds depend on point size\n    if (_points) strokeFill(strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, gapsClip);else fillStroke(si, strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, boundsClip, gapsClip);\n    _pxAlign && ctx.translate(-offset, -offset);\n  }\n  function fillStroke(si, strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip) {\n    let didStrokeFill = false;\n\n    // for all bands where this series is the top edge, create upwards clips using the bottom edges\n    // and apply clips + fill with band fill or dfltFill\n    flags != 0 && bands.forEach((b, bi) => {\n      // isUpperEdge?\n      if (b.series[0] == si) {\n        let lowerEdge = series[b.series[1]];\n        let lowerData = data[b.series[1]];\n        let bandClip = (lowerEdge._paths || EMPTY_OBJ).band;\n        if (isArr(bandClip)) bandClip = b.dir == 1 ? bandClip[0] : bandClip[1];\n        let gapsClip2;\n        let _fillStyle = null;\n\n        // hasLowerEdge?\n        if (lowerEdge.show && bandClip && hasData(lowerData, i0, i1)) {\n          _fillStyle = b.fill(self, bi) || fillStyle;\n          gapsClip2 = lowerEdge._paths.clip;\n        } else bandClip = null;\n        strokeFill(strokeStyle, lineWidth, lineDash, lineCap, _fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip);\n        didStrokeFill = true;\n      }\n    });\n    if (!didStrokeFill) strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip);\n  }\n  const CLIP_FILL_STROKE = BAND_CLIP_FILL | BAND_CLIP_STROKE;\n  function strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip) {\n    setCtxStyle(strokeStyle, lineWidth, lineDash, lineCap, fillStyle);\n    if (boundsClip || gapsClip || bandClip) {\n      ctx.save();\n      boundsClip && ctx.clip(boundsClip);\n      gapsClip && ctx.clip(gapsClip);\n    }\n    if (bandClip) {\n      if ((flags & CLIP_FILL_STROKE) == CLIP_FILL_STROKE) {\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_STROKE) {\n        doFill(fillStyle, fillPath);\n        ctx.clip(bandClip);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_FILL) {\n        ctx.save();\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        ctx.restore();\n        doStroke(strokeStyle, strokePath, lineWidth);\n      }\n    } else {\n      doFill(fillStyle, fillPath);\n      doStroke(strokeStyle, strokePath, lineWidth);\n    }\n    if (boundsClip || gapsClip || bandClip) ctx.restore();\n  }\n  function doStroke(strokeStyle, strokePath, lineWidth) {\n    if (lineWidth > 0) {\n      if (strokePath instanceof Map) {\n        strokePath.forEach((strokePath, strokeStyle) => {\n          ctx.strokeStyle = ctxStroke = strokeStyle;\n          ctx.stroke(strokePath);\n        });\n      } else strokePath != null && strokeStyle && ctx.stroke(strokePath);\n    }\n  }\n  function doFill(fillStyle, fillPath) {\n    if (fillPath instanceof Map) {\n      fillPath.forEach((fillPath, fillStyle) => {\n        ctx.fillStyle = ctxFill = fillStyle;\n        ctx.fill(fillPath);\n      });\n    } else fillPath != null && fillStyle && ctx.fill(fillPath);\n  }\n  function getIncrSpace(axisIdx, min, max, fullDim) {\n    let axis = axes[axisIdx];\n    let incrSpace;\n    if (fullDim <= 0) incrSpace = [0, 0];else {\n      let minSpace = axis._space = axis.space(self, axisIdx, min, max, fullDim);\n      let incrs = axis._incrs = axis.incrs(self, axisIdx, min, max, fullDim, minSpace);\n      incrSpace = findIncr(min, max, incrs, fullDim, minSpace);\n    }\n    return axis._found = incrSpace;\n  }\n  function drawOrthoLines(offs, filts, ori, side, pos0, len, width, stroke, dash, cap) {\n    let offset = width % 2 / 2;\n    pxAlign == 1 && ctx.translate(offset, offset);\n    setCtxStyle(stroke, width, dash, cap, stroke);\n    ctx.beginPath();\n    let x0,\n      y0,\n      x1,\n      y1,\n      pos1 = pos0 + (side == 0 || side == 3 ? -len : len);\n    if (ori == 0) {\n      y0 = pos0;\n      y1 = pos1;\n    } else {\n      x0 = pos0;\n      x1 = pos1;\n    }\n    for (let i = 0; i < offs.length; i++) {\n      if (filts[i] != null) {\n        if (ori == 0) x0 = x1 = offs[i];else y0 = y1 = offs[i];\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n      }\n    }\n    ctx.stroke();\n    pxAlign == 1 && ctx.translate(-offset, -offset);\n  }\n  function axesCalc(cycleNum) {\n    //\tlog(\"axesCalc()\", arguments);\n\n    let converged = true;\n    axes.forEach((axis, i) => {\n      if (!axis.show) return;\n      let scale = scales[axis.scale];\n      if (scale.min == null) {\n        if (axis._show) {\n          converged = false;\n          axis._show = false;\n          resetYSeries(false);\n        }\n        return;\n      } else {\n        if (!axis._show) {\n          converged = false;\n          axis._show = true;\n          resetYSeries(false);\n        }\n      }\n      let side = axis.side;\n      let ori = side % 2;\n      let {\n        min,\n        max\n      } = scale; // \t\t// should this toggle them ._show = false\n\n      let [_incr, _space] = getIncrSpace(i, min, max, ori == 0 ? plotWidCss : plotHgtCss);\n      if (_space == 0) return;\n\n      // if we're using index positions, force first tick to match passed index\n      let forceMin = scale.distr == 2;\n      let _splits = axis._splits = axis.splits(self, i, min, max, _incr, _space, forceMin);\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let values = axis._values = axis.values(self, axis.filter(self, splits, i, _space, incr), i, _space, incr);\n\n      // rotating of labels only supported on bottom x axis\n      axis._rotate = side == 2 ? axis.rotate(self, values, i, _space) : 0;\n      let oldSize = axis._size;\n      axis._size = ceil(axis.size(self, values, i, cycleNum));\n      if (oldSize != null && axis._size != oldSize)\n        // ready && ?\n        converged = false;\n    });\n    return converged;\n  }\n  function paddingCalc(cycleNum) {\n    let converged = true;\n    padding.forEach((p, i) => {\n      let _p = p(self, i, sidesWithAxes, cycleNum);\n      if (_p != _padding[i]) converged = false;\n      _padding[i] = _p;\n    });\n    return converged;\n  }\n  function drawAxesGrid() {\n    for (let i = 0; i < axes.length; i++) {\n      let axis = axes[i];\n      if (!axis.show || !axis._show) continue;\n      let side = axis.side;\n      let ori = side % 2;\n      let x, y;\n      let fillStyle = axis.stroke(self, i);\n      let shiftDir = side == 0 || side == 3 ? -1 : 1;\n      let [_incr, _space] = axis._found;\n\n      // axis label\n      if (axis.label != null) {\n        let shiftAmt = axis.labelGap * shiftDir;\n        let baseLpos = round((axis._lpos + shiftAmt) * pxRatio);\n        setFontStyle(axis.labelFont[0], fillStyle, \"center\", side == 2 ? TOP : BOTTOM);\n        ctx.save();\n        if (ori == 1) {\n          x = y = 0;\n          ctx.translate(baseLpos, round(plotTop + plotHgt / 2));\n          ctx.rotate((side == 3 ? -PI : PI) / 2);\n        } else {\n          x = round(plotLft + plotWid / 2);\n          y = baseLpos;\n        }\n        let _label = isFn(axis.label) ? axis.label(self, i, _incr, _space) : axis.label;\n        ctx.fillText(_label, x, y);\n        ctx.restore();\n      }\n      if (_space == 0) continue;\n      let scale = scales[axis.scale];\n      let plotDim = ori == 0 ? plotWid : plotHgt;\n      let plotOff = ori == 0 ? plotLft : plotTop;\n      let _splits = axis._splits;\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let ticks = axis.ticks;\n      let border = axis.border;\n      let _tickSize = ticks.show ? ticks.size : 0;\n      let tickSize = round(_tickSize * pxRatio);\n      let axisGap = round((axis.alignTo == 2 ? axis._size - _tickSize - axis.gap : axis.gap) * pxRatio);\n\n      // rotating of labels only supported on bottom x axis\n      let angle = axis._rotate * -PI / 180;\n      let basePos = pxRound(axis._pos * pxRatio);\n      let shiftAmt = (tickSize + axisGap) * shiftDir;\n      let finalPos = basePos + shiftAmt;\n      y = ori == 0 ? finalPos : 0;\n      x = ori == 1 ? finalPos : 0;\n      let font = axis.font[0];\n      let textAlign = axis.align == 1 ? LEFT : axis.align == 2 ? RIGHT : angle > 0 ? LEFT : angle < 0 ? RIGHT : ori == 0 ? \"center\" : side == 3 ? RIGHT : LEFT;\n      let textBaseline = angle || ori == 1 ? \"middle\" : side == 2 ? TOP : BOTTOM;\n      setFontStyle(font, fillStyle, textAlign, textBaseline);\n      let lineHeight = axis.font[1] * axis.lineGap;\n      let canOffs = _splits.map(val => pxRound(getPos(val, scale, plotDim, plotOff)));\n      let _values = axis._values;\n      for (let i = 0; i < _values.length; i++) {\n        let val = _values[i];\n        if (val != null) {\n          if (ori == 0) x = canOffs[i];else y = canOffs[i];\n          val = \"\" + val;\n          let _parts = val.indexOf(\"\\n\") == -1 ? [val] : val.split(/\\n/gm);\n          for (let j = 0; j < _parts.length; j++) {\n            let text = _parts[j];\n            if (angle) {\n              ctx.save();\n              ctx.translate(x, y + j * lineHeight); // can this be replaced with position math?\n              ctx.rotate(angle); // can this be done once?\n              ctx.fillText(text, 0, 0);\n              ctx.restore();\n            } else ctx.fillText(text, x, y + j * lineHeight);\n          }\n        }\n      }\n\n      // ticks\n      if (ticks.show) {\n        drawOrthoLines(canOffs, ticks.filter(self, splits, i, _space, incr), ori, side, basePos, tickSize, roundDec(ticks.width * pxRatio, 3), ticks.stroke(self, i), ticks.dash, ticks.cap);\n      }\n\n      // grid\n      let grid = axis.grid;\n      if (grid.show) {\n        drawOrthoLines(canOffs, grid.filter(self, splits, i, _space, incr), ori, ori == 0 ? 2 : 1, ori == 0 ? plotTop : plotLft, ori == 0 ? plotHgt : plotWid, roundDec(grid.width * pxRatio, 3), grid.stroke(self, i), grid.dash, grid.cap);\n      }\n      if (border.show) {\n        drawOrthoLines([basePos], [1], ori == 0 ? 1 : 0, ori == 0 ? 1 : 2, ori == 1 ? plotTop : plotLft, ori == 1 ? plotHgt : plotWid, roundDec(border.width * pxRatio, 3), border.stroke(self, i), border.dash, border.cap);\n      }\n    }\n    fire(\"drawAxes\");\n  }\n  function resetYSeries(minMax) {\n    //\tlog(\"resetYSeries()\", arguments);\n\n    series.forEach((s, i) => {\n      if (i > 0) {\n        s._paths = null;\n        if (minMax) {\n          if (mode == 1) {\n            s.min = null;\n            s.max = null;\n          } else {\n            s.facets.forEach(f => {\n              f.min = null;\n              f.max = null;\n            });\n          }\n        }\n      }\n    });\n  }\n  let queuedCommit = false;\n  let deferHooks = false;\n  let hooksQueue = [];\n  function flushHooks() {\n    deferHooks = false;\n    for (let i = 0; i < hooksQueue.length; i++) fire(...hooksQueue[i]);\n    hooksQueue.length = 0;\n  }\n  function commit() {\n    if (!queuedCommit) {\n      microTask(_commit);\n      queuedCommit = true;\n    }\n  }\n\n  // manual batching (aka immediate mode), skips microtask queue\n  function batch(fn, _deferHooks = false) {\n    queuedCommit = true;\n    deferHooks = _deferHooks;\n    fn(self);\n    _commit();\n    if (_deferHooks && hooksQueue.length > 0) queueMicrotask(flushHooks);\n  }\n  self.batch = batch;\n  function _commit() {\n    //\tlog(\"_commit()\", arguments);\n\n    if (shouldSetScales) {\n      setScales();\n      shouldSetScales = false;\n    }\n    if (shouldConvergeSize) {\n      convergeSize();\n      shouldConvergeSize = false;\n    }\n    if (shouldSetSize) {\n      setStylePx(under, LEFT, plotLftCss);\n      setStylePx(under, TOP, plotTopCss);\n      setStylePx(under, WIDTH, plotWidCss);\n      setStylePx(under, HEIGHT, plotHgtCss);\n      setStylePx(over, LEFT, plotLftCss);\n      setStylePx(over, TOP, plotTopCss);\n      setStylePx(over, WIDTH, plotWidCss);\n      setStylePx(over, HEIGHT, plotHgtCss);\n      setStylePx(wrap, WIDTH, fullWidCss);\n      setStylePx(wrap, HEIGHT, fullHgtCss);\n\n      // NOTE: mutating this during print preview in Chrome forces transparent\n      // canvas pixels to white, even when followed up with clearRect() below\n      can.width = round(fullWidCss * pxRatio);\n      can.height = round(fullHgtCss * pxRatio);\n      axes.forEach(({\n        _el,\n        _show,\n        _size,\n        _pos,\n        side\n      }) => {\n        if (_el != null) {\n          if (_show) {\n            let posOffset = side === 3 || side === 0 ? _size : 0;\n            let isVt = side % 2 == 1;\n            setStylePx(_el, isVt ? \"left\" : \"top\", _pos - posOffset);\n            setStylePx(_el, isVt ? \"width\" : \"height\", _size);\n            setStylePx(_el, isVt ? \"top\" : \"left\", isVt ? plotTopCss : plotLftCss);\n            setStylePx(_el, isVt ? \"height\" : \"width\", isVt ? plotHgtCss : plotWidCss);\n            remClass(_el, OFF);\n          } else addClass(_el, OFF);\n        }\n      });\n\n      // invalidate ctx style cache\n      ctxStroke = ctxFill = ctxWidth = ctxJoin = ctxCap = ctxFont = ctxAlign = ctxBaseline = ctxDash = null;\n      ctxAlpha = 1;\n      syncRect(true);\n      if (plotLftCss != _plotLftCss || plotTopCss != _plotTopCss || plotWidCss != _plotWidCss || plotHgtCss != _plotHgtCss) {\n        resetYSeries(false);\n        let pctWid = plotWidCss / _plotWidCss;\n        let pctHgt = plotHgtCss / _plotHgtCss;\n        if (showCursor && !shouldSetCursor && cursor.left >= 0) {\n          cursor.left *= pctWid;\n          cursor.top *= pctHgt;\n          vCursor && elTrans(vCursor, round(cursor.left), 0, plotWidCss, plotHgtCss);\n          hCursor && elTrans(hCursor, 0, round(cursor.top), plotWidCss, plotHgtCss);\n          for (let i = 0; i < cursorPts.length; i++) {\n            let pt = cursorPts[i];\n            if (pt != null) {\n              cursorPtsLft[i] *= pctWid;\n              cursorPtsTop[i] *= pctHgt;\n              elTrans(pt, ceil(cursorPtsLft[i]), ceil(cursorPtsTop[i]), plotWidCss, plotHgtCss);\n            }\n          }\n        }\n        if (select.show && !shouldSetSelect && select.left >= 0 && select.width > 0) {\n          select.left *= pctWid;\n          select.width *= pctWid;\n          select.top *= pctHgt;\n          select.height *= pctHgt;\n          for (let prop in _hideProps) setStylePx(selectDiv, prop, select[prop]);\n        }\n        _plotLftCss = plotLftCss;\n        _plotTopCss = plotTopCss;\n        _plotWidCss = plotWidCss;\n        _plotHgtCss = plotHgtCss;\n      }\n      fire(\"setSize\");\n      shouldSetSize = false;\n    }\n    if (fullWidCss > 0 && fullHgtCss > 0) {\n      ctx.clearRect(0, 0, can.width, can.height);\n      fire(\"drawClear\");\n      drawOrder.forEach(fn => fn());\n      fire(\"draw\");\n    }\n    if (select.show && shouldSetSelect) {\n      setSelect(select);\n      shouldSetSelect = false;\n    }\n    if (showCursor && shouldSetCursor) {\n      updateCursor(null, true, false);\n      shouldSetCursor = false;\n    }\n    if (legend.show && legend.live && shouldSetLegend) {\n      setLegend();\n      shouldSetLegend = false; // redundant currently\n    }\n    if (!ready) {\n      ready = true;\n      self.status = 1;\n      fire(\"ready\");\n    }\n    viaAutoScaleX = false;\n    queuedCommit = false;\n  }\n  self.redraw = (rebuildPaths, recalcAxes) => {\n    shouldConvergeSize = recalcAxes || false;\n    if (rebuildPaths !== false) _setScale(xScaleKey, scaleX.min, scaleX.max);else commit();\n  };\n\n  // redraw() => setScale('x', scales.x.min, scales.x.max);\n\n  // explicit, never re-ranged (is this actually true? for x and y)\n  function setScale(key, opts) {\n    let sc = scales[key];\n    if (sc.from == null) {\n      if (dataLen == 0) {\n        let minMax = sc.range(self, opts.min, opts.max, key);\n        opts.min = minMax[0];\n        opts.max = minMax[1];\n      }\n      if (opts.min > opts.max) {\n        let _min = opts.min;\n        opts.min = opts.max;\n        opts.max = _min;\n      }\n      if (dataLen > 1 && opts.min != null && opts.max != null && opts.max - opts.min < 1e-16) return;\n      if (key == xScaleKey) {\n        if (sc.distr == 2 && dataLen > 0) {\n          opts.min = closestIdx(opts.min, data[0]);\n          opts.max = closestIdx(opts.max, data[0]);\n          if (opts.min == opts.max) opts.max++;\n        }\n      }\n\n      //\tlog(\"setScale()\", arguments);\n\n      pendScales[key] = opts;\n      shouldSetScales = true;\n      commit();\n    }\n  }\n  self.setScale = setScale;\n\n  //\tINTERACTION\n\n  let xCursor;\n  let yCursor;\n  let vCursor;\n  let hCursor;\n\n  // starting position before cursor.move\n  let rawMouseLeft0;\n  let rawMouseTop0;\n\n  // starting position\n  let mouseLeft0;\n  let mouseTop0;\n\n  // current position before cursor.move\n  let rawMouseLeft1;\n  let rawMouseTop1;\n\n  // current position\n  let mouseLeft1;\n  let mouseTop1;\n  let dragging = false;\n  const drag = cursor.drag;\n  let dragX = drag.x;\n  let dragY = drag.y;\n  if (showCursor) {\n    if (cursor.x) xCursor = placeDiv(CURSOR_X, over);\n    if (cursor.y) yCursor = placeDiv(CURSOR_Y, over);\n    if (scaleX.ori == 0) {\n      vCursor = xCursor;\n      hCursor = yCursor;\n    } else {\n      vCursor = yCursor;\n      hCursor = xCursor;\n    }\n    mouseLeft1 = cursor.left;\n    mouseTop1 = cursor.top;\n  }\n  const select = self.select = assign({\n    show: true,\n    over: true,\n    left: 0,\n    width: 0,\n    top: 0,\n    height: 0\n  }, opts.select);\n  const selectDiv = select.show ? placeDiv(SELECT, select.over ? over : under) : null;\n  function setSelect(opts, _fire) {\n    if (select.show) {\n      for (let prop in opts) {\n        select[prop] = opts[prop];\n        if (prop in _hideProps) setStylePx(selectDiv, prop, opts[prop]);\n      }\n      _fire !== false && fire(\"setSelect\");\n    }\n  }\n  self.setSelect = setSelect;\n  function toggleDOM(i) {\n    let s = series[i];\n    if (s.show) showLegend && remClass(legendRows[i], OFF);else {\n      showLegend && addClass(legendRows[i], OFF);\n      if (showCursor) {\n        let pt = cursorOnePt ? cursorPts[0] : cursorPts[i];\n        pt != null && elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n      }\n    }\n  }\n  function _setScale(key, min, max) {\n    setScale(key, {\n      min,\n      max\n    });\n  }\n  function setSeries(i, opts, _fire, _pub) {\n    //\tlog(\"setSeries()\", arguments);\n\n    if (opts.focus != null) setFocus(i);\n    if (opts.show != null) {\n      series.forEach((s, si) => {\n        if (si > 0 && (i == si || i == null)) {\n          s.show = opts.show;\n          toggleDOM(si);\n          if (mode == 2) {\n            _setScale(s.facets[0].scale, null, null);\n            _setScale(s.facets[1].scale, null, null);\n          } else _setScale(s.scale, null, null);\n          commit();\n        }\n      });\n    }\n    _fire !== false && fire(\"setSeries\", i, opts);\n    _pub && pubSync(\"setSeries\", self, i, opts);\n  }\n  self.setSeries = setSeries;\n  function setBand(bi, opts) {\n    assign(bands[bi], opts);\n  }\n  function addBand(opts, bi) {\n    opts.fill = fnOrSelf(opts.fill || null);\n    opts.dir = ifNull(opts.dir, -1);\n    bi = bi == null ? bands.length : bi;\n    bands.splice(bi, 0, opts);\n  }\n  function delBand(bi) {\n    if (bi == null) bands.length = 0;else bands.splice(bi, 1);\n  }\n  self.addBand = addBand;\n  self.setBand = setBand;\n  self.delBand = delBand;\n  function setAlpha(i, value) {\n    series[i].alpha = value;\n    if (showCursor && cursorPts[i] != null) cursorPts[i].style.opacity = value;\n    if (showLegend && legendRows[i]) legendRows[i].style.opacity = value;\n  }\n\n  // y-distance\n  let closestDist;\n  let closestSeries;\n  let focusedSeries;\n  const FOCUS_TRUE = {\n    focus: true\n  };\n  function setFocus(i) {\n    if (i != focusedSeries) {\n      //\tlog(\"setFocus()\", arguments);\n\n      let allFocused = i == null;\n      let _setAlpha = focus.alpha != 1;\n      series.forEach((s, i2) => {\n        if (mode == 1 || i2 > 0) {\n          let isFocused = allFocused || i2 == 0 || i2 == i;\n          s._focus = allFocused ? null : isFocused;\n          _setAlpha && setAlpha(i2, isFocused ? 1 : focus.alpha);\n        }\n      });\n      focusedSeries = i;\n      _setAlpha && commit();\n    }\n  }\n  if (showLegend && cursorFocus) {\n    onMouse(mouseleave, legendTable, e => {\n      if (cursor._lock) return;\n      setCursorEvent(e);\n      if (focusedSeries != null) setSeries(null, FOCUS_TRUE, true, syncOpts.setSeries);\n    });\n  }\n  function posToVal(pos, scale, can) {\n    let sc = scales[scale];\n    if (can) pos = pos / pxRatio - (sc.ori == 1 ? plotTopCss : plotLftCss);\n    let dim = plotWidCss;\n    if (sc.ori == 1) {\n      dim = plotHgtCss;\n      pos = dim - pos;\n    }\n    if (sc.dir == -1) pos = dim - pos;\n    let _min = sc._min,\n      _max = sc._max,\n      pct = pos / dim;\n    let sv = _min + (_max - _min) * pct;\n    let distr = sc.distr;\n    return distr == 3 ? pow(10, sv) : distr == 4 ? sinh(sv, sc.asinh) : distr == 100 ? sc.bwd(sv) : sv;\n  }\n  function closestIdxFromXpos(pos, can) {\n    let v = posToVal(pos, xScaleKey, can);\n    return closestIdx(v, data[0], i0, i1);\n  }\n  self.valToIdx = val => closestIdx(val, data[0]);\n  self.posToIdx = closestIdxFromXpos;\n  self.posToVal = posToVal;\n  self.valToPos = (val, scale, can) => scales[scale].ori == 0 ? getHPos(val, scales[scale], can ? plotWid : plotWidCss, can ? plotLft : 0) : getVPos(val, scales[scale], can ? plotHgt : plotHgtCss, can ? plotTop : 0);\n  self.setCursor = (opts, _fire, _pub) => {\n    mouseLeft1 = opts.left;\n    mouseTop1 = opts.top;\n    //\tassign(cursor, opts);\n    updateCursor(null, _fire, _pub);\n  };\n  function setSelH(off, dim) {\n    setStylePx(selectDiv, LEFT, select.left = off);\n    setStylePx(selectDiv, WIDTH, select.width = dim);\n  }\n  function setSelV(off, dim) {\n    setStylePx(selectDiv, TOP, select.top = off);\n    setStylePx(selectDiv, HEIGHT, select.height = dim);\n  }\n  let setSelX = scaleX.ori == 0 ? setSelH : setSelV;\n  let setSelY = scaleX.ori == 1 ? setSelH : setSelV;\n  function syncLegend() {\n    if (showLegend && legend.live) {\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        if (i == 0 && multiValLegend) continue;\n        let vals = legend.values[i];\n        let j = 0;\n        for (let k in vals) legendCells[i][j++].firstChild.nodeValue = vals[k];\n      }\n    }\n  }\n  function setLegend(opts, _fire) {\n    if (opts != null) {\n      if (opts.idxs) {\n        opts.idxs.forEach((didx, sidx) => {\n          activeIdxs[sidx] = didx;\n        });\n      } else if (!isUndef(opts.idx)) activeIdxs.fill(opts.idx);\n      legend.idx = activeIdxs[0];\n    }\n    if (showLegend && legend.live) {\n      for (let sidx = 0; sidx < series.length; sidx++) {\n        if (sidx > 0 || mode == 1 && !multiValLegend) setLegendValues(sidx, activeIdxs[sidx]);\n      }\n      syncLegend();\n    }\n    shouldSetLegend = false;\n    _fire !== false && fire(\"setLegend\");\n  }\n  self.setLegend = setLegend;\n  function setLegendValues(sidx, idx) {\n    let s = series[sidx];\n    let src = sidx == 0 && xScaleDistr == 2 ? data0 : data[sidx];\n    let val;\n    if (multiValLegend) val = s.values(self, sidx, idx) ?? NULL_LEGEND_VALUES;else {\n      val = s.value(self, idx == null ? null : src[idx], sidx, idx);\n      val = val == null ? NULL_LEGEND_VALUES : {\n        _: val\n      };\n    }\n    legend.values[sidx] = val;\n  }\n  function updateCursor(src, _fire, _pub) {\n    //\tts == null && log(\"updateCursor()\", arguments);\n\n    rawMouseLeft1 = mouseLeft1;\n    rawMouseTop1 = mouseTop1;\n    [mouseLeft1, mouseTop1] = cursor.move(self, mouseLeft1, mouseTop1);\n    cursor.left = mouseLeft1;\n    cursor.top = mouseTop1;\n    if (showCursor) {\n      vCursor && elTrans(vCursor, round(mouseLeft1), 0, plotWidCss, plotHgtCss);\n      hCursor && elTrans(hCursor, 0, round(mouseTop1), plotWidCss, plotHgtCss);\n    }\n    let idx;\n\n    // when zooming to an x scale range between datapoints the binary search\n    // for nearest min/max indices results in this condition. cheap hack :D\n    let noDataInRange = i0 > i1; // works for mode 1 only\n\n    closestDist = inf;\n    closestSeries = null;\n\n    // TODO: extract\n    let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n    let yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss;\n\n    // if cursor hidden, hide points & clear legend vals\n    if (mouseLeft1 < 0 || dataLen == 0 || noDataInRange) {\n      idx = cursor.idx = null;\n      for (let i = 0; i < series.length; i++) {\n        let pt = cursorPts[i];\n        pt != null && elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n      }\n      if (cursorFocus) setSeries(null, FOCUS_TRUE, true, src == null && syncOpts.setSeries);\n      if (legend.live) {\n        activeIdxs.fill(idx);\n        shouldSetLegend = true;\n      }\n    } else {\n      //\tlet pctY = 1 - (y / rect.height);\n\n      let mouseXPos, valAtPosX, xPos;\n      if (mode == 1) {\n        mouseXPos = scaleX.ori == 0 ? mouseLeft1 : mouseTop1;\n        valAtPosX = posToVal(mouseXPos, xScaleKey);\n        idx = cursor.idx = closestIdx(valAtPosX, data[0], i0, i1);\n        xPos = valToPosX(data[0][idx], scaleX, xDim, 0);\n      }\n\n      // closest pt values\n      let _ptLft = -10;\n      let _ptTop = -10;\n      let _ptWid = 0;\n      let _ptHgt = 0;\n      let _centered = true;\n      let _ptFill = '';\n      let _ptStroke = '';\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        let s = series[i];\n        let idx1 = activeIdxs[i];\n        let yVal1 = idx1 == null ? null : mode == 1 ? data[i][idx1] : data[i][1][idx1];\n        let idx2 = cursor.dataIdx(self, i, idx, valAtPosX);\n        let yVal2 = idx2 == null ? null : mode == 1 ? data[i][idx2] : data[i][1][idx2];\n        shouldSetLegend = shouldSetLegend || yVal2 != yVal1 || idx2 != idx1;\n        activeIdxs[i] = idx2;\n        if (i > 0 && s.show) {\n          let xPos2 = idx2 == null ? -10 : idx2 == idx ? xPos : valToPosX(mode == 1 ? data[0][idx2] : data[i][0][idx2], scaleX, xDim, 0);\n\n          // this doesnt really work for state timeline, heatmap, status history (where the value maps to color, not y coords)\n          let yPos = yVal2 == null ? -10 : valToPosY(yVal2, mode == 1 ? scales[s.scale] : scales[s.facets[1].scale], yDim, 0);\n          if (cursorFocus && yVal2 != null) {\n            let mouseYPos = scaleX.ori == 1 ? mouseLeft1 : mouseTop1;\n            let dist = abs(focus.dist(self, i, idx2, yPos, mouseYPos));\n            if (dist < closestDist) {\n              let bias = focus.bias;\n              if (bias != 0) {\n                let mouseYVal = posToVal(mouseYPos, s.scale);\n                let seriesYValSign = yVal2 >= 0 ? 1 : -1;\n                let mouseYValSign = mouseYVal >= 0 ? 1 : -1;\n\n                // with a focus bias, we will never cross zero when prox testing\n                // it's either closest towards zero, or closest away from zero\n                if (mouseYValSign == seriesYValSign && (mouseYValSign == 1 ? bias == 1 ? yVal2 >= mouseYVal : yVal2 <= mouseYVal :\n                // >= 0\n                bias == 1 ? yVal2 <= mouseYVal : yVal2 >= mouseYVal //  < 0\n                )) {\n                  closestDist = dist;\n                  closestSeries = i;\n                }\n              } else {\n                closestDist = dist;\n                closestSeries = i;\n              }\n            }\n          }\n          if (shouldSetLegend || cursorOnePt) {\n            let hPos, vPos;\n            if (scaleX.ori == 0) {\n              hPos = xPos2;\n              vPos = yPos;\n            } else {\n              hPos = yPos;\n              vPos = xPos2;\n            }\n            let ptWid,\n              ptHgt,\n              ptLft,\n              ptTop,\n              ptStroke,\n              ptFill,\n              centered = true,\n              getBBox = points.bbox;\n            if (getBBox != null) {\n              centered = false;\n              let bbox = getBBox(self, i);\n              ptLft = bbox.left;\n              ptTop = bbox.top;\n              ptWid = bbox.width;\n              ptHgt = bbox.height;\n            } else {\n              ptLft = hPos;\n              ptTop = vPos;\n              ptWid = ptHgt = points.size(self, i);\n            }\n            ptFill = points.fill(self, i);\n            ptStroke = points.stroke(self, i);\n            if (cursorOnePt) {\n              if (i == closestSeries && closestDist <= focus.prox) {\n                _ptLft = ptLft;\n                _ptTop = ptTop;\n                _ptWid = ptWid;\n                _ptHgt = ptHgt;\n                _centered = centered;\n                _ptFill = ptFill;\n                _ptStroke = ptStroke;\n              }\n            } else {\n              let pt = cursorPts[i];\n              if (pt != null) {\n                cursorPtsLft[i] = ptLft;\n                cursorPtsTop[i] = ptTop;\n                elSize(pt, ptWid, ptHgt, centered);\n                elColor(pt, ptFill, ptStroke);\n                elTrans(pt, ceil(ptLft), ceil(ptTop), plotWidCss, plotHgtCss);\n              }\n            }\n          }\n        }\n      }\n\n      // if only using single hover point (at cursorPts[0])\n      // we have trigger styling at last visible series (once closestSeries is settled)\n      if (cursorOnePt) {\n        // some of this logic is similar to series focus below, since it matches the behavior by design\n\n        let p = focus.prox;\n        let focusChanged = focusedSeries == null ? closestDist <= p : closestDist > p || closestSeries != focusedSeries;\n        if (shouldSetLegend || focusChanged) {\n          let pt = cursorPts[0];\n          if (pt != null) {\n            cursorPtsLft[0] = _ptLft;\n            cursorPtsTop[0] = _ptTop;\n            elSize(pt, _ptWid, _ptHgt, _centered);\n            elColor(pt, _ptFill, _ptStroke);\n            elTrans(pt, ceil(_ptLft), ceil(_ptTop), plotWidCss, plotHgtCss);\n          }\n        }\n      }\n    }\n\n    // nit: cursor.drag.setSelect is assumed always true\n    if (select.show && dragging) {\n      if (src != null) {\n        let [xKey, yKey] = syncOpts.scales;\n        let [matchXKeys, matchYKeys] = syncOpts.match;\n        let [xKeySrc, yKeySrc] = src.cursor.sync.scales;\n\n        // match the dragX/dragY implicitness/explicitness of src\n        let sdrag = src.cursor.drag;\n        dragX = sdrag._x;\n        dragY = sdrag._y;\n        if (dragX || dragY) {\n          let {\n            left,\n            top,\n            width,\n            height\n          } = src.select;\n          let sori = src.scales[xKeySrc].ori;\n          let sPosToVal = src.posToVal;\n          let sOff, sDim, sc, a, b;\n          let matchingX = xKey != null && matchXKeys(xKey, xKeySrc);\n          let matchingY = yKey != null && matchYKeys(yKey, yKeySrc);\n          if (matchingX && dragX) {\n            if (sori == 0) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[xKey];\n            a = valToPosX(sPosToVal(sOff, xKeySrc), sc, xDim, 0);\n            b = valToPosX(sPosToVal(sOff + sDim, xKeySrc), sc, xDim, 0);\n            setSelX(min(a, b), abs(b - a));\n          } else setSelX(0, xDim);\n          if (matchingY && dragY) {\n            if (sori == 1) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[yKey];\n            a = valToPosY(sPosToVal(sOff, yKeySrc), sc, yDim, 0);\n            b = valToPosY(sPosToVal(sOff + sDim, yKeySrc), sc, yDim, 0);\n            setSelY(min(a, b), abs(b - a));\n          } else setSelY(0, yDim);\n        } else hideSelect();\n      } else {\n        let rawDX = abs(rawMouseLeft1 - rawMouseLeft0);\n        let rawDY = abs(rawMouseTop1 - rawMouseTop0);\n        if (scaleX.ori == 1) {\n          let _rawDX = rawDX;\n          rawDX = rawDY;\n          rawDY = _rawDX;\n        }\n        dragX = drag.x && rawDX >= drag.dist;\n        dragY = drag.y && rawDY >= drag.dist;\n        let uni = drag.uni;\n        if (uni != null) {\n          // only calc drag status if they pass the dist thresh\n          if (dragX && dragY) {\n            dragX = rawDX >= uni;\n            dragY = rawDY >= uni;\n\n            // force unidirectionality when both are under uni limit\n            if (!dragX && !dragY) {\n              if (rawDY > rawDX) dragY = true;else dragX = true;\n            }\n          }\n        } else if (drag.x && drag.y && (dragX || dragY))\n          // if omni with no uni then both dragX / dragY should be true if either is true\n          dragX = dragY = true;\n        let p0, p1;\n        if (dragX) {\n          if (scaleX.ori == 0) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelX(min(p0, p1), abs(p1 - p0));\n          if (!dragY) setSelY(0, yDim);\n        }\n        if (dragY) {\n          if (scaleX.ori == 1) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelY(min(p0, p1), abs(p1 - p0));\n          if (!dragX) setSelX(0, xDim);\n        }\n\n        // the drag didn't pass the dist requirement\n        if (!dragX && !dragY) {\n          setSelX(0, 0);\n          setSelY(0, 0);\n        }\n      }\n    }\n    drag._x = dragX;\n    drag._y = dragY;\n    if (src == null) {\n      if (_pub) {\n        if (syncKey != null) {\n          let [xSyncKey, ySyncKey] = syncOpts.scales;\n          syncOpts.values[0] = xSyncKey != null ? posToVal(scaleX.ori == 0 ? mouseLeft1 : mouseTop1, xSyncKey) : null;\n          syncOpts.values[1] = ySyncKey != null ? posToVal(scaleX.ori == 1 ? mouseLeft1 : mouseTop1, ySyncKey) : null;\n        }\n        pubSync(mousemove, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, idx);\n      }\n      if (cursorFocus) {\n        let shouldPub = _pub && syncOpts.setSeries;\n        let p = focus.prox;\n        if (focusedSeries == null) {\n          if (closestDist <= p) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        } else {\n          if (closestDist > p) setSeries(null, FOCUS_TRUE, true, shouldPub);else if (closestSeries != focusedSeries) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        }\n      }\n    }\n    if (shouldSetLegend) {\n      legend.idx = idx;\n      setLegend();\n    }\n    _fire !== false && fire(\"setCursor\");\n  }\n  let rect = null;\n  Object.defineProperty(self, 'rect', {\n    get() {\n      if (rect == null) syncRect(false);\n      return rect;\n    }\n  });\n  function syncRect(defer = false) {\n    if (defer) rect = null;else {\n      rect = over.getBoundingClientRect();\n      fire(\"syncRect\", rect);\n    }\n  }\n  function mouseMove(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n\n    // Chrome on Windows has a bug which triggers a stray mousemove event after an initial mousedown event\n    // when clicking into a plot as part of re-focusing the browser window.\n    // we gotta ignore it to avoid triggering a phantom drag / setSelect\n    // However, on touch-only devices Chrome-based browsers trigger a 0-distance mousemove before mousedown\n    // so we don't ignore it when mousedown has set the dragging flag\n    if (dragging && e != null && e.movementX == 0 && e.movementY == 0) return;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, e != null);\n    if (e != null) updateCursor(null, true, true);else updateCursor(src, true, false);\n  }\n  function cacheMouse(e, src, _l, _t, _w, _h, _i, initial, snap) {\n    if (rect == null) syncRect(false);\n    setCursorEvent(e);\n    if (e != null) {\n      _l = e.clientX - rect.left;\n      _t = e.clientY - rect.top;\n    } else {\n      if (_l < 0 || _t < 0) {\n        mouseLeft1 = -10;\n        mouseTop1 = -10;\n        return;\n      }\n      let [xKey, yKey] = syncOpts.scales;\n      let syncOptsSrc = src.cursor.sync;\n      let [xValSrc, yValSrc] = syncOptsSrc.values;\n      let [xKeySrc, yKeySrc] = syncOptsSrc.scales;\n      let [matchXKeys, matchYKeys] = syncOpts.match;\n      let rotSrc = src.axes[0].side % 2 == 1;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss,\n        yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss,\n        _xDim = rotSrc ? _h : _w,\n        _yDim = rotSrc ? _w : _h,\n        _xPos = rotSrc ? _t : _l,\n        _yPos = rotSrc ? _l : _t;\n      if (xKeySrc != null) _l = matchXKeys(xKey, xKeySrc) ? getPos(xValSrc, scales[xKey], xDim, 0) : -10;else _l = xDim * (_xPos / _xDim);\n      if (yKeySrc != null) _t = matchYKeys(yKey, yKeySrc) ? getPos(yValSrc, scales[yKey], yDim, 0) : -10;else _t = yDim * (_yPos / _yDim);\n      if (scaleX.ori == 1) {\n        let __l = _l;\n        _l = _t;\n        _t = __l;\n      }\n    }\n    if (snap && (src == null || src.cursor.event.type == mousemove)) {\n      if (_l <= 1 || _l >= plotWidCss - 1) _l = incrRound(_l, plotWidCss);\n      if (_t <= 1 || _t >= plotHgtCss - 1) _t = incrRound(_t, plotHgtCss);\n    }\n    if (initial) {\n      rawMouseLeft0 = _l;\n      rawMouseTop0 = _t;\n      [mouseLeft0, mouseTop0] = cursor.move(self, _l, _t);\n    } else {\n      mouseLeft1 = _l;\n      mouseTop1 = _t;\n    }\n  }\n  const _hideProps = {\n    width: 0,\n    height: 0,\n    left: 0,\n    top: 0\n  };\n  function hideSelect() {\n    setSelect(_hideProps, false);\n  }\n  let downSelectLeft;\n  let downSelectTop;\n  let downSelectWidth;\n  let downSelectHeight;\n  function mouseDown(e, src, _l, _t, _w, _h, _i) {\n    dragging = true;\n    dragX = dragY = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, true, false);\n    if (e != null) {\n      onMouse(mouseup, doc, mouseUp, false);\n      pubSync(mousedown, self, mouseLeft0, mouseTop0, plotWidCss, plotHgtCss, null);\n    }\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    downSelectLeft = left;\n    downSelectTop = top;\n    downSelectWidth = width;\n    downSelectHeight = height;\n\n    //\thideSelect();\n  }\n  function mouseUp(e, src, _l, _t, _w, _h, _i) {\n    dragging = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, true);\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    let hasSelect = width > 0 || height > 0;\n    let chgSelect = downSelectLeft != left || downSelectTop != top || downSelectWidth != width || downSelectHeight != height;\n    hasSelect && chgSelect && setSelect(select);\n    if (drag.setScale && hasSelect && chgSelect) {\n      //\tif (syncKey != null) {\n      //\t\tdragX = drag.x;\n      //\t\tdragY = drag.y;\n      //\t}\n\n      let xOff = left,\n        xDim = width,\n        yOff = top,\n        yDim = height;\n      if (scaleX.ori == 1) {\n        xOff = top, xDim = height, yOff = left, yDim = width;\n      }\n      if (dragX) {\n        _setScale(xScaleKey, posToVal(xOff, xScaleKey), posToVal(xOff + xDim, xScaleKey));\n      }\n      if (dragY) {\n        for (let k in scales) {\n          let sc = scales[k];\n          if (k != xScaleKey && sc.from == null && sc.min != inf) {\n            _setScale(k, posToVal(yOff + yDim, k), posToVal(yOff, k));\n          }\n        }\n      }\n      hideSelect();\n    } else if (cursor.lock) {\n      cursor._lock = !cursor._lock;\n      updateCursor(src, true, e != null);\n    }\n    if (e != null) {\n      offMouse(mouseup, doc);\n      pubSync(mouseup, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n    }\n  }\n  function mouseLeave(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    let _dragging = dragging;\n    if (dragging) {\n      // handle case when mousemove aren't fired all the way to edges by browser\n      let snapH = true;\n      let snapV = true;\n      let snapProx = 10;\n      let dragH, dragV;\n      if (scaleX.ori == 0) {\n        dragH = dragX;\n        dragV = dragY;\n      } else {\n        dragH = dragY;\n        dragV = dragX;\n      }\n      if (dragH && dragV) {\n        // maybe omni corner snap\n        snapH = mouseLeft1 <= snapProx || mouseLeft1 >= plotWidCss - snapProx;\n        snapV = mouseTop1 <= snapProx || mouseTop1 >= plotHgtCss - snapProx;\n      }\n      if (dragH && snapH) mouseLeft1 = mouseLeft1 < mouseLeft0 ? 0 : plotWidCss;\n      if (dragV && snapV) mouseTop1 = mouseTop1 < mouseTop0 ? 0 : plotHgtCss;\n      updateCursor(null, true, true);\n      dragging = false;\n    }\n    mouseLeft1 = -10;\n    mouseTop1 = -10;\n    activeIdxs.fill(null);\n\n    // passing a non-null timestamp to force sync/mousemove event\n    updateCursor(null, true, true);\n    if (_dragging) dragging = _dragging;\n  }\n  function dblClick(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    autoScaleX();\n    hideSelect();\n    if (e != null) pubSync(dblclick, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n  }\n  function syncPxRatio() {\n    axes.forEach(syncFontSize);\n    _setSize(self.width, self.height, true);\n  }\n  on(dppxchange, win, syncPxRatio);\n\n  // internal pub/sub\n  const events = {};\n  events.mousedown = mouseDown;\n  events.mousemove = mouseMove;\n  events.mouseup = mouseUp;\n  events.dblclick = dblClick;\n  events[\"setSeries\"] = (e, src, idx, opts) => {\n    let seriesIdxMatcher = syncOpts.match[2];\n    idx = seriesIdxMatcher(self, src, idx);\n    idx != -1 && setSeries(idx, opts, true, false);\n  };\n  if (showCursor) {\n    onMouse(mousedown, over, mouseDown);\n    onMouse(mousemove, over, mouseMove);\n    onMouse(mouseenter, over, e => {\n      setCursorEvent(e);\n      syncRect(false);\n    });\n    onMouse(mouseleave, over, mouseLeave);\n    onMouse(dblclick, over, dblClick);\n    cursorPlots.add(self);\n    self.syncRect = syncRect;\n  }\n\n  // external on/off\n  const hooks = self.hooks = opts.hooks || {};\n  function fire(evName, a1, a2) {\n    if (deferHooks) hooksQueue.push([evName, a1, a2]);else {\n      if (evName in hooks) {\n        hooks[evName].forEach(fn => {\n          fn.call(null, self, a1, a2);\n        });\n      }\n    }\n  }\n  (opts.plugins || []).forEach(p => {\n    for (let evName in p.hooks) hooks[evName] = (hooks[evName] || []).concat(p.hooks[evName]);\n  });\n  const seriesIdxMatcher = (self, src, srcSeriesIdx) => srcSeriesIdx;\n  const syncOpts = assign({\n    key: null,\n    setSeries: false,\n    filters: {\n      pub: retTrue,\n      sub: retTrue\n    },\n    scales: [xScaleKey, series[1] ? series[1].scale : null],\n    match: [retEq, retEq, seriesIdxMatcher],\n    values: [null, null]\n  }, cursor.sync);\n  if (syncOpts.match.length == 2) syncOpts.match.push(seriesIdxMatcher);\n  cursor.sync = syncOpts;\n  const syncKey = syncOpts.key;\n  const sync = _sync(syncKey);\n  function pubSync(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.pub(type, src, x, y, w, h, i)) sync.pub(type, src, x, y, w, h, i);\n  }\n  sync.sub(self);\n  function pub(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.sub(type, src, x, y, w, h, i)) events[type](null, src, x, y, w, h, i);\n  }\n  self.pub = pub;\n  function destroy() {\n    sync.unsub(self);\n    cursorPlots.delete(self);\n    mouseListeners.clear();\n    off(dppxchange, win, syncPxRatio);\n    root.remove();\n    legendTable?.remove(); // in case mounted outside of root\n    fire(\"destroy\");\n  }\n  self.destroy = destroy;\n  function _init() {\n    fire(\"init\", opts, data);\n    setData(data || opts.data, false);\n    if (pendScales[xScaleKey]) setScale(xScaleKey, pendScales[xScaleKey]);else autoScaleX();\n    shouldSetSelect = select.show && (select.width > 0 || select.height > 0);\n    shouldSetCursor = shouldSetLegend = true;\n    _setSize(opts.width, opts.height);\n  }\n  series.forEach(initSeries);\n  axes.forEach(initAxis);\n  if (then) {\n    if (then instanceof HTMLElement) {\n      then.appendChild(root);\n      _init();\n    } else then(self, _init);\n  } else _init();\n  return self;\n}\nuPlot.assign = assign;\nuPlot.fmtNum = fmtNum;\nuPlot.rangeNum = rangeNum;\nuPlot.rangeLog = rangeLog;\nuPlot.rangeAsinh = rangeAsinh;\nuPlot.orient = orient;\nuPlot.pxRatio = pxRatio;\n{\n  uPlot.join = join;\n}\n{\n  uPlot.fmtDate = fmtDate;\n  uPlot.tzDate = tzDate;\n}\nuPlot.sync = _sync;\n{\n  uPlot.addGap = addGap;\n  uPlot.clipGaps = clipGaps;\n  let paths = uPlot.paths = {\n    points\n  };\n  paths.linear = linear;\n  paths.stepped = stepped;\n  paths.bars = bars;\n  paths.spline = monotoneCubic;\n}\nexport { uPlot as default };","import {\n  ChangeDetectionStrategy,\n  Component,\n  DestroyRef,\n  ElementRef,\n  ViewEncapsulation,\n  afterNextRender,\n  effect,\n  inject,\n  input,\n  output,\n} from '@angular/core';\nimport { ScaleRange } from '@app/domain/chart';\nimport { Milliseconds, Seconds, daysToMilliseconds, formatHours } from '@app/domain/date-time';\nimport { AppStore } from '@app/providers/state';\nimport { isNumber } from '@app/utils/assert';\nimport { format } from 'date-fns/format';\nimport { millisecondsToSeconds } from 'date-fns/millisecondsToSeconds';\nimport { secondsToMilliseconds } from 'date-fns/secondsToMilliseconds';\nimport uPlot, { AlignedData, Plugin } from 'uplot';\n\nconst barChartPlugin = (params: { colors: (string | null)[]; minRangeInMs: Milliseconds }): Plugin => {\n  const minRangeInSeconds: Seconds = millisecondsToSeconds(params.minRangeInMs);\n\n  const getVisibleRangeLength = (u: uPlot): number => {\n    const visibleRangeMin = u.scales.x?.min;\n    const visibleRangeMax = u.scales.x?.max;\n    if (visibleRangeMin === undefined || visibleRangeMax === undefined) return Number.POSITIVE_INFINITY;\n    return visibleRangeMax - visibleRangeMin;\n  };\n\n  const drawBarChart: uPlot.Series.Points.Show = (self: uPlot, seriesIndex: number, i0: number, i1: number) => {\n    let { ctx } = self;\n    let scale = self.series[seriesIndex]?.scale;\n    if (!scale) return;\n    const maxY = self.valToPos(0, scale, true);\n    const color = params.colors[seriesIndex];\n    if (!color) return false;\n    ctx.fillStyle = color;\n\n    let j = i0;\n\n    while (j <= i1) {\n      const data0J = self.data[0][j];\n      const dataIJ = self.data[seriesIndex]?.[j];\n      if (typeof data0J !== 'number' || typeof dataIJ !== 'number') continue;\n      let cx = Math.round(self.valToPos(data0J, 'x', true));\n      let cy = Math.round(self.valToPos(dataIJ, scale, true));\n      const range = getVisibleRangeLength(self);\n      if (cy < maxY && range <= minRangeInSeconds) {\n        ctx.beginPath();\n        ctx.rect(cx, cy, 1, maxY - cy);\n        ctx.fill();\n      }\n      j++;\n    }\n\n    ctx.restore();\n    return false;\n  };\n\n  return {\n    hooks: {},\n    opts: (u: uPlot, opts: uPlot.Options) => {\n      opts.series\n        .filter((s) => s.scale === 'm')\n        .forEach((s) => {\n          s.points = {\n            show: drawBarChart,\n          };\n        });\n    },\n  };\n};\n\n@Component({\n  selector: 'timeline-chart-uplot',\n  template: ``,\n  styleUrl: '../../../../node_modules/uplot/dist/uPlot.min.css',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [\n    `\n      timeline-chart-uplot {\n        display: block;\n        width: 100%;\n        height: 100%;\n        position: relative;\n        overflow: hidden;\n\n        .uplot {\n          position: absolute;\n          font-family: Roboto, 'Helvetica Neue', sans-serif !important;\n\n          & th {\n            font-weight: 400 !important;\n          }\n          .u-value {\n            vertical-align: -1px;\n          }\n        }\n        .hidden {\n          display: none;\n        }\n      }\n    `,\n  ],\n})\nexport class TimelineChartUplotComponent {\n  private elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\n  private destroyRef = inject(DestroyRef);\n  private store = inject(AppStore);\n\n  public chartData = input<AlignedData>();\n  public range = input<ScaleRange>();\n  public rangeChange = output<ScaleRange>();\n\n  private setRange(value: ScaleRange | undefined) {\n    if (!value) return;\n    const chartData = this.chartData();\n    const oldMin = Math.round(this.uplot?.scales.x?.min ?? -1);\n    const oldMax = Math.round(this.uplot?.scales.x?.max ?? -1);\n    const dataMin = chartData?.[0]?.[0];\n    const dataMax = chartData?.[0][chartData?.[0].length - 1] ?? [];\n    const newMin =\n      value[0] instanceof Date\n        ? millisecondsToSeconds(value[0].valueOf())\n        : isNumber(dataMin)\n          ? dataMin\n          : millisecondsToSeconds(Date.now());\n    const newMax =\n      value[1] instanceof Date\n        ? millisecondsToSeconds(value[1].valueOf())\n        : isNumber(dataMax)\n          ? dataMax\n          : millisecondsToSeconds(Date.now());\n    if (oldMin === newMin && oldMax === newMax) return;\n    // Wait until visible\n    this.uplot?.setScale('x', { min: newMin, max: newMax });\n  }\n  private firstRangeChangeSkipped = false;\n  private uplot?: uPlot;\n  private readonly headerHeight = 31;\n  private resizeObserver?: ResizeObserver;\n  private updateColors = () => {\n    this.store.theme();\n\n    const stroke = window.getComputedStyle(this.elementRef.nativeElement).color;\n    const primaryColor = window\n      .getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--mat-form-field-outlined-focus-label-text-color');\n    const secondaryColor = window\n      .getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--mat-form-field-filled-container-color');\n\n    this.uplot?.batch((uPlot: uPlot) => {\n      uPlot?.axes.forEach((a) => (a.stroke = () => stroke));\n      uPlot?.series.forEach((s, i) => {\n        if (i === 1) s.fill = () => primaryColor;\n        if (i === 2) s.fill = () => secondaryColor;\n      });\n      uPlot?.redraw(true);\n    });\n  };\n  constructor() {\n    effect(this.updateColors);\n\n    effect(() => {\n      const chartData = this.chartData();\n      if (chartData) {\n        this.uplot?.batch((uPlot: uPlot) => {\n          uPlot.setData(chartData);\n        });\n      }\n    });\n    effect(() => {\n      const range = this.range();\n      this.setRange(range);\n    });\n    this.destroyRef.onDestroy(() => {\n      this.resizeObserver?.unobserve(this.elementRef.nativeElement);\n      this.uplot?.destroy();\n    });\n    afterNextRender(() => {\n      this.resizeObserver = new ResizeObserver(([entry]) => {\n        if (entry)\n          this.uplot?.setSize({\n            width: Math.floor(entry.contentRect.width),\n            height: Math.floor(entry.contentRect.height - this.headerHeight),\n          });\n      });\n      this.resizeObserver.observe(this.elementRef.nativeElement);\n      this.uplot = new uPlot(\n        {\n          width: this.elementRef.nativeElement.offsetWidth,\n          height: this.elementRef.nativeElement.offsetHeight - this.headerHeight,\n          plugins: [\n            barChartPlugin({\n              colors: [null, 'hsl(87, 74%, 40%)', 'hsl(87, 0%, 40%)'],\n              minRangeInMs: daysToMilliseconds(365),\n            }),\n          ],\n          hooks: {\n            setScale: [\n              (self: uPlot, key: string) => {\n                if (!this.firstRangeChangeSkipped) {\n                  this.firstRangeChangeSkipped = true;\n                  return;\n                }\n                const scale = self.scales[key];\n                if (key !== 'x' || !scale || !isNumber(scale.min) || !isNumber(scale.max)) {\n                  return;\n                }\n                const dataMin = self.data[0][0];\n                const dataMax = self.data[0][self.data[0].length - 1];\n                const min = scale.min === dataMin ? null : new Date(secondsToMilliseconds(scale.min));\n                const max = scale.max === dataMax ? null : new Date(secondsToMilliseconds(scale.max));\n                const event = [min, max] as const;\n                this.rangeChange.emit(event);\n              },\n            ],\n          },\n          scales: {\n            m: {\n              auto: true,\n            },\n            x: {\n              time: true,\n              auto: true,\n              range(self, min, max) {\n                const currentMin = self.scales.x!.min!;\n                const currentMax = self.scales.x!.max!;\n                const minRangeWidthInSeconds: Seconds = millisecondsToSeconds(daysToMilliseconds(0.99));\n                const missingRange: Seconds = max - min;\n                if (missingRange <= minRangeWidthInSeconds) {\n                  return [currentMin - missingRange * 0.5, currentMax + missingRange * 0.5];\n                } else {\n                  return [min, max];\n                }\n              },\n            },\n          },\n          series: [\n            {\n              value: (_, value) => (!value ? '-' : format(new Date(secondsToMilliseconds(value)), 'yyyy-MM-dd')),\n              label: 'Day',\n            },\n            {\n              show: true,\n              label: this.getLegendLabel(),\n              scale: 'm',\n              value: (self, rawValue, seriesIndex, idx) => {\n                const otherBarValue = typeof idx === 'number' ? self.data[seriesIndex + 1]?.[idx] : undefined;\n                const valueToShow =\n                  rawValue === 0 && otherBarValue !== 0 && typeof otherBarValue === 'number' ? otherBarValue : rawValue;\n                return this.getLegendValue(valueToShow);\n              },\n            },\n            {\n              show: true,\n              scale: 'm',\n              class: 'hidden',\n            },\n          ],\n          axes: [\n            {},\n            {\n              scale: 'm',\n              size: 50,\n              label: this.getLegendLabel(),\n              values: (_, ticks) => ticks.map((raw) => this.getLegendValue(raw)),\n            },\n          ],\n        },\n        this.chartData(),\n        this.elementRef.nativeElement,\n      );\n      setTimeout(this.updateColors);\n    });\n  }\n  getLegendValue(value: number) {\n    return value ? formatHours(value) : '--:--';\n  }\n\n  getLegendLabel() {\n    return 'Hours';\n  }\n}\n","import { animate, style, transition, trigger } from '@angular/animations';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport { ChangeDetectionStrategy, Component, DestroyRef, computed, effect, inject } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { FormControl, FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { MatIconButton } from '@angular/material/button';\nimport { MatFormField, MatLabel, MatSuffix } from '@angular/material/form-field';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatInput } from '@angular/material/input';\nimport { MatMenu, MatMenuItem, MatMenuTrigger } from '@angular/material/menu';\nimport { MatOption, MatSelect } from '@angular/material/select';\nimport { MatTooltip } from '@angular/material/tooltip';\nimport { Router } from '@angular/router';\nimport { DatetimeLocalDirective } from '@app/directives/datetime-local';\nimport { ScaleRange, hasChartData } from '@app/domain/chart';\nimport { FilterMatrixParams, encodeFilterParams } from '@app/domain/router';\nimport { AppStore } from '@app/providers/state';\nimport { deepEquals } from '@app/utils/assert';\nimport { endOfDay } from 'date-fns/endOfDay';\nimport { endOfMonth } from 'date-fns/endOfMonth';\nimport { endOfWeek } from 'date-fns/endOfWeek';\nimport { endOfYear } from 'date-fns/endOfYear';\nimport { startOfDay } from 'date-fns/startOfDay';\nimport { startOfMonth } from 'date-fns/startOfMonth';\nimport { startOfWeek } from 'date-fns/startOfWeek';\nimport { startOfYear } from 'date-fns/startOfYear';\nimport { subDays } from 'date-fns/subDays';\nimport { subMonths } from 'date-fns/subMonths';\nimport { subWeeks } from 'date-fns/subWeeks';\nimport { subYears } from 'date-fns/subYears';\nimport { debounceTime, distinctUntilChanged } from 'rxjs';\nimport { ButtonResetInputComponent } from '../../directives/button-reset-input';\nimport { TimelineChartUplotComponent } from './timeline-chart-uplot';\n\ntype Wrap<T> = Required<{ [Key in keyof T]: FormControl<T[Key]> }>;\n\n@Component({\n  selector: 'tasks-filter',\n  templateUrl: './tasks-filter.html',\n  styleUrls: ['./tasks-filter.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('inOutAnimation', [\n      transition(':enter', [style({ opacity: 0 }), animate('300ms ease-out', style({ opacity: 1 }))]),\n    ]),\n  ],\n  imports: [\n    MatIconButton,\n    MatSelect,\n    MatOption,\n    MatIcon,\n    MatMenu,\n    MatMenuTrigger,\n    MatMenuItem,\n    MatFormField,\n    MatSuffix,\n    MatLabel,\n    MatInput,\n    ReactiveFormsModule,\n    A11yModule,\n    TimelineChartUplotComponent,\n    ButtonResetInputComponent,\n    DatetimeLocalDirective,\n    MatTooltip,\n  ],\n})\nexport class TasksFilterComponent {\n  private store = inject(AppStore);\n  private router = inject<Router>(Router);\n  private destroyRef = inject(DestroyRef);\n\n  public dataRange = computed(() => {\n    const data = this.store.filterChartData();\n    const range = this.store.filterRange();\n    if (!hasChartData(data) || !range) return undefined;\n    return { data, range } as const;\n  });\n\n  constructor() {\n    this.destroyRef.onDestroy(() => {\n      this.router.navigate([], { queryParams: {} });\n    });\n    effect(() => {\n      const decodedFilterParams = this.store.decodedFilterParams();\n      this.form.patchValue(decodedFilterParams);\n    });\n    this.form.valueChanges\n      .pipe(debounceTime(10), distinctUntilChanged(deepEquals), takeUntilDestroyed())\n      .subscribe((value) => this.router.navigate([], { queryParams: encodeFilterParams(value) }));\n  }\n\n  hasChartData = hasChartData;\n  form = new FormGroup<Wrap<FilterMatrixParams>>({\n    search: new FormControl(),\n    from: new FormControl(),\n    to: new FormControl(),\n    durationSort: new FormControl(),\n  });\n\n  onChartRangeChange(e: ScaleRange) {\n    this.form.patchValue({\n      from: e[0] ?? undefined,\n      to: e[1] ?? undefined,\n    });\n  }\n\n  setAnyTime() {\n    this.form.patchValue({\n      from: undefined,\n      to: undefined,\n    });\n  }\n  setToday() {\n    this.form.patchValue({\n      from: startOfDay(new Date()),\n      to: endOfDay(new Date()),\n    });\n  }\n  setYesterday() {\n    this.form.patchValue({\n      from: startOfDay(subDays(new Date(), 1)),\n      to: endOfDay(subDays(new Date(), 1)),\n    });\n  }\n  setThisWeek() {\n    this.form.patchValue({\n      from: startOfWeek(new Date(), { weekStartsOn: 1 }),\n      to: endOfWeek(new Date(), { weekStartsOn: 1 }),\n    });\n  }\n  setPreviousWeek() {\n    this.form.patchValue({\n      from: startOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n      to: endOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n    });\n  }\n  setThisMonth() {\n    this.form.patchValue({\n      from: startOfMonth(new Date()),\n      to: endOfMonth(new Date()),\n    });\n  }\n  setPreviousMonth() {\n    this.form.patchValue({\n      from: startOfMonth(subMonths(new Date(), 1)),\n      to: endOfMonth(subMonths(new Date(), 1)),\n    });\n  }\n  setThisYear() {\n    this.form.patchValue({\n      from: startOfYear(new Date()),\n      to: endOfYear(new Date()),\n    });\n  }\n  setPreviousYear() {\n    this.form.patchValue({\n      from: startOfYear(subYears(new Date(), 1)),\n      to: endOfYear(subYears(new Date(), 1)),\n    });\n  }\n}\n","<form\n  class=\"mat-body\"\n  (submit)=\"$event.preventDefault()\"\n  [formGroup]=\"form\"\n  cdkTrapFocus\n  [cdkTrapFocusAutoCapture]=\"true\"\n>\n  <mat-form-field class=\"name\">\n    <mat-label>Name</mat-label>\n    <input\n      type=\"search\"\n      matInput\n      placeholder=\"Search\"\n      name=\"search\"\n      formControlName=\"search\"\n      #searchInput\n      cdkFocusRegionStart\n      cdkFocusInitial\n    />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.search.value\"\n      (reset)=\"form.controls.search.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"duration\">\n    <mat-label>Sort by duration</mat-label>\n    <mat-select formControlName=\"durationSort\">\n      <mat-option>Default</mat-option>\n      <mat-option value=\"longestFirst\">Longest first</mat-option>\n      <mat-option value=\"shortestFirst\">Shortest first</mat-option>\n    </mat-select>\n  </mat-form-field>\n  <mat-form-field class=\"from\">\n    <mat-label>From</mat-label>\n    <input matInput placeholder=\"From\" formControlName=\"from\" type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.from.value\"\n      (reset)=\"form.controls.from.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"to\">\n    <mat-label>To</mat-label>\n    <input matInput placeholder=\"To\" formControlName=\"to\" cdkFocusRegionEnd type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.to.value\"\n      (reset)=\"form.controls.to.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <button class=\"dates-menu\" mat-icon-button matSuffix [matMenuTriggerFor]=\"fromMenu\" matTooltip=\"Choose range preset\">\n    <mat-icon svgIcon=\"date_range\"></mat-icon>\n  </button>\n</form>\n<mat-menu #fromMenu=\"matMenu\">\n  <button mat-menu-item (click)=\"setAnyTime()\">Any time</button>\n  <button mat-menu-item (click)=\"setToday()\">Today</button>\n  <button mat-menu-item (click)=\"setYesterday()\">Yesterday</button>\n  <button mat-menu-item (click)=\"setThisWeek()\">This week</button>\n  <button mat-menu-item (click)=\"setPreviousWeek()\">Previous week</button>\n  <button mat-menu-item (click)=\"setThisMonth()\">This month</button>\n  <button mat-menu-item (click)=\"setPreviousMonth()\">Previous month</button>\n  <button mat-menu-item (click)=\"setThisYear()\">This year</button>\n  <button mat-menu-item (click)=\"setPreviousYear()\">Previous year</button>\n</mat-menu>\n@if (dataRange(); as dataRange) { @defer {\n<timeline-chart-uplot\n  [@inOutAnimation]\n  [chartData]=\"dataRange.data\"\n  barWidth=\"day\"\n  [range]=\"dataRange.range\"\n  (rangeChange)=\"onChartRangeChange($event)\"\n></timeline-chart-uplot>\n} } @else {\n<timeline-chart-uplot [chartData]=\"[[], []]\" barWidth=\"day\"></timeline-chart-uplot>\n}\n\n<svg style=\"display: none\">\n  <style>\n    .u-value {\n      vertical-align: -3px;\n    }\n  </style>\n</svg>\n"],"mappings":"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","names":["_c2","_c3","_c4","MatOption_Conditional_0_Template","rf","ctx","ɵɵelement","ctx_r0","ɵɵnextContext","ɵɵproperty","MatOption_Conditional_5_Template","MatOption_Conditional_6_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","MAT_OPTION_PARENT_COMPONENT","InjectionToken","MAT_OPTGROUP","MatOptionSelectionChange","source","isUserInput","MatOption","inject","ElementRef","ChangeDetectorRef","MAT_OPTION_PARENT_COMPONENT","MAT_OPTGROUP","_IdGenerator","value","signal","EventEmitter","Subject","styleLoader","_CdkPrivateStyleLoader","_StructuralStylesLoader","_VisuallyHiddenLoader","isSignal","emitEvent","_origin","options","element","event","hasModifierKey","viewValue","__ngFactoryType__","ɵɵdefineComponent","rf","ctx","ɵɵviewQuery","_c2","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵlistener","$event","ɵɵdomProperty","ɵɵattribute","ɵɵclassProp","booleanAttribute","_c4","ɵɵprojectionDef","_c3","ɵɵconditionalCreate","MatOption_Conditional_0_Template","ɵɵprojection","ɵɵelementStart","ɵɵelementEnd","MatOption_Conditional_5_Template","MatOption_Conditional_6_Template","ɵɵelement","ɵɵconditional","ɵɵadvance","ɵɵproperty","MatPseudoCheckbox","MatRipple","_countGroupLabelsBeforeOption","optionIndex","optionGroups","optionsArray","groups","groupCounter","i","_getOptionScrollPosition","optionOffset","optionHeight","currentScrollPosition","panelHeight","_c0","_c1","_c2","_c3","MatSelect_Conditional_4_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate","MatSelect_Conditional_5_Conditional_1_Template","ɵɵprojection","MatSelect_Conditional_5_Conditional_2_Template","MatSelect_Conditional_5_Template","ɵɵconditionalCreate","ɵɵconditional","MatSelect_ng_template_10_Template","_r3","ɵɵgetCurrentView","ɵɵlistener","$event","ɵɵrestoreView","ɵɵresetView","ɵɵclassMap","ɵɵinterpolate1","ɵɵclassProp","ɵɵproperty","ɵɵattribute","MAT_SELECT_SCROLL_STRATEGY","InjectionToken","injector","inject","Injector","createRepositionScrollStrategy","MAT_SELECT_CONFIG","InjectionToken","MAT_SELECT_TRIGGER","InjectionToken","MatSelectChange","source","value","MatSelect","inject","ViewportRuler","ChangeDetectorRef","ElementRef","Directionality","_IdGenerator","Renderer2","MAT_FORM_FIELD","NgControl","LiveAnnouncer","MAT_SELECT_CONFIG","_animationsDisabled","Subject","index","option","panel","labelCount","_countGroupLabelsBeforeOption","element","_getOptionScrollPosition","MAT_SELECT_SCROLL_STRATEGY","o1","o2","signal","Validators","fn","newValue","defer","options","startWith","switchMap","merge","EventEmitter","filter","o","map","defaultErrorStateMatcher","ErrorStateMatcher","parentForm","NgForm","parentFormGroup","FormGroupDirective","tabIndex","HostAttributeToken","_ErrorStateTracker","SelectionModel","takeUntil","event","newAriaLabelledby","ngControl","changes","take","modal","panelId","removeAriaReferencedId","addAriaReferencedId","cleanupEvent","exitFallbackTimer","isDisabled","selectedOptions","keyCode","isArrowKey","isOpenKey","manager","hasModifierKey","previouslySelectedOption","selectedOption","isTyping","hasDeselectedOptions","opt","previouslyFocusedIndex","currentValue","correspondingOption","preferredOrigin","CdkOverlayOrigin","ActiveDescendantKeyManager","changedOrDestroyed","isUserInput","wasSelected","a","b","fallbackValue","valueToEmit","firstEnabledOptionIndex","labelId","labelExpression","ids","__ngFactoryType__","ɵɵdefineComponent","rf","ctx","dirIndex","ɵɵcontentQuery","MatOption","MAT_OPTGROUP","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵviewQuery","_c0","_c1","CdkConnectedOverlay","ɵɵlistener","$event","ɵɵattribute","ɵɵclassProp","booleanAttribute","numberAttribute","ɵɵProvidersFeature","MatFormFieldControl","MAT_OPTION_PARENT_COMPONENT","ɵɵNgOnChangesFeature","_c3","_r1","ɵɵgetCurrentView","ɵɵprojectionDef","_c2","ɵɵelementStart","ɵɵrestoreView","ɵɵresetView","ɵɵconditionalCreate","MatSelect_Conditional_4_Template","MatSelect_Conditional_5_Template","ɵɵelementEnd","ɵɵnamespaceSVG","ɵɵelement","ɵɵtemplate","MatSelect_ng_template_10_Template","fallbackOverlayOrigin_r4","ɵɵreference","ɵɵadvance","ɵɵconditional","ɵɵproperty","NgClass","endOfMonth","date","options","_date","toDate","month","defaultOptions","getDefaultOptions","endOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","endOfYear","date","options","_date","toDate","year","startOfMonth","date","options","_date","toDate","startOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","startOfYear","date","options","date_","toDate","addDays","date","amount","options","_date","toDate","constructFrom","subDays","date","amount","options","addDays","addMonths","date","amount","options","_date","toDate","constructFrom","dayOfMonth","endOfDesiredMonth","daysInMonth","subMonths","date","amount","options","addMonths","addWeeks","date","amount","options","addDays","subWeeks","date","amount","options","addWeeks","addYears","date","amount","options","addMonths","subYears","date","amount","options","addYears","formatHours","value","map","part","pad2","assertNever","join","daysToMilliseconds","days","formatDistanceLocale","formatDistance","token","count","options","result","tokenValue","buildFormatLongFn","args","options","width","dateFormats","timeFormats","dateTimeFormats","formatLong","buildFormatLongFn","formatRelativeLocale","formatRelative","token","_date","_baseDate","_options","buildLocalizeFn","args","value","options","context","valuesArray","defaultWidth","width","index","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","_options","number","rem100","localize","buildLocalizeFn","quarter","buildMatchFn","args","string","options","width","matchPattern","matchResult","matchedString","parsePatterns","key","findIndex","pattern","findKey","value","rest","object","predicate","array","buildMatchPatternFn","args","string","options","matchResult","matchedString","parseResult","value","rest","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","match","buildMatchPatternFn","value","buildMatchFn","index","enUS","formatDistance","formatLong","formatRelative","localize","match","getTimezoneOffsetInMilliseconds","date","_date","toDate","utcDate","normalizeDates","context","dates","normalize","constructFrom","date","differenceInCalendarDays","laterDate","earlierDate","options","laterDate_","earlierDate_","normalizeDates","laterStartOfDay","startOfDay","earlierStartOfDay","laterTimestamp","getTimezoneOffsetInMilliseconds","earlierTimestamp","millisecondsInDay","getDayOfYear","date","options","_date","toDate","differenceInCalendarDays","startOfYear","startOfISOWeek","date","options","startOfWeek","__spreadProps","__spreadValues","getISOWeekYear","date","options","_date","toDate","year","fourthOfJanuaryOfNextYear","constructFrom","startOfNextYear","startOfISOWeek","fourthOfJanuaryOfThisYear","startOfThisYear","startOfISOWeekYear","date","options","year","getISOWeekYear","fourthOfJanuary","constructFrom","startOfISOWeek","getISOWeek","date","options","_date","toDate","diff","startOfISOWeek","startOfISOWeekYear","millisecondsInWeek","getWeekYear","date","options","_date","toDate","year","defaultOptions","getDefaultOptions","firstWeekContainsDate","firstWeekOfNextYear","constructFrom","startOfNextYear","startOfWeek","firstWeekOfThisYear","startOfThisYear","startOfWeekYear","date","options","defaultOptions","getDefaultOptions","firstWeekContainsDate","year","getWeekYear","firstWeek","constructFrom","startOfWeek","getWeek","date","options","_date","toDate","diff","startOfWeek","startOfWeekYear","millisecondsInWeek","addLeadingZeros","number","targetLength","sign","output","lightFormatters","date","token","signedYear","year","addLeadingZeros","month","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","date","token","localize","era","signedYear","year","lightFormatters","options","signedWeekYear","getWeekYear","weekYear","twoDigitYear","addLeadingZeros","isoWeekYear","getISOWeekYear","quarter","month","week","getWeek","isoWeek","getISOWeek","dayOfYear","getDayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","dayPeriodEnumValue","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","offset","delimiter","sign","absOffset","minutes","dateLongFormatter","pattern","formatLong","timeLongFormatter","dateTimeLongFormatter","matchResult","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","token","isProtectedWeekYearToken","warnOrThrowProtectedError","format","input","_message","message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","format","date","formatStr","options","defaultOptions","getDefaultOptions","locale","enUS","firstWeekContainsDate","weekStartsOn","originalDate","toDate","isValid","parts","longFormattingTokensRegExp","substring","firstCharacter","longFormatter","longFormatters","formattingTokensRegExp","cleanEscapedString","formatters","unescapedLatinCharacterRegExp","formatterOptions","part","token","isProtectedWeekYearToken","isProtectedDayOfYearToken","warnOrThrowProtectedError","formatter","input","matched","escapedStringRegExp","doubleQuoteRegExp","pre","UPLOT","ORI_HZ","ORI_VT","TITLE","WRAP","UNDER","OVER","AXIS","OFF","SELECT","CURSOR_X","CURSOR_Y","CURSOR_PT","LEGEND","LEGEND_LIVE","LEGEND_INLINE","LEGEND_SERIES","LEGEND_MARKER","LEGEND_LABEL","LEGEND_VALUE","WIDTH","HEIGHT","TOP","BOTTOM","LEFT","RIGHT","hexBlack","transparent","mousemove","mousedown","mouseup","mouseenter","mouseleave","dblclick","resize","scroll","change","dppxchange","LEGEND_DISP","domEnv","doc","win","nav","pxRatio","query","setPxRatio","_pxRatio","off","on","addClass","el","c","cl","remClass","setStylePx","name","value","placeTag","tag","cls","targ","refEl","placeDiv","xformCache","elTrans","xPos","yPos","xMax","yMax","xform","xformOld","colorCache","elColor","background","borderColor","newColor","oldColor","sizeCache","elSize","newWid","newHgt","centered","newSize","oldSize","evOpts","evOpts2","__spreadProps","__spreadValues","ev","cb","capt","closestIdx","num","arr","lo","hi","mid","bitwise","floor","makeIndexOfs","predicate","data","_i0","_i1","i0","i1","i","notNullish","v","isPositive","nonNullIdxs","positiveIdxs","getMinMax","sorted","log","getEdgeIdxs","_min","_max","inf","rangeLog","min","max","base","fullMags","minSign","sign","maxSign","logFn","log10","log2","growMinAbs","ceil","growMaxAbs","minExp","abs","maxExp","minIncr","pow","maxIncr","roundDec","incrRoundDn","incrRoundUp","rangeAsinh","minMax","rangePad","autoRangePart","_eqRangePart","_eqRange","rangeNum","mult","extra","isObj","_rangeNum","ifNull","lh","rh","hasData","idx0","idx1","cfg","cmin","cmax","padMin","padMax","hardMin","hardMax","softMin","softMax","softMinMode","softMaxMode","delta","deltaMag","scalarMax","scalarMag","scalarMagDelta","nonZeroDelta","mag","_padMin","_newMin","_softMin","minLim","_padMax","_newMax","_softMax","maxLim","numFormatter","fmtNum","val","M","PI","round","sinh","linthresh","asinh","numIntDigits","x","clamp","isFn","fnOrSelf","noop","retArg0","_0","retArg1","_1","retNull","_","retTrue","retEq","a","b","regex6","fixFloat","isInt","fixedDec","str","match","len","exp","incrRound","incr","dec","p","guessDec","genIncrs","mults","incrs","multDec","expa","_incr","EMPTY_OBJ","EMPTY_ARR","nullNullTuple","isArr","isUndef","isStr","is","fastIsObj","TypedArray","__proto__","copy","o","_isObj","out","k","assign","args","src","key","NULL_REMOVE","NULL_RETAIN","NULL_EXPAND","nullExpand","yVals","nullIdxs","alignedLen","xi","lastNullIdx","nullIdx","join","tables","nullModes","allHeadersSame","table","isAsc","sortCols","xVals","ti","xs","xIdxs","t","si","ys","nullMode","yVal","alignedIdx","microTask","fn","head","rlen","idxs","table2","row","row2","j","vals0","len0","vals1","vals","samples","firstIdx","lastIdx","stride","prevVal","months","days","slice3","days3","months3","engNames","zeroPad2","int","zeroPad3","subs","d","names","h","fmtDate","tpl","parts","R","m","localTz","tzDate","date","tz","date2","onlyWhole","allMults","decIncrs","oneIncrs","wholeIncrs","numIncrs","NL","yyyy","NLyyyy","md","NLmd","NLmdyy","aa","hmm","hmmaa","NLhmmaa","ss","genTimeStuffs","ms","s","mo","y","timeIncrs","_timeAxisStamps","timeAxisSplits","self","axisIdx","scaleMin","scaleMax","foundIncr","foundSpace","splits","isYr","isMo","minDate","minDateTs","minMin","mkDate","minMinTs","moIncr","yrIncr","split","splitDate","baseYear","baseMonth","next","offs","incr0","tzOffset","date0","prevHour","incrHours","minSpace","pctSpace","expectedHour","dstShift","prevSplit","timeIncrsMs","_timeAxisStampsMs","timeAxisSplitsMs","timeIncrsS","_timeAxisStampsS","timeAxisSplitsS","timeAxisStamps","stampCfg","timeAxisVals","stamps","prevYear","prevMnth","prevDate","prevMins","prevSecs","newYear","newMnth","newDate","newHour","newMins","newSecs","stamp","timeAxisVal","dateTpl","timeSeriesStamp","_timeSeriesStamp","timeSeriesVal","seriesIdx","dataIdx","legendStroke","legendFill","legendOpts","cursorPointShow","pt","size","mar","width","cursorPointFill","sp","cursorPointStroke","cursorPointSize","moveTuple","cursorMove","mouseLeft1","mouseTop1","filtBtn0","handle","onlyTarg","e","filtTarg","cursorOpts","valPos","curPos","axisLines","grid","ticks","border","font","labelFont","lineGap","xAxisOpts","numSeriesLabel","timeSeriesLabel","xSeriesOpts","numAxisVals","numAxisSplits","forceMin","numDec","logAxisSplits","logBase","nextMagIncr","asinhAxisSplits","posSplits","zero","RE_ALL","RE_12357","RE_125","RE_1","_filt","distr","re","keepMod","log10AxisValsFilt","axis","scaleKey","sc","valToPos","_10","magSpace","log2AxisValsFilt","numSeriesVal","yAxisOpts","ptDia","dia","seriesPointsShow","scale","xData","p0","p1","dim","maxPts","facet","gaps","nullGaps","xySeriesOpts","ySeriesOpts","clampScale","xScaleOpts","yScaleOpts","syncs","_sync","opts","plot","type","w","BAND_CLIP_FILL","BAND_CLIP_STROKE","orient","u","mode","series","scales","bbox","dx","dy","sx","sy","l","H","V","moveToH","lineToH","rectH","arcH","bezierCurveToH","moveToV","lineToV","rectV","arcV","bezierCurveToV","bandFillClipDirs","fillDir","clipDirs","bands","seriesFillTo","dataMin","dataMax","bandFillDir","clipBandLine","strokePath","clipDir","dataX","dataY","scaleX","scaleY","valToPosX","valToPosY","xOff","yOff","xDim","yDim","pxRound","dir","lineTo","frIdx","toIdx","x0","y0","x1","yLimit","clip","clipGaps","ori","plotLft","plotTop","plotWid","plotHgt","rect","prevGapEnd","g","maxStrokeWidth","addGap","fromX","toX","prevGap","findGaps","pixelForX","align","fr","to","frPx","toPx","fri2","toi2","pxRoundGen","pxAlign","moveTo","arcTo","y1","x2","y2","r","endRad","baseRad","startAngle","endAngle","bp1x","bp1y","bp2x","bp2y","p2x","p2y","points","filtIdxs","arc","rad","fill","lft","top","wid","hgt","drawPoint","pi","_drawAcc","stroke","accX","minY","maxY","inY","outY","drawAccH","drawAccV","linear","alignGaps","pixelForY","drawAcc","_paths","hasGap","xForPixel","pos","drawnAtX","idx0px","idx1px","nextAccXVal","xVal","bandClipDir","fillToVal","fillToY","frX","stepped","ascDesc","extend","left","prevYPos","firstXPos","prevXPos","firstXPosExt","yVal1","prevXPosExt","fillTo","halfStroke","startsOffset","endsOffset","findColWidth","colWid","prevIdx","minDelta","bars","_extraGap","ro","radiusFn","gapFactor","_maxWidth","_minWidth","disp","_each","dispFills","dispStrokes","_align","extraGap","maxWidth","minWidth","valRadius","baseRadius","_dirX","each","band","xShift","barWid","fullGap","strokeWidth","multiPath","fillColors","fillPaths","strokeColors","strokePaths","color","pct","sizes","insetStroke","rawBarWid","dataY0","radVal","radBase","yVal0","btm","barHgt","rv","rb","splineInterp","interp","bezierCurveTo","xCoords","yCoords","monotoneCubic","_monotoneCubic","n","path","ds","dys","dxs","cursorPlots","invalidateRects","uPlot","linearPath","pointsPath","setDefaults","xo","yo","initY","setDefault","setDefaults2","xyo","snapNumX","snapTimeX","snapNumY","snapLogY","snapLogX","snapAsinhY","snapAsinhX","findIncr","minVal","maxVal","intDigits","incrIdx","pxRatioFont","fontSize","fontSizeCss","syncFontSize","f","then","getHPos","getVPos","getPos","ready","root","title","can","ctx","wrap","over","mouseLeft0","mouseTop0","drag","under","axes","xScaleKey","drawOrderMap","drawAxesGrid","drawSeries","drawOrder","initValToPct","getVal","_val","initScale","scaleOpts","isTime","rn","rangeIsArr","xScaleDistr","pendScales","_tzDate","ts","_fmtDate","_timeAxisSplits","_timeAxisVals","_timeSeriesVal","activeIdxs","legend","cursor","showLegend","showCursor","markers","legendTable","legendHead","legendBody","legendRows","legendCells","legendCols","multiValLegend","NULL_LEGEND_VALUES","getMultiVals","son","soff","initLegendRow","cells","label","indic","text","onMouse","setCursorEvent","isolate","setSeries","syncOpts","cursorFocus","FOCUS_TRUE","mouseListeners","targListeners","listener","offMouse","fullWidCss","fullHgtCss","plotWidCss","plotHgtCss","plotLftCss","plotTopCss","_plotLftCss","_plotTopCss","_plotWidCss","_plotHgtCss","shouldSetScales","shouldSetSize","shouldConvergeSize","shouldSetCursor","shouldSetSelect","shouldSetLegend","_setSize","height","force","calcSize","resetYSeries","commit","calcPlotRect","calcAxesRects","bb","CYCLE_LIMIT","convergeSize","converged","cycleNum","axesConverged","axesCalc","paddingConverged","paddingCalc","setSize","hasTopAxis","hasBtmAxis","hasRgtAxis","hasLftAxis","side","_size","isVt","labelSize","fullSize","sidesWithAxes","_padding","off1","off2","off3","off0","incrOffset","hov","skip","prox","bias","cursorIdx","valAtPosX","idx2","_prox","withProx","cursorLft","xValues","yValues","nonNullLft","nonNullRgt","lftPos","rgtPos","lftDelta","rgtDelta","focus","cursorOnePt","cursorPts","cursorPtsLft","cursorPtsTop","initCursorPt","initSeries","sv","_ptDia","rowCells","fire","addSeries","delSeries","tr","initAxis","av","autoPadSide","padding","dataLen","data0","viaAutoScaleX","setData","_data","_resetScales","scaleData","_data0","xsc","autoScaleX","_setScale","ctxStroke","ctxFill","ctxWidth","ctxDash","ctxJoin","ctxCap","ctxFont","ctxAlign","ctxBaseline","ctxAlpha","setCtxStyle","dash","cap","setFontStyle","baseline","accScale","wsc","psc","AUTOSCALE","setScales","wipScales","xFacet","yFacet","yScaleKey","yData","wscx","wscy","changed","anyChanged","getOuterIdxs","ydata","shouldAlpha","cacheStrokeFill","_ctxAlpha","_idxs","drawPath","_gaps","show","_points","gapsClip","flags","strokeStyle","fillStyle","boundsClip","offset","_pxAlign","strokeFill","fillStroke","lineWidth","lineDash","lineCap","fillPath","didStrokeFill","bi","lowerEdge","lowerData","bandClip","gapsClip2","_fillStyle","CLIP_FILL_STROKE","doFill","doStroke","getIncrSpace","fullDim","incrSpace","drawOrthoLines","filts","pos0","pos1","_space","_splits","values","_p","shiftDir","shiftAmt","baseLpos","_label","plotDim","plotOff","_tickSize","tickSize","axisGap","angle","basePos","finalPos","textAlign","textBaseline","lineHeight","canOffs","_values","_parts","queuedCommit","deferHooks","hooksQueue","flushHooks","_commit","batch","_deferHooks","_el","_show","_pos","posOffset","syncRect","pctWid","pctHgt","vCursor","hCursor","select","prop","_hideProps","selectDiv","setSelect","updateCursor","setLegend","rebuildPaths","recalcAxes","setScale","xCursor","yCursor","rawMouseLeft0","rawMouseTop0","rawMouseLeft1","rawMouseTop1","dragging","dragX","dragY","_fire","toggleDOM","_pub","setFocus","pubSync","setBand","addBand","delBand","setAlpha","closestDist","closestSeries","focusedSeries","allFocused","_setAlpha","i2","isFocused","posToVal","closestIdxFromXpos","setSelH","setSelV","setSelX","setSelY","syncLegend","didx","sidx","setLegendValues","idx","noDataInRange","mouseXPos","_ptLft","_ptTop","_ptWid","_ptHgt","_centered","_ptFill","_ptStroke","yVal2","xPos2","mouseYPos","dist","mouseYVal","seriesYValSign","mouseYValSign","hPos","vPos","ptWid","ptHgt","ptLft","ptTop","ptStroke","ptFill","getBBox","focusChanged","xKey","yKey","matchXKeys","matchYKeys","xKeySrc","yKeySrc","sdrag","sori","sPosToVal","sOff","sDim","matchingX","matchingY","hideSelect","rawDX","rawDY","_rawDX","uni","syncKey","xSyncKey","ySyncKey","shouldPub","defer","mouseMove","_l","_t","_w","_h","_i","cacheMouse","initial","snap","syncOptsSrc","xValSrc","yValSrc","rotSrc","_xDim","_yDim","_xPos","_yPos","__l","downSelectLeft","downSelectTop","downSelectWidth","downSelectHeight","mouseDown","mouseUp","hasSelect","chgSelect","mouseLeave","_dragging","snapH","snapV","snapProx","dragH","dragV","dblClick","syncPxRatio","events","seriesIdxMatcher","hooks","evName","a1","a2","srcSeriesIdx","sync","pub","destroy","_init","paths","barChartPlugin","params","minRangeInSeconds","millisecondsToSeconds","minRangeInMs","getVisibleRangeLength","u","visibleRangeMin","scales","x","min","visibleRangeMax","max","undefined","Number","POSITIVE_INFINITY","drawBarChart","self","seriesIndex","i0","i1","ctx","scale","series","maxY","valToPos","color","colors","fillStyle","j","data0J","data","dataIJ","cx","Math","round","cy","range","beginPath","rect","fill","restore","hooks","opts","filter","s","forEach","points","show","TimelineChartUplotComponent","elementRef","inject","ElementRef","destroyRef","DestroyRef","store","AppStore","chartData","input","rangeChange","output","setRange","value","oldMin","uplot","oldMax","dataMin","dataMax","length","newMin","Date","valueOf","isNumber","now","newMax","setScale","firstRangeChangeSkipped","headerHeight","resizeObserver","updateColors","theme","stroke","window","getComputedStyle","nativeElement","primaryColor","getPropertyValue","secondaryColor","batch","uPlot","axes","a","i","redraw","constructor","effect","setData","onDestroy","unobserve","destroy","afterNextRender","ResizeObserver","entry","setSize","width","floor","contentRect","height","observe","offsetWidth","offsetHeight","plugins","daysToMilliseconds","key","secondsToMilliseconds","event","emit","m","auto","time","currentMin","currentMax","minRangeWidthInSeconds","missingRange","_","format","label","getLegendLabel","rawValue","idx","otherBarValue","valueToShow","getLegendValue","class","size","values","ticks","map","raw","setTimeout","formatHours","selectors","inputs","outputs","decls","vars","template","rf","styles","encapsulation","changeDetection","TimelineChartUplotComponent","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","onChartRangeChange","ɵɵelementEnd","ɵɵproperty","undefined","dataRange_r4","data","range","ɵɵtemplate","TasksFilterComponent_Conditional_49_Defer_0_Template","ɵɵdefer","TasksFilterComponent_Conditional_49_Defer_1_DepsFn","ɵɵelement","ɵɵpureFunction2","_c1","ɵɵpureFunction0","_c0","TasksFilterComponent","store","inject","AppStore","router","Router","destroyRef","DestroyRef","dataRange","computed","filterChartData","filterRange","hasChartData","constructor","onDestroy","navigate","queryParams","effect","decodedFilterParams","form","patchValue","valueChanges","pipe","debounceTime","distinctUntilChanged","deepEquals","takeUntilDestroyed","subscribe","value","encodeFilterParams","FormGroup","search","FormControl","from","to","durationSort","e","setAnyTime","setToday","startOfDay","Date","endOfDay","setYesterday","subDays","setThisWeek","startOfWeek","weekStartsOn","endOfWeek","setPreviousWeek","subWeeks","setThisMonth","startOfMonth","endOfMonth","setPreviousMonth","subMonths","setThisYear","startOfYear","endOfYear","setPreviousYear","subYears","selectors","decls","vars","consts","template","rf","ctx","i0","_r1","preventDefault","ɵɵtext","controls","reset","ɵɵconditionalCreate","TasksFilterComponent_Conditional_49_Template","TasksFilterComponent_Conditional_50_Template","ɵɵadvance","fromMenu_r5","ɵɵconditional","tmp_8_0","MatIconButton","MatSelect","MatOption","MatIcon","MatMenu","MatMenuTrigger","MatMenuItem","MatFormField","MatSuffix","MatLabel","MatInput","ReactiveFormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","A11yModule","CdkTrapFocus","ButtonResetInputComponent","DatetimeLocalDirective","MatTooltip","styles","animation","trigger","transition","style","opacity","animate","changeDetection"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45]}