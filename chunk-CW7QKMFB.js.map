{"version":3,"sources":["node_modules/@angular/material/fesm2022/select.mjs","node_modules/date-fns/endOfMonth.js","node_modules/date-fns/_lib/defaultOptions.js","node_modules/date-fns/endOfWeek.js","node_modules/date-fns/endOfYear.js","node_modules/date-fns/startOfMonth.js","node_modules/date-fns/startOfWeek.js","node_modules/date-fns/startOfYear.js","node_modules/date-fns/addDays.js","node_modules/date-fns/subDays.js","node_modules/date-fns/addMonths.js","node_modules/date-fns/subMonths.js","node_modules/date-fns/addWeeks.js","node_modules/date-fns/subWeeks.js","node_modules/date-fns/addYears.js","node_modules/date-fns/subYears.js","src/app/domain/date-time.ts","node_modules/date-fns/locale/en-US/_lib/formatDistance.js","node_modules/date-fns/locale/_lib/buildFormatLongFn.js","node_modules/date-fns/locale/en-US/_lib/formatLong.js","node_modules/date-fns/locale/en-US/_lib/formatRelative.js","node_modules/date-fns/locale/_lib/buildLocalizeFn.js","node_modules/date-fns/locale/en-US/_lib/localize.js","node_modules/date-fns/locale/_lib/buildMatchFn.js","node_modules/date-fns/locale/_lib/buildMatchPatternFn.js","node_modules/date-fns/locale/en-US/_lib/match.js","node_modules/date-fns/locale/en-US.js","node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js","node_modules/date-fns/_lib/normalizeDates.js","node_modules/date-fns/differenceInCalendarDays.js","node_modules/date-fns/getDayOfYear.js","node_modules/date-fns/startOfISOWeek.js","node_modules/date-fns/getISOWeekYear.js","node_modules/date-fns/startOfISOWeekYear.js","node_modules/date-fns/getISOWeek.js","node_modules/date-fns/getWeekYear.js","node_modules/date-fns/startOfWeekYear.js","node_modules/date-fns/getWeek.js","node_modules/date-fns/_lib/addLeadingZeros.js","node_modules/date-fns/_lib/format/lightFormatters.js","node_modules/date-fns/_lib/format/formatters.js","node_modules/date-fns/_lib/format/longFormatters.js","node_modules/date-fns/_lib/protectedTokens.js","node_modules/date-fns/format.js","node_modules/uplot/dist/uPlot.esm.js","src/app/screen-tasks/tasks-filter/timeline-chart-uplot.component.ts","src/app/screen-tasks/tasks-filter/tasks-filter.component.ts","src/app/screen-tasks/tasks-filter/tasks-filter.component.html"],"sourcesContent":["import { Overlay, CdkOverlayOrigin, CdkConnectedOverlay, OverlayModule } from '@angular/cdk/overlay';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, ChangeDetectorRef, ElementRef, Renderer2, ANIMATION_MODULE_TYPE, EventEmitter, HostAttributeToken, booleanAttribute, numberAttribute, Component, ViewEncapsulation, ChangeDetectionStrategy, ContentChildren, ContentChild, Input, ViewChild, Output, Directive, NgModule } from '@angular/core';\nimport { _countGroupLabelsBeforeOption, _getOptionScrollPosition, ErrorStateMatcher, _ErrorStateTracker, MAT_OPTION_PARENT_COMPONENT, MatOption, MAT_OPTGROUP, MatOptionModule, MatCommonModule } from '@angular/material/core';\nconst _c0 = [\"trigger\"];\nconst _c1 = [\"panel\"];\nconst _c2 = [[[\"mat-select-trigger\"]], \"*\"];\nconst _c3 = [\"mat-select-trigger\", \"*\"];\nfunction MatSelect_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.placeholder);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵprojection(0);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.triggerValue);\n  }\n}\nfunction MatSelect_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵtemplate(1, MatSelect_Conditional_5_Conditional_1_Template, 1, 0)(2, MatSelect_Conditional_5_Conditional_2_Template, 2, 1, \"span\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r1.customTrigger ? 1 : 2);\n  }\n}\nfunction MatSelect_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12, 1);\n    i0.ɵɵlistener(\"keydown\", function MatSelect_ng_template_10_Template_div_keydown_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._handleKeydown($event));\n    });\n    i0.ɵɵprojection(2, 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open \", ctx_r1._getPanelTheme(), \"\");\n    i0.ɵɵclassProp(\"mat-select-panel-animations-enabled\", !ctx_r1._animationsDisabled);\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.panelClass);\n    i0.ɵɵattribute(\"id\", ctx_r1.id + \"-panel\")(\"aria-multiselectable\", ctx_r1.multiple)(\"aria-label\", ctx_r1.ariaLabel || null)(\"aria-labelledby\", ctx_r1._getPanelAriaLabelledby());\n  }\n}\nexport { MatOptgroup, MatOption } from '@angular/material/core';\nimport { MAT_FORM_FIELD, MatFormFieldControl, MatFormFieldModule } from '@angular/material/form-field';\nexport { MatError, MatFormField, MatHint, MatLabel, MatPrefix, MatSuffix } from '@angular/material/form-field';\nimport { ViewportRuler, CdkScrollableModule } from '@angular/cdk/scrolling';\nimport { _IdGenerator, LiveAnnouncer, removeAriaReferencedId, addAriaReferencedId, ActiveDescendantKeyManager } from '@angular/cdk/a11y';\nimport { Directionality } from '@angular/cdk/bidi';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { DOWN_ARROW, UP_ARROW, LEFT_ARROW, RIGHT_ARROW, ENTER, SPACE, hasModifierKey, A, ESCAPE } from '@angular/cdk/keycodes';\nimport { NgControl, Validators, NgForm, FormGroupDirective } from '@angular/forms';\nimport { Subject, defer, merge } from 'rxjs';\nimport { startWith, switchMap, filter, map, takeUntil, take } from 'rxjs/operators';\nimport { NgClass } from '@angular/common';\n\n// Note that these have been copied over verbatim from\n// `material/select` so that we don't have to expose them publicly.\n/**\n * Returns an exception to be thrown when attempting to change a select's `multiple` option\n * after initialization.\n * @docs-private\n */\nfunction getMatSelectDynamicMultipleError() {\n  return Error('Cannot change `multiple` mode of select after initialization.');\n}\n/**\n * Returns an exception to be thrown when attempting to assign a non-array value to a select\n * in `multiple` mode. Note that `undefined` and `null` are still valid values to allow for\n * resetting the value.\n * @docs-private\n */\nfunction getMatSelectNonArrayValueError() {\n  return Error('Value must be an array in multiple-selection mode.');\n}\n/**\n * Returns an exception to be thrown when assigning a non-function value to the comparator\n * used to determine if a value corresponds to an option. Note that whether the function\n * actually takes two values and returns a boolean is not checked.\n */\nfunction getMatSelectNonFunctionValueError() {\n  return Error('`compareWith` must be a function.');\n}\n\n/** Injection token that determines the scroll handling while a select is open. */\nconst MAT_SELECT_SCROLL_STRATEGY = /*#__PURE__*/new InjectionToken('mat-select-scroll-strategy', {\n  providedIn: 'root',\n  factory: () => {\n    const overlay = inject(Overlay);\n    return () => overlay.scrollStrategies.reposition();\n  }\n});\n/** @docs-private */\nfunction MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY(overlay) {\n  return () => overlay.scrollStrategies.reposition();\n}\n/** Injection token that can be used to provide the default options the select module. */\nconst MAT_SELECT_CONFIG = /*#__PURE__*/new InjectionToken('MAT_SELECT_CONFIG');\n/** @docs-private */\nconst MAT_SELECT_SCROLL_STRATEGY_PROVIDER = {\n  provide: MAT_SELECT_SCROLL_STRATEGY,\n  deps: [Overlay],\n  useFactory: MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY\n};\n/**\n * Injection token that can be used to reference instances of `MatSelectTrigger`. It serves as\n * alternative token to the actual `MatSelectTrigger` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst MAT_SELECT_TRIGGER = /*#__PURE__*/new InjectionToken('MatSelectTrigger');\n/** Change event object that is emitted when the select value has changed. */\nclass MatSelectChange {\n  source;\n  value;\n  constructor(/** Reference to the select that emitted the change event. */\n  source, /** Current value of the select that emitted the event. */\n  value) {\n    this.source = source;\n    this.value = value;\n  }\n}\nlet MatSelect = /*#__PURE__*/(() => {\n  class MatSelect {\n    _viewportRuler = inject(ViewportRuler);\n    _changeDetectorRef = inject(ChangeDetectorRef);\n    _elementRef = inject(ElementRef);\n    _dir = inject(Directionality, {\n      optional: true\n    });\n    _idGenerator = inject(_IdGenerator);\n    _renderer = inject(Renderer2);\n    _parentFormField = inject(MAT_FORM_FIELD, {\n      optional: true\n    });\n    ngControl = inject(NgControl, {\n      self: true,\n      optional: true\n    });\n    _liveAnnouncer = inject(LiveAnnouncer);\n    _defaultOptions = inject(MAT_SELECT_CONFIG, {\n      optional: true\n    });\n    _animationsDisabled = inject(ANIMATION_MODULE_TYPE, {\n      optional: true\n    }) === 'NoopAnimations';\n    _initialized = new Subject();\n    _cleanupDetach;\n    /** All of the defined select options. */\n    options;\n    // TODO(crisbeto): this is only necessary for the non-MDC select, but it's technically a\n    // public API so we have to keep it. It should be deprecated and removed eventually.\n    /** All of the defined groups of options. */\n    optionGroups;\n    /** User-supplied override of the trigger element. */\n    customTrigger;\n    /**\n     * This position config ensures that the top \"start\" corner of the overlay\n     * is aligned with with the top \"start\" of the origin by default (overlapping\n     * the trigger completely). If the panel cannot fit below the trigger, it\n     * will fall back to a position above the trigger.\n     */\n    _positions = [{\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'top'\n    }, {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'top'\n    }, {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above'\n    }, {\n      originX: 'end',\n      originY: 'top',\n      overlayX: 'end',\n      overlayY: 'bottom',\n      panelClass: 'mat-mdc-select-panel-above'\n    }];\n    /** Scrolls a particular option into the view. */\n    _scrollOptionIntoView(index) {\n      const option = this.options.toArray()[index];\n      if (option) {\n        const panel = this.panel.nativeElement;\n        const labelCount = _countGroupLabelsBeforeOption(index, this.options, this.optionGroups);\n        const element = option._getHostElement();\n        if (index === 0 && labelCount === 1) {\n          // If we've got one group label before the option and we're at the top option,\n          // scroll the list to the top. This is better UX than scrolling the list to the\n          // top of the option, because it allows the user to read the top group's label.\n          panel.scrollTop = 0;\n        } else {\n          panel.scrollTop = _getOptionScrollPosition(element.offsetTop, element.offsetHeight, panel.scrollTop, panel.offsetHeight);\n        }\n      }\n    }\n    /** Called when the panel has been opened and the overlay has settled on its final position. */\n    _positioningSettled() {\n      this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n    }\n    /** Creates a change event object that should be emitted by the select. */\n    _getChangeEvent(value) {\n      return new MatSelectChange(this, value);\n    }\n    /** Factory function used to create a scroll strategy for this select. */\n    _scrollStrategyFactory = inject(MAT_SELECT_SCROLL_STRATEGY);\n    /** Whether or not the overlay panel is open. */\n    _panelOpen = false;\n    /** Comparison function to specify which option is displayed. Defaults to object equality. */\n    _compareWith = (o1, o2) => o1 === o2;\n    /** Unique id for this input. */\n    _uid = this._idGenerator.getId('mat-select-');\n    /** Current `aria-labelledby` value for the select trigger. */\n    _triggerAriaLabelledBy = null;\n    /**\n     * Keeps track of the previous form control assigned to the select.\n     * Used to detect if it has changed.\n     */\n    _previousControl;\n    /** Emits whenever the component is destroyed. */\n    _destroy = new Subject();\n    /** Tracks the error state of the select. */\n    _errorStateTracker;\n    /**\n     * Emits whenever the component state changes and should cause the parent\n     * form-field to update. Implemented as part of `MatFormFieldControl`.\n     * @docs-private\n     */\n    stateChanges = new Subject();\n    /**\n     * Disable the automatic labeling to avoid issues like #27241.\n     * @docs-private\n     */\n    disableAutomaticLabeling = true;\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    userAriaDescribedBy;\n    /** Deals with the selection logic. */\n    _selectionModel;\n    /** Manages keyboard events for options in the panel. */\n    _keyManager;\n    /** Ideal origin for the overlay panel. */\n    _preferredOverlayOrigin;\n    /** Width of the overlay panel. */\n    _overlayWidth;\n    /** `View -> model callback called when value changes` */\n    _onChange = () => {};\n    /** `View -> model callback called when select has been touched` */\n    _onTouched = () => {};\n    /** ID for the DOM node containing the select's value. */\n    _valueId = this._idGenerator.getId('mat-select-value-');\n    /** Strategy that will be used to handle scrolling while the select panel is open. */\n    _scrollStrategy;\n    _overlayPanelClass = this._defaultOptions?.overlayPanelClass || '';\n    /** Whether the select is focused. */\n    get focused() {\n      return this._focused || this._panelOpen;\n    }\n    _focused = false;\n    /** A name for this control that can be used by `mat-form-field`. */\n    controlType = 'mat-select';\n    /** Trigger that opens the select. */\n    trigger;\n    /** Panel containing the select options. */\n    panel;\n    /** Overlay pane containing the options. */\n    _overlayDir;\n    /** Classes to be passed to the select panel. Supports the same syntax as `ngClass`. */\n    panelClass;\n    /** Whether the select is disabled. */\n    disabled = false;\n    /** Whether ripples in the select are disabled. */\n    disableRipple = false;\n    /** Tab index of the select. */\n    tabIndex = 0;\n    /** Whether checkmark indicator for single-selection options is hidden. */\n    get hideSingleSelectionIndicator() {\n      return this._hideSingleSelectionIndicator;\n    }\n    set hideSingleSelectionIndicator(value) {\n      this._hideSingleSelectionIndicator = value;\n      this._syncParentProperties();\n    }\n    _hideSingleSelectionIndicator = this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n    /** Placeholder to be shown if no value has been selected. */\n    get placeholder() {\n      return this._placeholder;\n    }\n    set placeholder(value) {\n      this._placeholder = value;\n      this.stateChanges.next();\n    }\n    _placeholder;\n    /** Whether the component is required. */\n    get required() {\n      return this._required ?? this.ngControl?.control?.hasValidator(Validators.required) ?? false;\n    }\n    set required(value) {\n      this._required = value;\n      this.stateChanges.next();\n    }\n    _required;\n    /** Whether the user should be allowed to select multiple options. */\n    get multiple() {\n      return this._multiple;\n    }\n    set multiple(value) {\n      if (this._selectionModel && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectDynamicMultipleError();\n      }\n      this._multiple = value;\n    }\n    _multiple = false;\n    /** Whether to center the active option over the trigger. */\n    disableOptionCentering = this._defaultOptions?.disableOptionCentering ?? false;\n    /**\n     * Function to compare the option values with the selected values. The first argument\n     * is a value from an option. The second is a value from the selection. A boolean\n     * should be returned.\n     */\n    get compareWith() {\n      return this._compareWith;\n    }\n    set compareWith(fn) {\n      if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectNonFunctionValueError();\n      }\n      this._compareWith = fn;\n      if (this._selectionModel) {\n        // A different comparator means the selection could change.\n        this._initializeSelection();\n      }\n    }\n    /** Value of the select control. */\n    get value() {\n      return this._value;\n    }\n    set value(newValue) {\n      const hasAssigned = this._assignValue(newValue);\n      if (hasAssigned) {\n        this._onChange(newValue);\n      }\n    }\n    _value;\n    /** Aria label of the select. */\n    ariaLabel = '';\n    /** Input that can be used to specify the `aria-labelledby` attribute. */\n    ariaLabelledby;\n    /** Object used to control when error messages are shown. */\n    get errorStateMatcher() {\n      return this._errorStateTracker.matcher;\n    }\n    set errorStateMatcher(value) {\n      this._errorStateTracker.matcher = value;\n    }\n    /** Time to wait in milliseconds after the last keystroke before moving focus to an item. */\n    typeaheadDebounceInterval;\n    /**\n     * Function used to sort the values in a select in multiple mode.\n     * Follows the same logic as `Array.prototype.sort`.\n     */\n    sortComparator;\n    /** Unique id of the element. */\n    get id() {\n      return this._id;\n    }\n    set id(value) {\n      this._id = value || this._uid;\n      this.stateChanges.next();\n    }\n    _id;\n    /** Whether the select is in an error state. */\n    get errorState() {\n      return this._errorStateTracker.errorState;\n    }\n    set errorState(value) {\n      this._errorStateTracker.errorState = value;\n    }\n    /**\n     * Width of the panel. If set to `auto`, the panel will match the trigger width.\n     * If set to null or an empty string, the panel will grow to match the longest option's text.\n     */\n    panelWidth = this._defaultOptions && typeof this._defaultOptions.panelWidth !== 'undefined' ? this._defaultOptions.panelWidth : 'auto';\n    /**\n     * By default selecting an option with a `null` or `undefined` value will reset the select's\n     * value. Enable this option if the reset behavior doesn't match your requirements and instead\n     * the nullable options should become selected. The value of this input can be controlled app-wide\n     * using the `MAT_SELECT_CONFIG` injection token.\n     */\n    canSelectNullableOptions = this._defaultOptions?.canSelectNullableOptions ?? false;\n    /** Combined stream of all of the child options' change events. */\n    optionSelectionChanges = defer(() => {\n      const options = this.options;\n      if (options) {\n        return options.changes.pipe(startWith(options), switchMap(() => merge(...options.map(option => option.onSelectionChange))));\n      }\n      return this._initialized.pipe(switchMap(() => this.optionSelectionChanges));\n    });\n    /** Event emitted when the select panel has been toggled. */\n    openedChange = new EventEmitter();\n    /** Event emitted when the select has been opened. */\n    _openedStream = this.openedChange.pipe(filter(o => o), map(() => {}));\n    /** Event emitted when the select has been closed. */\n    _closedStream = this.openedChange.pipe(filter(o => !o), map(() => {}));\n    /** Event emitted when the selected value has been changed by the user. */\n    selectionChange = new EventEmitter();\n    /**\n     * Event that emits whenever the raw value of the select changes. This is here primarily\n     * to facilitate the two-way binding for the `value` input.\n     * @docs-private\n     */\n    valueChange = new EventEmitter();\n    constructor() {\n      const defaultErrorStateMatcher = inject(ErrorStateMatcher);\n      const parentForm = inject(NgForm, {\n        optional: true\n      });\n      const parentFormGroup = inject(FormGroupDirective, {\n        optional: true\n      });\n      const tabIndex = inject(new HostAttributeToken('tabindex'), {\n        optional: true\n      });\n      if (this.ngControl) {\n        // Note: we provide the value accessor through here, instead of\n        // the `providers` to avoid running into a circular import.\n        this.ngControl.valueAccessor = this;\n      }\n      // Note that we only want to set this when the defaults pass it in, otherwise it should\n      // stay as `undefined` so that it falls back to the default in the key manager.\n      if (this._defaultOptions?.typeaheadDebounceInterval != null) {\n        this.typeaheadDebounceInterval = this._defaultOptions.typeaheadDebounceInterval;\n      }\n      this._errorStateTracker = new _ErrorStateTracker(defaultErrorStateMatcher, this.ngControl, parentFormGroup, parentForm, this.stateChanges);\n      this._scrollStrategy = this._scrollStrategyFactory();\n      this.tabIndex = tabIndex == null ? 0 : parseInt(tabIndex) || 0;\n      // Force setter to be called in case id was not specified.\n      this.id = this.id;\n    }\n    ngOnInit() {\n      this._selectionModel = new SelectionModel(this.multiple);\n      this.stateChanges.next();\n      this._viewportRuler.change().pipe(takeUntil(this._destroy)).subscribe(() => {\n        if (this.panelOpen) {\n          this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n          this._changeDetectorRef.detectChanges();\n        }\n      });\n    }\n    ngAfterContentInit() {\n      this._initialized.next();\n      this._initialized.complete();\n      this._initKeyManager();\n      this._selectionModel.changed.pipe(takeUntil(this._destroy)).subscribe(event => {\n        event.added.forEach(option => option.select());\n        event.removed.forEach(option => option.deselect());\n      });\n      this.options.changes.pipe(startWith(null), takeUntil(this._destroy)).subscribe(() => {\n        this._resetOptions();\n        this._initializeSelection();\n      });\n    }\n    ngDoCheck() {\n      const newAriaLabelledby = this._getTriggerAriaLabelledby();\n      const ngControl = this.ngControl;\n      // We have to manage setting the `aria-labelledby` ourselves, because part of its value\n      // is computed as a result of a content query which can cause this binding to trigger a\n      // \"changed after checked\" error.\n      if (newAriaLabelledby !== this._triggerAriaLabelledBy) {\n        const element = this._elementRef.nativeElement;\n        this._triggerAriaLabelledBy = newAriaLabelledby;\n        if (newAriaLabelledby) {\n          element.setAttribute('aria-labelledby', newAriaLabelledby);\n        } else {\n          element.removeAttribute('aria-labelledby');\n        }\n      }\n      if (ngControl) {\n        // The disabled state might go out of sync if the form group is swapped out. See #17860.\n        if (this._previousControl !== ngControl.control) {\n          if (this._previousControl !== undefined && ngControl.disabled !== null && ngControl.disabled !== this.disabled) {\n            this.disabled = ngControl.disabled;\n          }\n          this._previousControl = ngControl.control;\n        }\n        this.updateErrorState();\n      }\n    }\n    ngOnChanges(changes) {\n      // Updating the disabled state is handled by the input, but we need to additionally let\n      // the parent form field know to run change detection when the disabled state changes.\n      if (changes['disabled'] || changes['userAriaDescribedBy']) {\n        this.stateChanges.next();\n      }\n      if (changes['typeaheadDebounceInterval'] && this._keyManager) {\n        this._keyManager.withTypeAhead(this.typeaheadDebounceInterval);\n      }\n    }\n    ngOnDestroy() {\n      this._cleanupDetach?.();\n      this._keyManager?.destroy();\n      this._destroy.next();\n      this._destroy.complete();\n      this.stateChanges.complete();\n      this._clearFromModal();\n    }\n    /** Toggles the overlay panel open or closed. */\n    toggle() {\n      this.panelOpen ? this.close() : this.open();\n    }\n    /** Opens the overlay panel. */\n    open() {\n      if (!this._canOpen()) {\n        return;\n      }\n      // It's important that we read this as late as possible, because doing so earlier will\n      // return a different element since it's based on queries in the form field which may\n      // not have run yet. Also this needs to be assigned before we measure the overlay width.\n      if (this._parentFormField) {\n        this._preferredOverlayOrigin = this._parentFormField.getConnectedOverlayOrigin();\n      }\n      this._cleanupDetach?.();\n      this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n      this._applyModalPanelOwnership();\n      this._panelOpen = true;\n      this._overlayDir.positionChange.pipe(take(1)).subscribe(() => {\n        this._changeDetectorRef.detectChanges();\n        this._positioningSettled();\n      });\n      this._overlayDir.attachOverlay();\n      this._keyManager.withHorizontalOrientation(null);\n      this._highlightCorrectOption();\n      this._changeDetectorRef.markForCheck();\n      // Required for the MDC form field to pick up when the overlay has been opened.\n      this.stateChanges.next();\n      // Simulate the animation event before we moved away from `@angular/animations`.\n      Promise.resolve().then(() => this.openedChange.emit(true));\n    }\n    /**\n     * Track which modal we have modified the `aria-owns` attribute of. When the combobox trigger is\n     * inside an aria-modal, we apply aria-owns to the parent modal with the `id` of the options\n     * panel. Track the modal we have changed so we can undo the changes on destroy.\n     */\n    _trackedModal = null;\n    /**\n     * If the autocomplete trigger is inside of an `aria-modal` element, connect\n     * that modal to the options panel with `aria-owns`.\n     *\n     * For some browser + screen reader combinations, when navigation is inside\n     * of an `aria-modal` element, the screen reader treats everything outside\n     * of that modal as hidden or invisible.\n     *\n     * This causes a problem when the combobox trigger is _inside_ of a modal, because the\n     * options panel is rendered _outside_ of that modal, preventing screen reader navigation\n     * from reaching the panel.\n     *\n     * We can work around this issue by applying `aria-owns` to the modal with the `id` of\n     * the options panel. This effectively communicates to assistive technology that the\n     * options panel is part of the same interaction as the modal.\n     *\n     * At time of this writing, this issue is present in VoiceOver.\n     * See https://github.com/angular/components/issues/20694\n     */\n    _applyModalPanelOwnership() {\n      // TODO(http://github.com/angular/components/issues/26853): consider de-duplicating this with\n      // the `LiveAnnouncer` and any other usages.\n      //\n      // Note that the selector here is limited to CDK overlays at the moment in order to reduce the\n      // section of the DOM we need to look through. This should cover all the cases we support, but\n      // the selector can be expanded if it turns out to be too narrow.\n      const modal = this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal=\"true\"]');\n      if (!modal) {\n        // Most commonly, the autocomplete trigger is not inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      if (this._trackedModal) {\n        removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      }\n      addAriaReferencedId(modal, 'aria-owns', panelId);\n      this._trackedModal = modal;\n    }\n    /** Clears the reference to the listbox overlay element from the modal it was added to. */\n    _clearFromModal() {\n      if (!this._trackedModal) {\n        // Most commonly, the autocomplete trigger is not used inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      this._trackedModal = null;\n    }\n    /** Closes the overlay panel and focuses the host element. */\n    close() {\n      if (this._panelOpen) {\n        this._panelOpen = false;\n        this._exitAndDetach();\n        this._keyManager.withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr');\n        this._changeDetectorRef.markForCheck();\n        this._onTouched();\n        // Required for the MDC form field to pick up when the overlay has been closed.\n        this.stateChanges.next();\n        // Simulate the animation event before we moved away from `@angular/animations`.\n        Promise.resolve().then(() => this.openedChange.emit(false));\n      }\n    }\n    /** Triggers the exit animation and detaches the overlay at the end. */\n    _exitAndDetach() {\n      if (this._animationsDisabled || !this.panel) {\n        this._detachOverlay();\n        return;\n      }\n      this._cleanupDetach?.();\n      this._cleanupDetach = () => {\n        cleanupEvent();\n        clearTimeout(exitFallbackTimer);\n        this._cleanupDetach = undefined;\n      };\n      const panel = this.panel.nativeElement;\n      const cleanupEvent = this._renderer.listen(panel, 'animationend', event => {\n        if (event.animationName === '_mat-select-exit') {\n          this._cleanupDetach?.();\n          this._detachOverlay();\n        }\n      });\n      // Since closing the overlay depends on the animation, we have a fallback in case the panel\n      // doesn't animate. This can happen in some internal tests that do `* {animation: none}`.\n      const exitFallbackTimer = setTimeout(() => {\n        this._cleanupDetach?.();\n        this._detachOverlay();\n      }, 200);\n      panel.classList.add('mat-select-panel-exit');\n    }\n    /** Detaches the current overlay directive. */\n    _detachOverlay() {\n      this._overlayDir.detachOverlay();\n      // Some of the overlay detachment logic depends on change detection.\n      // Mark for check to ensure that things get picked up in a timely manner.\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Sets the select's value. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param value New value to be written to the model.\n     */\n    writeValue(value) {\n      this._assignValue(value);\n    }\n    /**\n     * Saves a callback function to be invoked when the select's value\n     * changes from user input. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the value changes.\n     */\n    registerOnChange(fn) {\n      this._onChange = fn;\n    }\n    /**\n     * Saves a callback function to be invoked when the select is blurred\n     * by the user. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the component has been touched.\n     */\n    registerOnTouched(fn) {\n      this._onTouched = fn;\n    }\n    /**\n     * Disables the select. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param isDisabled Sets whether the component is disabled.\n     */\n    setDisabledState(isDisabled) {\n      this.disabled = isDisabled;\n      this._changeDetectorRef.markForCheck();\n      this.stateChanges.next();\n    }\n    /** Whether or not the overlay panel is open. */\n    get panelOpen() {\n      return this._panelOpen;\n    }\n    /** The currently selected option. */\n    get selected() {\n      return this.multiple ? this._selectionModel?.selected || [] : this._selectionModel?.selected[0];\n    }\n    /** The value displayed in the trigger. */\n    get triggerValue() {\n      if (this.empty) {\n        return '';\n      }\n      if (this._multiple) {\n        const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n        if (this._isRtl()) {\n          selectedOptions.reverse();\n        }\n        // TODO(crisbeto): delimiter should be configurable for proper localization.\n        return selectedOptions.join(', ');\n      }\n      return this._selectionModel.selected[0].viewValue;\n    }\n    /** Refreshes the error state of the select. */\n    updateErrorState() {\n      this._errorStateTracker.updateErrorState();\n    }\n    /** Whether the element is in RTL mode. */\n    _isRtl() {\n      return this._dir ? this._dir.value === 'rtl' : false;\n    }\n    /** Handles all keydown events on the select. */\n    _handleKeydown(event) {\n      if (!this.disabled) {\n        this.panelOpen ? this._handleOpenKeydown(event) : this._handleClosedKeydown(event);\n      }\n    }\n    /** Handles keyboard events while the select is closed. */\n    _handleClosedKeydown(event) {\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW || keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW;\n      const isOpenKey = keyCode === ENTER || keyCode === SPACE;\n      const manager = this._keyManager;\n      // Open the select on ALT + arrow key to match the native <select>\n      if (!manager.isTyping() && isOpenKey && !hasModifierKey(event) || (this.multiple || event.altKey) && isArrowKey) {\n        event.preventDefault(); // prevents the page from scrolling down when pressing space\n        this.open();\n      } else if (!this.multiple) {\n        const previouslySelectedOption = this.selected;\n        manager.onKeydown(event);\n        const selectedOption = this.selected;\n        // Since the value has changed, we need to announce it ourselves.\n        if (selectedOption && previouslySelectedOption !== selectedOption) {\n          // We set a duration on the live announcement, because we want the live element to be\n          // cleared after a while so that users can't navigate to it using the arrow keys.\n          this._liveAnnouncer.announce(selectedOption.viewValue, 10000);\n        }\n      }\n    }\n    /** Handles keyboard events when the selected is open. */\n    _handleOpenKeydown(event) {\n      const manager = this._keyManager;\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW;\n      const isTyping = manager.isTyping();\n      if (isArrowKey && event.altKey) {\n        // Close the select on ALT + arrow key to match the native <select>\n        event.preventDefault();\n        this.close();\n        // Don't do anything in this case if the user is typing,\n        // because the typing sequence can include the space key.\n      } else if (!isTyping && (keyCode === ENTER || keyCode === SPACE) && manager.activeItem && !hasModifierKey(event)) {\n        event.preventDefault();\n        manager.activeItem._selectViaInteraction();\n      } else if (!isTyping && this._multiple && keyCode === A && event.ctrlKey) {\n        event.preventDefault();\n        const hasDeselectedOptions = this.options.some(opt => !opt.disabled && !opt.selected);\n        this.options.forEach(option => {\n          if (!option.disabled) {\n            hasDeselectedOptions ? option.select() : option.deselect();\n          }\n        });\n      } else {\n        const previouslyFocusedIndex = manager.activeItemIndex;\n        manager.onKeydown(event);\n        if (this._multiple && isArrowKey && event.shiftKey && manager.activeItem && manager.activeItemIndex !== previouslyFocusedIndex) {\n          manager.activeItem._selectViaInteraction();\n        }\n      }\n    }\n    /** Handles keyboard events coming from the overlay. */\n    _handleOverlayKeydown(event) {\n      // TODO(crisbeto): prior to #30363 this was being handled inside the overlay directive, but we\n      // need control over the animation timing so we do it manually. We should remove the `keydown`\n      // listener from `.mat-mdc-select-panel` and handle all the events here. That may cause\n      // further test breakages so it's left for a follow-up.\n      if (event.keyCode === ESCAPE && !hasModifierKey(event)) {\n        event.preventDefault();\n        this.close();\n      }\n    }\n    _onFocus() {\n      if (!this.disabled) {\n        this._focused = true;\n        this.stateChanges.next();\n      }\n    }\n    /**\n     * Calls the touched callback only if the panel is closed. Otherwise, the trigger will\n     * \"blur\" to the panel when it opens, causing a false positive.\n     */\n    _onBlur() {\n      this._focused = false;\n      this._keyManager?.cancelTypeahead();\n      if (!this.disabled && !this.panelOpen) {\n        this._onTouched();\n        this._changeDetectorRef.markForCheck();\n        this.stateChanges.next();\n      }\n    }\n    /** Returns the theme to be used on the panel. */\n    _getPanelTheme() {\n      return this._parentFormField ? `mat-${this._parentFormField.color}` : '';\n    }\n    /** Whether the select has a value. */\n    get empty() {\n      return !this._selectionModel || this._selectionModel.isEmpty();\n    }\n    _initializeSelection() {\n      // Defer setting the value in order to avoid the \"Expression\n      // has changed after it was checked\" errors from Angular.\n      Promise.resolve().then(() => {\n        if (this.ngControl) {\n          this._value = this.ngControl.value;\n        }\n        this._setSelectionByValue(this._value);\n        this.stateChanges.next();\n      });\n    }\n    /**\n     * Sets the selected option based on a value. If no option can be\n     * found with the designated value, the select trigger is cleared.\n     */\n    _setSelectionByValue(value) {\n      this.options.forEach(option => option.setInactiveStyles());\n      this._selectionModel.clear();\n      if (this.multiple && value) {\n        if (!Array.isArray(value) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n          throw getMatSelectNonArrayValueError();\n        }\n        value.forEach(currentValue => this._selectOptionByValue(currentValue));\n        this._sortValues();\n      } else {\n        const correspondingOption = this._selectOptionByValue(value);\n        // Shift focus to the active item. Note that we shouldn't do this in multiple\n        // mode, because we don't know what option the user interacted with last.\n        if (correspondingOption) {\n          this._keyManager.updateActiveItem(correspondingOption);\n        } else if (!this.panelOpen) {\n          // Otherwise reset the highlighted option. Note that we only want to do this while\n          // closed, because doing it while open can shift the user's focus unnecessarily.\n          this._keyManager.updateActiveItem(-1);\n        }\n      }\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Finds and selects and option based on its value.\n     * @returns Option that has the corresponding value.\n     */\n    _selectOptionByValue(value) {\n      const correspondingOption = this.options.find(option => {\n        // Skip options that are already in the model. This allows us to handle cases\n        // where the same primitive value is selected multiple times.\n        if (this._selectionModel.isSelected(option)) {\n          return false;\n        }\n        try {\n          // Treat null as a special reset value.\n          return (option.value != null || this.canSelectNullableOptions) && this._compareWith(option.value, value);\n        } catch (error) {\n          if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            // Notify developers of errors in their comparator.\n            console.warn(error);\n          }\n          return false;\n        }\n      });\n      if (correspondingOption) {\n        this._selectionModel.select(correspondingOption);\n      }\n      return correspondingOption;\n    }\n    /** Assigns a specific value to the select. Returns whether the value has changed. */\n    _assignValue(newValue) {\n      // Always re-assign an array, because it might have been mutated.\n      if (newValue !== this._value || this._multiple && Array.isArray(newValue)) {\n        if (this.options) {\n          this._setSelectionByValue(newValue);\n        }\n        this._value = newValue;\n        return true;\n      }\n      return false;\n    }\n    // `skipPredicate` determines if key manager should avoid putting a given option in the tab\n    // order. Allow disabled list items to receive focus via keyboard to align with WAI ARIA\n    // recommendation.\n    //\n    // Normally WAI ARIA's instructions are to exclude disabled items from the tab order, but it\n    // makes a few exceptions for compound widgets.\n    //\n    // From [Developing a Keyboard Interface](\n    // https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/):\n    //   \"For the following composite widget elements, keep them focusable when disabled: Options in a\n    //   Listbox...\"\n    //\n    // The user can focus disabled options using the keyboard, but the user cannot click disabled\n    // options.\n    _skipPredicate = option => {\n      if (this.panelOpen) {\n        // Support keyboard focusing disabled options in an ARIA listbox.\n        return false;\n      }\n      // When the panel is closed, skip over disabled options. Support options via the UP/DOWN arrow\n      // keys on a closed select. ARIA listbox interaction pattern is less relevant when the panel is\n      // closed.\n      return option.disabled;\n    };\n    /** Gets how wide the overlay panel should be. */\n    _getOverlayWidth(preferredOrigin) {\n      if (this.panelWidth === 'auto') {\n        const refToMeasure = preferredOrigin instanceof CdkOverlayOrigin ? preferredOrigin.elementRef : preferredOrigin || this._elementRef;\n        return refToMeasure.nativeElement.getBoundingClientRect().width;\n      }\n      return this.panelWidth === null ? '' : this.panelWidth;\n    }\n    /** Syncs the parent state with the individual options. */\n    _syncParentProperties() {\n      if (this.options) {\n        for (const option of this.options) {\n          option._changeDetectorRef.markForCheck();\n        }\n      }\n    }\n    /** Sets up a key manager to listen to keyboard events on the overlay panel. */\n    _initKeyManager() {\n      this._keyManager = new ActiveDescendantKeyManager(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr').withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(['shiftKey']).skipPredicate(this._skipPredicate);\n      this._keyManager.tabOut.subscribe(() => {\n        if (this.panelOpen) {\n          // Select the active item when tabbing away. This is consistent with how the native\n          // select behaves. Note that we only want to do this in single selection mode.\n          if (!this.multiple && this._keyManager.activeItem) {\n            this._keyManager.activeItem._selectViaInteraction();\n          }\n          // Restore focus to the trigger before closing. Ensures that the focus\n          // position won't be lost if the user got focus into the overlay.\n          this.focus();\n          this.close();\n        }\n      });\n      this._keyManager.change.subscribe(() => {\n        if (this._panelOpen && this.panel) {\n          this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n        } else if (!this._panelOpen && !this.multiple && this._keyManager.activeItem) {\n          this._keyManager.activeItem._selectViaInteraction();\n        }\n      });\n    }\n    /** Drops current option subscriptions and IDs and resets from scratch. */\n    _resetOptions() {\n      const changedOrDestroyed = merge(this.options.changes, this._destroy);\n      this.optionSelectionChanges.pipe(takeUntil(changedOrDestroyed)).subscribe(event => {\n        this._onSelect(event.source, event.isUserInput);\n        if (event.isUserInput && !this.multiple && this._panelOpen) {\n          this.close();\n          this.focus();\n        }\n      });\n      // Listen to changes in the internal state of the options and react accordingly.\n      // Handles cases like the labels of the selected options changing.\n      merge(...this.options.map(option => option._stateChanges)).pipe(takeUntil(changedOrDestroyed)).subscribe(() => {\n        // `_stateChanges` can fire as a result of a change in the label's DOM value which may\n        // be the result of an expression changing. We have to use `detectChanges` in order\n        // to avoid \"changed after checked\" errors (see #14793).\n        this._changeDetectorRef.detectChanges();\n        this.stateChanges.next();\n      });\n    }\n    /** Invoked when an option is clicked. */\n    _onSelect(option, isUserInput) {\n      const wasSelected = this._selectionModel.isSelected(option);\n      if (!this.canSelectNullableOptions && option.value == null && !this._multiple) {\n        option.deselect();\n        this._selectionModel.clear();\n        if (this.value != null) {\n          this._propagateChanges(option.value);\n        }\n      } else {\n        if (wasSelected !== option.selected) {\n          option.selected ? this._selectionModel.select(option) : this._selectionModel.deselect(option);\n        }\n        if (isUserInput) {\n          this._keyManager.setActiveItem(option);\n        }\n        if (this.multiple) {\n          this._sortValues();\n          if (isUserInput) {\n            // In case the user selected the option with their mouse, we\n            // want to restore focus back to the trigger, in order to\n            // prevent the select keyboard controls from clashing with\n            // the ones from `mat-option`.\n            this.focus();\n          }\n        }\n      }\n      if (wasSelected !== this._selectionModel.isSelected(option)) {\n        this._propagateChanges();\n      }\n      this.stateChanges.next();\n    }\n    /** Sorts the selected values in the selected based on their order in the panel. */\n    _sortValues() {\n      if (this.multiple) {\n        const options = this.options.toArray();\n        this._selectionModel.sort((a, b) => {\n          return this.sortComparator ? this.sortComparator(a, b, options) : options.indexOf(a) - options.indexOf(b);\n        });\n        this.stateChanges.next();\n      }\n    }\n    /** Emits change event to set the model value. */\n    _propagateChanges(fallbackValue) {\n      let valueToEmit;\n      if (this.multiple) {\n        valueToEmit = this.selected.map(option => option.value);\n      } else {\n        valueToEmit = this.selected ? this.selected.value : fallbackValue;\n      }\n      this._value = valueToEmit;\n      this.valueChange.emit(valueToEmit);\n      this._onChange(valueToEmit);\n      this.selectionChange.emit(this._getChangeEvent(valueToEmit));\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Highlights the selected item. If no option is selected, it will highlight\n     * the first *enabled* option.\n     */\n    _highlightCorrectOption() {\n      if (this._keyManager) {\n        if (this.empty) {\n          // Find the index of the first *enabled* option. Avoid calling `_keyManager.setActiveItem`\n          // because it activates the first option that passes the skip predicate, rather than the\n          // first *enabled* option.\n          let firstEnabledOptionIndex = -1;\n          for (let index = 0; index < this.options.length; index++) {\n            const option = this.options.get(index);\n            if (!option.disabled) {\n              firstEnabledOptionIndex = index;\n              break;\n            }\n          }\n          this._keyManager.setActiveItem(firstEnabledOptionIndex);\n        } else {\n          this._keyManager.setActiveItem(this._selectionModel.selected[0]);\n        }\n      }\n    }\n    /** Whether the panel is allowed to open. */\n    _canOpen() {\n      return !this._panelOpen && !this.disabled && this.options?.length > 0 && !!this._overlayDir;\n    }\n    /** Focuses the select element. */\n    focus(options) {\n      this._elementRef.nativeElement.focus(options);\n    }\n    /** Gets the aria-labelledby for the select panel. */\n    _getPanelAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      const labelId = this._parentFormField?.getLabelId() || null;\n      const labelExpression = labelId ? labelId + ' ' : '';\n      return this.ariaLabelledby ? labelExpression + this.ariaLabelledby : labelId;\n    }\n    /** Determines the `aria-activedescendant` to be set on the host. */\n    _getAriaActiveDescendant() {\n      if (this.panelOpen && this._keyManager && this._keyManager.activeItem) {\n        return this._keyManager.activeItem.id;\n      }\n      return null;\n    }\n    /** Gets the aria-labelledby of the select component trigger. */\n    _getTriggerAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      const labelId = this._parentFormField?.getLabelId();\n      let value = (labelId ? labelId + ' ' : '') + this._valueId;\n      if (this.ariaLabelledby) {\n        value += ' ' + this.ariaLabelledby;\n      }\n      return value;\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    setDescribedByIds(ids) {\n      if (ids.length) {\n        this._elementRef.nativeElement.setAttribute('aria-describedby', ids.join(' '));\n      } else {\n        this._elementRef.nativeElement.removeAttribute('aria-describedby');\n      }\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    onContainerClick() {\n      this.focus();\n      this.open();\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    get shouldLabelFloat() {\n      // Since the panel doesn't overlap the trigger, we\n      // want the label to only float when there's a value.\n      return this.panelOpen || !this.empty || this.focused && !!this.placeholder;\n    }\n    static ɵfac = function MatSelect_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelect)();\n    };\n    static ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n      type: MatSelect,\n      selectors: [[\"mat-select\"]],\n      contentQueries: function MatSelect_ContentQueries(rf, ctx, dirIndex) {\n        if (rf & 1) {\n          i0.ɵɵcontentQuery(dirIndex, MAT_SELECT_TRIGGER, 5);\n          i0.ɵɵcontentQuery(dirIndex, MatOption, 5);\n          i0.ɵɵcontentQuery(dirIndex, MAT_OPTGROUP, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.customTrigger = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.options = _t);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.optionGroups = _t);\n        }\n      },\n      viewQuery: function MatSelect_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n          i0.ɵɵviewQuery(_c1, 5);\n          i0.ɵɵviewQuery(CdkConnectedOverlay, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.trigger = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.panel = _t.first);\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._overlayDir = _t.first);\n        }\n      },\n      hostAttrs: [\"role\", \"combobox\", \"aria-haspopup\", \"listbox\", 1, \"mat-mdc-select\"],\n      hostVars: 19,\n      hostBindings: function MatSelect_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"keydown\", function MatSelect_keydown_HostBindingHandler($event) {\n            return ctx._handleKeydown($event);\n          })(\"focus\", function MatSelect_focus_HostBindingHandler() {\n            return ctx._onFocus();\n          })(\"blur\", function MatSelect_blur_HostBindingHandler() {\n            return ctx._onBlur();\n          });\n        }\n        if (rf & 2) {\n          i0.ɵɵattribute(\"id\", ctx.id)(\"tabindex\", ctx.disabled ? -1 : ctx.tabIndex)(\"aria-controls\", ctx.panelOpen ? ctx.id + \"-panel\" : null)(\"aria-expanded\", ctx.panelOpen)(\"aria-label\", ctx.ariaLabel || null)(\"aria-required\", ctx.required.toString())(\"aria-disabled\", ctx.disabled.toString())(\"aria-invalid\", ctx.errorState)(\"aria-activedescendant\", ctx._getAriaActiveDescendant());\n          i0.ɵɵclassProp(\"mat-mdc-select-disabled\", ctx.disabled)(\"mat-mdc-select-invalid\", ctx.errorState)(\"mat-mdc-select-required\", ctx.required)(\"mat-mdc-select-empty\", ctx.empty)(\"mat-mdc-select-multiple\", ctx.multiple);\n        }\n      },\n      inputs: {\n        userAriaDescribedBy: [0, \"aria-describedby\", \"userAriaDescribedBy\"],\n        panelClass: \"panelClass\",\n        disabled: [2, \"disabled\", \"disabled\", booleanAttribute],\n        disableRipple: [2, \"disableRipple\", \"disableRipple\", booleanAttribute],\n        tabIndex: [2, \"tabIndex\", \"tabIndex\", value => value == null ? 0 : numberAttribute(value)],\n        hideSingleSelectionIndicator: [2, \"hideSingleSelectionIndicator\", \"hideSingleSelectionIndicator\", booleanAttribute],\n        placeholder: \"placeholder\",\n        required: [2, \"required\", \"required\", booleanAttribute],\n        multiple: [2, \"multiple\", \"multiple\", booleanAttribute],\n        disableOptionCentering: [2, \"disableOptionCentering\", \"disableOptionCentering\", booleanAttribute],\n        compareWith: \"compareWith\",\n        value: \"value\",\n        ariaLabel: [0, \"aria-label\", \"ariaLabel\"],\n        ariaLabelledby: [0, \"aria-labelledby\", \"ariaLabelledby\"],\n        errorStateMatcher: \"errorStateMatcher\",\n        typeaheadDebounceInterval: [2, \"typeaheadDebounceInterval\", \"typeaheadDebounceInterval\", numberAttribute],\n        sortComparator: \"sortComparator\",\n        id: \"id\",\n        panelWidth: \"panelWidth\",\n        canSelectNullableOptions: [2, \"canSelectNullableOptions\", \"canSelectNullableOptions\", booleanAttribute]\n      },\n      outputs: {\n        openedChange: \"openedChange\",\n        _openedStream: \"opened\",\n        _closedStream: \"closed\",\n        selectionChange: \"selectionChange\",\n        valueChange: \"valueChange\"\n      },\n      exportAs: [\"matSelect\"],\n      features: [i0.ɵɵProvidersFeature([{\n        provide: MatFormFieldControl,\n        useExisting: MatSelect\n      }, {\n        provide: MAT_OPTION_PARENT_COMPONENT,\n        useExisting: MatSelect\n      }]), i0.ɵɵNgOnChangesFeature],\n      ngContentSelectors: _c3,\n      decls: 11,\n      vars: 8,\n      consts: [[\"fallbackOverlayOrigin\", \"cdkOverlayOrigin\", \"trigger\", \"\"], [\"panel\", \"\"], [\"cdk-overlay-origin\", \"\", 1, \"mat-mdc-select-trigger\", 3, \"click\"], [1, \"mat-mdc-select-value\"], [1, \"mat-mdc-select-placeholder\", \"mat-mdc-select-min-line\"], [1, \"mat-mdc-select-value-text\"], [1, \"mat-mdc-select-arrow-wrapper\"], [1, \"mat-mdc-select-arrow\"], [\"viewBox\", \"0 0 24 24\", \"width\", \"24px\", \"height\", \"24px\", \"focusable\", \"false\", \"aria-hidden\", \"true\"], [\"d\", \"M7 10l5 5 5-5z\"], [\"cdk-connected-overlay\", \"\", \"cdkConnectedOverlayLockPosition\", \"\", \"cdkConnectedOverlayHasBackdrop\", \"\", \"cdkConnectedOverlayBackdropClass\", \"cdk-overlay-transparent-backdrop\", 3, \"backdropClick\", \"overlayKeydown\", \"cdkConnectedOverlayDisableClose\", \"cdkConnectedOverlayPanelClass\", \"cdkConnectedOverlayScrollStrategy\", \"cdkConnectedOverlayOrigin\", \"cdkConnectedOverlayPositions\", \"cdkConnectedOverlayWidth\"], [1, \"mat-mdc-select-min-line\"], [\"role\", \"listbox\", \"tabindex\", \"-1\", 3, \"keydown\", \"ngClass\"]],\n      template: function MatSelect_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵprojectionDef(_c2);\n          i0.ɵɵelementStart(0, \"div\", 2, 0);\n          i0.ɵɵlistener(\"click\", function MatSelect_Template_div_click_0_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.open());\n          });\n          i0.ɵɵelementStart(3, \"div\", 3);\n          i0.ɵɵtemplate(4, MatSelect_Conditional_4_Template, 2, 1, \"span\", 4)(5, MatSelect_Conditional_5_Template, 3, 1, \"span\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n          i0.ɵɵnamespaceSVG();\n          i0.ɵɵelementStart(8, \"svg\", 8);\n          i0.ɵɵelement(9, \"path\", 9);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵtemplate(10, MatSelect_ng_template_10_Template, 3, 10, \"ng-template\", 10);\n          i0.ɵɵlistener(\"backdropClick\", function MatSelect_Template_ng_template_backdropClick_10_listener() {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx.close());\n          })(\"overlayKeydown\", function MatSelect_Template_ng_template_overlayKeydown_10_listener($event) {\n            i0.ɵɵrestoreView(_r1);\n            return i0.ɵɵresetView(ctx._handleOverlayKeydown($event));\n          });\n        }\n        if (rf & 2) {\n          const fallbackOverlayOrigin_r4 = i0.ɵɵreference(1);\n          i0.ɵɵadvance(3);\n          i0.ɵɵattribute(\"id\", ctx._valueId);\n          i0.ɵɵadvance();\n          i0.ɵɵconditional(ctx.empty ? 4 : 5);\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"cdkConnectedOverlayDisableClose\", true)(\"cdkConnectedOverlayPanelClass\", ctx._overlayPanelClass)(\"cdkConnectedOverlayScrollStrategy\", ctx._scrollStrategy)(\"cdkConnectedOverlayOrigin\", ctx._preferredOverlayOrigin || fallbackOverlayOrigin_r4)(\"cdkConnectedOverlayPositions\", ctx._positions)(\"cdkConnectedOverlayWidth\", ctx._overlayWidth);\n        }\n      },\n      dependencies: [CdkOverlayOrigin, CdkConnectedOverlay, NgClass],\n      styles: [\"@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:\\\" \\\";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}\"],\n      encapsulation: 2,\n      changeDetection: 0\n    });\n  }\n  return MatSelect;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Allows the user to customize the trigger that is displayed when the select has a value.\n */\nlet MatSelectTrigger = /*#__PURE__*/(() => {\n  class MatSelectTrigger {\n    static ɵfac = function MatSelectTrigger_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelectTrigger)();\n    };\n    static ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n      type: MatSelectTrigger,\n      selectors: [[\"mat-select-trigger\"]],\n      features: [i0.ɵɵProvidersFeature([{\n        provide: MAT_SELECT_TRIGGER,\n        useExisting: MatSelectTrigger\n      }])]\n    });\n  }\n  return MatSelectTrigger;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSelectModule = /*#__PURE__*/(() => {\n  class MatSelectModule {\n    static ɵfac = function MatSelectModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MatSelectModule)();\n    };\n    static ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n      type: MatSelectModule\n    });\n    static ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n      providers: [MAT_SELECT_SCROLL_STRATEGY_PROVIDER],\n      imports: [OverlayModule, MatOptionModule, MatCommonModule, CdkScrollableModule, MatFormFieldModule, MatOptionModule, MatCommonModule]\n    });\n  }\n  return MatSelectModule;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * The following are all the animations for the mat-select component, with each\n * const containing the metadata for one animation.\n *\n * The values below match the implementation of the AngularJS Material mat-select animation.\n * @docs-private\n * @deprecated No longer used, will be removed.\n * @breaking-change 21.0.0\n */\nconst matSelectAnimations = {\n  // Represents\n  // trigger('transformPanelWrap', [\n  //   transition('* => void', query('@transformPanel', [animateChild()], {optional: true})),\n  // ])\n  /**\n   * This animation ensures the select's overlay panel animation (transformPanel) is called when\n   * closing the select.\n   * This is needed due to https://github.com/angular/angular/issues/23302\n   */\n  transformPanelWrap: {\n    type: 7,\n    name: 'transformPanelWrap',\n    definitions: [{\n      type: 1,\n      expr: '* => void',\n      animation: {\n        type: 11,\n        selector: '@transformPanel',\n        animation: [{\n          type: 9,\n          options: null\n        }],\n        options: {\n          optional: true\n        }\n      },\n      options: null\n    }],\n    options: {}\n  },\n  // Represents\n  // trigger('transformPanel', [\n  //   state(\n  //     'void',\n  //     style({\n  //       opacity: 0,\n  //       transform: 'scale(1, 0.8)',\n  //     }),\n  //   ),\n  //   transition(\n  //     'void => showing',\n  //     animate(\n  //       '120ms cubic-bezier(0, 0, 0.2, 1)',\n  //       style({\n  //         opacity: 1,\n  //         transform: 'scale(1, 1)',\n  //       }),\n  //     ),\n  //   ),\n  //   transition('* => void', animate('100ms linear', style({opacity: 0}))),\n  // ])\n  /** This animation transforms the select's overlay panel on and off the page. */\n  transformPanel: {\n    type: 7,\n    name: 'transformPanel',\n    definitions: [{\n      type: 0,\n      name: 'void',\n      styles: {\n        type: 6,\n        styles: {\n          opacity: 0,\n          transform: 'scale(1, 0.8)'\n        },\n        offset: null\n      }\n    }, {\n      type: 1,\n      expr: 'void => showing',\n      animation: {\n        type: 4,\n        styles: {\n          type: 6,\n          styles: {\n            opacity: 1,\n            transform: 'scale(1, 1)'\n          },\n          offset: null\n        },\n        timings: '120ms cubic-bezier(0, 0, 0.2, 1)'\n      },\n      options: null\n    }, {\n      type: 1,\n      expr: '* => void',\n      animation: {\n        type: 4,\n        styles: {\n          type: 6,\n          styles: {\n            opacity: 0\n          },\n          offset: null\n        },\n        timings: '100ms linear'\n      },\n      options: null\n    }],\n    options: {}\n  }\n};\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_SELECT_CONFIG, MAT_SELECT_SCROLL_STRATEGY, MAT_SELECT_SCROLL_STRATEGY_PROVIDER, MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY, MAT_SELECT_TRIGGER, MatSelect, MatSelectChange, MatSelectModule, MatSelectTrigger, matSelectAnimations };\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;","let defaultOptions = {};\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfYear} function options.\n */\n\n/**\n * @name endOfYear\n * @category Year Helpers\n * @summary Return the end of a year for the given date.\n *\n * @description\n * Return the end of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The end of a year\n *\n * @example\n * // The end of a year for 2 September 2014 11:55:00:\n * const result = endOfYear(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Wed Dec 31 2014 23:59:59.999\n */\nexport function endOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  _date.setFullYear(year + 1, 0, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfYear;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfMonth} function options.\n */\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date. The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments.\n * Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed,\n * or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link subDays} function options.\n */\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount, options) {\n  return addDays(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subDays;","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMonths} function options.\n */\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n * @param options - The options object\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(options?.in || date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The subMonths function options.\n */\n\n/**\n * @name subMonths\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the months subtracted\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * const result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function subMonths(date, amount, options) {\n  return addMonths(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subMonths;","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link addWeeks} function options.\n */\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of weeks to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be added.\n * @param options - An object with options\n *\n * @returns The new date with the weeks added\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\nexport function addWeeks(date, amount, options) {\n  return addDays(date, amount * 7, options);\n}\n\n// Fallback for modularized imports:\nexport default addWeeks;","import { addWeeks } from \"./addWeeks.js\";\n\n/**\n * The {@link subWeeks} function options.\n */\n\n/**\n * @name subWeeks\n * @category Week Helpers\n * @summary Subtract the specified number of weeks from the given date.\n *\n * @description\n * Subtract the specified number of weeks from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the weeks subtracted\n *\n * @example\n * // Subtract 4 weeks from 1 September 2014:\n * const result = subWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Aug 04 2014 00:00:00\n */\nexport function subWeeks(date, amount, options) {\n  return addWeeks(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subWeeks;","import { addMonths } from \"./addMonths.js\";\n\n/**\n * The {@link addYears} function options.\n */\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be added.\n * @param options - The options\n *\n * @returns The new date with the years added\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\nexport function addYears(date, amount, options) {\n  return addMonths(date, amount * 12, options);\n}\n\n// Fallback for modularized imports:\nexport default addYears;","import { addYears } from \"./addYears.js\";\n\n/**\n * The {@link subYears} function options.\n */\n\n/**\n * @name subYears\n * @category Year Helpers\n * @summary Subtract the specified number of years from the given date.\n *\n * @description\n * Subtract the specified number of years from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be subtracted.\n * @param options - An object with options\n *\n * @returns The new date with the years subtracted\n *\n * @example\n * // Subtract 5 years from 1 September 2014:\n * const result = subYears(new Date(2014, 8, 1), 5)\n * //=> Tue Sep 01 2009 00:00:00\n */\nexport function subYears(date, amount, options) {\n  return addYears(date, -amount, options);\n}\n\n// Fallback for modularized imports:\nexport default subYears;","import { assertNever } from '@app/utils/assert';\nimport { pad2 } from '@app/utils/number';\n\nexport type Duration = Milliseconds;\nexport type Seconds = number;\nexport type Milliseconds = number;\nexport type DurationFn = (now: Milliseconds) => Duration;\n\nexport const formatHours = (value: Duration): string => {\n  if (value <= 0) return '00:00';\n\n  return (['h', 'm'] as const)\n    .map((part) => {\n      switch (part) {\n        case 'h':\n          return pad2(~~(value / 3600000));\n        case 'm':\n          return pad2(~~((value % 3600000) / 60000));\n        default:\n          return assertNever(part);\n      }\n    })\n    .join(':');\n};\n\nexport const daysToMilliseconds = (days: number): Milliseconds => days * 24 * 60 * 60 * 1000;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\"\n  },\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\"\n  },\n  halfAMinute: \"half a minute\",\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\"\n  },\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\"\n  },\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\"\n  },\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\"\n  },\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\"\n  },\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\"\n  },\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\"\n  },\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\"\n  },\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\"\n  },\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\"\n  },\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\"\n  },\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\"\n  },\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\"\n  }\n};\nexport const formatDistance = (token, count, options) => {\n  let result;\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n  return result;\n};","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.js\";\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\"\n};\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\"\n};\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\"\n};\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\"\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\"\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\"\n  })\n};","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\"\n};\nexport const formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];","/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.js\";\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"]\n};\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"]\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n  wide: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n};\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n};\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  }\n};\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  }\n};\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\nexport const localize = {\n  ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\"\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: quarter => quarter - 1\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\"\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\"\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\"\n  })\n};","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, pattern => pattern.test(matchedString)) :\n    // [TODO] -- I challenge you to fix the type\n    findKey(parsePatterns, pattern => pattern.test(matchedString));\n    let value;\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback ?\n    // [TODO] -- I challenge you to fix the type\n    options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n\n    // [TODO] I challenge you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}","import { buildMatchFn } from \"../../_lib/buildMatchFn.js\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.js\";\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nconst parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: value => parseInt(value, 10)\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: index => index + 1\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\"\n  })\n};","import { formatDistance } from \"./en-US/_lib/formatDistance.js\";\nimport { formatLong } from \"./en-US/_lib/formatLong.js\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.js\";\nimport { localize } from \"./en-US/_lib/localize.js\";\nimport { match } from \"./en-US/_lib/match.js\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1\n  }\n};\n\n// Fallback for modularized imports:\nexport default enUS;","import { toDate } from \"../toDate.js\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(Date.UTC(_date.getFullYear(), _date.getMonth(), _date.getDate(), _date.getHours(), _date.getMinutes(), _date.getSeconds(), _date.getMilliseconds()));\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}","import { constructFrom } from \"../constructFrom.js\";\nexport function normalizeDates(context, ...dates) {\n  const normalize = constructFrom.bind(null, context || dates.find(date => typeof date === \"object\"));\n  return dates.map(normalize);\n}","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(options?.in, laterDate, earlierDate);\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n  const laterTimestamp = +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp = +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, {\n    ...options,\n    weekStartsOn: 1\n  });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\"\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, {\n          width: \"abbreviated\"\n        });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, {\n          width: \"narrow\"\n        });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, {\n          width: \"wide\"\n        });\n    }\n  },\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, {\n        unit: \"year\"\n      });\n    }\n    return lightFormatters.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, {\n        unit: \"year\"\n      });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), {\n        unit: \"date\"\n      });\n    }\n    return lightFormatters.d(date, token);\n  },\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, {\n        unit: \"dayOfYear\"\n      });\n    }\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\"\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, {\n          unit: \"day\"\n        });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"aaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"bbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.h(date, token);\n  },\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.H(date, token);\n  },\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), {\n        unit: \"minute\"\n      });\n    }\n    return lightFormatters.m(date, token);\n  },\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), {\n        unit: \"second\"\n      });\n    }\n    return lightFormatters.s(date, token);\n  },\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  }\n};\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({\n        width: \"short\"\n      });\n    case \"PP\":\n      return formatLong.date({\n        width: \"medium\"\n      });\n    case \"PPP\":\n      return formatLong.date({\n        width: \"long\"\n      });\n    case \"PPPP\":\n    default:\n      return formatLong.date({\n        width: \"full\"\n      });\n  }\n};\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({\n        width: \"short\"\n      });\n    case \"pp\":\n      return formatLong.time({\n        width: \"medium\"\n      });\n    case \"ppp\":\n      return formatLong.time({\n        width: \"long\"\n      });\n    case \"pppp\":\n    default:\n      return formatLong.time({\n        width: \"full\"\n      });\n  }\n};\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n  let dateTimeFormat;\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"short\"\n      });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"medium\"\n      });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"long\"\n      });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: \"full\"\n      });\n      break;\n  }\n  return dateTimeFormat.replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong)).replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport { isProtectedDayOfYearToken, isProtectedWeekYearToken, warnOrThrowProtectedError } from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const originalDate = toDate(date, options?.in);\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n  let parts = formatStr.match(longFormattingTokensRegExp).map(substring => {\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n      const longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale.formatLong);\n    }\n    return substring;\n  }).join(\"\").match(formattingTokensRegExp).map(substring => {\n    // Replace two single quote characters with one single quote character\n    if (substring === \"''\") {\n      return {\n        isToken: false,\n        value: \"'\"\n      };\n    }\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"'\") {\n      return {\n        isToken: false,\n        value: cleanEscapedString(substring)\n      };\n    }\n    if (formatters[firstCharacter]) {\n      return {\n        isToken: true,\n        value: substring\n      };\n    }\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError(\"Format string contains an unescaped latin alphabet character `\" + firstCharacter + \"`\");\n    }\n    return {\n      isToken: false,\n      value: substring\n    };\n  });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale\n  };\n  return parts.map(part => {\n    if (!part.isToken) return part.value;\n    const token = part.value;\n    if (!options?.useAdditionalWeekYearTokens && isProtectedWeekYearToken(token) || !options?.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(token)) {\n      warnOrThrowProtectedError(token, formatStr, String(date));\n    }\n    const formatter = formatters[token[0]];\n    return formatter(originalDate, token, locale.localize, formatterOptions);\n  }).join(\"\");\n}\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n  if (!matched) {\n    return input;\n  }\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;","/**\n* Copyright (c) 2024, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uPlot.js (μPlot)\n* A small, fast chart for time series, lines, areas, ohlc & bars\n* https://github.com/leeoniya/uPlot (v1.6.31)\n*/\n\nconst FEAT_TIME = true;\nconst pre = \"u-\";\nconst UPLOT = \"uplot\";\nconst ORI_HZ = pre + \"hz\";\nconst ORI_VT = pre + \"vt\";\nconst TITLE = pre + \"title\";\nconst WRAP = pre + \"wrap\";\nconst UNDER = pre + \"under\";\nconst OVER = pre + \"over\";\nconst AXIS = pre + \"axis\";\nconst OFF = pre + \"off\";\nconst SELECT = pre + \"select\";\nconst CURSOR_X = pre + \"cursor-x\";\nconst CURSOR_Y = pre + \"cursor-y\";\nconst CURSOR_PT = pre + \"cursor-pt\";\nconst LEGEND = pre + \"legend\";\nconst LEGEND_LIVE = pre + \"live\";\nconst LEGEND_INLINE = pre + \"inline\";\nconst LEGEND_SERIES = pre + \"series\";\nconst LEGEND_MARKER = pre + \"marker\";\nconst LEGEND_LABEL = pre + \"label\";\nconst LEGEND_VALUE = pre + \"value\";\nconst WIDTH = \"width\";\nconst HEIGHT = \"height\";\nconst TOP = \"top\";\nconst BOTTOM = \"bottom\";\nconst LEFT = \"left\";\nconst RIGHT = \"right\";\nconst hexBlack = \"#000\";\nconst transparent = hexBlack + \"0\";\nconst mousemove = \"mousemove\";\nconst mousedown = \"mousedown\";\nconst mouseup = \"mouseup\";\nconst mouseenter = \"mouseenter\";\nconst mouseleave = \"mouseleave\";\nconst dblclick = \"dblclick\";\nconst resize = \"resize\";\nconst scroll = \"scroll\";\nconst change = \"change\";\nconst dppxchange = \"dppxchange\";\nconst LEGEND_DISP = \"--\";\nconst domEnv = typeof window != 'undefined';\nconst doc = domEnv ? document : null;\nconst win = domEnv ? window : null;\nconst nav = domEnv ? navigator : null;\nlet pxRatio;\n\n//export const canHover = domEnv && !win.matchMedia('(hover: none)').matches;\n\nlet query;\nfunction setPxRatio() {\n  let _pxRatio = devicePixelRatio;\n\n  // during print preview, Chrome fires off these dppx queries even without changes\n  if (pxRatio != _pxRatio) {\n    pxRatio = _pxRatio;\n    query && off(change, query, setPxRatio);\n    query = matchMedia(`(min-resolution: ${pxRatio - 0.001}dppx) and (max-resolution: ${pxRatio + 0.001}dppx)`);\n    on(change, query, setPxRatio);\n    win.dispatchEvent(new CustomEvent(dppxchange));\n  }\n}\nfunction addClass(el, c) {\n  if (c != null) {\n    let cl = el.classList;\n    !cl.contains(c) && cl.add(c);\n  }\n}\nfunction remClass(el, c) {\n  let cl = el.classList;\n  cl.contains(c) && cl.remove(c);\n}\nfunction setStylePx(el, name, value) {\n  el.style[name] = value + \"px\";\n}\nfunction placeTag(tag, cls, targ, refEl) {\n  let el = doc.createElement(tag);\n  if (cls != null) addClass(el, cls);\n  if (targ != null) targ.insertBefore(el, refEl);\n  return el;\n}\nfunction placeDiv(cls, targ) {\n  return placeTag(\"div\", cls, targ);\n}\nconst xformCache = new WeakMap();\nfunction elTrans(el, xPos, yPos, xMax, yMax) {\n  let xform = \"translate(\" + xPos + \"px,\" + yPos + \"px)\";\n  let xformOld = xformCache.get(el);\n  if (xform != xformOld) {\n    el.style.transform = xform;\n    xformCache.set(el, xform);\n    if (xPos < 0 || yPos < 0 || xPos > xMax || yPos > yMax) addClass(el, OFF);else remClass(el, OFF);\n  }\n}\nconst colorCache = new WeakMap();\nfunction elColor(el, background, borderColor) {\n  let newColor = background + borderColor;\n  let oldColor = colorCache.get(el);\n  if (newColor != oldColor) {\n    colorCache.set(el, newColor);\n    el.style.background = background;\n    el.style.borderColor = borderColor;\n  }\n}\nconst sizeCache = new WeakMap();\nfunction elSize(el, newWid, newHgt, centered) {\n  let newSize = newWid + \"\" + newHgt;\n  let oldSize = sizeCache.get(el);\n  if (newSize != oldSize) {\n    sizeCache.set(el, newSize);\n    el.style.height = newHgt + \"px\";\n    el.style.width = newWid + \"px\";\n    el.style.marginLeft = centered ? -newWid / 2 + \"px\" : 0;\n    el.style.marginTop = centered ? -newHgt / 2 + \"px\" : 0;\n  }\n}\nconst evOpts = {\n  passive: true\n};\nconst evOpts2 = {\n  ...evOpts,\n  capture: true\n};\nfunction on(ev, el, cb, capt) {\n  el.addEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\nfunction off(ev, el, cb, capt) {\n  el.removeEventListener(ev, cb, evOpts);\n}\ndomEnv && setPxRatio();\n\n// binary search for index of closest value\nfunction closestIdx(num, arr, lo, hi) {\n  let mid;\n  lo = lo || 0;\n  hi = hi || arr.length - 1;\n  let bitwise = hi <= 2147483647;\n  while (hi - lo > 1) {\n    mid = bitwise ? lo + hi >> 1 : floor((lo + hi) / 2);\n    if (arr[mid] < num) lo = mid;else hi = mid;\n  }\n  if (num - arr[lo] <= arr[hi] - num) return lo;\n  return hi;\n}\nfunction nonNullIdx(data, _i0, _i1, dir) {\n  for (let i = dir == 1 ? _i0 : _i1; i >= _i0 && i <= _i1; i += dir) {\n    if (data[i] != null) return i;\n  }\n  return -1;\n}\nfunction getMinMax(data, _i0, _i1, sorted) {\n  //\tconsole.log(\"getMinMax()\");\n\n  let _min = inf;\n  let _max = -inf;\n  if (sorted == 1) {\n    _min = data[_i0];\n    _max = data[_i1];\n  } else if (sorted == -1) {\n    _min = data[_i1];\n    _max = data[_i0];\n  } else {\n    for (let i = _i0; i <= _i1; i++) {\n      let v = data[i];\n      if (v != null) {\n        if (v < _min) _min = v;\n        if (v > _max) _max = v;\n      }\n    }\n  }\n  return [_min, _max];\n}\nfunction getMinMaxLog(data, _i0, _i1) {\n  //\tconsole.log(\"getMinMax()\");\n\n  let _min = inf;\n  let _max = -inf;\n  for (let i = _i0; i <= _i1; i++) {\n    let v = data[i];\n    if (v != null && v > 0) {\n      if (v < _min) _min = v;\n      if (v > _max) _max = v;\n    }\n  }\n  return [_min, _max];\n}\nfunction rangeLog(min, max, base, fullMags) {\n  let minSign = sign(min);\n  let maxSign = sign(max);\n  if (min == max) {\n    if (minSign == -1) {\n      min *= base;\n      max /= base;\n    } else {\n      min /= base;\n      max *= base;\n    }\n  }\n  let logFn = base == 10 ? log10 : log2;\n  let growMinAbs = minSign == 1 ? floor : ceil;\n  let growMaxAbs = maxSign == 1 ? ceil : floor;\n  let minExp = growMinAbs(logFn(abs(min)));\n  let maxExp = growMaxAbs(logFn(abs(max)));\n  let minIncr = pow(base, minExp);\n  let maxIncr = pow(base, maxExp);\n\n  // fix values like Math.pow(10, -5) === 0.000009999999999999999\n  if (base == 10) {\n    if (minExp < 0) minIncr = roundDec(minIncr, -minExp);\n    if (maxExp < 0) maxIncr = roundDec(maxIncr, -maxExp);\n  }\n  if (fullMags || base == 2) {\n    min = minIncr * minSign;\n    max = maxIncr * maxSign;\n  } else {\n    min = incrRoundDn(min, minIncr);\n    max = incrRoundUp(max, maxIncr);\n  }\n  return [min, max];\n}\nfunction rangeAsinh(min, max, base, fullMags) {\n  let minMax = rangeLog(min, max, base, fullMags);\n  if (min == 0) minMax[0] = 0;\n  if (max == 0) minMax[1] = 0;\n  return minMax;\n}\nconst rangePad = 0.1;\nconst autoRangePart = {\n  mode: 3,\n  pad: rangePad\n};\nconst _eqRangePart = {\n  pad: 0,\n  soft: null,\n  mode: 0\n};\nconst _eqRange = {\n  min: _eqRangePart,\n  max: _eqRangePart\n};\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction rangeNum(_min, _max, mult, extra) {\n  if (isObj(mult)) return _rangeNum(_min, _max, mult);\n  _eqRangePart.pad = mult;\n  _eqRangePart.soft = extra ? 0 : null;\n  _eqRangePart.mode = extra ? 3 : 0;\n  return _rangeNum(_min, _max, _eqRange);\n}\n\n// nullish coalesce\nfunction ifNull(lh, rh) {\n  return lh == null ? rh : lh;\n}\n\n// checks if given index range in an array contains a non-null value\n// aka a range-bounded Array.some()\nfunction hasData(data, idx0, idx1) {\n  idx0 = ifNull(idx0, 0);\n  idx1 = ifNull(idx1, data.length - 1);\n  while (idx0 <= idx1) {\n    if (data[idx0] != null) return true;\n    idx0++;\n  }\n  return false;\n}\nfunction _rangeNum(_min, _max, cfg) {\n  let cmin = cfg.min;\n  let cmax = cfg.max;\n  let padMin = ifNull(cmin.pad, 0);\n  let padMax = ifNull(cmax.pad, 0);\n  let hardMin = ifNull(cmin.hard, -inf);\n  let hardMax = ifNull(cmax.hard, inf);\n  let softMin = ifNull(cmin.soft, inf);\n  let softMax = ifNull(cmax.soft, -inf);\n  let softMinMode = ifNull(cmin.mode, 0);\n  let softMaxMode = ifNull(cmax.mode, 0);\n  let delta = _max - _min;\n  let deltaMag = log10(delta);\n  let scalarMax = max(abs(_min), abs(_max));\n  let scalarMag = log10(scalarMax);\n  let scalarMagDelta = abs(scalarMag - deltaMag);\n\n  // this handles situations like 89.7, 89.69999999999999\n  // by assuming 0.001x deltas are precision errors\n  //\tif (delta > 0 && delta < abs(_max) / 1e3)\n  //\t\tdelta = 0;\n\n  // treat data as flat if delta is less than 1e-24\n  // or range is 11+ orders of magnitude below raw values, e.g. 99999999.99999996 - 100000000.00000004\n  if (delta < 1e-24 || scalarMagDelta > 10) {\n    delta = 0;\n\n    // if soft mode is 2 and all vals are flat at 0, avoid the 0.1 * 1e3 fallback\n    // this prevents 0,0,0 from ranging to -100,100 when softMin/softMax are -1,1\n    if (_min == 0 || _max == 0) {\n      delta = 1e-24;\n      if (softMinMode == 2 && softMin != inf) padMin = 0;\n      if (softMaxMode == 2 && softMax != -inf) padMax = 0;\n    }\n  }\n  let nonZeroDelta = delta || scalarMax || 1e3;\n  let mag = log10(nonZeroDelta);\n  let base = pow(10, floor(mag));\n  let _padMin = nonZeroDelta * (delta == 0 ? _min == 0 ? .1 : 1 : padMin);\n  let _newMin = roundDec(incrRoundDn(_min - _padMin, base / 10), 24);\n  let _softMin = _min >= softMin && (softMinMode == 1 || softMinMode == 3 && _newMin <= softMin || softMinMode == 2 && _newMin >= softMin) ? softMin : inf;\n  let minLim = max(hardMin, _newMin < _softMin && _min >= _softMin ? _softMin : min(_softMin, _newMin));\n  let _padMax = nonZeroDelta * (delta == 0 ? _max == 0 ? .1 : 1 : padMax);\n  let _newMax = roundDec(incrRoundUp(_max + _padMax, base / 10), 24);\n  let _softMax = _max <= softMax && (softMaxMode == 1 || softMaxMode == 3 && _newMax >= softMax || softMaxMode == 2 && _newMax <= softMax) ? softMax : -inf;\n  let maxLim = min(hardMax, _newMax > _softMax && _max <= _softMax ? _softMax : max(_softMax, _newMax));\n  if (minLim == maxLim && minLim == 0) maxLim = 100;\n  return [minLim, maxLim];\n}\n\n// alternative: https://stackoverflow.com/a/2254896\nconst numFormatter = new Intl.NumberFormat(domEnv ? nav.language : 'en-US');\nconst fmtNum = val => numFormatter.format(val);\nconst M = Math;\nconst PI = M.PI;\nconst abs = M.abs;\nconst floor = M.floor;\nconst round = M.round;\nconst ceil = M.ceil;\nconst min = M.min;\nconst max = M.max;\nconst pow = M.pow;\nconst sign = M.sign;\nconst log10 = M.log10;\nconst log2 = M.log2;\n// TODO: seems like this needs to match asinh impl if the passed v is tweaked?\nconst sinh = (v, linthresh = 1) => M.sinh(v) * linthresh;\nconst asinh = (v, linthresh = 1) => M.asinh(v / linthresh);\nconst inf = Infinity;\nfunction numIntDigits(x) {\n  return (log10((x ^ x >> 31) - (x >> 31)) | 0) + 1;\n}\nfunction clamp(num, _min, _max) {\n  return min(max(num, _min), _max);\n}\nfunction fnOrSelf(v) {\n  return typeof v == \"function\" ? v : () => v;\n}\nconst noop = () => {};\nconst retArg0 = _0 => _0;\nconst retArg1 = (_0, _1) => _1;\nconst retNull = _ => null;\nconst retTrue = _ => true;\nconst retEq = (a, b) => a == b;\nconst regex6 = /\\.\\d*?(?=9{6,}|0{6,})/gm;\n\n// e.g. 17999.204999999998 -> 17999.205\nconst fixFloat = val => {\n  if (isInt(val) || fixedDec.has(val)) return val;\n  const str = `${val}`;\n  const match = str.match(regex6);\n  if (match == null) return val;\n  let len = match[0].length - 1;\n\n  // e.g. 1.0000000000000001e-24\n  if (str.indexOf('e-') != -1) {\n    let [num, exp] = str.split('e');\n    return +`${fixFloat(num)}e${exp}`;\n  }\n  return roundDec(val, len);\n};\nfunction incrRound(num, incr) {\n  return fixFloat(roundDec(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundUp(num, incr) {\n  return fixFloat(ceil(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundDn(num, incr) {\n  return fixFloat(floor(fixFloat(num / incr)) * incr);\n}\n\n// https://stackoverflow.com/a/48764436\n// rounds half away from zero\nfunction roundDec(val, dec = 0) {\n  if (isInt(val)) return val;\n  //\telse if (dec == 0)\n  //\t\treturn round(val);\n\n  let p = 10 ** dec;\n  let n = val * p * (1 + Number.EPSILON);\n  return round(n) / p;\n}\nconst fixedDec = new Map();\nfunction guessDec(num) {\n  return ((\"\" + num).split(\".\")[1] || \"\").length;\n}\nfunction genIncrs(base, minExp, maxExp, mults) {\n  let incrs = [];\n  let multDec = mults.map(guessDec);\n  for (let exp = minExp; exp < maxExp; exp++) {\n    let expa = abs(exp);\n    let mag = roundDec(pow(base, exp), expa);\n    for (let i = 0; i < mults.length; i++) {\n      let _incr = base == 10 ? +`${mults[i]}e${exp}` : mults[i] * mag;\n      let dec = (exp >= 0 ? 0 : expa) + (exp >= multDec[i] ? 0 : multDec[i]);\n      let incr = base == 10 ? _incr : roundDec(_incr, dec);\n      incrs.push(incr);\n      fixedDec.set(incr, dec);\n    }\n  }\n  return incrs;\n}\n\n//export const assign = Object.assign;\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\nconst nullNullTuple = [null, null];\nconst isArr = Array.isArray;\nconst isInt = Number.isInteger;\nconst isUndef = v => v === void 0;\nfunction isStr(v) {\n  return typeof v == 'string';\n}\nfunction isObj(v) {\n  let is = false;\n  if (v != null) {\n    let c = v.constructor;\n    is = c == null || c == Object;\n  }\n  return is;\n}\nfunction fastIsObj(v) {\n  return v != null && typeof v == 'object';\n}\nconst TypedArray = Object.getPrototypeOf(Uint8Array);\nconst __proto__ = \"__proto__\";\nfunction copy(o, _isObj = isObj) {\n  let out;\n  if (isArr(o)) {\n    let val = o.find(v => v != null);\n    if (isArr(val) || _isObj(val)) {\n      out = Array(o.length);\n      for (let i = 0; i < o.length; i++) out[i] = copy(o[i], _isObj);\n    } else out = o.slice();\n  } else if (o instanceof TypedArray)\n    // also (ArrayBuffer.isView(o) && !(o instanceof DataView))\n    out = o.slice();else if (_isObj(o)) {\n    out = {};\n    for (let k in o) {\n      if (k != __proto__) out[k] = copy(o[k], _isObj);\n    }\n  } else out = o;\n  return out;\n}\nfunction assign(targ) {\n  let args = arguments;\n  for (let i = 1; i < args.length; i++) {\n    let src = args[i];\n    for (let key in src) {\n      if (key != __proto__) {\n        if (isObj(targ[key])) assign(targ[key], copy(src[key]));else targ[key] = copy(src[key]);\n      }\n    }\n  }\n  return targ;\n}\n\n// nullModes\nconst NULL_REMOVE = 0; // nulls are converted to undefined (e.g. for spanGaps: true)\nconst NULL_RETAIN = 1; // nulls are retained, with alignment artifacts set to undefined (default)\nconst NULL_EXPAND = 2; // nulls are expanded to include any adjacent alignment artifacts\n\n// sets undefined values to nulls when adjacent to existing nulls (minesweeper)\nfunction nullExpand(yVals, nullIdxs, alignedLen) {\n  for (let i = 0, xi, lastNullIdx = -1; i < nullIdxs.length; i++) {\n    let nullIdx = nullIdxs[i];\n    if (nullIdx > lastNullIdx) {\n      xi = nullIdx - 1;\n      while (xi >= 0 && yVals[xi] == null) yVals[xi--] = null;\n      xi = nullIdx + 1;\n      while (xi < alignedLen && yVals[xi] == null) yVals[lastNullIdx = xi++] = null;\n    }\n  }\n}\n\n// nullModes is a tables-matched array indicating how to treat nulls in each series\n// output is sorted ASC on the joined field (table[0]) and duplicate join values are collapsed\nfunction join(tables, nullModes) {\n  if (allHeadersSame(tables)) {\n    //\tconsole.log('cheap join!');\n\n    let table = tables[0].slice();\n    for (let i = 1; i < tables.length; i++) table.push(...tables[i].slice(1));\n    if (!isAsc(table[0])) table = sortCols(table);\n    return table;\n  }\n  let xVals = new Set();\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    let len = xs.length;\n    for (let i = 0; i < len; i++) xVals.add(xs[i]);\n  }\n  let data = [Array.from(xVals).sort((a, b) => a - b)];\n  let alignedLen = data[0].length;\n  let xIdxs = new Map();\n  for (let i = 0; i < alignedLen; i++) xIdxs.set(data[0][i], i);\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    for (let si = 1; si < t.length; si++) {\n      let ys = t[si];\n      let yVals = Array(alignedLen).fill(undefined);\n      let nullMode = nullModes ? nullModes[ti][si] : NULL_RETAIN;\n      let nullIdxs = [];\n      for (let i = 0; i < ys.length; i++) {\n        let yVal = ys[i];\n        let alignedIdx = xIdxs.get(xs[i]);\n        if (yVal === null) {\n          if (nullMode != NULL_REMOVE) {\n            yVals[alignedIdx] = yVal;\n            if (nullMode == NULL_EXPAND) nullIdxs.push(alignedIdx);\n          }\n        } else yVals[alignedIdx] = yVal;\n      }\n      nullExpand(yVals, nullIdxs, alignedLen);\n      data.push(yVals);\n    }\n  }\n  return data;\n}\nconst microTask = typeof queueMicrotask == \"undefined\" ? fn => Promise.resolve().then(fn) : queueMicrotask;\n\n// TODO: https://github.com/dy/sort-ids (~2x faster for 1e5+ arrays)\nfunction sortCols(table) {\n  let head = table[0];\n  let rlen = head.length;\n  let idxs = Array(rlen);\n  for (let i = 0; i < idxs.length; i++) idxs[i] = i;\n  idxs.sort((i0, i1) => head[i0] - head[i1]);\n  let table2 = [];\n  for (let i = 0; i < table.length; i++) {\n    let row = table[i];\n    let row2 = Array(rlen);\n    for (let j = 0; j < rlen; j++) row2[j] = row[idxs[j]];\n    table2.push(row2);\n  }\n  return table2;\n}\n\n// test if we can do cheap join (all join fields same)\nfunction allHeadersSame(tables) {\n  let vals0 = tables[0][0];\n  let len0 = vals0.length;\n  for (let i = 1; i < tables.length; i++) {\n    let vals1 = tables[i][0];\n    if (vals1.length != len0) return false;\n    if (vals1 != vals0) {\n      for (let j = 0; j < len0; j++) {\n        if (vals1[j] != vals0[j]) return false;\n      }\n    }\n  }\n  return true;\n}\nfunction isAsc(vals, samples = 100) {\n  const len = vals.length;\n\n  // empty or single value\n  if (len <= 1) return true;\n\n  // skip leading & trailing nullish\n  let firstIdx = 0;\n  let lastIdx = len - 1;\n  while (firstIdx <= lastIdx && vals[firstIdx] == null) firstIdx++;\n  while (lastIdx >= firstIdx && vals[lastIdx] == null) lastIdx--;\n\n  // all nullish or one value surrounded by nullish\n  if (lastIdx <= firstIdx) return true;\n  const stride = max(1, floor((lastIdx - firstIdx + 1) / samples));\n  for (let prevVal = vals[firstIdx], i = firstIdx + stride; i <= lastIdx; i += stride) {\n    const v = vals[i];\n    if (v != null) {\n      if (v <= prevVal) return false;\n      prevVal = v;\n    }\n  }\n  return true;\n}\nconst months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nfunction slice3(str) {\n  return str.slice(0, 3);\n}\nconst days3 = days.map(slice3);\nconst months3 = months.map(slice3);\nconst engNames = {\n  MMMM: months,\n  MMM: months3,\n  WWWW: days,\n  WWW: days3\n};\nfunction zeroPad2(int) {\n  return (int < 10 ? '0' : '') + int;\n}\nfunction zeroPad3(int) {\n  return (int < 10 ? '00' : int < 100 ? '0' : '') + int;\n}\n\n/*\nfunction suffix(int) {\n\tlet mod10 = int % 10;\n\n\treturn int + (\n\t\tmod10 == 1 && int != 11 ? \"st\" :\n\t\tmod10 == 2 && int != 12 ? \"nd\" :\n\t\tmod10 == 3 && int != 13 ? \"rd\" : \"th\"\n\t);\n}\n*/\n\nconst subs = {\n  // 2019\n  YYYY: d => d.getFullYear(),\n  // 19\n  YY: d => (d.getFullYear() + '').slice(2),\n  // July\n  MMMM: (d, names) => names.MMMM[d.getMonth()],\n  // Jul\n  MMM: (d, names) => names.MMM[d.getMonth()],\n  // 07\n  MM: d => zeroPad2(d.getMonth() + 1),\n  // 7\n  M: d => d.getMonth() + 1,\n  // 09\n  DD: d => zeroPad2(d.getDate()),\n  // 9\n  D: d => d.getDate(),\n  // Monday\n  WWWW: (d, names) => names.WWWW[d.getDay()],\n  // Mon\n  WWW: (d, names) => names.WWW[d.getDay()],\n  // 03\n  HH: d => zeroPad2(d.getHours()),\n  // 3\n  H: d => d.getHours(),\n  // 9 (12hr, unpadded)\n  h: d => {\n    let h = d.getHours();\n    return h == 0 ? 12 : h > 12 ? h - 12 : h;\n  },\n  // AM\n  AA: d => d.getHours() >= 12 ? 'PM' : 'AM',\n  // am\n  aa: d => d.getHours() >= 12 ? 'pm' : 'am',\n  // a\n  a: d => d.getHours() >= 12 ? 'p' : 'a',\n  // 09\n  mm: d => zeroPad2(d.getMinutes()),\n  // 9\n  m: d => d.getMinutes(),\n  // 09\n  ss: d => zeroPad2(d.getSeconds()),\n  // 9\n  s: d => d.getSeconds(),\n  // 374\n  fff: d => zeroPad3(d.getMilliseconds())\n};\nfunction fmtDate(tpl, names) {\n  names = names || engNames;\n  let parts = [];\n  let R = /\\{([a-z]+)\\}|[^{]+/gi,\n    m;\n  while (m = R.exec(tpl)) parts.push(m[0][0] == '{' ? subs[m[1]] : m[0]);\n  return d => {\n    let out = '';\n    for (let i = 0; i < parts.length; i++) out += typeof parts[i] == \"string\" ? parts[i] : parts[i](d, names);\n    return out;\n  };\n}\nconst localTz = new Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone/53652131#53652131\nfunction tzDate(date, tz) {\n  let date2;\n\n  // perf optimization\n  if (tz == 'UTC' || tz == 'Etc/UTC') date2 = new Date(+date + date.getTimezoneOffset() * 6e4);else if (tz == localTz) date2 = date;else {\n    date2 = new Date(date.toLocaleString('en-US', {\n      timeZone: tz\n    }));\n    date2.setMilliseconds(date.getMilliseconds());\n  }\n  return date2;\n}\n\n//export const series = [];\n\n// default formatters:\n\nconst onlyWhole = v => v % 1 == 0;\nconst allMults = [1, 2, 2.5, 5];\n\n// ...0.01, 0.02, 0.025, 0.05, 0.1, 0.2, 0.25, 0.5\nconst decIncrs = genIncrs(10, -32, 0, allMults);\n\n// 1, 2, 2.5, 5, 10, 20, 25, 50...\nconst oneIncrs = genIncrs(10, 0, 32, allMults);\n\n// 1, 2,      5, 10, 20, 25, 50...\nconst wholeIncrs = oneIncrs.filter(onlyWhole);\nconst numIncrs = decIncrs.concat(oneIncrs);\nconst NL = \"\\n\";\nconst yyyy = \"{YYYY}\";\nconst NLyyyy = NL + yyyy;\nconst md = \"{M}/{D}\";\nconst NLmd = NL + md;\nconst NLmdyy = NLmd + \"/{YY}\";\nconst aa = \"{aa}\";\nconst hmm = \"{h}:{mm}\";\nconst hmmaa = hmm + aa;\nconst NLhmmaa = NL + hmmaa;\nconst ss = \":{ss}\";\nconst _ = null;\nfunction genTimeStuffs(ms) {\n  let s = ms * 1e3,\n    m = s * 60,\n    h = m * 60,\n    d = h * 24,\n    mo = d * 30,\n    y = d * 365;\n\n  // min of 1e-3 prevents setting a temporal x ticks too small since Date objects cannot advance ticks smaller than 1ms\n  let subSecIncrs = ms == 1 ? genIncrs(10, 0, 3, allMults).filter(onlyWhole) : genIncrs(10, -3, 0, allMults);\n  let timeIncrs = subSecIncrs.concat([\n  // minute divisors (# of secs)\n  s, s * 5, s * 10, s * 15, s * 30,\n  // hour divisors (# of mins)\n  m, m * 5, m * 10, m * 15, m * 30,\n  // day divisors (# of hrs)\n  h, h * 2, h * 3, h * 4, h * 6, h * 8, h * 12,\n  // month divisors TODO: need more?\n  d, d * 2, d * 3, d * 4, d * 5, d * 6, d * 7, d * 8, d * 9, d * 10, d * 15,\n  // year divisors (# months, approx)\n  mo, mo * 2, mo * 3, mo * 4, mo * 6,\n  // century divisors\n  y, y * 2, y * 5, y * 10, y * 25, y * 50, y * 100]);\n\n  // [0]:   minimum num secs in the tick incr\n  // [1]:   default tick format\n  // [2-7]: rollover tick formats\n  // [8]:   mode: 0: replace [1] -> [2-7], 1: concat [1] + [2-7]\n  const _timeAxisStamps = [\n  //   tick incr    default          year                    month   day                   hour    min       sec   mode\n  [y, yyyy, _, _, _, _, _, _, 1], [d * 28, \"{MMM}\", NLyyyy, _, _, _, _, _, 1], [d, md, NLyyyy, _, _, _, _, _, 1], [h, \"{h}\" + aa, NLmdyy, _, NLmd, _, _, _, 1], [m, hmmaa, NLmdyy, _, NLmd, _, _, _, 1], [s, ss, NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1], [ms, ss + \".{fff}\", NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1]];\n\n  // the ensures that axis ticks, values & grid are aligned to logical temporal breakpoints and not an arbitrary timestamp\n  // https://www.timeanddate.com/time/dst/\n  // https://www.timeanddate.com/time/dst/2019.html\n  // https://www.epochconverter.com/timezones\n  function timeAxisSplits(tzDate) {\n    return (self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace) => {\n      let splits = [];\n      let isYr = foundIncr >= y;\n      let isMo = foundIncr >= mo && foundIncr < y;\n\n      // get the timezone-adjusted date\n      let minDate = tzDate(scaleMin);\n      let minDateTs = roundDec(minDate * ms, 3);\n\n      // get ts of 12am (this lands us at or before the original scaleMin)\n      let minMin = mkDate(minDate.getFullYear(), isYr ? 0 : minDate.getMonth(), isMo || isYr ? 1 : minDate.getDate());\n      let minMinTs = roundDec(minMin * ms, 3);\n      if (isMo || isYr) {\n        let moIncr = isMo ? foundIncr / mo : 0;\n        let yrIncr = isYr ? foundIncr / y : 0;\n        //\tlet tzOffset = scaleMin - minDateTs;\t\t// needed?\n        let split = minDateTs == minMinTs ? minDateTs : roundDec(mkDate(minMin.getFullYear() + yrIncr, minMin.getMonth() + moIncr, 1) * ms, 3);\n        let splitDate = new Date(round(split / ms));\n        let baseYear = splitDate.getFullYear();\n        let baseMonth = splitDate.getMonth();\n        for (let i = 0; split <= scaleMax; i++) {\n          let next = mkDate(baseYear + yrIncr * i, baseMonth + moIncr * i, 1);\n          let offs = next - tzDate(roundDec(next * ms, 3));\n          split = roundDec((+next + offs) * ms, 3);\n          if (split <= scaleMax) splits.push(split);\n        }\n      } else {\n        let incr0 = foundIncr >= d ? d : foundIncr;\n        let tzOffset = floor(scaleMin) - floor(minDateTs);\n        let split = minMinTs + tzOffset + incrRoundUp(minDateTs - minMinTs, incr0);\n        splits.push(split);\n        let date0 = tzDate(split);\n        let prevHour = date0.getHours() + date0.getMinutes() / m + date0.getSeconds() / h;\n        let incrHours = foundIncr / h;\n        let minSpace = self.axes[axisIdx]._space;\n        let pctSpace = foundSpace / minSpace;\n        while (1) {\n          split = roundDec(split + foundIncr, ms == 1 ? 0 : 3);\n          if (split > scaleMax) break;\n          if (incrHours > 1) {\n            let expectedHour = floor(roundDec(prevHour + incrHours, 6)) % 24;\n            let splitDate = tzDate(split);\n            let actualHour = splitDate.getHours();\n            let dstShift = actualHour - expectedHour;\n            if (dstShift > 1) dstShift = -1;\n            split -= dstShift * h;\n            prevHour = (prevHour + incrHours) % 24;\n\n            // add a tick only if it's further than 70% of the min allowed label spacing\n            let prevSplit = splits[splits.length - 1];\n            let pctIncr = roundDec((split - prevSplit) / foundIncr, 3);\n            if (pctIncr * pctSpace >= .7) splits.push(split);\n          } else splits.push(split);\n        }\n      }\n      return splits;\n    };\n  }\n  return [timeIncrs, _timeAxisStamps, timeAxisSplits];\n}\nconst [timeIncrsMs, _timeAxisStampsMs, timeAxisSplitsMs] = genTimeStuffs(1);\nconst [timeIncrsS, _timeAxisStampsS, timeAxisSplitsS] = genTimeStuffs(1e-3);\n\n// base 2\ngenIncrs(2, -53, 53, [1]);\n\n/*\nconsole.log({\n\tdecIncrs,\n\toneIncrs,\n\twholeIncrs,\n\tnumIncrs,\n\ttimeIncrs,\n\tfixedDec,\n});\n*/\n\nfunction timeAxisStamps(stampCfg, fmtDate) {\n  return stampCfg.map(s => s.map((v, i) => i == 0 || i == 8 || v == null ? v : fmtDate(i == 1 || s[8] == 0 ? v : s[1] + v)));\n}\n\n// TODO: will need to accept spaces[] and pull incr into the loop when grid will be non-uniform, eg for log scales.\n// currently we ignore this for months since they're *nearly* uniform and the added complexity is not worth it\nfunction timeAxisVals(tzDate, stamps) {\n  return (self, splits, axisIdx, foundSpace, foundIncr) => {\n    let s = stamps.find(s => foundIncr >= s[0]) || stamps[stamps.length - 1];\n\n    // these track boundaries when a full label is needed again\n    let prevYear;\n    let prevMnth;\n    let prevDate;\n    let prevHour;\n    let prevMins;\n    let prevSecs;\n    return splits.map(split => {\n      let date = tzDate(split);\n      let newYear = date.getFullYear();\n      let newMnth = date.getMonth();\n      let newDate = date.getDate();\n      let newHour = date.getHours();\n      let newMins = date.getMinutes();\n      let newSecs = date.getSeconds();\n      let stamp = newYear != prevYear && s[2] || newMnth != prevMnth && s[3] || newDate != prevDate && s[4] || newHour != prevHour && s[5] || newMins != prevMins && s[6] || newSecs != prevSecs && s[7] || s[1];\n      prevYear = newYear;\n      prevMnth = newMnth;\n      prevDate = newDate;\n      prevHour = newHour;\n      prevMins = newMins;\n      prevSecs = newSecs;\n      return stamp(date);\n    });\n  };\n}\n\n// for when axis.values is defined as a static fmtDate template string\nfunction timeAxisVal(tzDate, dateTpl) {\n  let stamp = fmtDate(dateTpl);\n  return (self, splits, axisIdx, foundSpace, foundIncr) => splits.map(split => stamp(tzDate(split)));\n}\nfunction mkDate(y, m, d) {\n  return new Date(y, m, d);\n}\nfunction timeSeriesStamp(stampCfg, fmtDate) {\n  return fmtDate(stampCfg);\n}\nconst _timeSeriesStamp = '{YYYY}-{MM}-{DD} {h}:{mm}{aa}';\nfunction timeSeriesVal(tzDate, stamp) {\n  return (self, val, seriesIdx, dataIdx) => dataIdx == null ? LEGEND_DISP : stamp(tzDate(val));\n}\nfunction legendStroke(self, seriesIdx) {\n  let s = self.series[seriesIdx];\n  return s.width ? s.stroke(self, seriesIdx) : s.points.width ? s.points.stroke(self, seriesIdx) : null;\n}\nfunction legendFill(self, seriesIdx) {\n  return self.series[seriesIdx].fill(self, seriesIdx);\n}\nconst legendOpts = {\n  show: true,\n  live: true,\n  isolate: false,\n  mount: noop,\n  markers: {\n    show: true,\n    width: 2,\n    stroke: legendStroke,\n    fill: legendFill,\n    dash: \"solid\"\n  },\n  idx: null,\n  idxs: null,\n  values: []\n};\nfunction cursorPointShow(self, si) {\n  let o = self.cursor.points;\n  let pt = placeDiv();\n  let size = o.size(self, si);\n  setStylePx(pt, WIDTH, size);\n  setStylePx(pt, HEIGHT, size);\n  let mar = size / -2;\n  setStylePx(pt, \"marginLeft\", mar);\n  setStylePx(pt, \"marginTop\", mar);\n  let width = o.width(self, si, size);\n  width && setStylePx(pt, \"borderWidth\", width);\n  return pt;\n}\nfunction cursorPointFill(self, si) {\n  let sp = self.series[si].points;\n  return sp._fill || sp._stroke;\n}\nfunction cursorPointStroke(self, si) {\n  let sp = self.series[si].points;\n  return sp._stroke || sp._fill;\n}\nfunction cursorPointSize(self, si) {\n  let sp = self.series[si].points;\n  return sp.size;\n}\nconst moveTuple = [0, 0];\nfunction cursorMove(self, mouseLeft1, mouseTop1) {\n  moveTuple[0] = mouseLeft1;\n  moveTuple[1] = mouseTop1;\n  return moveTuple;\n}\nfunction filtBtn0(self, targ, handle, onlyTarg = true) {\n  return e => {\n    e.button == 0 && (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nfunction filtTarg(self, targ, handle, onlyTarg = true) {\n  return e => {\n    (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nconst cursorOpts = {\n  show: true,\n  x: true,\n  y: true,\n  lock: false,\n  move: cursorMove,\n  points: {\n    one: false,\n    show: cursorPointShow,\n    size: cursorPointSize,\n    width: 0,\n    stroke: cursorPointStroke,\n    fill: cursorPointFill\n  },\n  bind: {\n    mousedown: filtBtn0,\n    mouseup: filtBtn0,\n    click: filtBtn0,\n    // legend clicks, not .u-over clicks\n    dblclick: filtBtn0,\n    mousemove: filtTarg,\n    mouseleave: filtTarg,\n    mouseenter: filtTarg\n  },\n  drag: {\n    setScale: true,\n    x: true,\n    y: false,\n    dist: 0,\n    uni: null,\n    click: (self, e) => {\n      //\te.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    },\n    _x: false,\n    _y: false\n  },\n  focus: {\n    dist: (self, seriesIdx, dataIdx, valPos, curPos) => valPos - curPos,\n    prox: -1,\n    bias: 0\n  },\n  hover: {\n    skip: [void 0],\n    prox: null,\n    bias: 0\n  },\n  left: -10,\n  top: -10,\n  idx: null,\n  dataIdx: null,\n  idxs: null,\n  event: null\n};\nconst axisLines = {\n  show: true,\n  stroke: \"rgba(0,0,0,0.07)\",\n  width: 2\n  //\tdash: [],\n};\nconst grid = assign({}, axisLines, {\n  filter: retArg1\n});\nconst ticks = assign({}, grid, {\n  size: 10\n});\nconst border = assign({}, axisLines, {\n  show: false\n});\nconst font = '12px system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nconst labelFont = \"bold \" + font;\nconst lineGap = 1.5; // font-size multiplier\n\nconst xAxisOpts = {\n  show: true,\n  scale: \"x\",\n  stroke: hexBlack,\n  space: 50,\n  gap: 5,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 2,\n  //\tclass: \"x-vals\",\n  //\tincrs: timeIncrs,\n  //\tvalues: timeVals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\nconst numSeriesLabel = \"Value\";\nconst timeSeriesLabel = \"Time\";\nconst xSeriesOpts = {\n  show: true,\n  scale: \"x\",\n  auto: false,\n  sorted: 1,\n  //\tlabel: \"Time\",\n  //\tvalue: v => stamp(new Date(v * 1e3)),\n\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: []\n};\nfunction numAxisVals(self, splits, axisIdx, foundSpace, foundIncr) {\n  return splits.map(v => v == null ? \"\" : fmtNum(v));\n}\nfunction numAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let splits = [];\n  let numDec = fixedDec.get(foundIncr) || 0;\n  scaleMin = forceMin ? scaleMin : roundDec(incrRoundUp(scaleMin, foundIncr), numDec);\n  for (let val = scaleMin; val <= scaleMax; val = roundDec(val + foundIncr, numDec)) splits.push(Object.is(val, -0) ? 0 : val); // coalesces -0\n\n  return splits;\n}\n\n// this doesnt work for sin, which needs to come off from 0 independently in pos and neg dirs\nfunction logAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  const splits = [];\n  const logBase = self.scales[self.axes[axisIdx].scale].log;\n  const logFn = logBase == 10 ? log10 : log2;\n  const exp = floor(logFn(scaleMin));\n  foundIncr = pow(logBase, exp);\n\n  // boo: 10 ** -24 === 1.0000000000000001e-24\n  // this grabs the proper 1e-24 one\n  if (logBase == 10) foundIncr = numIncrs[closestIdx(foundIncr, numIncrs)];\n  let split = scaleMin;\n  let nextMagIncr = foundIncr * logBase;\n  if (logBase == 10) nextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n  do {\n    splits.push(split);\n    split = split + foundIncr;\n    if (logBase == 10 && !fixedDec.has(split)) split = roundDec(split, fixedDec.get(foundIncr));\n    if (split >= nextMagIncr) {\n      foundIncr = split;\n      nextMagIncr = foundIncr * logBase;\n      if (logBase == 10) nextMagIncr = numIncrs[closestIdx(nextMagIncr, numIncrs)];\n    }\n  } while (split <= scaleMax);\n  return splits;\n}\nfunction asinhAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let sc = self.scales[self.axes[axisIdx].scale];\n  let linthresh = sc.asinh;\n  let posSplits = scaleMax > linthresh ? logAxisSplits(self, axisIdx, max(linthresh, scaleMin), scaleMax, foundIncr) : [linthresh];\n  let zero = scaleMax >= 0 && scaleMin <= 0 ? [0] : [];\n  let negSplits = scaleMin < -linthresh ? logAxisSplits(self, axisIdx, max(linthresh, -scaleMax), -scaleMin, foundIncr) : [linthresh];\n  return negSplits.reverse().map(v => -v).concat(zero, posSplits);\n}\nconst RE_ALL = /./;\nconst RE_12357 = /[12357]/;\nconst RE_125 = /[125]/;\nconst RE_1 = /1/;\nconst _filt = (splits, distr, re, keepMod) => splits.map((v, i) => distr == 4 && v == 0 || i % keepMod == 0 && re.test(v.toExponential()[v < 0 ? 1 : 0]) ? v : null);\nfunction log10AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let sc = self.scales[scaleKey];\n\n  //\tif (sc.distr == 3 && sc.log == 2)\n  //\t\treturn splits;\n\n  let valToPos = self.valToPos;\n  let minSpace = axis._space;\n  let _10 = valToPos(10, scaleKey);\n  let re = valToPos(9, scaleKey) - _10 >= minSpace ? RE_ALL : valToPos(7, scaleKey) - _10 >= minSpace ? RE_12357 : valToPos(5, scaleKey) - _10 >= minSpace ? RE_125 : RE_1;\n  if (re == RE_1) {\n    let magSpace = abs(valToPos(1, scaleKey) - _10);\n    if (magSpace < minSpace) return _filt(splits.slice().reverse(), sc.distr, re, ceil(minSpace / magSpace)).reverse(); // max->min skip\n  }\n  return _filt(splits, sc.distr, re, 1);\n}\nfunction log2AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let minSpace = axis._space;\n  let valToPos = self.valToPos;\n  let magSpace = abs(valToPos(1, scaleKey) - valToPos(2, scaleKey));\n  if (magSpace < minSpace) return _filt(splits.slice().reverse(), 3, RE_ALL, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\n  return splits;\n}\nfunction numSeriesVal(self, val, seriesIdx, dataIdx) {\n  return dataIdx == null ? LEGEND_DISP : val == null ? \"\" : fmtNum(val);\n}\nconst yAxisOpts = {\n  show: true,\n  scale: \"y\",\n  stroke: hexBlack,\n  space: 30,\n  gap: 5,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 3,\n  //\tclass: \"y-vals\",\n  //\tincrs: numIncrs,\n  //\tvalues: (vals, space) => vals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\n\n// takes stroke width\nfunction ptDia(width, mult) {\n  let dia = 3 + (width || 1) * 2;\n  return roundDec(dia * mult, 3);\n}\nfunction seriesPointsShow(self, si) {\n  let {\n    scale,\n    idxs\n  } = self.series[0];\n  let xData = self._data[0];\n  let p0 = self.valToPos(xData[idxs[0]], scale, true);\n  let p1 = self.valToPos(xData[idxs[1]], scale, true);\n  let dim = abs(p1 - p0);\n  let s = self.series[si];\n  //\tconst dia = ptDia(s.width, pxRatio);\n  let maxPts = dim / (s.points.space * pxRatio);\n  return idxs[1] - idxs[0] <= maxPts;\n}\nconst facet = {\n  scale: null,\n  auto: true,\n  sorted: 0,\n  // internal caches\n  min: inf,\n  max: -inf\n};\nconst gaps = (self, seriesIdx, idx0, idx1, nullGaps) => nullGaps;\nconst xySeriesOpts = {\n  show: true,\n  auto: true,\n  sorted: 0,\n  gaps,\n  alpha: 1,\n  facets: [assign({}, facet, {\n    scale: 'x'\n  }), assign({}, facet, {\n    scale: 'y'\n  })]\n};\nconst ySeriesOpts = {\n  scale: \"y\",\n  auto: true,\n  sorted: 0,\n  show: true,\n  spanGaps: false,\n  gaps,\n  alpha: 1,\n  points: {\n    show: seriesPointsShow,\n    filter: null\n    //  paths:\n    //\tstroke: \"#000\",\n    //\tfill: \"#fff\",\n    //\twidth: 1,\n    //\tsize: 10,\n  },\n  //\tlabel: \"Value\",\n  //\tvalue: v => v,\n  values: null,\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: [],\n  path: null,\n  clip: null\n};\nfunction clampScale(self, val, scaleMin, scaleMax, scaleKey) {\n  /*\n  \tif (val < 0) {\n  \t\tlet cssHgt = self.bbox.height / pxRatio;\n  \t\tlet absPos = self.valToPos(abs(val), scaleKey);\n  \t\tlet fromBtm = cssHgt - absPos;\n  \t\treturn self.posToVal(cssHgt + fromBtm, scaleKey);\n  \t}\n  */\n  return scaleMin / 10;\n}\nconst xScaleOpts = {\n  time: FEAT_TIME,\n  auto: true,\n  distr: 1,\n  log: 10,\n  asinh: 1,\n  min: null,\n  max: null,\n  dir: 1,\n  ori: 0\n};\nconst yScaleOpts = assign({}, xScaleOpts, {\n  time: false,\n  ori: 1\n});\nconst syncs = {};\nfunction _sync(key, opts) {\n  let s = syncs[key];\n  if (!s) {\n    s = {\n      key,\n      plots: [],\n      sub(plot) {\n        s.plots.push(plot);\n      },\n      unsub(plot) {\n        s.plots = s.plots.filter(c => c != plot);\n      },\n      pub(type, self, x, y, w, h, i) {\n        for (let j = 0; j < s.plots.length; j++) s.plots[j] != self && s.plots[j].pub(type, self, x, y, w, h, i);\n      }\n    };\n    if (key != null) syncs[key] = s;\n  }\n  return s;\n}\nconst BAND_CLIP_FILL = 1 << 0;\nconst BAND_CLIP_STROKE = 1 << 1;\nfunction orient(u, seriesIdx, cb) {\n  const mode = u.mode;\n  const series = u.series[seriesIdx];\n  const data = mode == 2 ? u._data[seriesIdx] : u._data;\n  const scales = u.scales;\n  const bbox = u.bbox;\n  let dx = data[0],\n    dy = mode == 2 ? data[1] : data[seriesIdx],\n    sx = mode == 2 ? scales[series.facets[0].scale] : scales[u.series[0].scale],\n    sy = mode == 2 ? scales[series.facets[1].scale] : scales[series.scale],\n    l = bbox.left,\n    t = bbox.top,\n    w = bbox.width,\n    h = bbox.height,\n    H = u.valToPosH,\n    V = u.valToPosV;\n  return sx.ori == 0 ? cb(series, dx, dy, sx, sy, H, V, l, t, w, h, moveToH, lineToH, rectH, arcH, bezierCurveToH) : cb(series, dx, dy, sx, sy, V, H, t, l, h, w, moveToV, lineToV, rectV, arcV, bezierCurveToV);\n}\nfunction bandFillClipDirs(self, seriesIdx) {\n  let fillDir = 0;\n\n  // 2 bits, -1 | 1\n  let clipDirs = 0;\n  let bands = ifNull(self.bands, EMPTY_ARR);\n  for (let i = 0; i < bands.length; i++) {\n    let b = bands[i];\n\n    // is a \"from\" band edge\n    if (b.series[0] == seriesIdx) fillDir = b.dir;\n    // is a \"to\" band edge\n    else if (b.series[1] == seriesIdx) {\n      if (b.dir == 1) clipDirs |= 1;else clipDirs |= 2;\n    }\n  }\n  return [fillDir, clipDirs == 1 ? -1 :\n  // neg only\n  clipDirs == 2 ? 1 :\n  // pos only\n  clipDirs == 3 ? 2 :\n  // both\n  0 // neither\n  ];\n}\nfunction seriesFillTo(self, seriesIdx, dataMin, dataMax, bandFillDir) {\n  let mode = self.mode;\n  let series = self.series[seriesIdx];\n  let scaleKey = mode == 2 ? series.facets[1].scale : series.scale;\n  let scale = self.scales[scaleKey];\n  return bandFillDir == -1 ? scale.min : bandFillDir == 1 ? scale.max : scale.distr == 3 ? scale.dir == 1 ? scale.min : scale.max : 0;\n}\n\n// creates inverted band clip path (from stroke path -> yMax || yMin)\n// clipDir is always inverse of fillDir\n// default clip dir is upwards (1), since default band fill is downwards/fillBelowTo (-1) (highIdx -> lowIdx)\nfunction clipBandLine(self, seriesIdx, idx0, idx1, strokePath, clipDir) {\n  return orient(self, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n    let pxRound = series.pxRound;\n    const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n    const lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n    let frIdx, toIdx;\n    if (dir == 1) {\n      frIdx = idx0;\n      toIdx = idx1;\n    } else {\n      frIdx = idx1;\n      toIdx = idx0;\n    }\n\n    // path start\n    let x0 = pxRound(valToPosX(dataX[frIdx], scaleX, xDim, xOff));\n    let y0 = pxRound(valToPosY(dataY[frIdx], scaleY, yDim, yOff));\n    // path end x\n    let x1 = pxRound(valToPosX(dataX[toIdx], scaleX, xDim, xOff));\n    // upper or lower y limit\n    let yLimit = pxRound(valToPosY(clipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n    let clip = new Path2D(strokePath);\n    lineTo(clip, x1, yLimit);\n    lineTo(clip, x0, yLimit);\n    lineTo(clip, x0, y0);\n    return clip;\n  });\n}\nfunction clipGaps(gaps, ori, plotLft, plotTop, plotWid, plotHgt) {\n  let clip = null;\n\n  // create clip path (invert gaps and non-gaps)\n  if (gaps.length > 0) {\n    clip = new Path2D();\n    const rect = ori == 0 ? rectH : rectV;\n    let prevGapEnd = plotLft;\n    for (let i = 0; i < gaps.length; i++) {\n      let g = gaps[i];\n      if (g[1] > g[0]) {\n        let w = g[0] - prevGapEnd;\n        w > 0 && rect(clip, prevGapEnd, plotTop, w, plotTop + plotHgt);\n        prevGapEnd = g[1];\n      }\n    }\n    let w = plotLft + plotWid - prevGapEnd;\n\n    // hack to ensure we expand the clip enough to avoid cutting off strokes at edges\n    let maxStrokeWidth = 10;\n    w > 0 && rect(clip, prevGapEnd, plotTop - maxStrokeWidth / 2, w, plotTop + plotHgt + maxStrokeWidth);\n  }\n  return clip;\n}\nfunction addGap(gaps, fromX, toX) {\n  let prevGap = gaps[gaps.length - 1];\n  if (prevGap && prevGap[0] == fromX)\n    // TODO: gaps must be encoded at stroke widths?\n    prevGap[1] = toX;else gaps.push([fromX, toX]);\n}\nfunction findGaps(xs, ys, idx0, idx1, dir, pixelForX, align) {\n  let gaps = [];\n  let len = xs.length;\n  for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n    let yVal = ys[i];\n    if (yVal === null) {\n      let fr = i,\n        to = i;\n      if (dir == 1) {\n        while (++i <= idx1 && ys[i] === null) to = i;\n      } else {\n        while (--i >= idx0 && ys[i] === null) to = i;\n      }\n      let frPx = pixelForX(xs[fr]);\n      let toPx = to == fr ? frPx : pixelForX(xs[to]);\n\n      // if value adjacent to edge null is same pixel, then it's partially\n      // filled and gap should start at next pixel\n      let fri2 = fr - dir;\n      let frPx2 = align <= 0 && fri2 >= 0 && fri2 < len ? pixelForX(xs[fri2]) : frPx;\n      //\tif (frPx2 == frPx)\n      //\t\tfrPx++;\n      //\telse\n      frPx = frPx2;\n      let toi2 = to + dir;\n      let toPx2 = align >= 0 && toi2 >= 0 && toi2 < len ? pixelForX(xs[toi2]) : toPx;\n      //\tif (toPx2 == toPx)\n      //\t\ttoPx--;\n      //\telse\n      toPx = toPx2;\n      if (toPx >= frPx) gaps.push([frPx, toPx]); // addGap\n    }\n  }\n  return gaps;\n}\nfunction pxRoundGen(pxAlign) {\n  return pxAlign == 0 ? retArg0 : pxAlign == 1 ? round : v => incrRound(v, pxAlign);\n}\nfunction rect(ori) {\n  let moveTo = ori == 0 ? moveToH : moveToV;\n  let arcTo = ori == 0 ? (p, x1, y1, x2, y2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  } : (p, y1, x1, y2, x2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  };\n  let rect = ori == 0 ? (p, x, y, w, h) => {\n    p.rect(x, y, w, h);\n  } : (p, y, x, h, w) => {\n    p.rect(x, y, w, h);\n  };\n\n  // TODO (pending better browser support): https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/roundRect\n  return (p, x, y, w, h, endRad = 0, baseRad = 0) => {\n    if (endRad == 0 && baseRad == 0) rect(p, x, y, w, h);else {\n      endRad = min(endRad, w / 2, h / 2);\n      baseRad = min(baseRad, w / 2, h / 2);\n\n      // adapted from https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-using-html-canvas/7838871#7838871\n      moveTo(p, x + endRad, y);\n      arcTo(p, x + w, y, x + w, y + h, endRad);\n      arcTo(p, x + w, y + h, x, y + h, baseRad);\n      arcTo(p, x, y + h, x, y, baseRad);\n      arcTo(p, x, y, x + w, y, endRad);\n      p.closePath();\n    }\n  };\n}\n\n// orientation-inverting canvas functions\nconst moveToH = (p, x, y) => {\n  p.moveTo(x, y);\n};\nconst moveToV = (p, y, x) => {\n  p.moveTo(x, y);\n};\nconst lineToH = (p, x, y) => {\n  p.lineTo(x, y);\n};\nconst lineToV = (p, y, x) => {\n  p.lineTo(x, y);\n};\nconst rectH = rect(0);\nconst rectV = rect(1);\nconst arcH = (p, x, y, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst arcV = (p, y, x, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst bezierCurveToH = (p, bp1x, bp1y, bp2x, bp2y, p2x, p2y) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\nconst bezierCurveToV = (p, bp1y, bp1x, bp2y, bp2x, p2y, p2x) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\n\n// TODO: drawWrap(seriesIdx, drawPoints) (save, restore, translate, clip)\nfunction points(opts) {\n  return (u, seriesIdx, idx0, idx1, filtIdxs) => {\n    //\tlog(\"drawPoints()\", arguments);\n\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let {\n        pxRound,\n        points\n      } = series;\n      let moveTo, arc;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        arc = arcH;\n      } else {\n        moveTo = moveToV;\n        arc = arcV;\n      }\n      const width = roundDec(points.width * pxRatio, 3);\n      let rad = (points.size - points.width) / 2 * pxRatio;\n      let dia = roundDec(rad * 2, 3);\n      let fill = new Path2D();\n      let clip = new Path2D();\n      let {\n        left: lft,\n        top: top,\n        width: wid,\n        height: hgt\n      } = u.bbox;\n      rectH(clip, lft - dia, top - dia, wid + dia * 2, hgt + dia * 2);\n      const drawPoint = pi => {\n        if (dataY[pi] != null) {\n          let x = pxRound(valToPosX(dataX[pi], scaleX, xDim, xOff));\n          let y = pxRound(valToPosY(dataY[pi], scaleY, yDim, yOff));\n          moveTo(fill, x + rad, y);\n          arc(fill, x, y, rad, 0, PI * 2);\n        }\n      };\n      if (filtIdxs) filtIdxs.forEach(drawPoint);else {\n        for (let pi = idx0; pi <= idx1; pi++) drawPoint(pi);\n      }\n      return {\n        stroke: width > 0 ? fill : null,\n        fill,\n        clip,\n        flags: BAND_CLIP_FILL | BAND_CLIP_STROKE\n      };\n    });\n  };\n}\nfunction _drawAcc(lineTo) {\n  return (stroke, accX, minY, maxY, inY, outY) => {\n    if (minY != maxY) {\n      if (inY != minY && outY != minY) lineTo(stroke, accX, minY);\n      if (inY != maxY && outY != maxY) lineTo(stroke, accX, maxY);\n      lineTo(stroke, accX, outY);\n    }\n  };\n}\nconst drawAccH = _drawAcc(lineToH);\nconst drawAccV = _drawAcc(lineToV);\nfunction linear(opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo, drawAcc;\n      if (scaleX.ori == 0) {\n        lineTo = lineToH;\n        drawAcc = drawAccH;\n      } else {\n        lineTo = lineToV;\n        drawAcc = drawAccV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let minY = inf,\n        maxY = -inf,\n        inY,\n        outY,\n        drawnAtX;\n      let accX = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\n      // data edges\n      let lftIdx = nonNullIdx(dataY, idx0, idx1, 1 * dir);\n      let rgtIdx = nonNullIdx(dataY, idx0, idx1, -1 * dir);\n      let lftX = pixelForX(dataX[lftIdx]);\n      let rgtX = pixelForX(dataX[rgtIdx]);\n      let hasGap = false;\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let x = pixelForX(dataX[i]);\n        let yVal = dataY[i];\n        if (x == accX) {\n          if (yVal != null) {\n            outY = pixelForY(yVal);\n            if (minY == inf) {\n              lineTo(stroke, x, outY);\n              inY = outY;\n            }\n            minY = min(outY, minY);\n            maxY = max(outY, maxY);\n          } else {\n            if (yVal === null) hasGap = true;\n          }\n        } else {\n          if (minY != inf) {\n            drawAcc(stroke, accX, minY, maxY, inY, outY);\n            drawnAtX = accX;\n          }\n          if (yVal != null) {\n            outY = pixelForY(yVal);\n            lineTo(stroke, x, outY);\n            minY = maxY = inY = outY;\n          } else {\n            minY = inf;\n            maxY = -inf;\n            if (yVal === null) hasGap = true;\n          }\n          accX = x;\n        }\n      }\n      if (minY != inf && minY != maxY && drawnAtX != accX) drawAcc(stroke, accX, minY, maxY, inY, outY);\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillToVal = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillToVal);\n        lineTo(fill, rgtX, fillToY);\n        lineTo(fill, lftX, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        hasGap && gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\n\n// BUG: align: -1 behaves like align: 1 when scale.dir: -1\nfunction stepped(opts) {\n  const align = ifNull(opts.align, 1);\n  // whether to draw ascenders/descenders at null/gap bondaries\n  const ascDesc = ifNull(opts.ascDesc, false);\n  const alignGaps = ifNull(opts.alignGaps, 0);\n  const extend = ifNull(opts.extend, false);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let {\n        left,\n        width\n      } = u.bbox;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      idx0 = nonNullIdx(dataY, idx0, idx1, 1);\n      idx1 = nonNullIdx(dataY, idx0, idx1, -1);\n      let prevYPos = pixelForY(dataY[dir == 1 ? idx0 : idx1]);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let firstXPosExt = firstXPos;\n      if (extend && align == -1) {\n        firstXPosExt = left;\n        lineTo(stroke, firstXPosExt, prevYPos);\n      }\n      lineTo(stroke, firstXPos, prevYPos);\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal1 = dataY[i];\n        if (yVal1 == null) continue;\n        let x1 = pixelForX(dataX[i]);\n        let y1 = pixelForY(yVal1);\n        if (align == 1) lineTo(stroke, x1, prevYPos);else lineTo(stroke, prevXPos, y1);\n        lineTo(stroke, x1, y1);\n        prevYPos = y1;\n        prevXPos = x1;\n      }\n      let prevXPosExt = prevXPos;\n      if (extend && align == 1) {\n        prevXPosExt = left + width;\n        lineTo(stroke, prevXPosExt, prevYPos);\n      }\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPosExt, fillToY);\n        lineTo(fill, firstXPosExt, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        // expand/contract clips for ascenders/descenders\n        let halfStroke = series.width * pxRatio / 2;\n        let startsOffset = ascDesc || align == 1 ? halfStroke : -halfStroke;\n        let endsOffset = ascDesc || align == -1 ? -halfStroke : halfStroke;\n        gaps.forEach(g => {\n          g[0] += startsOffset;\n          g[1] += endsOffset;\n        });\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\nfunction findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid = inf) {\n  if (dataX.length > 1) {\n    // prior index with non-undefined y data\n    let prevIdx = null;\n\n    // scan full dataset for smallest adjacent delta\n    // will not work properly for non-linear x scales, since does not do expensive valToPosX calcs till end\n    for (let i = 0, minDelta = Infinity; i < dataX.length; i++) {\n      if (dataY[i] !== undefined) {\n        if (prevIdx != null) {\n          let delta = abs(dataX[i] - dataX[prevIdx]);\n          if (delta < minDelta) {\n            minDelta = delta;\n            colWid = abs(valToPosX(dataX[i], scaleX, xDim, xOff) - valToPosX(dataX[prevIdx], scaleX, xDim, xOff));\n          }\n        }\n        prevIdx = i;\n      }\n    }\n  }\n  return colWid;\n}\nfunction bars(opts) {\n  opts = opts || EMPTY_OBJ;\n  const size = ifNull(opts.size, [0.6, inf, 1]);\n  const align = opts.align || 0;\n  const _extraGap = opts.gap || 0;\n  let ro = opts.radius;\n  ro =\n  // [valueRadius, baselineRadius]\n  ro == null ? [0, 0] : typeof ro == 'number' ? [ro, 0] : ro;\n  const radiusFn = fnOrSelf(ro);\n  const gapFactor = 1 - size[0];\n  const _maxWidth = ifNull(size[1], inf);\n  const _minWidth = ifNull(size[2], 1);\n  const disp = ifNull(opts.disp, EMPTY_OBJ);\n  const _each = ifNull(opts.each, _ => {});\n  const {\n    fill: dispFills,\n    stroke: dispStrokes\n  } = disp;\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let _align = align;\n      let extraGap = _extraGap * pxRatio;\n      let maxWidth = _maxWidth * pxRatio;\n      let minWidth = _minWidth * pxRatio;\n      let valRadius, baseRadius;\n      if (scaleX.ori == 0) [valRadius, baseRadius] = radiusFn(u, seriesIdx);else [baseRadius, valRadius] = radiusFn(u, seriesIdx);\n      const _dirX = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      //\tconst _dirY = scaleY.dir * (scaleY.ori == 1 ? 1 : -1);\n\n      let rect = scaleX.ori == 0 ? rectH : rectV;\n      let each = scaleX.ori == 0 ? _each : (u, seriesIdx, i, top, lft, hgt, wid) => {\n        _each(u, seriesIdx, i, lft, top, wid, hgt);\n      };\n\n      // band where this series is the \"from\" edge\n      let band = ifNull(u.bands, EMPTY_ARR).find(b => b.series[0] == seriesIdx);\n      let fillDir = band != null ? band.dir : 0;\n      let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, fillDir);\n      let fillToY = pxRound(valToPosY(fillTo, scaleY, yDim, yOff));\n\n      // barWid is to center of stroke\n      let xShift,\n        barWid,\n        fullGap,\n        colWid = xDim;\n      let strokeWidth = pxRound(series.width * pxRatio);\n      let multiPath = false;\n      let fillColors = null;\n      let fillPaths = null;\n      let strokeColors = null;\n      let strokePaths = null;\n      if (dispFills != null && (strokeWidth == 0 || dispStrokes != null)) {\n        multiPath = true;\n        fillColors = dispFills.values(u, seriesIdx, idx0, idx1);\n        fillPaths = new Map();\n        new Set(fillColors).forEach(color => {\n          if (color != null) fillPaths.set(color, new Path2D());\n        });\n        if (strokeWidth > 0) {\n          strokeColors = dispStrokes.values(u, seriesIdx, idx0, idx1);\n          strokePaths = new Map();\n          new Set(strokeColors).forEach(color => {\n            if (color != null) strokePaths.set(color, new Path2D());\n          });\n        }\n      }\n      let {\n        x0,\n        size\n      } = disp;\n      if (x0 != null && size != null) {\n        _align = 1;\n        dataX = x0.values(u, seriesIdx, idx0, idx1);\n        if (x0.unit == 2) dataX = dataX.map(pct => u.posToVal(xOff + pct * xDim, scaleX.key, true));\n\n        // assumes uniform sizes, for now\n        let sizes = size.values(u, seriesIdx, idx0, idx1);\n        if (size.unit == 2) barWid = sizes[0] * xDim;else barWid = valToPosX(sizes[0], scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff); // assumes linear scale (delta from 0)\n\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid - barWid;\n        fullGap = gapWid + extraGap;\n      } else {\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid * gapFactor;\n        fullGap = gapWid + extraGap;\n        barWid = colWid - fullGap;\n      }\n      if (fullGap < 1) fullGap = 0;\n      if (strokeWidth >= barWid / 2) strokeWidth = 0;\n\n      // for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n      if (fullGap < 5) pxRound = retArg0;\n      let insetStroke = fullGap > 0;\n      let rawBarWid = colWid - fullGap - (insetStroke ? strokeWidth : 0);\n      barWid = pxRound(clamp(rawBarWid, minWidth, maxWidth));\n      xShift = (_align == 0 ? barWid / 2 : _align == _dirX ? 0 : barWid) - _align * _dirX * ((_align == 0 ? extraGap / 2 : 0) + (insetStroke ? strokeWidth / 2 : 0));\n      const _paths = {\n        stroke: null,\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: 0\n      }; // disp, geom\n\n      const stroke = multiPath ? null : new Path2D();\n      let dataY0 = null;\n      if (band != null) dataY0 = u.data[band.series[1]];else {\n        let {\n          y0,\n          y1\n        } = disp;\n        if (y0 != null && y1 != null) {\n          dataY = y1.values(u, seriesIdx, idx0, idx1);\n          dataY0 = y0.values(u, seriesIdx, idx0, idx1);\n        }\n      }\n      let radVal = valRadius * barWid;\n      let radBase = baseRadius * barWid;\n      for (let i = _dirX == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += _dirX) {\n        let yVal = dataY[i];\n        if (yVal == null) continue;\n        if (dataY0 != null) {\n          let yVal0 = dataY0[i] ?? 0;\n          if (yVal - yVal0 == 0) continue;\n          fillToY = valToPosY(yVal0, scaleY, yDim, yOff);\n        }\n        let xVal = scaleX.distr != 2 || disp != null ? dataX[i] : i;\n\n        // TODO: all xPos can be pre-computed once for all series in aligned set\n        let xPos = valToPosX(xVal, scaleX, xDim, xOff);\n        let yPos = valToPosY(ifNull(yVal, fillTo), scaleY, yDim, yOff);\n        let lft = pxRound(xPos - xShift);\n        let btm = pxRound(max(yPos, fillToY));\n        let top = pxRound(min(yPos, fillToY));\n        // this includes the stroke\n        let barHgt = btm - top;\n        if (yVal != null) {\n          // && yVal != fillTo (0 height bar)\n          let rv = yVal < 0 ? radBase : radVal;\n          let rb = yVal < 0 ? radVal : radBase;\n          if (multiPath) {\n            if (strokeWidth > 0 && strokeColors[i] != null) rect(strokePaths.get(strokeColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n            if (fillColors[i] != null) rect(fillPaths.get(fillColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          } else rect(stroke, lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          each(u, seriesIdx, i, lft - strokeWidth / 2, top, barWid + strokeWidth, barHgt);\n        }\n      }\n      if (strokeWidth > 0) _paths.stroke = multiPath ? strokePaths : stroke;else if (!multiPath) {\n        _paths._fill = series.width == 0 ? series._fill : series._stroke ?? series._fill;\n        _paths.width = 0;\n      }\n      _paths.fill = multiPath ? fillPaths : stroke;\n      return _paths;\n    });\n  };\n}\nfunction splineInterp(interp, opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let moveTo, bezierCurveTo, lineTo;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        lineTo = lineToH;\n        bezierCurveTo = bezierCurveToH;\n      } else {\n        moveTo = moveToV;\n        lineTo = lineToV;\n        bezierCurveTo = bezierCurveToV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      idx0 = nonNullIdx(dataY, idx0, idx1, 1);\n      idx1 = nonNullIdx(dataY, idx0, idx1, -1);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let xCoords = [];\n      let yCoords = [];\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal = dataY[i];\n        if (yVal != null) {\n          let xVal = dataX[i];\n          let xPos = pixelForX(xVal);\n          xCoords.push(prevXPos = xPos);\n          yCoords.push(pixelForY(dataY[i]));\n        }\n      }\n      const _paths = {\n        stroke: interp(xCoords, yCoords, moveTo, lineTo, bezierCurveTo, pxRound),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPos, fillToY);\n        lineTo(fill, firstXPos, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n\n      //  if FEAT_PATHS: false in rollup.config.js\n      //\tu.ctx.save();\n      //\tu.ctx.beginPath();\n      //\tu.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n      //\tu.ctx.clip();\n      //\tu.ctx.strokeStyle = u.series[sidx].stroke;\n      //\tu.ctx.stroke(stroke);\n      //\tu.ctx.fillStyle = u.series[sidx].fill;\n      //\tu.ctx.fill(fill);\n      //\tu.ctx.restore();\n      //\treturn null;\n    });\n  };\n}\nfunction monotoneCubic(opts) {\n  return splineInterp(_monotoneCubic, opts);\n}\n\n// Monotone Cubic Spline interpolation, adapted from the Chartist.js implementation:\n// https://github.com/gionkunz/chartist-js/blob/e7e78201bffe9609915e5e53cfafa29a5d6c49f9/src/scripts/interpolation.js#L240-L369\nfunction _monotoneCubic(xs, ys, moveTo, lineTo, bezierCurveTo, pxRound) {\n  const n = xs.length;\n  if (n < 2) return null;\n  const path = new Path2D();\n  moveTo(path, xs[0], ys[0]);\n  if (n == 2) lineTo(path, xs[1], ys[1]);else {\n    let ms = Array(n),\n      ds = Array(n - 1),\n      dys = Array(n - 1),\n      dxs = Array(n - 1);\n\n    // calc deltas and derivative\n    for (let i = 0; i < n - 1; i++) {\n      dys[i] = ys[i + 1] - ys[i];\n      dxs[i] = xs[i + 1] - xs[i];\n      ds[i] = dys[i] / dxs[i];\n    }\n\n    // determine desired slope (m) at each point using Fritsch-Carlson method\n    // http://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation\n    ms[0] = ds[0];\n    for (let i = 1; i < n - 1; i++) {\n      if (ds[i] === 0 || ds[i - 1] === 0 || ds[i - 1] > 0 !== ds[i] > 0) ms[i] = 0;else {\n        ms[i] = 3 * (dxs[i - 1] + dxs[i]) / ((2 * dxs[i] + dxs[i - 1]) / ds[i - 1] + (dxs[i] + 2 * dxs[i - 1]) / ds[i]);\n        if (!isFinite(ms[i])) ms[i] = 0;\n      }\n    }\n    ms[n - 1] = ds[n - 2];\n    for (let i = 0; i < n - 1; i++) {\n      bezierCurveTo(path, xs[i] + dxs[i] / 3, ys[i] + ms[i] * dxs[i] / 3, xs[i + 1] - dxs[i] / 3, ys[i + 1] - ms[i + 1] * dxs[i] / 3, xs[i + 1], ys[i + 1]);\n    }\n  }\n  return path;\n}\nconst cursorPlots = new Set();\nfunction invalidateRects() {\n  for (let u of cursorPlots) u.syncRect(true);\n}\nif (domEnv) {\n  on(resize, win, invalidateRects);\n  on(scroll, win, invalidateRects, true);\n  on(dppxchange, win, () => {\n    uPlot.pxRatio = pxRatio;\n  });\n}\nconst linearPath = linear();\nconst pointsPath = points();\nfunction setDefaults(d, xo, yo, initY) {\n  let d2 = initY ? [d[0], d[1]].concat(d.slice(2)) : [d[0]].concat(d.slice(1));\n  return d2.map((o, i) => setDefault(o, i, xo, yo));\n}\nfunction setDefaults2(d, xyo) {\n  return d.map((o, i) => i == 0 ? {} : assign({}, xyo, o)); // todo: assign() will not merge facet arrays\n}\nfunction setDefault(o, i, xo, yo) {\n  return assign({}, i == 0 ? xo : yo, o);\n}\nfunction snapNumX(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : [dataMin, dataMax];\n}\nconst snapTimeX = snapNumX;\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction snapNumY(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, rangePad, true);\n}\nfunction snapLogY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeLog(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapLogX = snapLogY;\nfunction snapAsinhY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeAsinh(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapAsinhX = snapAsinhY;\n\n// dim is logical (getClientBoundingRect) pixels, not canvas pixels\nfunction findIncr(minVal, maxVal, incrs, dim, minSpace) {\n  let intDigits = max(numIntDigits(minVal), numIntDigits(maxVal));\n  let delta = maxVal - minVal;\n  let incrIdx = closestIdx(minSpace / dim * delta, incrs);\n  do {\n    let foundIncr = incrs[incrIdx];\n    let foundSpace = dim * foundIncr / delta;\n    if (foundSpace >= minSpace && intDigits + (foundIncr < 5 ? fixedDec.get(foundIncr) : 0) <= 17) return [foundIncr, foundSpace];\n  } while (++incrIdx < incrs.length);\n  return [0, 0];\n}\nfunction pxRatioFont(font) {\n  let fontSize, fontSizeCss;\n  font = font.replace(/(\\d+)px/, (m, p1) => (fontSize = round((fontSizeCss = +p1) * pxRatio)) + 'px');\n  return [font, fontSize, fontSizeCss];\n}\nfunction syncFontSize(axis) {\n  if (axis.show) {\n    [axis.font, axis.labelFont].forEach(f => {\n      let size = roundDec(f[2] * pxRatio, 1);\n      f[0] = f[0].replace(/[0-9.]+px/, size + 'px');\n      f[1] = size;\n    });\n  }\n}\nfunction uPlot(opts, data, then) {\n  const self = {\n    mode: ifNull(opts.mode, 1)\n  };\n  const mode = self.mode;\n\n  // TODO: cache denoms & mins scale.cache = {r, min, }\n  function getValPct(val, scale) {\n    let _val = scale.distr == 3 ? log10(val > 0 ? val : scale.clamp(self, val, scale.min, scale.max, scale.key)) : scale.distr == 4 ? asinh(val, scale.asinh) : scale.distr == 100 ? scale.fwd(val) : val;\n    return (_val - scale._min) / (scale._max - scale._min);\n  }\n  function getHPos(val, scale, dim, off) {\n    let pct = getValPct(val, scale);\n    return off + dim * (scale.dir == -1 ? 1 - pct : pct);\n  }\n  function getVPos(val, scale, dim, off) {\n    let pct = getValPct(val, scale);\n    return off + dim * (scale.dir == -1 ? pct : 1 - pct);\n  }\n  function getPos(val, scale, dim, off) {\n    return scale.ori == 0 ? getHPos(val, scale, dim, off) : getVPos(val, scale, dim, off);\n  }\n  self.valToPosH = getHPos;\n  self.valToPosV = getVPos;\n  let ready = false;\n  self.status = 0;\n  const root = self.root = placeDiv(UPLOT);\n  if (opts.id != null) root.id = opts.id;\n  addClass(root, opts.class);\n  if (opts.title) {\n    let title = placeDiv(TITLE, root);\n    title.textContent = opts.title;\n  }\n  const can = placeTag(\"canvas\");\n  const ctx = self.ctx = can.getContext(\"2d\");\n  const wrap = placeDiv(WRAP, root);\n  on(\"click\", wrap, e => {\n    if (e.target === over) {\n      let didDrag = mouseLeft1 != mouseLeft0 || mouseTop1 != mouseTop0;\n      didDrag && drag.click(self, e);\n    }\n  }, true);\n  const under = self.under = placeDiv(UNDER, wrap);\n  wrap.appendChild(can);\n  const over = self.over = placeDiv(OVER, wrap);\n  opts = copy(opts);\n  const pxAlign = +ifNull(opts.pxAlign, 1);\n  const pxRound = pxRoundGen(pxAlign);\n  (opts.plugins || []).forEach(p => {\n    if (p.opts) opts = p.opts(self, opts) || opts;\n  });\n  const ms = opts.ms || 1e-3;\n  const series = self.series = mode == 1 ? setDefaults(opts.series || [], xSeriesOpts, ySeriesOpts, false) : setDefaults2(opts.series || [null], xySeriesOpts);\n  const axes = self.axes = setDefaults(opts.axes || [], xAxisOpts, yAxisOpts, true);\n  const scales = self.scales = {};\n  const bands = self.bands = opts.bands || [];\n  bands.forEach(b => {\n    b.fill = fnOrSelf(b.fill || null);\n    b.dir = ifNull(b.dir, -1);\n  });\n  const xScaleKey = mode == 2 ? series[1].facets[0].scale : series[0].scale;\n  const drawOrderMap = {\n    axes: drawAxesGrid,\n    series: drawSeries\n  };\n  const drawOrder = (opts.drawOrder || [\"axes\", \"series\"]).map(key => drawOrderMap[key]);\n  function initScale(scaleKey) {\n    let sc = scales[scaleKey];\n    if (sc == null) {\n      let scaleOpts = (opts.scales || EMPTY_OBJ)[scaleKey] || EMPTY_OBJ;\n      if (scaleOpts.from != null) {\n        // ensure parent is initialized\n        initScale(scaleOpts.from);\n        // dependent scales inherit\n        scales[scaleKey] = assign({}, scales[scaleOpts.from], scaleOpts, {\n          key: scaleKey\n        });\n      } else {\n        sc = scales[scaleKey] = assign({}, scaleKey == xScaleKey ? xScaleOpts : yScaleOpts, scaleOpts);\n        sc.key = scaleKey;\n        let isTime = sc.time;\n        let rn = sc.range;\n        let rangeIsArr = isArr(rn);\n        if (scaleKey != xScaleKey || mode == 2 && !isTime) {\n          // if range array has null limits, it should be auto\n          if (rangeIsArr && (rn[0] == null || rn[1] == null)) {\n            rn = {\n              min: rn[0] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[0],\n                soft: rn[0]\n              },\n              max: rn[1] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[1],\n                soft: rn[1]\n              }\n            };\n            rangeIsArr = false;\n          }\n          if (!rangeIsArr && isObj(rn)) {\n            let cfg = rn;\n            // this is similar to snapNumY\n            rn = (self, dataMin, dataMax) => dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, cfg);\n          }\n        }\n        sc.range = fnOrSelf(rn || (isTime ? snapTimeX : scaleKey == xScaleKey ? sc.distr == 3 ? snapLogX : sc.distr == 4 ? snapAsinhX : snapNumX : sc.distr == 3 ? snapLogY : sc.distr == 4 ? snapAsinhY : snapNumY));\n        sc.auto = fnOrSelf(rangeIsArr ? false : sc.auto);\n        sc.clamp = fnOrSelf(sc.clamp || clampScale);\n\n        // caches for expensive ops like asinh() & log()\n        sc._min = sc._max = null;\n      }\n    }\n  }\n  initScale(\"x\");\n  initScale(\"y\");\n\n  // TODO: init scales from facets in mode: 2\n  if (mode == 1) {\n    series.forEach(s => {\n      initScale(s.scale);\n    });\n  }\n  axes.forEach(a => {\n    initScale(a.scale);\n  });\n  for (let k in opts.scales) initScale(k);\n  const scaleX = scales[xScaleKey];\n  const xScaleDistr = scaleX.distr;\n  let valToPosX, valToPosY;\n  if (scaleX.ori == 0) {\n    addClass(root, ORI_HZ);\n    valToPosX = getHPos;\n    valToPosY = getVPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotWid;\n    \txOffCan = plotLft;\n    \tyDimCan = plotHgt;\n    \tyOffCan = plotTop;\n    \t\txDimCss = plotWidCss;\n    \txOffCss = plotLftCss;\n    \tyDimCss = plotHgtCss;\n    \tyOffCss = plotTopCss;\n    };\n    */\n  } else {\n    addClass(root, ORI_VT);\n    valToPosX = getVPos;\n    valToPosY = getHPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotHgt;\n    \txOffCan = plotTop;\n    \tyDimCan = plotWid;\n    \tyOffCan = plotLft;\n    \t\txDimCss = plotHgtCss;\n    \txOffCss = plotTopCss;\n    \tyDimCss = plotWidCss;\n    \tyOffCss = plotLftCss;\n    };\n    */\n  }\n  const pendScales = {};\n\n  // explicitly-set initial scales\n  for (let k in scales) {\n    let sc = scales[k];\n    if (sc.min != null || sc.max != null) {\n      pendScales[k] = {\n        min: sc.min,\n        max: sc.max\n      };\n      sc.min = sc.max = null;\n    }\n  }\n\n  //\tself.tz = opts.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const _tzDate = opts.tzDate || (ts => new Date(round(ts / ms)));\n  const _fmtDate = opts.fmtDate || fmtDate;\n  const _timeAxisSplits = ms == 1 ? timeAxisSplitsMs(_tzDate) : timeAxisSplitsS(_tzDate);\n  const _timeAxisVals = timeAxisVals(_tzDate, timeAxisStamps(ms == 1 ? _timeAxisStampsMs : _timeAxisStampsS, _fmtDate));\n  const _timeSeriesVal = timeSeriesVal(_tzDate, timeSeriesStamp(_timeSeriesStamp, _fmtDate));\n  const activeIdxs = [];\n  const legend = self.legend = assign({}, legendOpts, opts.legend);\n  const showLegend = legend.show;\n  const markers = legend.markers;\n  {\n    legend.idxs = activeIdxs;\n    markers.width = fnOrSelf(markers.width);\n    markers.dash = fnOrSelf(markers.dash);\n    markers.stroke = fnOrSelf(markers.stroke);\n    markers.fill = fnOrSelf(markers.fill);\n  }\n  let legendTable;\n  let legendHead;\n  let legendBody;\n  let legendRows = [];\n  let legendCells = [];\n  let legendCols;\n  let multiValLegend = false;\n  let NULL_LEGEND_VALUES = {};\n  if (legend.live) {\n    const getMultiVals = series[1] ? series[1].values : null;\n    multiValLegend = getMultiVals != null;\n    legendCols = multiValLegend ? getMultiVals(self, 1, 0) : {\n      _: 0\n    };\n    for (let k in legendCols) NULL_LEGEND_VALUES[k] = LEGEND_DISP;\n  }\n  if (showLegend) {\n    legendTable = placeTag(\"table\", LEGEND, root);\n    legendBody = placeTag(\"tbody\", null, legendTable);\n\n    // allows legend to be moved out of root\n    legend.mount(self, legendTable);\n    if (multiValLegend) {\n      legendHead = placeTag(\"thead\", null, legendTable, legendBody);\n      let head = placeTag(\"tr\", null, legendHead);\n      placeTag(\"th\", null, head);\n      for (var key in legendCols) placeTag(\"th\", LEGEND_LABEL, head).textContent = key;\n    } else {\n      addClass(legendTable, LEGEND_INLINE);\n      legend.live && addClass(legendTable, LEGEND_LIVE);\n    }\n  }\n  const son = {\n    show: true\n  };\n  const soff = {\n    show: false\n  };\n  function initLegendRow(s, i) {\n    if (i == 0 && (multiValLegend || !legend.live || mode == 2)) return nullNullTuple;\n    let cells = [];\n    let row = placeTag(\"tr\", LEGEND_SERIES, legendBody, legendBody.childNodes[i]);\n    addClass(row, s.class);\n    if (!s.show) addClass(row, OFF);\n    let label = placeTag(\"th\", null, row);\n    if (markers.show) {\n      let indic = placeDiv(LEGEND_MARKER, label);\n      if (i > 0) {\n        let width = markers.width(self, i);\n        if (width) indic.style.border = width + \"px \" + markers.dash(self, i) + \" \" + markers.stroke(self, i);\n        indic.style.background = markers.fill(self, i);\n      }\n    }\n    let text = placeDiv(LEGEND_LABEL, label);\n    text.textContent = s.label;\n    if (i > 0) {\n      if (!markers.show) text.style.color = s.width > 0 ? markers.stroke(self, i) : markers.fill(self, i);\n      onMouse(\"click\", label, e => {\n        if (cursor._lock) return;\n        setCursorEvent(e);\n        let seriesIdx = series.indexOf(s);\n        if ((e.ctrlKey || e.metaKey) != legend.isolate) {\n          // if any other series is shown, isolate this one. else show all\n          let isolate = series.some((s, i) => i > 0 && i != seriesIdx && s.show);\n          series.forEach((s, i) => {\n            i > 0 && setSeries(i, isolate ? i == seriesIdx ? son : soff : son, true, syncOpts.setSeries);\n          });\n        } else setSeries(seriesIdx, {\n          show: !s.show\n        }, true, syncOpts.setSeries);\n      }, false);\n      if (cursorFocus) {\n        onMouse(mouseenter, label, e => {\n          if (cursor._lock) return;\n          setCursorEvent(e);\n          setSeries(series.indexOf(s), FOCUS_TRUE, true, syncOpts.setSeries);\n        }, false);\n      }\n    }\n    for (var key in legendCols) {\n      let v = placeTag(\"td\", LEGEND_VALUE, row);\n      v.textContent = \"--\";\n      cells.push(v);\n    }\n    return [row, cells];\n  }\n  const mouseListeners = new Map();\n  function onMouse(ev, targ, fn, onlyTarg = true) {\n    const targListeners = mouseListeners.get(targ) || {};\n    const listener = cursor.bind[ev](self, targ, fn, onlyTarg);\n    if (listener) {\n      on(ev, targ, targListeners[ev] = listener);\n      mouseListeners.set(targ, targListeners);\n    }\n  }\n  function offMouse(ev, targ, fn) {\n    const targListeners = mouseListeners.get(targ) || {};\n    for (let k in targListeners) {\n      if (ev == null || k == ev) {\n        off(k, targ, targListeners[k]);\n        delete targListeners[k];\n      }\n    }\n    if (ev == null) mouseListeners.delete(targ);\n  }\n  let fullWidCss = 0;\n  let fullHgtCss = 0;\n  let plotWidCss = 0;\n  let plotHgtCss = 0;\n\n  // plot margins to account for axes\n  let plotLftCss = 0;\n  let plotTopCss = 0;\n\n  // previous values for diffing\n  let _plotLftCss = plotLftCss;\n  let _plotTopCss = plotTopCss;\n  let _plotWidCss = plotWidCss;\n  let _plotHgtCss = plotHgtCss;\n  let plotLft = 0;\n  let plotTop = 0;\n  let plotWid = 0;\n  let plotHgt = 0;\n  self.bbox = {};\n  let shouldSetScales = false;\n  let shouldSetSize = false;\n  let shouldConvergeSize = false;\n  let shouldSetCursor = false;\n  let shouldSetSelect = false;\n  let shouldSetLegend = false;\n  function _setSize(width, height, force) {\n    if (force || width != self.width || height != self.height) calcSize(width, height);\n    resetYSeries(false);\n    shouldConvergeSize = true;\n    shouldSetSize = true;\n    commit();\n  }\n  function calcSize(width, height) {\n    //\tlog(\"calcSize()\", arguments);\n\n    self.width = fullWidCss = plotWidCss = width;\n    self.height = fullHgtCss = plotHgtCss = height;\n    plotLftCss = plotTopCss = 0;\n    calcPlotRect();\n    calcAxesRects();\n    let bb = self.bbox;\n    plotLft = bb.left = incrRound(plotLftCss * pxRatio, 0.5);\n    plotTop = bb.top = incrRound(plotTopCss * pxRatio, 0.5);\n    plotWid = bb.width = incrRound(plotWidCss * pxRatio, 0.5);\n    plotHgt = bb.height = incrRound(plotHgtCss * pxRatio, 0.5);\n\n    //\tupdOriDims();\n  }\n\n  // ensures size calc convergence\n  const CYCLE_LIMIT = 3;\n  function convergeSize() {\n    let converged = false;\n    let cycleNum = 0;\n    while (!converged) {\n      cycleNum++;\n      let axesConverged = axesCalc(cycleNum);\n      let paddingConverged = paddingCalc(cycleNum);\n      converged = cycleNum == CYCLE_LIMIT || axesConverged && paddingConverged;\n      if (!converged) {\n        calcSize(self.width, self.height);\n        shouldSetSize = true;\n      }\n    }\n  }\n  function setSize({\n    width,\n    height\n  }) {\n    _setSize(width, height);\n  }\n  self.setSize = setSize;\n\n  // accumulate axis offsets, reduce canvas width\n  function calcPlotRect() {\n    // easements for edge labels\n    let hasTopAxis = false;\n    let hasBtmAxis = false;\n    let hasRgtAxis = false;\n    let hasLftAxis = false;\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let {\n          side,\n          _size\n        } = axis;\n        let isVt = side % 2;\n        let labelSize = axis.label != null ? axis.labelSize : 0;\n        let fullSize = _size + labelSize;\n        if (fullSize > 0) {\n          if (isVt) {\n            plotWidCss -= fullSize;\n            if (side == 3) {\n              plotLftCss += fullSize;\n              hasLftAxis = true;\n            } else hasRgtAxis = true;\n          } else {\n            plotHgtCss -= fullSize;\n            if (side == 0) {\n              plotTopCss += fullSize;\n              hasTopAxis = true;\n            } else hasBtmAxis = true;\n          }\n        }\n      }\n    });\n    sidesWithAxes[0] = hasTopAxis;\n    sidesWithAxes[1] = hasRgtAxis;\n    sidesWithAxes[2] = hasBtmAxis;\n    sidesWithAxes[3] = hasLftAxis;\n\n    // hz padding\n    plotWidCss -= _padding[1] + _padding[3];\n    plotLftCss += _padding[3];\n\n    // vt padding\n    plotHgtCss -= _padding[2] + _padding[0];\n    plotTopCss += _padding[0];\n  }\n  function calcAxesRects() {\n    // will accum +\n    let off1 = plotLftCss + plotWidCss;\n    let off2 = plotTopCss + plotHgtCss;\n    // will accum -\n    let off3 = plotLftCss;\n    let off0 = plotTopCss;\n    function incrOffset(side, size) {\n      switch (side) {\n        case 1:\n          off1 += size;\n          return off1 - size;\n        case 2:\n          off2 += size;\n          return off2 - size;\n        case 3:\n          off3 -= size;\n          return off3 + size;\n        case 0:\n          off0 -= size;\n          return off0 + size;\n      }\n    }\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let side = axis.side;\n        axis._pos = incrOffset(side, axis._size);\n        if (axis.label != null) axis._lpos = incrOffset(side, axis.labelSize);\n      }\n    });\n  }\n  const cursor = self.cursor = assign({}, cursorOpts, {\n    drag: {\n      y: mode == 2\n    }\n  }, opts.cursor);\n  if (cursor.dataIdx == null) {\n    let hov = cursor.hover;\n    let skip = hov.skip = new Set(hov.skip ?? []);\n    skip.add(void 0); // alignment artifacts\n    let prox = hov.prox = fnOrSelf(hov.prox);\n    let bias = hov.bias ??= 0;\n\n    // TODO: only scan between in-view idxs (i0, i1)\n    cursor.dataIdx = (self, seriesIdx, cursorIdx, valAtPosX) => {\n      if (seriesIdx == 0) return cursorIdx;\n      let idx2 = cursorIdx;\n      let _prox = prox(self, seriesIdx, cursorIdx, valAtPosX) ?? inf;\n      let withProx = _prox >= 0 && _prox < inf;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n      let cursorLft = cursor.left;\n      let xValues = data[0];\n      let yValues = data[seriesIdx];\n      if (skip.has(yValues[cursorIdx])) {\n        idx2 = null;\n        let nonNullLft = null,\n          nonNullRgt = null,\n          j;\n        if (bias == 0 || bias == -1) {\n          j = cursorIdx;\n          while (nonNullLft == null && j-- > 0) {\n            if (!skip.has(yValues[j])) nonNullLft = j;\n          }\n        }\n        if (bias == 0 || bias == 1) {\n          j = cursorIdx;\n          while (nonNullRgt == null && j++ < yValues.length) {\n            if (!skip.has(yValues[j])) nonNullRgt = j;\n          }\n        }\n        if (nonNullLft != null || nonNullRgt != null) {\n          if (withProx) {\n            let lftPos = nonNullLft == null ? -Infinity : valToPosX(xValues[nonNullLft], scaleX, xDim, 0);\n            let rgtPos = nonNullRgt == null ? Infinity : valToPosX(xValues[nonNullRgt], scaleX, xDim, 0);\n            let lftDelta = cursorLft - lftPos;\n            let rgtDelta = rgtPos - cursorLft;\n            if (lftDelta <= rgtDelta) {\n              if (lftDelta <= _prox) idx2 = nonNullLft;\n            } else {\n              if (rgtDelta <= _prox) idx2 = nonNullRgt;\n            }\n          } else {\n            idx2 = nonNullRgt == null ? nonNullLft : nonNullLft == null ? nonNullRgt : cursorIdx - nonNullLft <= nonNullRgt - cursorIdx ? nonNullLft : nonNullRgt;\n          }\n        }\n      } else if (withProx) {\n        let dist = abs(cursorLft - valToPosX(xValues[cursorIdx], scaleX, xDim, 0));\n        if (dist > _prox) idx2 = null;\n      }\n      return idx2;\n    };\n  }\n  const setCursorEvent = e => {\n    cursor.event = e;\n  };\n  cursor.idxs = activeIdxs;\n  cursor._lock = false;\n  let points = cursor.points;\n  points.show = fnOrSelf(points.show);\n  points.size = fnOrSelf(points.size);\n  points.stroke = fnOrSelf(points.stroke);\n  points.width = fnOrSelf(points.width);\n  points.fill = fnOrSelf(points.fill);\n  const focus = self.focus = assign({}, opts.focus || {\n    alpha: 0.3\n  }, cursor.focus);\n  const cursorFocus = focus.prox >= 0;\n  const cursorOnePt = cursorFocus && points.one;\n\n  // series-intersection markers\n  let cursorPts = [];\n  // position caches in CSS pixels\n  let cursorPtsLft = [];\n  let cursorPtsTop = [];\n  function initCursorPt(s, si) {\n    let pt = points.show(self, si);\n    if (pt) {\n      addClass(pt, CURSOR_PT);\n      addClass(pt, s.class);\n      elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n      over.insertBefore(pt, cursorPts[si]);\n      return pt;\n    }\n  }\n  function initSeries(s, i) {\n    if (mode == 1 || i > 0) {\n      let isTime = mode == 1 && scales[s.scale].time;\n      let sv = s.value;\n      s.value = isTime ? isStr(sv) ? timeSeriesVal(_tzDate, timeSeriesStamp(sv, _fmtDate)) : sv || _timeSeriesVal : sv || numSeriesVal;\n      s.label = s.label || (isTime ? timeSeriesLabel : numSeriesLabel);\n    }\n    if (cursorOnePt || i > 0) {\n      s.width = s.width == null ? 1 : s.width;\n      s.paths = s.paths || linearPath || retNull;\n      s.fillTo = fnOrSelf(s.fillTo || seriesFillTo);\n      s.pxAlign = +ifNull(s.pxAlign, pxAlign);\n      s.pxRound = pxRoundGen(s.pxAlign);\n      s.stroke = fnOrSelf(s.stroke || null);\n      s.fill = fnOrSelf(s.fill || null);\n      s._stroke = s._fill = s._paths = s._focus = null;\n      let _ptDia = ptDia(max(1, s.width), 1);\n      let points = s.points = assign({}, {\n        size: _ptDia,\n        width: max(1, _ptDia * .2),\n        stroke: s.stroke,\n        space: _ptDia * 2,\n        paths: pointsPath,\n        _stroke: null,\n        _fill: null\n      }, s.points);\n      points.show = fnOrSelf(points.show);\n      points.filter = fnOrSelf(points.filter);\n      points.fill = fnOrSelf(points.fill);\n      points.stroke = fnOrSelf(points.stroke);\n      points.paths = fnOrSelf(points.paths);\n      points.pxAlign = s.pxAlign;\n    }\n    if (showLegend) {\n      let rowCells = initLegendRow(s, i);\n      legendRows.splice(i, 0, rowCells[0]);\n      legendCells.splice(i, 0, rowCells[1]);\n      legend.values.push(null); // NULL_LEGEND_VALS not yet avil here :(\n    }\n    if (cursor.show) {\n      activeIdxs.splice(i, 0, null);\n      let pt = null;\n      if (cursorOnePt) {\n        if (i == 0) pt = initCursorPt(s, i);\n      } else if (i > 0) pt = initCursorPt(s, i);\n      cursorPts.splice(i, 0, pt);\n      cursorPtsLft.splice(i, 0, 0);\n      cursorPtsTop.splice(i, 0, 0);\n    }\n    fire(\"addSeries\", i);\n  }\n  function addSeries(opts, si) {\n    si = si == null ? series.length : si;\n    opts = mode == 1 ? setDefault(opts, si, xSeriesOpts, ySeriesOpts) : setDefault(opts, si, {}, xySeriesOpts);\n    series.splice(si, 0, opts);\n    initSeries(series[si], si);\n  }\n  self.addSeries = addSeries;\n  function delSeries(i) {\n    series.splice(i, 1);\n    if (showLegend) {\n      legend.values.splice(i, 1);\n      legendCells.splice(i, 1);\n      let tr = legendRows.splice(i, 1)[0];\n      offMouse(null, tr.firstChild);\n      tr.remove();\n    }\n    if (cursor.show) {\n      activeIdxs.splice(i, 1);\n      cursorPts.splice(i, 1)[0].remove();\n      cursorPtsLft.splice(i, 1);\n      cursorPtsTop.splice(i, 1);\n    }\n\n    // TODO: de-init no-longer-needed scales?\n\n    fire(\"delSeries\", i);\n  }\n  self.delSeries = delSeries;\n  const sidesWithAxes = [false, false, false, false];\n  function initAxis(axis, i) {\n    axis._show = axis.show;\n    if (axis.show) {\n      let isVt = axis.side % 2;\n      let sc = scales[axis.scale];\n\n      // this can occur if all series specify non-default scales\n      if (sc == null) {\n        axis.scale = isVt ? series[1].scale : xScaleKey;\n        sc = scales[axis.scale];\n      }\n\n      // also set defaults for incrs & values based on axis distr\n      let isTime = sc.time;\n      axis.size = fnOrSelf(axis.size);\n      axis.space = fnOrSelf(axis.space);\n      axis.rotate = fnOrSelf(axis.rotate);\n      if (isArr(axis.incrs)) {\n        axis.incrs.forEach(incr => {\n          !fixedDec.has(incr) && fixedDec.set(incr, guessDec(incr));\n        });\n      }\n      axis.incrs = fnOrSelf(axis.incrs || (sc.distr == 2 ? wholeIncrs : isTime ? ms == 1 ? timeIncrsMs : timeIncrsS : numIncrs));\n      axis.splits = fnOrSelf(axis.splits || (isTime && sc.distr == 1 ? _timeAxisSplits : sc.distr == 3 ? logAxisSplits : sc.distr == 4 ? asinhAxisSplits : numAxisSplits));\n      axis.stroke = fnOrSelf(axis.stroke);\n      axis.grid.stroke = fnOrSelf(axis.grid.stroke);\n      axis.ticks.stroke = fnOrSelf(axis.ticks.stroke);\n      axis.border.stroke = fnOrSelf(axis.border.stroke);\n      let av = axis.values;\n      axis.values =\n      // static array of tick values\n      isArr(av) && !isArr(av[0]) ? fnOrSelf(av) :\n      // temporal\n      isTime ?\n      // config array of fmtDate string tpls\n      isArr(av) ? timeAxisVals(_tzDate, timeAxisStamps(av, _fmtDate)) :\n      // fmtDate string tpl\n      isStr(av) ? timeAxisVal(_tzDate, av) : av || _timeAxisVals : av || numAxisVals;\n      axis.filter = fnOrSelf(axis.filter || (sc.distr >= 3 && sc.log == 10 ? log10AxisValsFilt : sc.distr == 3 && sc.log == 2 ? log2AxisValsFilt : retArg1));\n      axis.font = pxRatioFont(axis.font);\n      axis.labelFont = pxRatioFont(axis.labelFont);\n      axis._size = axis.size(self, null, i, 0);\n      axis._space = axis._rotate = axis._incrs = axis._found =\n      // foundIncrSpace\n      axis._splits = axis._values = null;\n      if (axis._size > 0) {\n        sidesWithAxes[i] = true;\n        axis._el = placeDiv(AXIS, wrap);\n      }\n\n      // debug\n      //\taxis._el.style.background = \"#\"  + Math.floor(Math.random()*16777215).toString(16) + '80';\n    }\n  }\n  function autoPadSide(self, side, sidesWithAxes, cycleNum) {\n    let [hasTopAxis, hasRgtAxis, hasBtmAxis, hasLftAxis] = sidesWithAxes;\n    let ori = side % 2;\n    let size = 0;\n    if (ori == 0 && (hasLftAxis || hasRgtAxis)) size = side == 0 && !hasTopAxis || side == 2 && !hasBtmAxis ? round(xAxisOpts.size / 3) : 0;\n    if (ori == 1 && (hasTopAxis || hasBtmAxis)) size = side == 1 && !hasRgtAxis || side == 3 && !hasLftAxis ? round(yAxisOpts.size / 2) : 0;\n    return size;\n  }\n  const padding = self.padding = (opts.padding || [autoPadSide, autoPadSide, autoPadSide, autoPadSide]).map(p => fnOrSelf(ifNull(p, autoPadSide)));\n  const _padding = self._padding = padding.map((p, i) => p(self, i, sidesWithAxes, 0));\n  let dataLen;\n\n  // rendered data window\n  let i0 = null;\n  let i1 = null;\n  const idxs = mode == 1 ? series[0].idxs : null;\n  let data0 = null;\n  let viaAutoScaleX = false;\n  function setData(_data, _resetScales) {\n    data = _data == null ? [] : _data;\n    self.data = self._data = data;\n    if (mode == 2) {\n      dataLen = 0;\n      for (let i = 1; i < series.length; i++) dataLen += data[i][0].length;\n    } else {\n      if (data.length == 0) self.data = self._data = data = [[]];\n      data0 = data[0];\n      dataLen = data0.length;\n      let scaleData = data;\n      if (xScaleDistr == 2) {\n        scaleData = data.slice();\n        let _data0 = scaleData[0] = Array(dataLen);\n        for (let i = 0; i < dataLen; i++) _data0[i] = i;\n      }\n      self._data = data = scaleData;\n    }\n    resetYSeries(true);\n    fire(\"setData\");\n\n    // forces x axis tick values to re-generate when neither x scale nor y scale changes\n    // in ordinal mode, scale range is by index, so will not change if new data has same length, but tick values are from data\n    if (xScaleDistr == 2) {\n      shouldConvergeSize = true;\n\n      /* or somewhat cheaper, and uglier:\n      if (ready) {\n      \t// logic extracted from axesCalc()\n      \tlet i = 0;\n      \tlet axis = axes[i];\n      \tlet _splits = axis._splits.map(i => data0[i]);\n      \tlet [_incr, _space] = axis._found;\n      \tlet incr = data0[_splits[1]] - data0[_splits[0]];\n      \taxis._values = axis.values(self, axis.filter(self, _splits, i, _space, incr), i, _space, incr);\n      }\n      */\n    }\n    if (_resetScales !== false) {\n      let xsc = scaleX;\n      if (xsc.auto(self, viaAutoScaleX)) autoScaleX();else _setScale(xScaleKey, xsc.min, xsc.max);\n      shouldSetCursor = shouldSetCursor || cursor.left >= 0;\n      shouldSetLegend = true;\n      commit();\n    }\n  }\n  self.setData = setData;\n  function autoScaleX() {\n    viaAutoScaleX = true;\n    let _min, _max;\n    if (mode == 1) {\n      if (dataLen > 0) {\n        i0 = idxs[0] = 0;\n        i1 = idxs[1] = dataLen - 1;\n        _min = data[0][i0];\n        _max = data[0][i1];\n        if (xScaleDistr == 2) {\n          _min = i0;\n          _max = i1;\n        } else if (_min == _max) {\n          if (xScaleDistr == 3) [_min, _max] = rangeLog(_min, _min, scaleX.log, false);else if (xScaleDistr == 4) [_min, _max] = rangeAsinh(_min, _min, scaleX.log, false);else if (scaleX.time) _max = _min + round(86400 / ms);else [_min, _max] = rangeNum(_min, _max, rangePad, true);\n        }\n      } else {\n        i0 = idxs[0] = _min = null;\n        i1 = idxs[1] = _max = null;\n      }\n    }\n    _setScale(xScaleKey, _min, _max);\n  }\n  let ctxStroke, ctxFill, ctxWidth, ctxDash, ctxJoin, ctxCap, ctxFont, ctxAlign, ctxBaseline;\n  let ctxAlpha;\n  function setCtxStyle(stroke, width, dash, cap, fill, join) {\n    stroke ??= transparent;\n    dash ??= EMPTY_ARR;\n    cap ??= \"butt\"; // (‿|‿)\n    fill ??= transparent;\n    join ??= \"round\";\n    if (stroke != ctxStroke) ctx.strokeStyle = ctxStroke = stroke;\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (width != ctxWidth) ctx.lineWidth = ctxWidth = width;\n    if (join != ctxJoin) ctx.lineJoin = ctxJoin = join;\n    if (cap != ctxCap) ctx.lineCap = ctxCap = cap;\n    if (dash != ctxDash) ctx.setLineDash(ctxDash = dash);\n  }\n  function setFontStyle(font, fill, align, baseline) {\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (font != ctxFont) ctx.font = ctxFont = font;\n    if (align != ctxAlign) ctx.textAlign = ctxAlign = align;\n    if (baseline != ctxBaseline) ctx.textBaseline = ctxBaseline = baseline;\n  }\n  function accScale(wsc, psc, facet, data, sorted = 0) {\n    if (data.length > 0 && wsc.auto(self, viaAutoScaleX) && (psc == null || psc.min == null)) {\n      let _i0 = ifNull(i0, 0);\n      let _i1 = ifNull(i1, data.length - 1);\n\n      // only run getMinMax() for invalidated series data, else reuse\n      let minMax = facet.min == null ? wsc.distr == 3 ? getMinMaxLog(data, _i0, _i1) : getMinMax(data, _i0, _i1, sorted) : [facet.min, facet.max];\n\n      // initial min/max\n      wsc.min = min(wsc.min, facet.min = minMax[0]);\n      wsc.max = max(wsc.max, facet.max = minMax[1]);\n    }\n  }\n  const AUTOSCALE = {\n    min: null,\n    max: null\n  };\n  function setScales() {\n    //\tlog(\"setScales()\", arguments);\n\n    // implicitly add auto scales, and unranged scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && (\n      // scales that have never been set (on init)\n      sc.min == null ||\n      // or auto scales when the x scale was explicitly set\n      pendScales[xScaleKey] != null && sc.auto(self, viaAutoScaleX))) {\n        pendScales[k] = AUTOSCALE;\n      }\n    }\n\n    // implicitly add dependent scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && sc.from != null && pendScales[sc.from] != null) pendScales[k] = AUTOSCALE;\n    }\n\n    // explicitly setting the x-scale invalidates everything (acts as redraw)\n    if (pendScales[xScaleKey] != null) resetYSeries(true); // TODO: only reset series on auto scales?\n\n    let wipScales = {};\n    for (let k in pendScales) {\n      let psc = pendScales[k];\n      if (psc != null) {\n        let wsc = wipScales[k] = copy(scales[k], fastIsObj);\n        if (psc.min != null) assign(wsc, psc);else if (k != xScaleKey || mode == 2) {\n          if (dataLen == 0 && wsc.from == null) {\n            let minMax = wsc.range(self, null, null, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n          } else {\n            wsc.min = inf;\n            wsc.max = -inf;\n          }\n        }\n      }\n    }\n    if (dataLen > 0) {\n      // pre-range y-scales from y series' data values\n      series.forEach((s, i) => {\n        if (mode == 1) {\n          let k = s.scale;\n          let psc = pendScales[k];\n          if (psc == null) return;\n          let wsc = wipScales[k];\n          if (i == 0) {\n            let minMax = wsc.range(self, wsc.min, wsc.max, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n            i0 = closestIdx(wsc.min, data[0]);\n            i1 = closestIdx(wsc.max, data[0]);\n\n            // don't try to contract same or adjacent idxs\n            if (i1 - i0 > 1) {\n              // closest indices can be outside of view\n              if (data[0][i0] < wsc.min) i0++;\n              if (data[0][i1] > wsc.max) i1--;\n            }\n            s.min = data0[i0];\n            s.max = data0[i1];\n          } else if (s.show && s.auto) accScale(wsc, psc, s, data[i], s.sorted);\n          s.idxs[0] = i0;\n          s.idxs[1] = i1;\n        } else {\n          if (i > 0) {\n            if (s.show && s.auto) {\n              // TODO: only handles, assumes and requires facets[0] / 'x' scale, and facets[1] / 'y' scale\n              let [xFacet, yFacet] = s.facets;\n              let xScaleKey = xFacet.scale;\n              let yScaleKey = yFacet.scale;\n              let [xData, yData] = data[i];\n              let wscx = wipScales[xScaleKey];\n              let wscy = wipScales[yScaleKey];\n\n              // null can happen when only x is zoomed, but y has static range and doesnt get auto-added to pending\n              wscx != null && accScale(wscx, pendScales[xScaleKey], xFacet, xData, xFacet.sorted);\n              wscy != null && accScale(wscy, pendScales[yScaleKey], yFacet, yData, yFacet.sorted);\n\n              // temp\n              s.min = yFacet.min;\n              s.max = yFacet.max;\n            }\n          }\n        }\n      });\n\n      // range independent scales\n      for (let k in wipScales) {\n        let wsc = wipScales[k];\n        let psc = pendScales[k];\n        if (wsc.from == null && (psc == null || psc.min == null)) {\n          let minMax = wsc.range(self, wsc.min == inf ? null : wsc.min, wsc.max == -inf ? null : wsc.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n\n    // range dependent scales\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      if (wsc.from != null) {\n        let base = wipScales[wsc.from];\n        if (base.min == null) wsc.min = wsc.max = null;else {\n          let minMax = wsc.range(self, base.min, base.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n    let changed = {};\n    let anyChanged = false;\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      let sc = scales[k];\n      if (sc.min != wsc.min || sc.max != wsc.max) {\n        sc.min = wsc.min;\n        sc.max = wsc.max;\n        let distr = sc.distr;\n        sc._min = distr == 3 ? log10(sc.min) : distr == 4 ? asinh(sc.min, sc.asinh) : distr == 100 ? sc.fwd(sc.min) : sc.min;\n        sc._max = distr == 3 ? log10(sc.max) : distr == 4 ? asinh(sc.max, sc.asinh) : distr == 100 ? sc.fwd(sc.max) : sc.max;\n        changed[k] = anyChanged = true;\n      }\n    }\n    if (anyChanged) {\n      // invalidate paths of all series on changed scales\n      series.forEach((s, i) => {\n        if (mode == 2) {\n          if (i > 0 && changed.y) s._paths = null;\n        } else {\n          if (changed[s.scale]) s._paths = null;\n        }\n      });\n      for (let k in changed) {\n        shouldConvergeSize = true;\n        fire(\"setScale\", k);\n      }\n      if (cursor.show && cursor.left >= 0) shouldSetCursor = shouldSetLegend = true;\n    }\n    for (let k in pendScales) pendScales[k] = null;\n  }\n\n  // grabs the nearest indices with y data outside of x-scale limits\n  function getOuterIdxs(ydata) {\n    let _i0 = clamp(i0 - 1, 0, dataLen - 1);\n    let _i1 = clamp(i1 + 1, 0, dataLen - 1);\n    while (ydata[_i0] == null && _i0 > 0) _i0--;\n    while (ydata[_i1] == null && _i1 < dataLen - 1) _i1++;\n    return [_i0, _i1];\n  }\n  function drawSeries() {\n    if (dataLen > 0) {\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          cacheStrokeFill(i, false);\n          cacheStrokeFill(i, true);\n          if (s._paths == null) {\n            if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n            let _idxs = mode == 2 ? [0, data[i][0].length - 1] : getOuterIdxs(data[i]);\n            s._paths = s.paths(self, i, _idxs[0], _idxs[1]);\n            if (ctxAlpha != 1) ctx.globalAlpha = ctxAlpha = 1;\n          }\n        }\n      });\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n          s._paths != null && drawPath(i, false);\n          {\n            let _gaps = s._paths != null ? s._paths.gaps : null;\n            let show = s.points.show(self, i, i0, i1, _gaps);\n            let idxs = s.points.filter(self, i, show, _gaps);\n            if (show || idxs) {\n              s.points._paths = s.points.paths(self, i, i0, i1, idxs);\n              drawPath(i, true);\n            }\n          }\n          if (ctxAlpha != 1) ctx.globalAlpha = ctxAlpha = 1;\n          fire(\"drawSeries\", i);\n        }\n      });\n    }\n  }\n  function cacheStrokeFill(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    s._stroke = s.stroke(self, si);\n    s._fill = s.fill(self, si);\n  }\n  function drawPath(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    let {\n      stroke,\n      fill,\n      clip: gapsClip,\n      flags,\n      _stroke: strokeStyle = s._stroke,\n      _fill: fillStyle = s._fill,\n      _width: width = s.width\n    } = s._paths;\n    width = roundDec(width * pxRatio, 3);\n    let boundsClip = null;\n    let offset = width % 2 / 2;\n    if (_points && fillStyle == null) fillStyle = width > 0 ? \"#fff\" : strokeStyle;\n    let _pxAlign = s.pxAlign == 1 && offset > 0;\n    _pxAlign && ctx.translate(offset, offset);\n    if (!_points) {\n      let lft = plotLft - width / 2,\n        top = plotTop - width / 2,\n        wid = plotWid + width,\n        hgt = plotHgt + width;\n      boundsClip = new Path2D();\n      boundsClip.rect(lft, top, wid, hgt);\n    }\n\n    // the points pathbuilder's gapsClip is its boundsClip, since points dont need gaps clipping, and bounds depend on point size\n    if (_points) strokeFill(strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, gapsClip);else fillStroke(si, strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, boundsClip, gapsClip);\n    _pxAlign && ctx.translate(-offset, -offset);\n  }\n  function fillStroke(si, strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip) {\n    let didStrokeFill = false;\n\n    // for all bands where this series is the top edge, create upwards clips using the bottom edges\n    // and apply clips + fill with band fill or dfltFill\n    flags != 0 && bands.forEach((b, bi) => {\n      // isUpperEdge?\n      if (b.series[0] == si) {\n        let lowerEdge = series[b.series[1]];\n        let lowerData = data[b.series[1]];\n        let bandClip = (lowerEdge._paths || EMPTY_OBJ).band;\n        if (isArr(bandClip)) bandClip = b.dir == 1 ? bandClip[0] : bandClip[1];\n        let gapsClip2;\n        let _fillStyle = null;\n\n        // hasLowerEdge?\n        if (lowerEdge.show && bandClip && hasData(lowerData, i0, i1)) {\n          _fillStyle = b.fill(self, bi) || fillStyle;\n          gapsClip2 = lowerEdge._paths.clip;\n        } else bandClip = null;\n        strokeFill(strokeStyle, lineWidth, lineDash, lineCap, _fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip);\n        didStrokeFill = true;\n      }\n    });\n    if (!didStrokeFill) strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip);\n  }\n  const CLIP_FILL_STROKE = BAND_CLIP_FILL | BAND_CLIP_STROKE;\n  function strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip) {\n    setCtxStyle(strokeStyle, lineWidth, lineDash, lineCap, fillStyle);\n    if (boundsClip || gapsClip || bandClip) {\n      ctx.save();\n      boundsClip && ctx.clip(boundsClip);\n      gapsClip && ctx.clip(gapsClip);\n    }\n    if (bandClip) {\n      if ((flags & CLIP_FILL_STROKE) == CLIP_FILL_STROKE) {\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_STROKE) {\n        doFill(fillStyle, fillPath);\n        ctx.clip(bandClip);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_FILL) {\n        ctx.save();\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        ctx.restore();\n        doStroke(strokeStyle, strokePath, lineWidth);\n      }\n    } else {\n      doFill(fillStyle, fillPath);\n      doStroke(strokeStyle, strokePath, lineWidth);\n    }\n    if (boundsClip || gapsClip || bandClip) ctx.restore();\n  }\n  function doStroke(strokeStyle, strokePath, lineWidth) {\n    if (lineWidth > 0) {\n      if (strokePath instanceof Map) {\n        strokePath.forEach((strokePath, strokeStyle) => {\n          ctx.strokeStyle = ctxStroke = strokeStyle;\n          ctx.stroke(strokePath);\n        });\n      } else strokePath != null && strokeStyle && ctx.stroke(strokePath);\n    }\n  }\n  function doFill(fillStyle, fillPath) {\n    if (fillPath instanceof Map) {\n      fillPath.forEach((fillPath, fillStyle) => {\n        ctx.fillStyle = ctxFill = fillStyle;\n        ctx.fill(fillPath);\n      });\n    } else fillPath != null && fillStyle && ctx.fill(fillPath);\n  }\n  function getIncrSpace(axisIdx, min, max, fullDim) {\n    let axis = axes[axisIdx];\n    let incrSpace;\n    if (fullDim <= 0) incrSpace = [0, 0];else {\n      let minSpace = axis._space = axis.space(self, axisIdx, min, max, fullDim);\n      let incrs = axis._incrs = axis.incrs(self, axisIdx, min, max, fullDim, minSpace);\n      incrSpace = findIncr(min, max, incrs, fullDim, minSpace);\n    }\n    return axis._found = incrSpace;\n  }\n  function drawOrthoLines(offs, filts, ori, side, pos0, len, width, stroke, dash, cap) {\n    let offset = width % 2 / 2;\n    pxAlign == 1 && ctx.translate(offset, offset);\n    setCtxStyle(stroke, width, dash, cap, stroke);\n    ctx.beginPath();\n    let x0,\n      y0,\n      x1,\n      y1,\n      pos1 = pos0 + (side == 0 || side == 3 ? -len : len);\n    if (ori == 0) {\n      y0 = pos0;\n      y1 = pos1;\n    } else {\n      x0 = pos0;\n      x1 = pos1;\n    }\n    for (let i = 0; i < offs.length; i++) {\n      if (filts[i] != null) {\n        if (ori == 0) x0 = x1 = offs[i];else y0 = y1 = offs[i];\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n      }\n    }\n    ctx.stroke();\n    pxAlign == 1 && ctx.translate(-offset, -offset);\n  }\n  function axesCalc(cycleNum) {\n    //\tlog(\"axesCalc()\", arguments);\n\n    let converged = true;\n    axes.forEach((axis, i) => {\n      if (!axis.show) return;\n      let scale = scales[axis.scale];\n      if (scale.min == null) {\n        if (axis._show) {\n          converged = false;\n          axis._show = false;\n          resetYSeries(false);\n        }\n        return;\n      } else {\n        if (!axis._show) {\n          converged = false;\n          axis._show = true;\n          resetYSeries(false);\n        }\n      }\n      let side = axis.side;\n      let ori = side % 2;\n      let {\n        min,\n        max\n      } = scale; // \t\t// should this toggle them ._show = false\n\n      let [_incr, _space] = getIncrSpace(i, min, max, ori == 0 ? plotWidCss : plotHgtCss);\n      if (_space == 0) return;\n\n      // if we're using index positions, force first tick to match passed index\n      let forceMin = scale.distr == 2;\n      let _splits = axis._splits = axis.splits(self, i, min, max, _incr, _space, forceMin);\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let values = axis._values = axis.values(self, axis.filter(self, splits, i, _space, incr), i, _space, incr);\n\n      // rotating of labels only supported on bottom x axis\n      axis._rotate = side == 2 ? axis.rotate(self, values, i, _space) : 0;\n      let oldSize = axis._size;\n      axis._size = ceil(axis.size(self, values, i, cycleNum));\n      if (oldSize != null && axis._size != oldSize)\n        // ready && ?\n        converged = false;\n    });\n    return converged;\n  }\n  function paddingCalc(cycleNum) {\n    let converged = true;\n    padding.forEach((p, i) => {\n      let _p = p(self, i, sidesWithAxes, cycleNum);\n      if (_p != _padding[i]) converged = false;\n      _padding[i] = _p;\n    });\n    return converged;\n  }\n  function drawAxesGrid() {\n    for (let i = 0; i < axes.length; i++) {\n      let axis = axes[i];\n      if (!axis.show || !axis._show) continue;\n      let side = axis.side;\n      let ori = side % 2;\n      let x, y;\n      let fillStyle = axis.stroke(self, i);\n      let shiftDir = side == 0 || side == 3 ? -1 : 1;\n\n      // axis label\n      if (axis.label) {\n        let shiftAmt = axis.labelGap * shiftDir;\n        let baseLpos = round((axis._lpos + shiftAmt) * pxRatio);\n        setFontStyle(axis.labelFont[0], fillStyle, \"center\", side == 2 ? TOP : BOTTOM);\n        ctx.save();\n        if (ori == 1) {\n          x = y = 0;\n          ctx.translate(baseLpos, round(plotTop + plotHgt / 2));\n          ctx.rotate((side == 3 ? -PI : PI) / 2);\n        } else {\n          x = round(plotLft + plotWid / 2);\n          y = baseLpos;\n        }\n        ctx.fillText(axis.label, x, y);\n        ctx.restore();\n      }\n      let [_incr, _space] = axis._found;\n      if (_space == 0) continue;\n      let scale = scales[axis.scale];\n      let plotDim = ori == 0 ? plotWid : plotHgt;\n      let plotOff = ori == 0 ? plotLft : plotTop;\n      let axisGap = round(axis.gap * pxRatio);\n      let _splits = axis._splits;\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let ticks = axis.ticks;\n      let border = axis.border;\n      let tickSize = ticks.show ? round(ticks.size * pxRatio) : 0;\n\n      // rotating of labels only supported on bottom x axis\n      let angle = axis._rotate * -PI / 180;\n      let basePos = pxRound(axis._pos * pxRatio);\n      let shiftAmt = (tickSize + axisGap) * shiftDir;\n      let finalPos = basePos + shiftAmt;\n      y = ori == 0 ? finalPos : 0;\n      x = ori == 1 ? finalPos : 0;\n      let font = axis.font[0];\n      let textAlign = axis.align == 1 ? LEFT : axis.align == 2 ? RIGHT : angle > 0 ? LEFT : angle < 0 ? RIGHT : ori == 0 ? \"center\" : side == 3 ? RIGHT : LEFT;\n      let textBaseline = angle || ori == 1 ? \"middle\" : side == 2 ? TOP : BOTTOM;\n      setFontStyle(font, fillStyle, textAlign, textBaseline);\n      let lineHeight = axis.font[1] * axis.lineGap;\n      let canOffs = _splits.map(val => pxRound(getPos(val, scale, plotDim, plotOff)));\n      let _values = axis._values;\n      for (let i = 0; i < _values.length; i++) {\n        let val = _values[i];\n        if (val != null) {\n          if (ori == 0) x = canOffs[i];else y = canOffs[i];\n          val = \"\" + val;\n          let _parts = val.indexOf(\"\\n\") == -1 ? [val] : val.split(/\\n/gm);\n          for (let j = 0; j < _parts.length; j++) {\n            let text = _parts[j];\n            if (angle) {\n              ctx.save();\n              ctx.translate(x, y + j * lineHeight); // can this be replaced with position math?\n              ctx.rotate(angle); // can this be done once?\n              ctx.fillText(text, 0, 0);\n              ctx.restore();\n            } else ctx.fillText(text, x, y + j * lineHeight);\n          }\n        }\n      }\n\n      // ticks\n      if (ticks.show) {\n        drawOrthoLines(canOffs, ticks.filter(self, splits, i, _space, incr), ori, side, basePos, tickSize, roundDec(ticks.width * pxRatio, 3), ticks.stroke(self, i), ticks.dash, ticks.cap);\n      }\n\n      // grid\n      let grid = axis.grid;\n      if (grid.show) {\n        drawOrthoLines(canOffs, grid.filter(self, splits, i, _space, incr), ori, ori == 0 ? 2 : 1, ori == 0 ? plotTop : plotLft, ori == 0 ? plotHgt : plotWid, roundDec(grid.width * pxRatio, 3), grid.stroke(self, i), grid.dash, grid.cap);\n      }\n      if (border.show) {\n        drawOrthoLines([basePos], [1], ori == 0 ? 1 : 0, ori == 0 ? 1 : 2, ori == 1 ? plotTop : plotLft, ori == 1 ? plotHgt : plotWid, roundDec(border.width * pxRatio, 3), border.stroke(self, i), border.dash, border.cap);\n      }\n    }\n    fire(\"drawAxes\");\n  }\n  function resetYSeries(minMax) {\n    //\tlog(\"resetYSeries()\", arguments);\n\n    series.forEach((s, i) => {\n      if (i > 0) {\n        s._paths = null;\n        if (minMax) {\n          if (mode == 1) {\n            s.min = null;\n            s.max = null;\n          } else {\n            s.facets.forEach(f => {\n              f.min = null;\n              f.max = null;\n            });\n          }\n        }\n      }\n    });\n  }\n  let queuedCommit = false;\n  let deferHooks = false;\n  let hooksQueue = [];\n  function flushHooks() {\n    deferHooks = false;\n    for (let i = 0; i < hooksQueue.length; i++) fire(...hooksQueue[i]);\n    hooksQueue.length = 0;\n  }\n  function commit() {\n    if (!queuedCommit) {\n      microTask(_commit);\n      queuedCommit = true;\n    }\n  }\n\n  // manual batching (aka immediate mode), skips microtask queue\n  function batch(fn, _deferHooks = false) {\n    queuedCommit = true;\n    deferHooks = _deferHooks;\n    fn(self);\n    _commit();\n    if (_deferHooks && hooksQueue.length > 0) queueMicrotask(flushHooks);\n  }\n  self.batch = batch;\n  function _commit() {\n    //\tlog(\"_commit()\", arguments);\n\n    if (shouldSetScales) {\n      setScales();\n      shouldSetScales = false;\n    }\n    if (shouldConvergeSize) {\n      convergeSize();\n      shouldConvergeSize = false;\n    }\n    if (shouldSetSize) {\n      setStylePx(under, LEFT, plotLftCss);\n      setStylePx(under, TOP, plotTopCss);\n      setStylePx(under, WIDTH, plotWidCss);\n      setStylePx(under, HEIGHT, plotHgtCss);\n      setStylePx(over, LEFT, plotLftCss);\n      setStylePx(over, TOP, plotTopCss);\n      setStylePx(over, WIDTH, plotWidCss);\n      setStylePx(over, HEIGHT, plotHgtCss);\n      setStylePx(wrap, WIDTH, fullWidCss);\n      setStylePx(wrap, HEIGHT, fullHgtCss);\n\n      // NOTE: mutating this during print preview in Chrome forces transparent\n      // canvas pixels to white, even when followed up with clearRect() below\n      can.width = round(fullWidCss * pxRatio);\n      can.height = round(fullHgtCss * pxRatio);\n      axes.forEach(({\n        _el,\n        _show,\n        _size,\n        _pos,\n        side\n      }) => {\n        if (_el != null) {\n          if (_show) {\n            let posOffset = side === 3 || side === 0 ? _size : 0;\n            let isVt = side % 2 == 1;\n            setStylePx(_el, isVt ? \"left\" : \"top\", _pos - posOffset);\n            setStylePx(_el, isVt ? \"width\" : \"height\", _size);\n            setStylePx(_el, isVt ? \"top\" : \"left\", isVt ? plotTopCss : plotLftCss);\n            setStylePx(_el, isVt ? \"height\" : \"width\", isVt ? plotHgtCss : plotWidCss);\n            remClass(_el, OFF);\n          } else addClass(_el, OFF);\n        }\n      });\n\n      // invalidate ctx style cache\n      ctxStroke = ctxFill = ctxWidth = ctxJoin = ctxCap = ctxFont = ctxAlign = ctxBaseline = ctxDash = null;\n      ctxAlpha = 1;\n      syncRect(true);\n      if (plotLftCss != _plotLftCss || plotTopCss != _plotTopCss || plotWidCss != _plotWidCss || plotHgtCss != _plotHgtCss) {\n        resetYSeries(false);\n        let pctWid = plotWidCss / _plotWidCss;\n        let pctHgt = plotHgtCss / _plotHgtCss;\n        if (cursor.show && !shouldSetCursor && cursor.left >= 0) {\n          cursor.left *= pctWid;\n          cursor.top *= pctHgt;\n          vCursor && elTrans(vCursor, round(cursor.left), 0, plotWidCss, plotHgtCss);\n          hCursor && elTrans(hCursor, 0, round(cursor.top), plotWidCss, plotHgtCss);\n          for (let i = 0; i < cursorPts.length; i++) {\n            let pt = cursorPts[i];\n            if (pt != null) {\n              cursorPtsLft[i] *= pctWid;\n              cursorPtsTop[i] *= pctHgt;\n              elTrans(pt, ceil(cursorPtsLft[i]), ceil(cursorPtsTop[i]), plotWidCss, plotHgtCss);\n            }\n          }\n        }\n        if (select.show && !shouldSetSelect && select.left >= 0 && select.width > 0) {\n          select.left *= pctWid;\n          select.width *= pctWid;\n          select.top *= pctHgt;\n          select.height *= pctHgt;\n          for (let prop in _hideProps) setStylePx(selectDiv, prop, select[prop]);\n        }\n        _plotLftCss = plotLftCss;\n        _plotTopCss = plotTopCss;\n        _plotWidCss = plotWidCss;\n        _plotHgtCss = plotHgtCss;\n      }\n      fire(\"setSize\");\n      shouldSetSize = false;\n    }\n    if (fullWidCss > 0 && fullHgtCss > 0) {\n      ctx.clearRect(0, 0, can.width, can.height);\n      fire(\"drawClear\");\n      drawOrder.forEach(fn => fn());\n      fire(\"draw\");\n    }\n    if (select.show && shouldSetSelect) {\n      setSelect(select);\n      shouldSetSelect = false;\n    }\n    if (cursor.show && shouldSetCursor) {\n      updateCursor(null, true, false);\n      shouldSetCursor = false;\n    }\n    if (legend.show && legend.live && shouldSetLegend) {\n      setLegend();\n      shouldSetLegend = false; // redundant currently\n    }\n    if (!ready) {\n      ready = true;\n      self.status = 1;\n      fire(\"ready\");\n    }\n    viaAutoScaleX = false;\n    queuedCommit = false;\n  }\n  self.redraw = (rebuildPaths, recalcAxes) => {\n    shouldConvergeSize = recalcAxes || false;\n    if (rebuildPaths !== false) _setScale(xScaleKey, scaleX.min, scaleX.max);else commit();\n  };\n\n  // redraw() => setScale('x', scales.x.min, scales.x.max);\n\n  // explicit, never re-ranged (is this actually true? for x and y)\n  function setScale(key, opts) {\n    let sc = scales[key];\n    if (sc.from == null) {\n      if (dataLen == 0) {\n        let minMax = sc.range(self, opts.min, opts.max, key);\n        opts.min = minMax[0];\n        opts.max = minMax[1];\n      }\n      if (opts.min > opts.max) {\n        let _min = opts.min;\n        opts.min = opts.max;\n        opts.max = _min;\n      }\n      if (dataLen > 1 && opts.min != null && opts.max != null && opts.max - opts.min < 1e-16) return;\n      if (key == xScaleKey) {\n        if (sc.distr == 2 && dataLen > 0) {\n          opts.min = closestIdx(opts.min, data[0]);\n          opts.max = closestIdx(opts.max, data[0]);\n          if (opts.min == opts.max) opts.max++;\n        }\n      }\n\n      //\tlog(\"setScale()\", arguments);\n\n      pendScales[key] = opts;\n      shouldSetScales = true;\n      commit();\n    }\n  }\n  self.setScale = setScale;\n\n  //\tINTERACTION\n\n  let xCursor;\n  let yCursor;\n  let vCursor;\n  let hCursor;\n\n  // starting position before cursor.move\n  let rawMouseLeft0;\n  let rawMouseTop0;\n\n  // starting position\n  let mouseLeft0;\n  let mouseTop0;\n\n  // current position before cursor.move\n  let rawMouseLeft1;\n  let rawMouseTop1;\n\n  // current position\n  let mouseLeft1;\n  let mouseTop1;\n  let dragging = false;\n  const drag = cursor.drag;\n  let dragX = drag.x;\n  let dragY = drag.y;\n  if (cursor.show) {\n    if (cursor.x) xCursor = placeDiv(CURSOR_X, over);\n    if (cursor.y) yCursor = placeDiv(CURSOR_Y, over);\n    if (scaleX.ori == 0) {\n      vCursor = xCursor;\n      hCursor = yCursor;\n    } else {\n      vCursor = yCursor;\n      hCursor = xCursor;\n    }\n    mouseLeft1 = cursor.left;\n    mouseTop1 = cursor.top;\n  }\n  const select = self.select = assign({\n    show: true,\n    over: true,\n    left: 0,\n    width: 0,\n    top: 0,\n    height: 0\n  }, opts.select);\n  const selectDiv = select.show ? placeDiv(SELECT, select.over ? over : under) : null;\n  function setSelect(opts, _fire) {\n    if (select.show) {\n      for (let prop in opts) {\n        select[prop] = opts[prop];\n        if (prop in _hideProps) setStylePx(selectDiv, prop, opts[prop]);\n      }\n      _fire !== false && fire(\"setSelect\");\n    }\n  }\n  self.setSelect = setSelect;\n  function toggleDOM(i, onOff) {\n    let s = series[i];\n    let label = showLegend ? legendRows[i] : null;\n    if (s.show) label && remClass(label, OFF);else {\n      label && addClass(label, OFF);\n      let pt = cursorOnePt ? cursorPts[0] : cursorPts[i];\n      elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n    }\n  }\n  function _setScale(key, min, max) {\n    setScale(key, {\n      min,\n      max\n    });\n  }\n  function setSeries(i, opts, _fire, _pub) {\n    //\tlog(\"setSeries()\", arguments);\n\n    if (opts.focus != null) setFocus(i);\n    if (opts.show != null) {\n      series.forEach((s, si) => {\n        if (si > 0 && (i == si || i == null)) {\n          s.show = opts.show;\n          toggleDOM(si, opts.show);\n          if (mode == 2) {\n            _setScale(s.facets[0].scale, null, null);\n            _setScale(s.facets[1].scale, null, null);\n          } else _setScale(s.scale, null, null);\n          commit();\n        }\n      });\n    }\n    _fire !== false && fire(\"setSeries\", i, opts);\n    _pub && pubSync(\"setSeries\", self, i, opts);\n  }\n  self.setSeries = setSeries;\n  function setBand(bi, opts) {\n    assign(bands[bi], opts);\n  }\n  function addBand(opts, bi) {\n    opts.fill = fnOrSelf(opts.fill || null);\n    opts.dir = ifNull(opts.dir, -1);\n    bi = bi == null ? bands.length : bi;\n    bands.splice(bi, 0, opts);\n  }\n  function delBand(bi) {\n    if (bi == null) bands.length = 0;else bands.splice(bi, 1);\n  }\n  self.addBand = addBand;\n  self.setBand = setBand;\n  self.delBand = delBand;\n  function setAlpha(i, value) {\n    series[i].alpha = value;\n    if (cursor.show && cursorPts[i]) cursorPts[i].style.opacity = value;\n    if (showLegend && legendRows[i]) legendRows[i].style.opacity = value;\n  }\n\n  // y-distance\n  let closestDist;\n  let closestSeries;\n  let focusedSeries;\n  const FOCUS_TRUE = {\n    focus: true\n  };\n  function setFocus(i) {\n    if (i != focusedSeries) {\n      //\tlog(\"setFocus()\", arguments);\n\n      let allFocused = i == null;\n      let _setAlpha = focus.alpha != 1;\n      series.forEach((s, i2) => {\n        if (mode == 1 || i2 > 0) {\n          let isFocused = allFocused || i2 == 0 || i2 == i;\n          s._focus = allFocused ? null : isFocused;\n          _setAlpha && setAlpha(i2, isFocused ? 1 : focus.alpha);\n        }\n      });\n      focusedSeries = i;\n      _setAlpha && commit();\n    }\n  }\n  if (showLegend && cursorFocus) {\n    onMouse(mouseleave, legendTable, e => {\n      if (cursor._lock) return;\n      setCursorEvent(e);\n      if (focusedSeries != null) setSeries(null, FOCUS_TRUE, true, syncOpts.setSeries);\n    });\n  }\n  function posToVal(pos, scale, can) {\n    let sc = scales[scale];\n    if (can) pos = pos / pxRatio - (sc.ori == 1 ? plotTopCss : plotLftCss);\n    let dim = plotWidCss;\n    if (sc.ori == 1) {\n      dim = plotHgtCss;\n      pos = dim - pos;\n    }\n    if (sc.dir == -1) pos = dim - pos;\n    let _min = sc._min,\n      _max = sc._max,\n      pct = pos / dim;\n    let sv = _min + (_max - _min) * pct;\n    let distr = sc.distr;\n    return distr == 3 ? pow(10, sv) : distr == 4 ? sinh(sv, sc.asinh) : distr == 100 ? sc.bwd(sv) : sv;\n  }\n  function closestIdxFromXpos(pos, can) {\n    let v = posToVal(pos, xScaleKey, can);\n    return closestIdx(v, data[0], i0, i1);\n  }\n  self.valToIdx = val => closestIdx(val, data[0]);\n  self.posToIdx = closestIdxFromXpos;\n  self.posToVal = posToVal;\n  self.valToPos = (val, scale, can) => scales[scale].ori == 0 ? getHPos(val, scales[scale], can ? plotWid : plotWidCss, can ? plotLft : 0) : getVPos(val, scales[scale], can ? plotHgt : plotHgtCss, can ? plotTop : 0);\n  self.setCursor = (opts, _fire, _pub) => {\n    mouseLeft1 = opts.left;\n    mouseTop1 = opts.top;\n    //\tassign(cursor, opts);\n    updateCursor(null, _fire, _pub);\n  };\n  function setSelH(off, dim) {\n    setStylePx(selectDiv, LEFT, select.left = off);\n    setStylePx(selectDiv, WIDTH, select.width = dim);\n  }\n  function setSelV(off, dim) {\n    setStylePx(selectDiv, TOP, select.top = off);\n    setStylePx(selectDiv, HEIGHT, select.height = dim);\n  }\n  let setSelX = scaleX.ori == 0 ? setSelH : setSelV;\n  let setSelY = scaleX.ori == 1 ? setSelH : setSelV;\n  function syncLegend() {\n    if (showLegend && legend.live) {\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        if (i == 0 && multiValLegend) continue;\n        let vals = legend.values[i];\n        let j = 0;\n        for (let k in vals) legendCells[i][j++].firstChild.nodeValue = vals[k];\n      }\n    }\n  }\n  function setLegend(opts, _fire) {\n    if (opts != null) {\n      if (opts.idxs) {\n        opts.idxs.forEach((didx, sidx) => {\n          activeIdxs[sidx] = didx;\n        });\n      } else if (!isUndef(opts.idx)) activeIdxs.fill(opts.idx);\n      legend.idx = activeIdxs[0];\n    }\n    if (showLegend && legend.live) {\n      for (let sidx = 0; sidx < series.length; sidx++) {\n        if (sidx > 0 || mode == 1 && !multiValLegend) setLegendValues(sidx, activeIdxs[sidx]);\n      }\n      syncLegend();\n    }\n    shouldSetLegend = false;\n    _fire !== false && fire(\"setLegend\");\n  }\n  self.setLegend = setLegend;\n  function setLegendValues(sidx, idx) {\n    let s = series[sidx];\n    let src = sidx == 0 && xScaleDistr == 2 ? data0 : data[sidx];\n    let val;\n    if (multiValLegend) val = s.values(self, sidx, idx) ?? NULL_LEGEND_VALUES;else {\n      val = s.value(self, idx == null ? null : src[idx], sidx, idx);\n      val = val == null ? NULL_LEGEND_VALUES : {\n        _: val\n      };\n    }\n    legend.values[sidx] = val;\n  }\n  function updateCursor(src, _fire, _pub) {\n    //\tts == null && log(\"updateCursor()\", arguments);\n\n    rawMouseLeft1 = mouseLeft1;\n    rawMouseTop1 = mouseTop1;\n    [mouseLeft1, mouseTop1] = cursor.move(self, mouseLeft1, mouseTop1);\n    cursor.left = mouseLeft1;\n    cursor.top = mouseTop1;\n    if (cursor.show) {\n      vCursor && elTrans(vCursor, round(mouseLeft1), 0, plotWidCss, plotHgtCss);\n      hCursor && elTrans(hCursor, 0, round(mouseTop1), plotWidCss, plotHgtCss);\n    }\n    let idx;\n\n    // when zooming to an x scale range between datapoints the binary search\n    // for nearest min/max indices results in this condition. cheap hack :D\n    let noDataInRange = i0 > i1; // works for mode 1 only\n\n    closestDist = inf;\n    closestSeries = null;\n\n    // TODO: extract\n    let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n    let yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss;\n\n    // if cursor hidden, hide points & clear legend vals\n    if (mouseLeft1 < 0 || dataLen == 0 || noDataInRange) {\n      idx = cursor.idx = null;\n      for (let i = 0; i < series.length; i++) {\n        let pt = cursorPts[i];\n        pt != null && elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n      }\n      if (cursorFocus) setSeries(null, FOCUS_TRUE, true, src == null && syncOpts.setSeries);\n      if (legend.live) {\n        activeIdxs.fill(idx);\n        shouldSetLegend = true;\n      }\n    } else {\n      //\tlet pctY = 1 - (y / rect.height);\n\n      let mouseXPos, valAtPosX, xPos;\n      if (mode == 1) {\n        mouseXPos = scaleX.ori == 0 ? mouseLeft1 : mouseTop1;\n        valAtPosX = posToVal(mouseXPos, xScaleKey);\n        idx = cursor.idx = closestIdx(valAtPosX, data[0], i0, i1);\n        xPos = valToPosX(data[0][idx], scaleX, xDim, 0);\n      }\n\n      // closest pt values\n      let _ptLft = -10;\n      let _ptTop = -10;\n      let _ptWid = 0;\n      let _ptHgt = 0;\n      let _centered = true;\n      let _ptFill = '';\n      let _ptStroke = '';\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        let s = series[i];\n        let idx1 = activeIdxs[i];\n        let yVal1 = idx1 == null ? null : mode == 1 ? data[i][idx1] : data[i][1][idx1];\n        let idx2 = cursor.dataIdx(self, i, idx, valAtPosX);\n        let yVal2 = idx2 == null ? null : mode == 1 ? data[i][idx2] : data[i][1][idx2];\n        shouldSetLegend = shouldSetLegend || yVal2 != yVal1 || idx2 != idx1;\n        activeIdxs[i] = idx2;\n        let xPos2 = idx2 == idx ? xPos : valToPosX(mode == 1 ? data[0][idx2] : data[i][0][idx2], scaleX, xDim, 0);\n        if (i > 0 && s.show) {\n          // this doesnt really work for state timeline, heatmap, status history (where the value maps to color, not y coords)\n          let yPos = yVal2 == null ? -10 : valToPosY(yVal2, mode == 1 ? scales[s.scale] : scales[s.facets[1].scale], yDim, 0);\n          if (cursorFocus && yVal2 != null) {\n            let mouseYPos = scaleX.ori == 1 ? mouseLeft1 : mouseTop1;\n            let dist = abs(focus.dist(self, i, idx2, yPos, mouseYPos));\n            if (dist < closestDist) {\n              let bias = focus.bias;\n              if (bias != 0) {\n                let mouseYVal = posToVal(mouseYPos, s.scale);\n                let seriesYValSign = yVal2 >= 0 ? 1 : -1;\n                let mouseYValSign = mouseYVal >= 0 ? 1 : -1;\n\n                // with a focus bias, we will never cross zero when prox testing\n                // it's either closest towards zero, or closest away from zero\n                if (mouseYValSign == seriesYValSign && (mouseYValSign == 1 ? bias == 1 ? yVal2 >= mouseYVal : yVal2 <= mouseYVal :\n                // >= 0\n                bias == 1 ? yVal2 <= mouseYVal : yVal2 >= mouseYVal //  < 0\n                )) {\n                  closestDist = dist;\n                  closestSeries = i;\n                }\n              } else {\n                closestDist = dist;\n                closestSeries = i;\n              }\n            }\n          }\n          if (shouldSetLegend || cursorOnePt) {\n            let hPos, vPos;\n            if (scaleX.ori == 0) {\n              hPos = xPos2;\n              vPos = yPos;\n            } else {\n              hPos = yPos;\n              vPos = xPos2;\n            }\n            let ptWid,\n              ptHgt,\n              ptLft,\n              ptTop,\n              ptStroke,\n              ptFill,\n              centered = true,\n              getBBox = points.bbox;\n            if (getBBox != null) {\n              centered = false;\n              let bbox = getBBox(self, i);\n              ptLft = bbox.left;\n              ptTop = bbox.top;\n              ptWid = bbox.width;\n              ptHgt = bbox.height;\n            } else {\n              ptLft = hPos;\n              ptTop = vPos;\n              ptWid = ptHgt = points.size(self, i);\n            }\n            ptFill = points.fill(self, i);\n            ptStroke = points.stroke(self, i);\n            if (cursorOnePt) {\n              if (i == closestSeries && closestDist <= focus.prox) {\n                _ptLft = ptLft;\n                _ptTop = ptTop;\n                _ptWid = ptWid;\n                _ptHgt = ptHgt;\n                _centered = centered;\n                _ptFill = ptFill;\n                _ptStroke = ptStroke;\n              }\n            } else {\n              let pt = cursorPts[i];\n              if (pt != null) {\n                cursorPtsLft[i] = ptLft;\n                cursorPtsTop[i] = ptTop;\n                elSize(pt, ptWid, ptHgt, centered);\n                elColor(pt, ptFill, ptStroke);\n                elTrans(pt, ceil(ptLft), ceil(ptTop), plotWidCss, plotHgtCss);\n              }\n            }\n          }\n        }\n      }\n\n      // if only using single hover point (at cursorPts[0])\n      // we have trigger styling at last visible series (once closestSeries is settled)\n      if (cursorOnePt) {\n        // some of this logic is similar to series focus below, since it matches the behavior by design\n\n        let p = focus.prox;\n        let focusChanged = focusedSeries == null ? closestDist <= p : closestDist > p || closestSeries != focusedSeries;\n        if (shouldSetLegend || focusChanged) {\n          let pt = cursorPts[0];\n          cursorPtsLft[0] = _ptLft;\n          cursorPtsTop[0] = _ptTop;\n          elSize(pt, _ptWid, _ptHgt, _centered);\n          elColor(pt, _ptFill, _ptStroke);\n          elTrans(pt, ceil(_ptLft), ceil(_ptTop), plotWidCss, plotHgtCss);\n        }\n      }\n    }\n\n    // nit: cursor.drag.setSelect is assumed always true\n    if (select.show && dragging) {\n      if (src != null) {\n        let [xKey, yKey] = syncOpts.scales;\n        let [matchXKeys, matchYKeys] = syncOpts.match;\n        let [xKeySrc, yKeySrc] = src.cursor.sync.scales;\n\n        // match the dragX/dragY implicitness/explicitness of src\n        let sdrag = src.cursor.drag;\n        dragX = sdrag._x;\n        dragY = sdrag._y;\n        if (dragX || dragY) {\n          let {\n            left,\n            top,\n            width,\n            height\n          } = src.select;\n          let sori = src.scales[xKeySrc].ori;\n          let sPosToVal = src.posToVal;\n          let sOff, sDim, sc, a, b;\n          let matchingX = xKey != null && matchXKeys(xKey, xKeySrc);\n          let matchingY = yKey != null && matchYKeys(yKey, yKeySrc);\n          if (matchingX && dragX) {\n            if (sori == 0) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[xKey];\n            a = valToPosX(sPosToVal(sOff, xKeySrc), sc, xDim, 0);\n            b = valToPosX(sPosToVal(sOff + sDim, xKeySrc), sc, xDim, 0);\n            setSelX(min(a, b), abs(b - a));\n          } else setSelX(0, xDim);\n          if (matchingY && dragY) {\n            if (sori == 1) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[yKey];\n            a = valToPosY(sPosToVal(sOff, yKeySrc), sc, yDim, 0);\n            b = valToPosY(sPosToVal(sOff + sDim, yKeySrc), sc, yDim, 0);\n            setSelY(min(a, b), abs(b - a));\n          } else setSelY(0, yDim);\n        } else hideSelect();\n      } else {\n        let rawDX = abs(rawMouseLeft1 - rawMouseLeft0);\n        let rawDY = abs(rawMouseTop1 - rawMouseTop0);\n        if (scaleX.ori == 1) {\n          let _rawDX = rawDX;\n          rawDX = rawDY;\n          rawDY = _rawDX;\n        }\n        dragX = drag.x && rawDX >= drag.dist;\n        dragY = drag.y && rawDY >= drag.dist;\n        let uni = drag.uni;\n        if (uni != null) {\n          // only calc drag status if they pass the dist thresh\n          if (dragX && dragY) {\n            dragX = rawDX >= uni;\n            dragY = rawDY >= uni;\n\n            // force unidirectionality when both are under uni limit\n            if (!dragX && !dragY) {\n              if (rawDY > rawDX) dragY = true;else dragX = true;\n            }\n          }\n        } else if (drag.x && drag.y && (dragX || dragY))\n          // if omni with no uni then both dragX / dragY should be true if either is true\n          dragX = dragY = true;\n        let p0, p1;\n        if (dragX) {\n          if (scaleX.ori == 0) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelX(min(p0, p1), abs(p1 - p0));\n          if (!dragY) setSelY(0, yDim);\n        }\n        if (dragY) {\n          if (scaleX.ori == 1) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelY(min(p0, p1), abs(p1 - p0));\n          if (!dragX) setSelX(0, xDim);\n        }\n\n        // the drag didn't pass the dist requirement\n        if (!dragX && !dragY) {\n          setSelX(0, 0);\n          setSelY(0, 0);\n        }\n      }\n    }\n    drag._x = dragX;\n    drag._y = dragY;\n    if (src == null) {\n      if (_pub) {\n        if (syncKey != null) {\n          let [xSyncKey, ySyncKey] = syncOpts.scales;\n          syncOpts.values[0] = xSyncKey != null ? posToVal(scaleX.ori == 0 ? mouseLeft1 : mouseTop1, xSyncKey) : null;\n          syncOpts.values[1] = ySyncKey != null ? posToVal(scaleX.ori == 1 ? mouseLeft1 : mouseTop1, ySyncKey) : null;\n        }\n        pubSync(mousemove, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, idx);\n      }\n      if (cursorFocus) {\n        let shouldPub = _pub && syncOpts.setSeries;\n        let p = focus.prox;\n        if (focusedSeries == null) {\n          if (closestDist <= p) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        } else {\n          if (closestDist > p) setSeries(null, FOCUS_TRUE, true, shouldPub);else if (closestSeries != focusedSeries) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        }\n      }\n    }\n    if (shouldSetLegend) {\n      legend.idx = idx;\n      setLegend();\n    }\n    _fire !== false && fire(\"setCursor\");\n  }\n  let rect = null;\n  Object.defineProperty(self, 'rect', {\n    get() {\n      if (rect == null) syncRect(false);\n      return rect;\n    }\n  });\n  function syncRect(defer = false) {\n    if (defer) rect = null;else {\n      rect = over.getBoundingClientRect();\n      fire(\"syncRect\", rect);\n    }\n  }\n  function mouseMove(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n\n    // Chrome on Windows has a bug which triggers a stray mousemove event after an initial mousedown event\n    // when clicking into a plot as part of re-focusing the browser window.\n    // we gotta ignore it to avoid triggering a phantom drag / setSelect\n    // However, on touch-only devices Chrome-based browsers trigger a 0-distance mousemove before mousedown\n    // so we don't ignore it when mousedown has set the dragging flag\n    if (dragging && e != null && e.movementX == 0 && e.movementY == 0) return;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, e != null);\n    if (e != null) updateCursor(null, true, true);else updateCursor(src, true, false);\n  }\n  function cacheMouse(e, src, _l, _t, _w, _h, _i, initial, snap) {\n    if (rect == null) syncRect(false);\n    setCursorEvent(e);\n    if (e != null) {\n      _l = e.clientX - rect.left;\n      _t = e.clientY - rect.top;\n    } else {\n      if (_l < 0 || _t < 0) {\n        mouseLeft1 = -10;\n        mouseTop1 = -10;\n        return;\n      }\n      let [xKey, yKey] = syncOpts.scales;\n      let syncOptsSrc = src.cursor.sync;\n      let [xValSrc, yValSrc] = syncOptsSrc.values;\n      let [xKeySrc, yKeySrc] = syncOptsSrc.scales;\n      let [matchXKeys, matchYKeys] = syncOpts.match;\n      let rotSrc = src.axes[0].side % 2 == 1;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss,\n        yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss,\n        _xDim = rotSrc ? _h : _w,\n        _yDim = rotSrc ? _w : _h,\n        _xPos = rotSrc ? _t : _l,\n        _yPos = rotSrc ? _l : _t;\n      if (xKeySrc != null) _l = matchXKeys(xKey, xKeySrc) ? getPos(xValSrc, scales[xKey], xDim, 0) : -10;else _l = xDim * (_xPos / _xDim);\n      if (yKeySrc != null) _t = matchYKeys(yKey, yKeySrc) ? getPos(yValSrc, scales[yKey], yDim, 0) : -10;else _t = yDim * (_yPos / _yDim);\n      if (scaleX.ori == 1) {\n        let __l = _l;\n        _l = _t;\n        _t = __l;\n      }\n    }\n    if (snap) {\n      if (_l <= 1 || _l >= plotWidCss - 1) _l = incrRound(_l, plotWidCss);\n      if (_t <= 1 || _t >= plotHgtCss - 1) _t = incrRound(_t, plotHgtCss);\n    }\n    if (initial) {\n      rawMouseLeft0 = _l;\n      rawMouseTop0 = _t;\n      [mouseLeft0, mouseTop0] = cursor.move(self, _l, _t);\n    } else {\n      mouseLeft1 = _l;\n      mouseTop1 = _t;\n    }\n  }\n  const _hideProps = {\n    width: 0,\n    height: 0,\n    left: 0,\n    top: 0\n  };\n  function hideSelect() {\n    setSelect(_hideProps, false);\n  }\n  let downSelectLeft;\n  let downSelectTop;\n  let downSelectWidth;\n  let downSelectHeight;\n  function mouseDown(e, src, _l, _t, _w, _h, _i) {\n    dragging = true;\n    dragX = dragY = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, true, false);\n    if (e != null) {\n      onMouse(mouseup, doc, mouseUp, false);\n      pubSync(mousedown, self, mouseLeft0, mouseTop0, plotWidCss, plotHgtCss, null);\n    }\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    downSelectLeft = left;\n    downSelectTop = top;\n    downSelectWidth = width;\n    downSelectHeight = height;\n    hideSelect();\n  }\n  function mouseUp(e, src, _l, _t, _w, _h, _i) {\n    dragging = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, true);\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    let hasSelect = width > 0 || height > 0;\n    let chgSelect = downSelectLeft != left || downSelectTop != top || downSelectWidth != width || downSelectHeight != height;\n    hasSelect && chgSelect && setSelect(select);\n    if (drag.setScale && hasSelect && chgSelect) {\n      //\tif (syncKey != null) {\n      //\t\tdragX = drag.x;\n      //\t\tdragY = drag.y;\n      //\t}\n\n      let xOff = left,\n        xDim = width,\n        yOff = top,\n        yDim = height;\n      if (scaleX.ori == 1) {\n        xOff = top, xDim = height, yOff = left, yDim = width;\n      }\n      if (dragX) {\n        _setScale(xScaleKey, posToVal(xOff, xScaleKey), posToVal(xOff + xDim, xScaleKey));\n      }\n      if (dragY) {\n        for (let k in scales) {\n          let sc = scales[k];\n          if (k != xScaleKey && sc.from == null && sc.min != inf) {\n            _setScale(k, posToVal(yOff + yDim, k), posToVal(yOff, k));\n          }\n        }\n      }\n      hideSelect();\n    } else if (cursor.lock) {\n      cursor._lock = !cursor._lock;\n      updateCursor(null, true, false);\n    }\n    if (e != null) {\n      offMouse(mouseup, doc);\n      pubSync(mouseup, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n    }\n  }\n  function mouseLeave(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    let _dragging = dragging;\n    if (dragging) {\n      // handle case when mousemove aren't fired all the way to edges by browser\n      let snapH = true;\n      let snapV = true;\n      let snapProx = 10;\n      let dragH, dragV;\n      if (scaleX.ori == 0) {\n        dragH = dragX;\n        dragV = dragY;\n      } else {\n        dragH = dragY;\n        dragV = dragX;\n      }\n      if (dragH && dragV) {\n        // maybe omni corner snap\n        snapH = mouseLeft1 <= snapProx || mouseLeft1 >= plotWidCss - snapProx;\n        snapV = mouseTop1 <= snapProx || mouseTop1 >= plotHgtCss - snapProx;\n      }\n      if (dragH && snapH) mouseLeft1 = mouseLeft1 < mouseLeft0 ? 0 : plotWidCss;\n      if (dragV && snapV) mouseTop1 = mouseTop1 < mouseTop0 ? 0 : plotHgtCss;\n      updateCursor(null, true, true);\n      dragging = false;\n    }\n    mouseLeft1 = -10;\n    mouseTop1 = -10;\n\n    // passing a non-null timestamp to force sync/mousemove event\n    updateCursor(null, true, true);\n    if (_dragging) dragging = _dragging;\n  }\n  function dblClick(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    autoScaleX();\n    hideSelect();\n    if (e != null) pubSync(dblclick, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n  }\n  function syncPxRatio() {\n    axes.forEach(syncFontSize);\n    _setSize(self.width, self.height, true);\n  }\n  on(dppxchange, win, syncPxRatio);\n\n  // internal pub/sub\n  const events = {};\n  events.mousedown = mouseDown;\n  events.mousemove = mouseMove;\n  events.mouseup = mouseUp;\n  events.dblclick = dblClick;\n  events[\"setSeries\"] = (e, src, idx, opts) => {\n    let seriesIdxMatcher = syncOpts.match[2];\n    idx = seriesIdxMatcher(self, src, idx);\n    idx != -1 && setSeries(idx, opts, true, false);\n  };\n  if (cursor.show) {\n    onMouse(mousedown, over, mouseDown);\n    onMouse(mousemove, over, mouseMove);\n    onMouse(mouseenter, over, e => {\n      setCursorEvent(e);\n      syncRect(false);\n    });\n    onMouse(mouseleave, over, mouseLeave);\n    onMouse(dblclick, over, dblClick);\n    cursorPlots.add(self);\n    self.syncRect = syncRect;\n  }\n\n  // external on/off\n  const hooks = self.hooks = opts.hooks || {};\n  function fire(evName, a1, a2) {\n    if (deferHooks) hooksQueue.push([evName, a1, a2]);else {\n      if (evName in hooks) {\n        hooks[evName].forEach(fn => {\n          fn.call(null, self, a1, a2);\n        });\n      }\n    }\n  }\n  (opts.plugins || []).forEach(p => {\n    for (let evName in p.hooks) hooks[evName] = (hooks[evName] || []).concat(p.hooks[evName]);\n  });\n  const seriesIdxMatcher = (self, src, srcSeriesIdx) => srcSeriesIdx;\n  const syncOpts = assign({\n    key: null,\n    setSeries: false,\n    filters: {\n      pub: retTrue,\n      sub: retTrue\n    },\n    scales: [xScaleKey, series[1] ? series[1].scale : null],\n    match: [retEq, retEq, seriesIdxMatcher],\n    values: [null, null]\n  }, cursor.sync);\n  if (syncOpts.match.length == 2) syncOpts.match.push(seriesIdxMatcher);\n  cursor.sync = syncOpts;\n  const syncKey = syncOpts.key;\n  const sync = _sync(syncKey);\n  function pubSync(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.pub(type, src, x, y, w, h, i)) sync.pub(type, src, x, y, w, h, i);\n  }\n  sync.sub(self);\n  function pub(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.sub(type, src, x, y, w, h, i)) events[type](null, src, x, y, w, h, i);\n  }\n  self.pub = pub;\n  function destroy() {\n    sync.unsub(self);\n    cursorPlots.delete(self);\n    mouseListeners.clear();\n    off(dppxchange, win, syncPxRatio);\n    root.remove();\n    legendTable?.remove(); // in case mounted outside of root\n    fire(\"destroy\");\n  }\n  self.destroy = destroy;\n  function _init() {\n    fire(\"init\", opts, data);\n    setData(data || opts.data, false);\n    if (pendScales[xScaleKey]) setScale(xScaleKey, pendScales[xScaleKey]);else autoScaleX();\n    shouldSetSelect = select.show && (select.width > 0 || select.height > 0);\n    shouldSetCursor = shouldSetLegend = true;\n    _setSize(opts.width, opts.height);\n  }\n  series.forEach(initSeries);\n  axes.forEach(initAxis);\n  if (then) {\n    if (then instanceof HTMLElement) {\n      then.appendChild(root);\n      _init();\n    } else then(self, _init);\n  } else _init();\n  return self;\n}\nuPlot.assign = assign;\nuPlot.fmtNum = fmtNum;\nuPlot.rangeNum = rangeNum;\nuPlot.rangeLog = rangeLog;\nuPlot.rangeAsinh = rangeAsinh;\nuPlot.orient = orient;\nuPlot.pxRatio = pxRatio;\n{\n  uPlot.join = join;\n}\n{\n  uPlot.fmtDate = fmtDate;\n  uPlot.tzDate = tzDate;\n}\nuPlot.sync = _sync;\n{\n  uPlot.addGap = addGap;\n  uPlot.clipGaps = clipGaps;\n  let paths = uPlot.paths = {\n    points\n  };\n  paths.linear = linear;\n  paths.stepped = stepped;\n  paths.bars = bars;\n  paths.spline = monotoneCubic;\n}\nexport { uPlot as default };","import {\n  ChangeDetectionStrategy,\n  Component,\n  DestroyRef,\n  ElementRef,\n  ViewEncapsulation,\n  afterNextRender,\n  effect,\n  inject,\n  input,\n  output,\n} from '@angular/core';\nimport { ScaleRange } from '@app/domain/chart';\nimport { Milliseconds, Seconds, daysToMilliseconds, formatHours } from '@app/domain/date-time';\nimport { AppStore } from '@app/providers/state';\nimport { isNumber } from '@app/utils/assert';\nimport { format } from 'date-fns/format';\nimport { millisecondsToSeconds } from 'date-fns/millisecondsToSeconds';\nimport { secondsToMilliseconds } from 'date-fns/secondsToMilliseconds';\nimport uPlot, { AlignedData, Plugin } from 'uplot';\n\nconst barChartPlugin = (params: { colors: (string | null)[]; minRangeInMs: Milliseconds }): Plugin => {\n  const minRangeInSeconds: Seconds = millisecondsToSeconds(params.minRangeInMs);\n\n  const getVisibleRangeLength = (u: uPlot): number => {\n    const visibleRangeMin = u.scales.x?.min;\n    const visibleRangeMax = u.scales.x?.max;\n    if (visibleRangeMin === undefined || visibleRangeMax === undefined) return Number.POSITIVE_INFINITY;\n    return visibleRangeMax - visibleRangeMin;\n  };\n\n  const drawBarChart: uPlot.Series.Points.Show = (self: uPlot, seriesIndex: number, i0: number, i1: number) => {\n    let { ctx } = self;\n    let scale = self.series[seriesIndex]?.scale;\n    if (!scale) return;\n    const maxY = self.valToPos(0, scale, true);\n    const color = params.colors[seriesIndex];\n    if (!color) return false;\n    ctx.fillStyle = color;\n\n    let j = i0;\n\n    while (j <= i1) {\n      const data0J = self.data[0][j];\n      const dataIJ = self.data[seriesIndex]?.[j];\n      if (typeof data0J !== 'number' || typeof dataIJ !== 'number') continue;\n      let cx = Math.round(self.valToPos(data0J, 'x', true));\n      let cy = Math.round(self.valToPos(dataIJ, scale, true));\n      const range = getVisibleRangeLength(self);\n      if (cy < maxY && range <= minRangeInSeconds) {\n        ctx.beginPath();\n        ctx.rect(cx, cy, 1, maxY - cy);\n        ctx.fill();\n      }\n      j++;\n    }\n\n    ctx.restore();\n    return false;\n  };\n\n  return {\n    hooks: {},\n    opts: (u: uPlot, opts: uPlot.Options) => {\n      opts.series\n        .filter((s) => s.scale === 'm')\n        .forEach((s) => {\n          s.points = {\n            show: drawBarChart,\n          };\n        });\n    },\n  };\n};\n\n@Component({\n  selector: 'timeline-chart-uplot',\n  template: ``,\n  styleUrl: '../../../../node_modules/uplot/dist/uPlot.min.css',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [\n    `\n      timeline-chart-uplot {\n        display: block;\n        width: 100%;\n        height: 100%;\n        position: relative;\n        overflow: hidden;\n\n        .uplot {\n          position: absolute;\n          font-family: Roboto, 'Helvetica Neue', sans-serif !important;\n\n          & th {\n            font-weight: 400 !important;\n          }\n          .u-value {\n            vertical-align: -1px;\n          }\n        }\n        .hidden {\n          display: none;\n        }\n      }\n    `,\n  ],\n})\nexport class TimelineChartUplotComponent {\n  private elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\n  private destroyRef = inject(DestroyRef);\n  private store = inject(AppStore);\n\n  public chartData = input<AlignedData>();\n  public range = input<ScaleRange>();\n  public rangeChange = output<ScaleRange>();\n\n  private setRange(value: ScaleRange | undefined) {\n    if (!value) return;\n    const chartData = this.chartData();\n    const oldMin = Math.round(this.uplot?.scales.x?.min ?? -1);\n    const oldMax = Math.round(this.uplot?.scales.x?.max ?? -1);\n    const dataMin = chartData?.[0]?.[0];\n    const dataMax = chartData?.[0][chartData?.[0].length - 1] ?? [];\n    const newMin =\n      value[0] instanceof Date\n        ? millisecondsToSeconds(value[0].valueOf())\n        : isNumber(dataMin)\n          ? dataMin\n          : millisecondsToSeconds(Date.now());\n    const newMax =\n      value[1] instanceof Date\n        ? millisecondsToSeconds(value[1].valueOf())\n        : isNumber(dataMax)\n          ? dataMax\n          : millisecondsToSeconds(Date.now());\n    if (oldMin === newMin && oldMax === newMax) return;\n    // Wait until visible\n    this.uplot?.setScale('x', { min: newMin, max: newMax });\n  }\n  private firstRangeChangeSkipped = false;\n  private uplot?: uPlot;\n  private readonly headerHeight = 31;\n  private resizeObserver?: ResizeObserver;\n  private updateColors = () => {\n    this.store.theme();\n\n    const stroke = window.getComputedStyle(this.elementRef.nativeElement).color;\n    const primaryColor = window\n      .getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--mdc-outlined-text-field-focus-label-text-color');\n    const secondaryColor = window\n      .getComputedStyle(this.elementRef.nativeElement)\n      .getPropertyValue('--mdc-filled-text-field-container-color');\n\n    this.uplot?.batch((uPlot: uPlot) => {\n      uPlot?.axes.forEach((a) => (a.stroke = () => stroke));\n      uPlot?.series.forEach((s, i) => {\n        if (i === 1) s.fill = () => primaryColor;\n        if (i === 2) s.fill = () => secondaryColor;\n      });\n      uPlot?.redraw(true);\n    });\n  };\n  constructor() {\n    effect(this.updateColors);\n\n    effect(() => {\n      const chartData = this.chartData();\n      if (chartData) {\n        this.uplot?.batch((uPlot: uPlot) => {\n          uPlot.setData(chartData);\n        });\n      }\n    });\n    effect(() => {\n      const range = this.range();\n      this.setRange(range);\n    });\n    this.destroyRef.onDestroy(() => {\n      this.resizeObserver?.unobserve(this.elementRef.nativeElement);\n      this.uplot?.destroy();\n    });\n    afterNextRender(() => {\n      this.resizeObserver = new ResizeObserver(([entry]) => {\n        if (entry)\n          this.uplot?.setSize({\n            width: Math.floor(entry.contentRect.width),\n            height: Math.floor(entry.contentRect.height - this.headerHeight),\n          });\n      });\n      this.resizeObserver.observe(this.elementRef.nativeElement);\n      this.uplot = new uPlot(\n        {\n          width: this.elementRef.nativeElement.offsetWidth,\n          height: this.elementRef.nativeElement.offsetHeight - this.headerHeight,\n          plugins: [\n            barChartPlugin({\n              colors: [null, 'hsl(87, 74%, 40%)', 'hsl(87, 0%, 40%)'],\n              minRangeInMs: daysToMilliseconds(365),\n            }),\n          ],\n          hooks: {\n            setScale: [\n              (self: uPlot, key: string) => {\n                if (!this.firstRangeChangeSkipped) {\n                  this.firstRangeChangeSkipped = true;\n                  return;\n                }\n                const scale = self.scales[key];\n                if (key !== 'x' || !scale || !isNumber(scale.min) || !isNumber(scale.max)) {\n                  return;\n                }\n                const dataMin = self.data[0][0];\n                const dataMax = self.data[0][self.data[0].length - 1];\n                const min = scale.min === dataMin ? null : new Date(secondsToMilliseconds(scale.min));\n                const max = scale.max === dataMax ? null : new Date(secondsToMilliseconds(scale.max));\n                const event = [min, max] as const;\n                this.rangeChange.emit(event);\n              },\n            ],\n          },\n          scales: {\n            m: {\n              auto: true,\n            },\n            x: {\n              time: true,\n              auto: true,\n              range(self, min, max) {\n                const currentMin = self.scales.x!.min!;\n                const currentMax = self.scales.x!.max!;\n                const minRangeWidthInSeconds: Seconds = millisecondsToSeconds(daysToMilliseconds(0.99));\n                const missingRange: Seconds = max - min;\n                if (missingRange <= minRangeWidthInSeconds) {\n                  return [currentMin - missingRange * 0.5, currentMax + missingRange * 0.5];\n                } else {\n                  return [min, max];\n                }\n              },\n            },\n          },\n          series: [\n            {\n              value: (_, value) => (!value ? '-' : format(new Date(secondsToMilliseconds(value)), 'yyyy-MM-dd')),\n              label: 'Day',\n            },\n            {\n              show: true,\n              label: this.getLegendLabel(),\n              scale: 'm',\n              value: (self, rawValue, seriesIndex, idx) => {\n                const otherBarValue = typeof idx === 'number' ? self.data[seriesIndex + 1]?.[idx] : undefined;\n                const valueToShow =\n                  rawValue === 0 && otherBarValue !== 0 && typeof otherBarValue === 'number' ? otherBarValue : rawValue;\n                return this.getLegendValue(valueToShow);\n              },\n            },\n            {\n              show: true,\n              scale: 'm',\n              class: 'hidden',\n            },\n          ],\n          axes: [\n            {},\n            {\n              scale: 'm',\n              size: 50,\n              label: this.getLegendLabel(),\n              values: (_, ticks) => ticks.map((raw) => this.getLegendValue(raw)),\n            },\n          ],\n        },\n        this.chartData(),\n        this.elementRef.nativeElement,\n      );\n      setTimeout(this.updateColors);\n    });\n  }\n  getLegendValue(value: number) {\n    return value ? formatHours(value) : '--:--';\n  }\n\n  getLegendLabel() {\n    return 'Hours';\n  }\n}\n","import { animate, style, transition, trigger } from '@angular/animations';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport { ChangeDetectionStrategy, Component, DestroyRef, computed, effect, inject } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { FormControl, FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { MatIconButton } from '@angular/material/button';\nimport { MatFormField, MatLabel, MatSuffix } from '@angular/material/form-field';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatInput } from '@angular/material/input';\nimport { MatMenu, MatMenuItem, MatMenuTrigger } from '@angular/material/menu';\nimport { MatOption, MatSelect } from '@angular/material/select';\nimport { MatTooltip } from '@angular/material/tooltip';\nimport { Router } from '@angular/router';\nimport { DatetimeLocalDirective } from '@app/directives/datetime-local.directive';\nimport { ScaleRange, hasChartData } from '@app/domain/chart';\nimport { FilterMatrixParams, encodeFilterParams } from '@app/domain/router';\nimport { AppStore } from '@app/providers/state';\nimport { deepEquals } from '@app/utils/assert';\nimport { endOfDay } from 'date-fns/endOfDay';\nimport { endOfMonth } from 'date-fns/endOfMonth';\nimport { endOfWeek } from 'date-fns/endOfWeek';\nimport { endOfYear } from 'date-fns/endOfYear';\nimport { startOfDay } from 'date-fns/startOfDay';\nimport { startOfMonth } from 'date-fns/startOfMonth';\nimport { startOfWeek } from 'date-fns/startOfWeek';\nimport { startOfYear } from 'date-fns/startOfYear';\nimport { subDays } from 'date-fns/subDays';\nimport { subMonths } from 'date-fns/subMonths';\nimport { subWeeks } from 'date-fns/subWeeks';\nimport { subYears } from 'date-fns/subYears';\nimport { debounceTime, distinctUntilChanged } from 'rxjs';\nimport { ButtonResetInputComponent } from '../../directives/button-reset-input.component';\nimport { TimelineChartUplotComponent } from './timeline-chart-uplot.component';\n\ntype Wrap<T> = Required<{ [Key in keyof T]: FormControl<T[Key]> }>;\n\n@Component({\n  selector: 'tasks-filter',\n  templateUrl: './tasks-filter.component.html',\n  styleUrls: ['./tasks-filter.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('inOutAnimation', [\n      transition(':enter', [style({ opacity: 0 }), animate('300ms ease-out', style({ opacity: 1 }))]),\n    ]),\n  ],\n  imports: [\n    MatIconButton,\n    MatSelect,\n    MatOption,\n    MatIcon,\n    MatMenu,\n    MatMenuTrigger,\n    MatMenuItem,\n    MatFormField,\n    MatSuffix,\n    MatLabel,\n    MatInput,\n    ReactiveFormsModule,\n    A11yModule,\n    TimelineChartUplotComponent,\n    ButtonResetInputComponent,\n    DatetimeLocalDirective,\n    MatTooltip,\n  ],\n})\nexport class TasksFilterComponent {\n  private store = inject(AppStore);\n  private router = inject<Router>(Router);\n  private destroyRef = inject(DestroyRef);\n\n  public dataRange = computed(() => {\n    const data = this.store.filterChartData();\n    const range = this.store.filterRange();\n    if (!hasChartData(data) || !range) return undefined;\n    return { data, range } as const;\n  });\n\n  constructor() {\n    this.destroyRef.onDestroy(() => {\n      this.router.navigate([], { queryParams: {} });\n    });\n    effect(() => {\n      const decodedFilterParams = this.store.decodedFilterParams();\n      this.form.patchValue(decodedFilterParams);\n    });\n    this.form.valueChanges\n      .pipe(debounceTime(10), distinctUntilChanged(deepEquals), takeUntilDestroyed())\n      .subscribe((value) => this.router.navigate([], { queryParams: encodeFilterParams(value) }));\n  }\n\n  hasChartData = hasChartData;\n  form = new FormGroup<Wrap<FilterMatrixParams>>({\n    search: new FormControl(),\n    from: new FormControl(),\n    to: new FormControl(),\n    durationSort: new FormControl(),\n  });\n\n  onChartRangeChange(e: ScaleRange) {\n    this.form.patchValue({\n      from: e[0] ?? undefined,\n      to: e[1] ?? undefined,\n    });\n  }\n\n  setAnyTime() {\n    this.form.patchValue({\n      from: undefined,\n      to: undefined,\n    });\n  }\n  setToday() {\n    this.form.patchValue({\n      from: startOfDay(new Date()),\n      to: endOfDay(new Date()),\n    });\n  }\n  setYesterday() {\n    this.form.patchValue({\n      from: startOfDay(subDays(new Date(), 1)),\n      to: endOfDay(subDays(new Date(), 1)),\n    });\n  }\n  setThisWeek() {\n    this.form.patchValue({\n      from: startOfWeek(new Date(), { weekStartsOn: 1 }),\n      to: endOfWeek(new Date(), { weekStartsOn: 1 }),\n    });\n  }\n  setPreviousWeek() {\n    this.form.patchValue({\n      from: startOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n      to: endOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n    });\n  }\n  setThisMonth() {\n    this.form.patchValue({\n      from: startOfMonth(new Date()),\n      to: endOfMonth(new Date()),\n    });\n  }\n  setPreviousMonth() {\n    this.form.patchValue({\n      from: startOfMonth(subMonths(new Date(), 1)),\n      to: endOfMonth(subMonths(new Date(), 1)),\n    });\n  }\n  setThisYear() {\n    this.form.patchValue({\n      from: startOfYear(new Date()),\n      to: endOfYear(new Date()),\n    });\n  }\n  setPreviousYear() {\n    this.form.patchValue({\n      from: startOfYear(subYears(new Date(), 1)),\n      to: endOfYear(subYears(new Date(), 1)),\n    });\n  }\n}\n","<form\n  class=\"mat-body\"\n  (submit)=\"$event.preventDefault()\"\n  [formGroup]=\"form\"\n  cdkTrapFocus\n  [cdkTrapFocusAutoCapture]=\"true\"\n>\n  <mat-form-field class=\"name\">\n    <mat-label>Name</mat-label>\n    <input\n      type=\"search\"\n      matInput\n      placeholder=\"Search\"\n      name=\"search\"\n      formControlName=\"search\"\n      #searchInput\n      cdkFocusRegionStart\n      cdkFocusInitial\n    />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.search.value\"\n      (reset)=\"form.controls.search.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"duration\">\n    <mat-label>Sort by duration</mat-label>\n    <mat-select formControlName=\"durationSort\">\n      <mat-option>Default</mat-option>\n      <mat-option value=\"longestFirst\">Longest first</mat-option>\n      <mat-option value=\"shortestFirst\">Shortest first</mat-option>\n    </mat-select>\n  </mat-form-field>\n  <mat-form-field class=\"from\">\n    <mat-label>From</mat-label>\n    <input matInput placeholder=\"From\" formControlName=\"from\" type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.from.value\"\n      (reset)=\"form.controls.from.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"to\">\n    <mat-label>To</mat-label>\n    <input matInput placeholder=\"To\" formControlName=\"to\" cdkFocusRegionEnd type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.to.value\"\n      (reset)=\"form.controls.to.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <button class=\"dates-menu\" mat-icon-button matSuffix [matMenuTriggerFor]=\"fromMenu\" matTooltip=\"Choose range preset\">\n    <mat-icon svgIcon=\"date_range\"></mat-icon>\n  </button>\n</form>\n<mat-menu #fromMenu=\"matMenu\">\n  <button mat-menu-item (click)=\"setAnyTime()\">Any time</button>\n  <button mat-menu-item (click)=\"setToday()\">Today</button>\n  <button mat-menu-item (click)=\"setYesterday()\">Yesterday</button>\n  <button mat-menu-item (click)=\"setThisWeek()\">This week</button>\n  <button mat-menu-item (click)=\"setPreviousWeek()\">Previous week</button>\n  <button mat-menu-item (click)=\"setThisMonth()\">This month</button>\n  <button mat-menu-item (click)=\"setPreviousMonth()\">Previous month</button>\n  <button mat-menu-item (click)=\"setThisYear()\">This year</button>\n  <button mat-menu-item (click)=\"setPreviousYear()\">Previous year</button>\n</mat-menu>\n@if (dataRange(); as dataRange) {\n  @defer {\n    <timeline-chart-uplot\n      [@inOutAnimation]\n      [chartData]=\"dataRange.data\"\n      barWidth=\"day\"\n      [range]=\"dataRange.range\"\n      (rangeChange)=\"onChartRangeChange($event)\"\n    ></timeline-chart-uplot>\n  }\n} @else {\n  <timeline-chart-uplot [chartData]=\"[[], []]\" barWidth=\"day\"></timeline-chart-uplot>\n}\n\n<svg style=\"display: none\">\n  <style>\n    .u-value {\n      vertical-align: -3px;\n    }\n  </style>\n</svg>\n"],"mappings":"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","names":["_c0","_c1","_c2","_c3","MatSelect_Conditional_4_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate","MatSelect_Conditional_5_Conditional_1_Template","ɵɵprojection","MatSelect_Conditional_5_Conditional_2_Template","MatSelect_Conditional_5_Template","ɵɵtemplate","ɵɵconditional","MatSelect_ng_template_10_Template","_r3","ɵɵgetCurrentView","ɵɵlistener","$event","ɵɵrestoreView","ɵɵresetView","ɵɵclassMapInterpolate1","ɵɵclassProp","ɵɵproperty","ɵɵattribute","MAT_SELECT_SCROLL_STRATEGY","InjectionToken","overlay","inject","Overlay","MAT_SELECT_CONFIG","InjectionToken","MAT_SELECT_TRIGGER","InjectionToken","MatSelectChange","source","value","MatSelect","inject","ViewportRuler","ChangeDetectorRef","ElementRef","Directionality","_IdGenerator","Renderer2","MAT_FORM_FIELD","NgControl","LiveAnnouncer","MAT_SELECT_CONFIG","ANIMATION_MODULE_TYPE","Subject","index","option","panel","labelCount","_countGroupLabelsBeforeOption","element","_getOptionScrollPosition","MAT_SELECT_SCROLL_STRATEGY","o1","o2","Validators","fn","newValue","defer","options","startWith","switchMap","merge","EventEmitter","filter","o","map","defaultErrorStateMatcher","ErrorStateMatcher","parentForm","NgForm","parentFormGroup","FormGroupDirective","tabIndex","HostAttributeToken","_ErrorStateTracker","SelectionModel","takeUntil","event","newAriaLabelledby","ngControl","changes","take","modal","panelId","removeAriaReferencedId","addAriaReferencedId","cleanupEvent","exitFallbackTimer","isDisabled","selectedOptions","keyCode","isArrowKey","isOpenKey","manager","hasModifierKey","previouslySelectedOption","selectedOption","isTyping","hasDeselectedOptions","opt","previouslyFocusedIndex","currentValue","correspondingOption","preferredOrigin","CdkOverlayOrigin","ActiveDescendantKeyManager","changedOrDestroyed","isUserInput","wasSelected","a","b","fallbackValue","valueToEmit","firstEnabledOptionIndex","labelId","labelExpression","ids","__ngFactoryType__","ɵɵdefineComponent","rf","ctx","dirIndex","ɵɵcontentQuery","MatOption","MAT_OPTGROUP","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵviewQuery","_c0","_c1","CdkConnectedOverlay","ɵɵlistener","$event","ɵɵattribute","ɵɵclassProp","booleanAttribute","numberAttribute","ɵɵProvidersFeature","MatFormFieldControl","MAT_OPTION_PARENT_COMPONENT","ɵɵNgOnChangesFeature","_c3","_r1","ɵɵgetCurrentView","ɵɵprojectionDef","_c2","ɵɵelementStart","ɵɵrestoreView","ɵɵresetView","ɵɵtemplate","MatSelect_Conditional_4_Template","MatSelect_Conditional_5_Template","ɵɵelementEnd","ɵɵnamespaceSVG","ɵɵelement","MatSelect_ng_template_10_Template","fallbackOverlayOrigin_r4","ɵɵreference","ɵɵadvance","ɵɵconditional","ɵɵproperty","NgClass","endOfMonth","date","options","_date","toDate","month","defaultOptions","getDefaultOptions","endOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","endOfYear","date","options","_date","toDate","year","startOfMonth","date","options","_date","toDate","startOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","startOfYear","date","options","date_","toDate","addDays","date","amount","options","_date","toDate","constructFrom","subDays","date","amount","options","addDays","addMonths","date","amount","options","_date","toDate","constructFrom","dayOfMonth","endOfDesiredMonth","daysInMonth","subMonths","date","amount","options","addMonths","addWeeks","date","amount","options","addDays","subWeeks","date","amount","options","addWeeks","addYears","date","amount","options","addMonths","subYears","date","amount","options","addYears","formatHours","value","map","part","pad2","assertNever","join","daysToMilliseconds","days","formatDistanceLocale","formatDistance","token","count","options","result","tokenValue","buildFormatLongFn","args","options","width","dateFormats","timeFormats","dateTimeFormats","formatLong","buildFormatLongFn","formatRelativeLocale","formatRelative","token","_date","_baseDate","_options","buildLocalizeFn","args","value","options","context","valuesArray","defaultWidth","width","index","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","_options","number","rem100","localize","buildLocalizeFn","quarter","buildMatchFn","args","string","options","width","matchPattern","matchResult","matchedString","parsePatterns","key","findIndex","pattern","findKey","value","rest","object","predicate","array","buildMatchPatternFn","args","string","options","matchResult","matchedString","parseResult","value","rest","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","match","buildMatchPatternFn","value","buildMatchFn","index","enUS","formatDistance","formatLong","formatRelative","localize","match","getTimezoneOffsetInMilliseconds","date","_date","toDate","utcDate","normalizeDates","context","dates","normalize","constructFrom","date","differenceInCalendarDays","laterDate","earlierDate","options","laterDate_","earlierDate_","normalizeDates","laterStartOfDay","startOfDay","earlierStartOfDay","laterTimestamp","getTimezoneOffsetInMilliseconds","earlierTimestamp","millisecondsInDay","getDayOfYear","date","options","_date","toDate","differenceInCalendarDays","startOfYear","startOfISOWeek","date","options","startOfWeek","__spreadProps","__spreadValues","getISOWeekYear","date","options","_date","toDate","year","fourthOfJanuaryOfNextYear","constructFrom","startOfNextYear","startOfISOWeek","fourthOfJanuaryOfThisYear","startOfThisYear","startOfISOWeekYear","date","options","year","getISOWeekYear","fourthOfJanuary","constructFrom","startOfISOWeek","getISOWeek","date","options","_date","toDate","diff","startOfISOWeek","startOfISOWeekYear","millisecondsInWeek","getWeekYear","date","options","_date","toDate","year","defaultOptions","getDefaultOptions","firstWeekContainsDate","firstWeekOfNextYear","constructFrom","startOfNextYear","startOfWeek","firstWeekOfThisYear","startOfThisYear","startOfWeekYear","date","options","defaultOptions","getDefaultOptions","firstWeekContainsDate","year","getWeekYear","firstWeek","constructFrom","startOfWeek","getWeek","date","options","_date","toDate","diff","startOfWeek","startOfWeekYear","millisecondsInWeek","addLeadingZeros","number","targetLength","sign","output","lightFormatters","date","token","signedYear","year","addLeadingZeros","month","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","date","token","localize","era","signedYear","year","lightFormatters","options","signedWeekYear","getWeekYear","weekYear","twoDigitYear","addLeadingZeros","isoWeekYear","getISOWeekYear","quarter","month","week","getWeek","isoWeek","getISOWeek","dayOfYear","getDayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","dayPeriodEnumValue","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","offset","delimiter","sign","absOffset","minutes","dateLongFormatter","pattern","formatLong","timeLongFormatter","dateTimeLongFormatter","matchResult","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","token","isProtectedWeekYearToken","warnOrThrowProtectedError","format","input","_message","message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","format","date","formatStr","options","defaultOptions","getDefaultOptions","locale","enUS","firstWeekContainsDate","weekStartsOn","originalDate","toDate","isValid","parts","longFormattingTokensRegExp","substring","firstCharacter","longFormatter","longFormatters","formattingTokensRegExp","cleanEscapedString","formatters","unescapedLatinCharacterRegExp","formatterOptions","part","token","isProtectedWeekYearToken","isProtectedDayOfYearToken","warnOrThrowProtectedError","formatter","input","matched","escapedStringRegExp","doubleQuoteRegExp","pre","UPLOT","ORI_HZ","ORI_VT","TITLE","WRAP","UNDER","OVER","AXIS","OFF","SELECT","CURSOR_X","CURSOR_Y","CURSOR_PT","LEGEND","LEGEND_LIVE","LEGEND_INLINE","LEGEND_SERIES","LEGEND_MARKER","LEGEND_LABEL","LEGEND_VALUE","WIDTH","HEIGHT","TOP","BOTTOM","LEFT","RIGHT","hexBlack","transparent","mousemove","mousedown","mouseup","mouseenter","mouseleave","dblclick","resize","scroll","change","dppxchange","LEGEND_DISP","domEnv","doc","win","nav","pxRatio","query","setPxRatio","_pxRatio","off","on","addClass","el","c","cl","remClass","setStylePx","name","value","placeTag","tag","cls","targ","refEl","placeDiv","xformCache","elTrans","xPos","yPos","xMax","yMax","xform","xformOld","colorCache","elColor","background","borderColor","newColor","oldColor","sizeCache","elSize","newWid","newHgt","centered","newSize","oldSize","evOpts","evOpts2","__spreadProps","__spreadValues","ev","cb","capt","closestIdx","num","arr","lo","hi","mid","bitwise","floor","nonNullIdx","data","_i0","_i1","dir","i","getMinMax","sorted","_min","inf","_max","v","getMinMaxLog","rangeLog","min","max","base","fullMags","minSign","sign","maxSign","logFn","log10","log2","growMinAbs","ceil","growMaxAbs","minExp","abs","maxExp","minIncr","pow","maxIncr","roundDec","incrRoundDn","incrRoundUp","rangeAsinh","minMax","rangePad","autoRangePart","_eqRangePart","_eqRange","rangeNum","mult","extra","isObj","_rangeNum","ifNull","lh","rh","hasData","idx0","idx1","cfg","cmin","cmax","padMin","padMax","hardMin","hardMax","softMin","softMax","softMinMode","softMaxMode","delta","deltaMag","scalarMax","scalarMag","scalarMagDelta","nonZeroDelta","mag","_padMin","_newMin","_softMin","minLim","_padMax","_newMax","_softMax","maxLim","numFormatter","fmtNum","val","M","PI","round","sinh","linthresh","asinh","numIntDigits","x","clamp","fnOrSelf","noop","retArg0","_0","retArg1","_1","retNull","_","retTrue","retEq","a","b","regex6","fixFloat","isInt","fixedDec","str","match","len","exp","incrRound","incr","dec","p","guessDec","genIncrs","mults","incrs","multDec","expa","_incr","EMPTY_OBJ","EMPTY_ARR","nullNullTuple","isArr","isUndef","isStr","is","fastIsObj","TypedArray","__proto__","copy","o","_isObj","out","k","assign","args","src","key","NULL_REMOVE","NULL_RETAIN","NULL_EXPAND","nullExpand","yVals","nullIdxs","alignedLen","xi","lastNullIdx","nullIdx","join","tables","nullModes","allHeadersSame","table","isAsc","sortCols","xVals","ti","xs","xIdxs","t","si","ys","nullMode","yVal","alignedIdx","microTask","fn","head","rlen","idxs","i0","i1","table2","row","row2","j","vals0","len0","vals1","vals","samples","firstIdx","lastIdx","stride","prevVal","months","days","slice3","days3","months3","engNames","zeroPad2","int","zeroPad3","subs","d","names","h","fmtDate","tpl","parts","R","m","localTz","tzDate","date","tz","date2","onlyWhole","allMults","decIncrs","oneIncrs","wholeIncrs","numIncrs","NL","yyyy","NLyyyy","md","NLmd","NLmdyy","aa","hmm","hmmaa","NLhmmaa","ss","genTimeStuffs","ms","s","mo","y","timeIncrs","_timeAxisStamps","timeAxisSplits","self","axisIdx","scaleMin","scaleMax","foundIncr","foundSpace","splits","isYr","isMo","minDate","minDateTs","minMin","mkDate","minMinTs","moIncr","yrIncr","split","splitDate","baseYear","baseMonth","next","offs","incr0","tzOffset","date0","prevHour","incrHours","minSpace","pctSpace","expectedHour","dstShift","prevSplit","timeIncrsMs","_timeAxisStampsMs","timeAxisSplitsMs","timeIncrsS","_timeAxisStampsS","timeAxisSplitsS","timeAxisStamps","stampCfg","timeAxisVals","stamps","prevYear","prevMnth","prevDate","prevMins","prevSecs","newYear","newMnth","newDate","newHour","newMins","newSecs","stamp","timeAxisVal","dateTpl","timeSeriesStamp","_timeSeriesStamp","timeSeriesVal","seriesIdx","dataIdx","legendStroke","legendFill","legendOpts","cursorPointShow","pt","size","mar","width","cursorPointFill","sp","cursorPointStroke","cursorPointSize","moveTuple","cursorMove","mouseLeft1","mouseTop1","filtBtn0","handle","onlyTarg","e","filtTarg","cursorOpts","valPos","curPos","axisLines","grid","ticks","border","font","labelFont","lineGap","xAxisOpts","numSeriesLabel","timeSeriesLabel","xSeriesOpts","numAxisVals","numAxisSplits","forceMin","numDec","logAxisSplits","logBase","nextMagIncr","asinhAxisSplits","posSplits","zero","RE_ALL","RE_12357","RE_125","RE_1","_filt","distr","re","keepMod","log10AxisValsFilt","axis","scaleKey","sc","valToPos","_10","magSpace","log2AxisValsFilt","numSeriesVal","yAxisOpts","ptDia","dia","seriesPointsShow","scale","xData","p0","p1","dim","maxPts","facet","gaps","nullGaps","xySeriesOpts","ySeriesOpts","clampScale","xScaleOpts","yScaleOpts","syncs","_sync","opts","plot","type","w","BAND_CLIP_FILL","BAND_CLIP_STROKE","orient","u","mode","series","scales","bbox","dx","dy","sx","sy","l","H","V","moveToH","lineToH","rectH","arcH","bezierCurveToH","moveToV","lineToV","rectV","arcV","bezierCurveToV","bandFillClipDirs","fillDir","clipDirs","bands","seriesFillTo","dataMin","dataMax","bandFillDir","clipBandLine","strokePath","clipDir","dataX","dataY","scaleX","scaleY","valToPosX","valToPosY","xOff","yOff","xDim","yDim","pxRound","lineTo","frIdx","toIdx","x0","y0","x1","yLimit","clip","clipGaps","ori","plotLft","plotTop","plotWid","plotHgt","rect","prevGapEnd","g","maxStrokeWidth","addGap","fromX","toX","prevGap","findGaps","pixelForX","align","fr","to","frPx","toPx","fri2","toi2","pxRoundGen","pxAlign","moveTo","arcTo","y1","x2","y2","r","endRad","baseRad","startAngle","endAngle","bp1x","bp1y","bp2x","bp2y","p2x","p2y","points","filtIdxs","arc","rad","fill","lft","top","wid","hgt","drawPoint","pi","_drawAcc","stroke","accX","minY","maxY","inY","outY","drawAccH","drawAccV","linear","alignGaps","pixelForY","drawAcc","_paths","drawnAtX","lftIdx","rgtIdx","lftX","rgtX","hasGap","bandClipDir","fillToVal","fillToY","stepped","ascDesc","extend","left","prevYPos","firstXPos","prevXPos","firstXPosExt","yVal1","prevXPosExt","fillTo","halfStroke","startsOffset","endsOffset","findColWidth","colWid","prevIdx","minDelta","bars","_extraGap","ro","radiusFn","gapFactor","_maxWidth","_minWidth","disp","_each","dispFills","dispStrokes","_align","extraGap","maxWidth","minWidth","valRadius","baseRadius","_dirX","each","band","xShift","barWid","fullGap","strokeWidth","multiPath","fillColors","fillPaths","strokeColors","strokePaths","color","pct","sizes","insetStroke","rawBarWid","dataY0","radVal","radBase","yVal0","xVal","btm","barHgt","rv","rb","splineInterp","interp","bezierCurveTo","xCoords","yCoords","monotoneCubic","_monotoneCubic","n","path","ds","dys","dxs","cursorPlots","invalidateRects","uPlot","linearPath","pointsPath","setDefaults","xo","yo","initY","setDefault","setDefaults2","xyo","snapNumX","snapTimeX","snapNumY","snapLogY","snapLogX","snapAsinhY","snapAsinhX","findIncr","minVal","maxVal","intDigits","incrIdx","pxRatioFont","fontSize","fontSizeCss","syncFontSize","f","then","getValPct","getHPos","getVPos","getPos","ready","root","title","can","ctx","wrap","over","mouseLeft0","mouseTop0","drag","under","axes","xScaleKey","drawOrderMap","drawAxesGrid","drawSeries","drawOrder","initScale","scaleOpts","isTime","rn","rangeIsArr","xScaleDistr","pendScales","_tzDate","ts","_fmtDate","_timeAxisSplits","_timeAxisVals","_timeSeriesVal","activeIdxs","legend","showLegend","markers","legendTable","legendHead","legendBody","legendRows","legendCells","legendCols","multiValLegend","NULL_LEGEND_VALUES","getMultiVals","son","soff","initLegendRow","cells","label","indic","text","onMouse","cursor","setCursorEvent","isolate","setSeries","syncOpts","cursorFocus","FOCUS_TRUE","mouseListeners","targListeners","listener","offMouse","fullWidCss","fullHgtCss","plotWidCss","plotHgtCss","plotLftCss","plotTopCss","_plotLftCss","_plotTopCss","_plotWidCss","_plotHgtCss","shouldSetScales","shouldSetSize","shouldConvergeSize","shouldSetCursor","shouldSetSelect","shouldSetLegend","_setSize","height","force","calcSize","resetYSeries","commit","calcPlotRect","calcAxesRects","bb","CYCLE_LIMIT","convergeSize","converged","cycleNum","axesConverged","axesCalc","paddingConverged","paddingCalc","setSize","hasTopAxis","hasBtmAxis","hasRgtAxis","hasLftAxis","side","_size","isVt","labelSize","fullSize","sidesWithAxes","_padding","off1","off2","off3","off0","incrOffset","hov","skip","prox","bias","cursorIdx","valAtPosX","idx2","_prox","withProx","cursorLft","xValues","yValues","nonNullLft","nonNullRgt","lftPos","rgtPos","lftDelta","rgtDelta","focus","cursorOnePt","cursorPts","cursorPtsLft","cursorPtsTop","initCursorPt","initSeries","sv","_ptDia","rowCells","fire","addSeries","delSeries","tr","initAxis","av","autoPadSide","padding","dataLen","data0","viaAutoScaleX","setData","_data","_resetScales","scaleData","_data0","xsc","autoScaleX","_setScale","ctxStroke","ctxFill","ctxWidth","ctxDash","ctxJoin","ctxCap","ctxFont","ctxAlign","ctxBaseline","ctxAlpha","setCtxStyle","dash","cap","setFontStyle","baseline","accScale","wsc","psc","AUTOSCALE","setScales","wipScales","xFacet","yFacet","yScaleKey","yData","wscx","wscy","changed","anyChanged","getOuterIdxs","ydata","cacheStrokeFill","_idxs","drawPath","_gaps","show","_points","gapsClip","flags","strokeStyle","fillStyle","boundsClip","offset","_pxAlign","strokeFill","fillStroke","lineWidth","lineDash","lineCap","fillPath","didStrokeFill","bi","lowerEdge","lowerData","bandClip","gapsClip2","_fillStyle","CLIP_FILL_STROKE","doFill","doStroke","getIncrSpace","fullDim","incrSpace","drawOrthoLines","filts","pos0","pos1","_space","_splits","values","_p","shiftDir","shiftAmt","baseLpos","plotDim","plotOff","axisGap","tickSize","angle","basePos","finalPos","textAlign","textBaseline","lineHeight","canOffs","_values","_parts","queuedCommit","deferHooks","hooksQueue","flushHooks","_commit","batch","_deferHooks","_el","_show","_pos","posOffset","syncRect","pctWid","pctHgt","vCursor","hCursor","select","prop","_hideProps","selectDiv","setSelect","updateCursor","setLegend","rebuildPaths","recalcAxes","setScale","xCursor","yCursor","rawMouseLeft0","rawMouseTop0","rawMouseLeft1","rawMouseTop1","dragging","dragX","dragY","_fire","toggleDOM","onOff","_pub","setFocus","pubSync","setBand","addBand","delBand","setAlpha","closestDist","closestSeries","focusedSeries","allFocused","_setAlpha","i2","isFocused","posToVal","pos","closestIdxFromXpos","setSelH","setSelV","setSelX","setSelY","syncLegend","didx","sidx","setLegendValues","idx","noDataInRange","mouseXPos","_ptLft","_ptTop","_ptWid","_ptHgt","_centered","_ptFill","_ptStroke","yVal2","xPos2","mouseYPos","dist","mouseYVal","seriesYValSign","mouseYValSign","hPos","vPos","ptWid","ptHgt","ptLft","ptTop","ptStroke","ptFill","getBBox","focusChanged","xKey","yKey","matchXKeys","matchYKeys","xKeySrc","yKeySrc","sdrag","sori","sPosToVal","sOff","sDim","matchingX","matchingY","hideSelect","rawDX","rawDY","_rawDX","uni","syncKey","xSyncKey","ySyncKey","shouldPub","defer","mouseMove","_l","_t","_w","_h","_i","cacheMouse","initial","snap","syncOptsSrc","xValSrc","yValSrc","rotSrc","_xDim","_yDim","_xPos","_yPos","__l","downSelectLeft","downSelectTop","downSelectWidth","downSelectHeight","mouseDown","mouseUp","hasSelect","chgSelect","mouseLeave","_dragging","snapH","snapV","snapProx","dragH","dragV","dblClick","syncPxRatio","events","seriesIdxMatcher","hooks","evName","a1","a2","srcSeriesIdx","sync","pub","destroy","_init","paths","barChartPlugin","params","minRangeInSeconds","millisecondsToSeconds","minRangeInMs","getVisibleRangeLength","u","visibleRangeMin","scales","x","min","visibleRangeMax","max","undefined","Number","POSITIVE_INFINITY","drawBarChart","self","seriesIndex","i0","i1","ctx","scale","series","maxY","valToPos","color","colors","fillStyle","j","data0J","data","dataIJ","cx","Math","round","cy","range","beginPath","rect","fill","restore","hooks","opts","filter","s","forEach","points","show","TimelineChartUplotComponent","elementRef","inject","ElementRef","destroyRef","DestroyRef","store","AppStore","chartData","input","rangeChange","output","setRange","value","oldMin","uplot","oldMax","dataMin","dataMax","length","newMin","Date","valueOf","isNumber","now","newMax","setScale","firstRangeChangeSkipped","headerHeight","resizeObserver","updateColors","theme","stroke","window","getComputedStyle","nativeElement","primaryColor","getPropertyValue","secondaryColor","batch","uPlot","axes","a","i","redraw","constructor","effect","setData","onDestroy","unobserve","destroy","afterNextRender","ResizeObserver","entry","setSize","width","floor","contentRect","height","observe","offsetWidth","offsetHeight","plugins","daysToMilliseconds","key","secondsToMilliseconds","event","emit","m","auto","time","currentMin","currentMax","minRangeWidthInSeconds","missingRange","_","format","label","getLegendLabel","rawValue","idx","otherBarValue","valueToShow","getLegendValue","class","size","values","ticks","map","raw","setTimeout","formatHours","selectors","inputs","outputs","decls","vars","template","rf","styles","encapsulation","changeDetection","TimelineChartUplotComponent","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","onChartRangeChange","ɵɵelementEnd","ɵɵproperty","undefined","dataRange_r4","data","range","ɵɵtemplate","TasksFilterComponent_Conditional_49_Defer_0_Template","ɵɵdefer","TasksFilterComponent_Conditional_49_Defer_1_DepsFn","ɵɵelement","ɵɵpureFunction2","_c1","ɵɵpureFunction0","_c0","TasksFilterComponent","store","inject","AppStore","router","Router","destroyRef","DestroyRef","dataRange","computed","filterChartData","filterRange","hasChartData","constructor","onDestroy","navigate","queryParams","effect","decodedFilterParams","form","patchValue","valueChanges","pipe","debounceTime","distinctUntilChanged","deepEquals","takeUntilDestroyed","subscribe","value","encodeFilterParams","FormGroup","search","FormControl","from","to","durationSort","e","setAnyTime","setToday","startOfDay","Date","endOfDay","setYesterday","subDays","setThisWeek","startOfWeek","weekStartsOn","endOfWeek","setPreviousWeek","subWeeks","setThisMonth","startOfMonth","endOfMonth","setPreviousMonth","subMonths","setThisYear","startOfYear","endOfYear","setPreviousYear","subYears","selectors","decls","vars","consts","template","rf","ctx","i0","_r1","preventDefault","ɵɵtext","controls","reset","TasksFilterComponent_Conditional_49_Template","TasksFilterComponent_Conditional_50_Template","ɵɵadvance","fromMenu_r5","ɵɵconditional","tmp_8_0","MatIconButton","MatSelect","MatOption","MatIcon","MatMenu","MatMenuTrigger","MatMenuItem","MatFormField","MatSuffix","MatLabel","MatInput","ReactiveFormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","A11yModule","CdkTrapFocus","ButtonResetInputComponent","DatetimeLocalDirective","MatTooltip","styles","animation","trigger","transition","style","opacity","animate","changeDetection"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]}