{"version":3,"sources":["node_modules/@angular/material/fesm2022/select.mjs","node_modules/date-fns/endOfMonth.mjs","node_modules/date-fns/_lib/defaultOptions.mjs","node_modules/date-fns/endOfWeek.mjs","node_modules/date-fns/endOfYear.mjs","node_modules/date-fns/startOfMonth.mjs","node_modules/date-fns/startOfWeek.mjs","node_modules/date-fns/constructFrom.mjs","node_modules/date-fns/startOfYear.mjs","node_modules/date-fns/addDays.mjs","node_modules/date-fns/subDays.mjs","node_modules/date-fns/addMonths.mjs","node_modules/date-fns/subMonths.mjs","node_modules/date-fns/addWeeks.mjs","node_modules/date-fns/subWeeks.mjs","node_modules/date-fns/addYears.mjs","node_modules/date-fns/subYears.mjs","src/app/domain/date-time.ts","node_modules/date-fns/locale/en-US/_lib/formatDistance.mjs","node_modules/date-fns/locale/_lib/buildFormatLongFn.mjs","node_modules/date-fns/locale/en-US/_lib/formatLong.mjs","node_modules/date-fns/locale/en-US/_lib/formatRelative.mjs","node_modules/date-fns/locale/_lib/buildLocalizeFn.mjs","node_modules/date-fns/locale/en-US/_lib/localize.mjs","node_modules/date-fns/locale/_lib/buildMatchFn.mjs","node_modules/date-fns/locale/_lib/buildMatchPatternFn.mjs","node_modules/date-fns/locale/en-US/_lib/match.mjs","node_modules/date-fns/locale/en-US.mjs","node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.mjs","node_modules/date-fns/differenceInCalendarDays.mjs","node_modules/date-fns/getDayOfYear.mjs","node_modules/date-fns/startOfISOWeek.mjs","node_modules/date-fns/getISOWeekYear.mjs","node_modules/date-fns/startOfISOWeekYear.mjs","node_modules/date-fns/getISOWeek.mjs","node_modules/date-fns/getWeekYear.mjs","node_modules/date-fns/startOfWeekYear.mjs","node_modules/date-fns/getWeek.mjs","node_modules/date-fns/_lib/addLeadingZeros.mjs","node_modules/date-fns/_lib/format/lightFormatters.mjs","node_modules/date-fns/_lib/format/formatters.mjs","node_modules/date-fns/_lib/format/longFormatters.mjs","node_modules/date-fns/_lib/protectedTokens.mjs","node_modules/date-fns/format.mjs","node_modules/uplot/dist/uPlot.esm.js","src/app/screen-tasks/tasks-filter/timeline-chart-uplot.component.ts","src/app/screen-tasks/tasks-filter/tasks-filter.component.ts","src/app/screen-tasks/tasks-filter/tasks-filter.component.html"],"sourcesContent":["import { Overlay, CdkOverlayOrigin, CdkConnectedOverlay, OverlayModule } from '@angular/cdk/overlay';\nimport { NgClass, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { InjectionToken, inject, EventEmitter, booleanAttribute, numberAttribute, Component, ViewEncapsulation, ChangeDetectionStrategy, Optional, Inject, Self, Attribute, ContentChildren, ContentChild, Input, ViewChild, Output, Directive, NgModule } from '@angular/core';\nimport * as i2 from '@angular/material/core';\nimport { _countGroupLabelsBeforeOption, _getOptionScrollPosition, _ErrorStateTracker, MAT_OPTION_PARENT_COMPONENT, MatOption, MAT_OPTGROUP, MatOptionModule, MatCommonModule } from '@angular/material/core';\nconst _c0 = [\"trigger\"];\nconst _c1 = [\"panel\"];\nconst _c2 = [[[\"mat-select-trigger\"]], \"*\"];\nconst _c3 = [\"mat-select-trigger\", \"*\"];\nfunction MatSelect_Conditional_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.placeholder);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵprojection(0);\n  }\n}\nfunction MatSelect_Conditional_5_Conditional_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r1.triggerValue);\n  }\n}\nfunction MatSelect_Conditional_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 5);\n    i0.ɵɵtemplate(1, MatSelect_Conditional_5_Conditional_1_Template, 1, 0)(2, MatSelect_Conditional_5_Conditional_2_Template, 2, 1, \"span\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵconditional(ctx_r1.customTrigger ? 1 : 2);\n  }\n}\nfunction MatSelect_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12, 1);\n    i0.ɵɵlistener(\"@transformPanel.done\", function MatSelect_ng_template_10_Template_div_animation_transformPanel_done_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._panelDoneAnimatingStream.next($event.toState));\n    })(\"keydown\", function MatSelect_ng_template_10_Template_div_keydown_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1._handleKeydown($event));\n    });\n    i0.ɵɵprojection(2, 1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵclassMapInterpolate1(\"mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open \", ctx_r1._getPanelTheme(), \"\");\n    i0.ɵɵproperty(\"ngClass\", ctx_r1.panelClass)(\"@transformPanel\", \"showing\");\n    i0.ɵɵattribute(\"id\", ctx_r1.id + \"-panel\")(\"aria-multiselectable\", ctx_r1.multiple)(\"aria-label\", ctx_r1.ariaLabel || null)(\"aria-labelledby\", ctx_r1._getPanelAriaLabelledby());\n  }\n}\nexport { MatOptgroup, MatOption } from '@angular/material/core';\nimport * as i6 from '@angular/material/form-field';\nimport { MAT_FORM_FIELD, MatFormFieldControl, MatFormFieldModule } from '@angular/material/form-field';\nexport { MatError, MatFormField, MatHint, MatLabel, MatPrefix, MatSuffix } from '@angular/material/form-field';\nimport * as i1 from '@angular/cdk/scrolling';\nimport { CdkScrollableModule } from '@angular/cdk/scrolling';\nimport * as i5 from '@angular/cdk/a11y';\nimport { removeAriaReferencedId, addAriaReferencedId, ActiveDescendantKeyManager } from '@angular/cdk/a11y';\nimport * as i3 from '@angular/cdk/bidi';\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { DOWN_ARROW, UP_ARROW, LEFT_ARROW, RIGHT_ARROW, ENTER, SPACE, hasModifierKey, A } from '@angular/cdk/keycodes';\nimport * as i4 from '@angular/forms';\nimport { Validators } from '@angular/forms';\nimport { Subject, defer, merge } from 'rxjs';\nimport { startWith, switchMap, filter, map, distinctUntilChanged, takeUntil, take } from 'rxjs/operators';\nimport { trigger, transition, query, animateChild, state, style, animate } from '@angular/animations';\n\n/**\n * The following are all the animations for the mat-select component, with each\n * const containing the metadata for one animation.\n *\n * The values below match the implementation of the AngularJS Material mat-select animation.\n * @docs-private\n */\nconst matSelectAnimations = {\n  /**\n   * This animation ensures the select's overlay panel animation (transformPanel) is called when\n   * closing the select.\n   * This is needed due to https://github.com/angular/angular/issues/23302\n   */\n  transformPanelWrap: /*#__PURE__*/trigger('transformPanelWrap', [/*#__PURE__*/transition('* => void', /*#__PURE__*/query('@transformPanel', [/*#__PURE__*/animateChild()], {\n    optional: true\n  }))]),\n  /** This animation transforms the select's overlay panel on and off the page. */\n  transformPanel: /*#__PURE__*/trigger('transformPanel', [/*#__PURE__*/state('void', /*#__PURE__*/style({\n    opacity: 0,\n    transform: 'scale(1, 0.8)'\n  })), /*#__PURE__*/transition('void => showing', /*#__PURE__*/animate('120ms cubic-bezier(0, 0, 0.2, 1)', /*#__PURE__*/style({\n    opacity: 1,\n    transform: 'scale(1, 1)'\n  }))), /*#__PURE__*/transition('* => void', /*#__PURE__*/animate('100ms linear', /*#__PURE__*/style({\n    opacity: 0\n  })))])\n};\n\n// Note that these have been copied over verbatim from\n// `material/select` so that we don't have to expose them publicly.\n/**\n * Returns an exception to be thrown when attempting to change a select's `multiple` option\n * after initialization.\n * @docs-private\n */\nfunction getMatSelectDynamicMultipleError() {\n  return Error('Cannot change `multiple` mode of select after initialization.');\n}\n/**\n * Returns an exception to be thrown when attempting to assign a non-array value to a select\n * in `multiple` mode. Note that `undefined` and `null` are still valid values to allow for\n * resetting the value.\n * @docs-private\n */\nfunction getMatSelectNonArrayValueError() {\n  return Error('Value must be an array in multiple-selection mode.');\n}\n/**\n * Returns an exception to be thrown when assigning a non-function value to the comparator\n * used to determine if a value corresponds to an option. Note that whether the function\n * actually takes two values and returns a boolean is not checked.\n */\nfunction getMatSelectNonFunctionValueError() {\n  return Error('`compareWith` must be a function.');\n}\nlet nextUniqueId = 0;\n/** Injection token that determines the scroll handling while a select is open. */\nconst MAT_SELECT_SCROLL_STRATEGY = /*#__PURE__*/new InjectionToken('mat-select-scroll-strategy', {\n  providedIn: 'root',\n  factory: () => {\n    const overlay = inject(Overlay);\n    return () => overlay.scrollStrategies.reposition();\n  }\n});\n/** @docs-private */\nfunction MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY(overlay) {\n  return () => overlay.scrollStrategies.reposition();\n}\n/** Injection token that can be used to provide the default options the select module. */\nconst MAT_SELECT_CONFIG = /*#__PURE__*/new InjectionToken('MAT_SELECT_CONFIG');\n/** @docs-private */\nconst MAT_SELECT_SCROLL_STRATEGY_PROVIDER = {\n  provide: MAT_SELECT_SCROLL_STRATEGY,\n  deps: [Overlay],\n  useFactory: MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY\n};\n/**\n * Injection token that can be used to reference instances of `MatSelectTrigger`. It serves as\n * alternative token to the actual `MatSelectTrigger` class which could cause unnecessary\n * retention of the class and its directive metadata.\n */\nconst MAT_SELECT_TRIGGER = /*#__PURE__*/new InjectionToken('MatSelectTrigger');\n/** Change event object that is emitted when the select value has changed. */\nclass MatSelectChange {\n  constructor( /** Reference to the select that emitted the change event. */\n  source, /** Current value of the select that emitted the event. */\n  value) {\n    this.source = source;\n    this.value = value;\n  }\n}\nlet MatSelect = /*#__PURE__*/(() => {\n  class MatSelect {\n    /** Scrolls a particular option into the view. */\n    _scrollOptionIntoView(index) {\n      const option = this.options.toArray()[index];\n      if (option) {\n        const panel = this.panel.nativeElement;\n        const labelCount = _countGroupLabelsBeforeOption(index, this.options, this.optionGroups);\n        const element = option._getHostElement();\n        if (index === 0 && labelCount === 1) {\n          // If we've got one group label before the option and we're at the top option,\n          // scroll the list to the top. This is better UX than scrolling the list to the\n          // top of the option, because it allows the user to read the top group's label.\n          panel.scrollTop = 0;\n        } else {\n          panel.scrollTop = _getOptionScrollPosition(element.offsetTop, element.offsetHeight, panel.scrollTop, panel.offsetHeight);\n        }\n      }\n    }\n    /** Called when the panel has been opened and the overlay has settled on its final position. */\n    _positioningSettled() {\n      this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n    }\n    /** Creates a change event object that should be emitted by the select. */\n    _getChangeEvent(value) {\n      return new MatSelectChange(this, value);\n    }\n    /** Whether the select is focused. */\n    get focused() {\n      return this._focused || this._panelOpen;\n    }\n    /** Whether checkmark indicator for single-selection options is hidden. */\n    get hideSingleSelectionIndicator() {\n      return this._hideSingleSelectionIndicator;\n    }\n    set hideSingleSelectionIndicator(value) {\n      this._hideSingleSelectionIndicator = value;\n      this._syncParentProperties();\n    }\n    /** Placeholder to be shown if no value has been selected. */\n    get placeholder() {\n      return this._placeholder;\n    }\n    set placeholder(value) {\n      this._placeholder = value;\n      this.stateChanges.next();\n    }\n    /** Whether the component is required. */\n    get required() {\n      return this._required ?? this.ngControl?.control?.hasValidator(Validators.required) ?? false;\n    }\n    set required(value) {\n      this._required = value;\n      this.stateChanges.next();\n    }\n    /** Whether the user should be allowed to select multiple options. */\n    get multiple() {\n      return this._multiple;\n    }\n    set multiple(value) {\n      if (this._selectionModel && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectDynamicMultipleError();\n      }\n      this._multiple = value;\n    }\n    /**\n     * Function to compare the option values with the selected values. The first argument\n     * is a value from an option. The second is a value from the selection. A boolean\n     * should be returned.\n     */\n    get compareWith() {\n      return this._compareWith;\n    }\n    set compareWith(fn) {\n      if (typeof fn !== 'function' && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n        throw getMatSelectNonFunctionValueError();\n      }\n      this._compareWith = fn;\n      if (this._selectionModel) {\n        // A different comparator means the selection could change.\n        this._initializeSelection();\n      }\n    }\n    /** Value of the select control. */\n    get value() {\n      return this._value;\n    }\n    set value(newValue) {\n      const hasAssigned = this._assignValue(newValue);\n      if (hasAssigned) {\n        this._onChange(newValue);\n      }\n    }\n    /** Object used to control when error messages are shown. */\n    get errorStateMatcher() {\n      return this._errorStateTracker.matcher;\n    }\n    set errorStateMatcher(value) {\n      this._errorStateTracker.matcher = value;\n    }\n    /** Unique id of the element. */\n    get id() {\n      return this._id;\n    }\n    set id(value) {\n      this._id = value || this._uid;\n      this.stateChanges.next();\n    }\n    /** Whether the select is in an error state. */\n    get errorState() {\n      return this._errorStateTracker.errorState;\n    }\n    set errorState(value) {\n      this._errorStateTracker.errorState = value;\n    }\n    constructor(_viewportRuler, _changeDetectorRef,\n    /**\n     * @deprecated Unused param, will be removed.\n     * @breaking-change 19.0.0\n     */\n    _unusedNgZone, defaultErrorStateMatcher, _elementRef, _dir, parentForm, parentFormGroup, _parentFormField, ngControl, tabIndex, scrollStrategyFactory, _liveAnnouncer, _defaultOptions) {\n      this._viewportRuler = _viewportRuler;\n      this._changeDetectorRef = _changeDetectorRef;\n      this._elementRef = _elementRef;\n      this._dir = _dir;\n      this._parentFormField = _parentFormField;\n      this.ngControl = ngControl;\n      this._liveAnnouncer = _liveAnnouncer;\n      this._defaultOptions = _defaultOptions;\n      /**\n       * This position config ensures that the top \"start\" corner of the overlay\n       * is aligned with with the top \"start\" of the origin by default (overlapping\n       * the trigger completely). If the panel cannot fit below the trigger, it\n       * will fall back to a position above the trigger.\n       */\n      this._positions = [{\n        originX: 'start',\n        originY: 'bottom',\n        overlayX: 'start',\n        overlayY: 'top'\n      }, {\n        originX: 'end',\n        originY: 'bottom',\n        overlayX: 'end',\n        overlayY: 'top'\n      }, {\n        originX: 'start',\n        originY: 'top',\n        overlayX: 'start',\n        overlayY: 'bottom',\n        panelClass: 'mat-mdc-select-panel-above'\n      }, {\n        originX: 'end',\n        originY: 'top',\n        overlayX: 'end',\n        overlayY: 'bottom',\n        panelClass: 'mat-mdc-select-panel-above'\n      }];\n      /** Whether or not the overlay panel is open. */\n      this._panelOpen = false;\n      /** Comparison function to specify which option is displayed. Defaults to object equality. */\n      this._compareWith = (o1, o2) => o1 === o2;\n      /** Unique id for this input. */\n      this._uid = `mat-select-${nextUniqueId++}`;\n      /** Current `aria-labelledby` value for the select trigger. */\n      this._triggerAriaLabelledBy = null;\n      /** Emits whenever the component is destroyed. */\n      this._destroy = new Subject();\n      /**\n       * Emits whenever the component state changes and should cause the parent\n       * form-field to update. Implemented as part of `MatFormFieldControl`.\n       * @docs-private\n       */\n      this.stateChanges = new Subject();\n      /**\n       * Disable the automatic labeling to avoid issues like #27241.\n       * @docs-private\n       */\n      this.disableAutomaticLabeling = true;\n      /** `View -> model callback called when value changes` */\n      this._onChange = () => {};\n      /** `View -> model callback called when select has been touched` */\n      this._onTouched = () => {};\n      /** ID for the DOM node containing the select's value. */\n      this._valueId = `mat-select-value-${nextUniqueId++}`;\n      /** Emits when the panel element is finished transforming in. */\n      this._panelDoneAnimatingStream = new Subject();\n      this._overlayPanelClass = this._defaultOptions?.overlayPanelClass || '';\n      this._focused = false;\n      /** A name for this control that can be used by `mat-form-field`. */\n      this.controlType = 'mat-select';\n      /** Whether the select is disabled. */\n      this.disabled = false;\n      /** Whether ripples in the select are disabled. */\n      this.disableRipple = false;\n      /** Tab index of the select. */\n      this.tabIndex = 0;\n      this._hideSingleSelectionIndicator = this._defaultOptions?.hideSingleSelectionIndicator ?? false;\n      this._multiple = false;\n      /** Whether to center the active option over the trigger. */\n      this.disableOptionCentering = this._defaultOptions?.disableOptionCentering ?? false;\n      /** Aria label of the select. */\n      this.ariaLabel = '';\n      /**\n       * Width of the panel. If set to `auto`, the panel will match the trigger width.\n       * If set to null or an empty string, the panel will grow to match the longest option's text.\n       */\n      this.panelWidth = this._defaultOptions && typeof this._defaultOptions.panelWidth !== 'undefined' ? this._defaultOptions.panelWidth : 'auto';\n      this._initialized = new Subject();\n      /** Combined stream of all of the child options' change events. */\n      this.optionSelectionChanges = defer(() => {\n        const options = this.options;\n        if (options) {\n          return options.changes.pipe(startWith(options), switchMap(() => merge(...options.map(option => option.onSelectionChange))));\n        }\n        return this._initialized.pipe(switchMap(() => this.optionSelectionChanges));\n      });\n      /** Event emitted when the select panel has been toggled. */\n      this.openedChange = new EventEmitter();\n      /** Event emitted when the select has been opened. */\n      this._openedStream = this.openedChange.pipe(filter(o => o), map(() => {}));\n      /** Event emitted when the select has been closed. */\n      this._closedStream = this.openedChange.pipe(filter(o => !o), map(() => {}));\n      /** Event emitted when the selected value has been changed by the user. */\n      this.selectionChange = new EventEmitter();\n      /**\n       * Event that emits whenever the raw value of the select changes. This is here primarily\n       * to facilitate the two-way binding for the `value` input.\n       * @docs-private\n       */\n      this.valueChange = new EventEmitter();\n      /**\n       * Track which modal we have modified the `aria-owns` attribute of. When the combobox trigger is\n       * inside an aria-modal, we apply aria-owns to the parent modal with the `id` of the options\n       * panel. Track the modal we have changed so we can undo the changes on destroy.\n       */\n      this._trackedModal = null;\n      // `skipPredicate` determines if key manager should avoid putting a given option in the tab\n      // order. Allow disabled list items to receive focus via keyboard to align with WAI ARIA\n      // recommendation.\n      //\n      // Normally WAI ARIA's instructions are to exclude disabled items from the tab order, but it\n      // makes a few exceptions for compound widgets.\n      //\n      // From [Developing a Keyboard Interface](\n      // https://www.w3.org/WAI/ARIA/apg/practices/keyboard-interface/):\n      //   \"For the following composite widget elements, keep them focusable when disabled: Options in a\n      //   Listbox...\"\n      //\n      // The user can focus disabled options using the keyboard, but the user cannot click disabled\n      // options.\n      this._skipPredicate = option => {\n        if (this.panelOpen) {\n          // Support keyboard focusing disabled options in an ARIA listbox.\n          return false;\n        }\n        // When the panel is closed, skip over disabled options. Support options via the UP/DOWN arrow\n        // keys on a closed select. ARIA listbox interaction pattern is less relevant when the panel is\n        // closed.\n        return option.disabled;\n      };\n      if (this.ngControl) {\n        // Note: we provide the value accessor through here, instead of\n        // the `providers` to avoid running into a circular import.\n        this.ngControl.valueAccessor = this;\n      }\n      // Note that we only want to set this when the defaults pass it in, otherwise it should\n      // stay as `undefined` so that it falls back to the default in the key manager.\n      if (_defaultOptions?.typeaheadDebounceInterval != null) {\n        this.typeaheadDebounceInterval = _defaultOptions.typeaheadDebounceInterval;\n      }\n      this._errorStateTracker = new _ErrorStateTracker(defaultErrorStateMatcher, ngControl, parentFormGroup, parentForm, this.stateChanges);\n      this._scrollStrategyFactory = scrollStrategyFactory;\n      this._scrollStrategy = this._scrollStrategyFactory();\n      this.tabIndex = parseInt(tabIndex) || 0;\n      // Force setter to be called in case id was not specified.\n      this.id = this.id;\n    }\n    ngOnInit() {\n      this._selectionModel = new SelectionModel(this.multiple);\n      this.stateChanges.next();\n      // We need `distinctUntilChanged` here, because some browsers will\n      // fire the animation end event twice for the same animation. See:\n      // https://github.com/angular/angular/issues/24084\n      this._panelDoneAnimatingStream.pipe(distinctUntilChanged(), takeUntil(this._destroy)).subscribe(() => this._panelDoneAnimating(this.panelOpen));\n      this._viewportRuler.change().pipe(takeUntil(this._destroy)).subscribe(() => {\n        if (this.panelOpen) {\n          this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n          this._changeDetectorRef.detectChanges();\n        }\n      });\n    }\n    ngAfterContentInit() {\n      this._initialized.next();\n      this._initialized.complete();\n      this._initKeyManager();\n      this._selectionModel.changed.pipe(takeUntil(this._destroy)).subscribe(event => {\n        event.added.forEach(option => option.select());\n        event.removed.forEach(option => option.deselect());\n      });\n      this.options.changes.pipe(startWith(null), takeUntil(this._destroy)).subscribe(() => {\n        this._resetOptions();\n        this._initializeSelection();\n      });\n    }\n    ngDoCheck() {\n      const newAriaLabelledby = this._getTriggerAriaLabelledby();\n      const ngControl = this.ngControl;\n      // We have to manage setting the `aria-labelledby` ourselves, because part of its value\n      // is computed as a result of a content query which can cause this binding to trigger a\n      // \"changed after checked\" error.\n      if (newAriaLabelledby !== this._triggerAriaLabelledBy) {\n        const element = this._elementRef.nativeElement;\n        this._triggerAriaLabelledBy = newAriaLabelledby;\n        if (newAriaLabelledby) {\n          element.setAttribute('aria-labelledby', newAriaLabelledby);\n        } else {\n          element.removeAttribute('aria-labelledby');\n        }\n      }\n      if (ngControl) {\n        // The disabled state might go out of sync if the form group is swapped out. See #17860.\n        if (this._previousControl !== ngControl.control) {\n          if (this._previousControl !== undefined && ngControl.disabled !== null && ngControl.disabled !== this.disabled) {\n            this.disabled = ngControl.disabled;\n          }\n          this._previousControl = ngControl.control;\n        }\n        this.updateErrorState();\n      }\n    }\n    ngOnChanges(changes) {\n      // Updating the disabled state is handled by the input, but we need to additionally let\n      // the parent form field know to run change detection when the disabled state changes.\n      if (changes['disabled'] || changes['userAriaDescribedBy']) {\n        this.stateChanges.next();\n      }\n      if (changes['typeaheadDebounceInterval'] && this._keyManager) {\n        this._keyManager.withTypeAhead(this.typeaheadDebounceInterval);\n      }\n    }\n    ngOnDestroy() {\n      this._keyManager?.destroy();\n      this._destroy.next();\n      this._destroy.complete();\n      this.stateChanges.complete();\n      this._clearFromModal();\n    }\n    /** Toggles the overlay panel open or closed. */\n    toggle() {\n      this.panelOpen ? this.close() : this.open();\n    }\n    /** Opens the overlay panel. */\n    open() {\n      if (!this._canOpen()) {\n        return;\n      }\n      // It's important that we read this as late as possible, because doing so earlier will\n      // return a different element since it's based on queries in the form field which may\n      // not have run yet. Also this needs to be assigned before we measure the overlay width.\n      if (this._parentFormField) {\n        this._preferredOverlayOrigin = this._parentFormField.getConnectedOverlayOrigin();\n      }\n      this._overlayWidth = this._getOverlayWidth(this._preferredOverlayOrigin);\n      this._applyModalPanelOwnership();\n      this._panelOpen = true;\n      this._keyManager.withHorizontalOrientation(null);\n      this._highlightCorrectOption();\n      this._changeDetectorRef.markForCheck();\n      // Required for the MDC form field to pick up when the overlay has been opened.\n      this.stateChanges.next();\n    }\n    /**\n     * If the autocomplete trigger is inside of an `aria-modal` element, connect\n     * that modal to the options panel with `aria-owns`.\n     *\n     * For some browser + screen reader combinations, when navigation is inside\n     * of an `aria-modal` element, the screen reader treats everything outside\n     * of that modal as hidden or invisible.\n     *\n     * This causes a problem when the combobox trigger is _inside_ of a modal, because the\n     * options panel is rendered _outside_ of that modal, preventing screen reader navigation\n     * from reaching the panel.\n     *\n     * We can work around this issue by applying `aria-owns` to the modal with the `id` of\n     * the options panel. This effectively communicates to assistive technology that the\n     * options panel is part of the same interaction as the modal.\n     *\n     * At time of this writing, this issue is present in VoiceOver.\n     * See https://github.com/angular/components/issues/20694\n     */\n    _applyModalPanelOwnership() {\n      // TODO(http://github.com/angular/components/issues/26853): consider de-duplicating this with\n      // the `LiveAnnouncer` and any other usages.\n      //\n      // Note that the selector here is limited to CDK overlays at the moment in order to reduce the\n      // section of the DOM we need to look through. This should cover all the cases we support, but\n      // the selector can be expanded if it turns out to be too narrow.\n      const modal = this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal=\"true\"]');\n      if (!modal) {\n        // Most commonly, the autocomplete trigger is not inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      if (this._trackedModal) {\n        removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      }\n      addAriaReferencedId(modal, 'aria-owns', panelId);\n      this._trackedModal = modal;\n    }\n    /** Clears the reference to the listbox overlay element from the modal it was added to. */\n    _clearFromModal() {\n      if (!this._trackedModal) {\n        // Most commonly, the autocomplete trigger is not used inside a modal.\n        return;\n      }\n      const panelId = `${this.id}-panel`;\n      removeAriaReferencedId(this._trackedModal, 'aria-owns', panelId);\n      this._trackedModal = null;\n    }\n    /** Closes the overlay panel and focuses the host element. */\n    close() {\n      if (this._panelOpen) {\n        this._panelOpen = false;\n        this._keyManager.withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr');\n        this._changeDetectorRef.markForCheck();\n        this._onTouched();\n        // Required for the MDC form field to pick up when the overlay has been closed.\n        this.stateChanges.next();\n      }\n    }\n    /**\n     * Sets the select's value. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param value New value to be written to the model.\n     */\n    writeValue(value) {\n      this._assignValue(value);\n    }\n    /**\n     * Saves a callback function to be invoked when the select's value\n     * changes from user input. Part of the ControlValueAccessor interface\n     * required to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the value changes.\n     */\n    registerOnChange(fn) {\n      this._onChange = fn;\n    }\n    /**\n     * Saves a callback function to be invoked when the select is blurred\n     * by the user. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param fn Callback to be triggered when the component has been touched.\n     */\n    registerOnTouched(fn) {\n      this._onTouched = fn;\n    }\n    /**\n     * Disables the select. Part of the ControlValueAccessor interface required\n     * to integrate with Angular's core forms API.\n     *\n     * @param isDisabled Sets whether the component is disabled.\n     */\n    setDisabledState(isDisabled) {\n      this.disabled = isDisabled;\n      this._changeDetectorRef.markForCheck();\n      this.stateChanges.next();\n    }\n    /** Whether or not the overlay panel is open. */\n    get panelOpen() {\n      return this._panelOpen;\n    }\n    /** The currently selected option. */\n    get selected() {\n      return this.multiple ? this._selectionModel?.selected || [] : this._selectionModel?.selected[0];\n    }\n    /** The value displayed in the trigger. */\n    get triggerValue() {\n      if (this.empty) {\n        return '';\n      }\n      if (this._multiple) {\n        const selectedOptions = this._selectionModel.selected.map(option => option.viewValue);\n        if (this._isRtl()) {\n          selectedOptions.reverse();\n        }\n        // TODO(crisbeto): delimiter should be configurable for proper localization.\n        return selectedOptions.join(', ');\n      }\n      return this._selectionModel.selected[0].viewValue;\n    }\n    /** Refreshes the error state of the select. */\n    updateErrorState() {\n      this._errorStateTracker.updateErrorState();\n    }\n    /** Whether the element is in RTL mode. */\n    _isRtl() {\n      return this._dir ? this._dir.value === 'rtl' : false;\n    }\n    /** Handles all keydown events on the select. */\n    _handleKeydown(event) {\n      if (!this.disabled) {\n        this.panelOpen ? this._handleOpenKeydown(event) : this._handleClosedKeydown(event);\n      }\n    }\n    /** Handles keyboard events while the select is closed. */\n    _handleClosedKeydown(event) {\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW || keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW;\n      const isOpenKey = keyCode === ENTER || keyCode === SPACE;\n      const manager = this._keyManager;\n      // Open the select on ALT + arrow key to match the native <select>\n      if (!manager.isTyping() && isOpenKey && !hasModifierKey(event) || (this.multiple || event.altKey) && isArrowKey) {\n        event.preventDefault(); // prevents the page from scrolling down when pressing space\n        this.open();\n      } else if (!this.multiple) {\n        const previouslySelectedOption = this.selected;\n        manager.onKeydown(event);\n        const selectedOption = this.selected;\n        // Since the value has changed, we need to announce it ourselves.\n        if (selectedOption && previouslySelectedOption !== selectedOption) {\n          // We set a duration on the live announcement, because we want the live element to be\n          // cleared after a while so that users can't navigate to it using the arrow keys.\n          this._liveAnnouncer.announce(selectedOption.viewValue, 10000);\n        }\n      }\n    }\n    /** Handles keyboard events when the selected is open. */\n    _handleOpenKeydown(event) {\n      const manager = this._keyManager;\n      const keyCode = event.keyCode;\n      const isArrowKey = keyCode === DOWN_ARROW || keyCode === UP_ARROW;\n      const isTyping = manager.isTyping();\n      if (isArrowKey && event.altKey) {\n        // Close the select on ALT + arrow key to match the native <select>\n        event.preventDefault();\n        this.close();\n        // Don't do anything in this case if the user is typing,\n        // because the typing sequence can include the space key.\n      } else if (!isTyping && (keyCode === ENTER || keyCode === SPACE) && manager.activeItem && !hasModifierKey(event)) {\n        event.preventDefault();\n        manager.activeItem._selectViaInteraction();\n      } else if (!isTyping && this._multiple && keyCode === A && event.ctrlKey) {\n        event.preventDefault();\n        const hasDeselectedOptions = this.options.some(opt => !opt.disabled && !opt.selected);\n        this.options.forEach(option => {\n          if (!option.disabled) {\n            hasDeselectedOptions ? option.select() : option.deselect();\n          }\n        });\n      } else {\n        const previouslyFocusedIndex = manager.activeItemIndex;\n        manager.onKeydown(event);\n        if (this._multiple && isArrowKey && event.shiftKey && manager.activeItem && manager.activeItemIndex !== previouslyFocusedIndex) {\n          manager.activeItem._selectViaInteraction();\n        }\n      }\n    }\n    _onFocus() {\n      if (!this.disabled) {\n        this._focused = true;\n        this.stateChanges.next();\n      }\n    }\n    /**\n     * Calls the touched callback only if the panel is closed. Otherwise, the trigger will\n     * \"blur\" to the panel when it opens, causing a false positive.\n     */\n    _onBlur() {\n      this._focused = false;\n      this._keyManager?.cancelTypeahead();\n      if (!this.disabled && !this.panelOpen) {\n        this._onTouched();\n        this._changeDetectorRef.markForCheck();\n        this.stateChanges.next();\n      }\n    }\n    /**\n     * Callback that is invoked when the overlay panel has been attached.\n     */\n    _onAttached() {\n      this._overlayDir.positionChange.pipe(take(1)).subscribe(() => {\n        this._changeDetectorRef.detectChanges();\n        this._positioningSettled();\n      });\n    }\n    /** Returns the theme to be used on the panel. */\n    _getPanelTheme() {\n      return this._parentFormField ? `mat-${this._parentFormField.color}` : '';\n    }\n    /** Whether the select has a value. */\n    get empty() {\n      return !this._selectionModel || this._selectionModel.isEmpty();\n    }\n    _initializeSelection() {\n      // Defer setting the value in order to avoid the \"Expression\n      // has changed after it was checked\" errors from Angular.\n      Promise.resolve().then(() => {\n        if (this.ngControl) {\n          this._value = this.ngControl.value;\n        }\n        this._setSelectionByValue(this._value);\n        this.stateChanges.next();\n      });\n    }\n    /**\n     * Sets the selected option based on a value. If no option can be\n     * found with the designated value, the select trigger is cleared.\n     */\n    _setSelectionByValue(value) {\n      this.options.forEach(option => option.setInactiveStyles());\n      this._selectionModel.clear();\n      if (this.multiple && value) {\n        if (!Array.isArray(value) && (typeof ngDevMode === 'undefined' || ngDevMode)) {\n          throw getMatSelectNonArrayValueError();\n        }\n        value.forEach(currentValue => this._selectOptionByValue(currentValue));\n        this._sortValues();\n      } else {\n        const correspondingOption = this._selectOptionByValue(value);\n        // Shift focus to the active item. Note that we shouldn't do this in multiple\n        // mode, because we don't know what option the user interacted with last.\n        if (correspondingOption) {\n          this._keyManager.updateActiveItem(correspondingOption);\n        } else if (!this.panelOpen) {\n          // Otherwise reset the highlighted option. Note that we only want to do this while\n          // closed, because doing it while open can shift the user's focus unnecessarily.\n          this._keyManager.updateActiveItem(-1);\n        }\n      }\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Finds and selects and option based on its value.\n     * @returns Option that has the corresponding value.\n     */\n    _selectOptionByValue(value) {\n      const correspondingOption = this.options.find(option => {\n        // Skip options that are already in the model. This allows us to handle cases\n        // where the same primitive value is selected multiple times.\n        if (this._selectionModel.isSelected(option)) {\n          return false;\n        }\n        try {\n          // Treat null as a special reset value.\n          return option.value != null && this._compareWith(option.value, value);\n        } catch (error) {\n          if (typeof ngDevMode === 'undefined' || ngDevMode) {\n            // Notify developers of errors in their comparator.\n            console.warn(error);\n          }\n          return false;\n        }\n      });\n      if (correspondingOption) {\n        this._selectionModel.select(correspondingOption);\n      }\n      return correspondingOption;\n    }\n    /** Assigns a specific value to the select. Returns whether the value has changed. */\n    _assignValue(newValue) {\n      // Always re-assign an array, because it might have been mutated.\n      if (newValue !== this._value || this._multiple && Array.isArray(newValue)) {\n        if (this.options) {\n          this._setSelectionByValue(newValue);\n        }\n        this._value = newValue;\n        return true;\n      }\n      return false;\n    }\n    /** Gets how wide the overlay panel should be. */\n    _getOverlayWidth(preferredOrigin) {\n      if (this.panelWidth === 'auto') {\n        const refToMeasure = preferredOrigin instanceof CdkOverlayOrigin ? preferredOrigin.elementRef : preferredOrigin || this._elementRef;\n        return refToMeasure.nativeElement.getBoundingClientRect().width;\n      }\n      return this.panelWidth === null ? '' : this.panelWidth;\n    }\n    /** Syncs the parent state with the individual options. */\n    _syncParentProperties() {\n      if (this.options) {\n        for (const option of this.options) {\n          option._changeDetectorRef.markForCheck();\n        }\n      }\n    }\n    /** Sets up a key manager to listen to keyboard events on the overlay panel. */\n    _initKeyManager() {\n      this._keyManager = new ActiveDescendantKeyManager(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl() ? 'rtl' : 'ltr').withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(['shiftKey']).skipPredicate(this._skipPredicate);\n      this._keyManager.tabOut.subscribe(() => {\n        if (this.panelOpen) {\n          // Select the active item when tabbing away. This is consistent with how the native\n          // select behaves. Note that we only want to do this in single selection mode.\n          if (!this.multiple && this._keyManager.activeItem) {\n            this._keyManager.activeItem._selectViaInteraction();\n          }\n          // Restore focus to the trigger before closing. Ensures that the focus\n          // position won't be lost if the user got focus into the overlay.\n          this.focus();\n          this.close();\n        }\n      });\n      this._keyManager.change.subscribe(() => {\n        if (this._panelOpen && this.panel) {\n          this._scrollOptionIntoView(this._keyManager.activeItemIndex || 0);\n        } else if (!this._panelOpen && !this.multiple && this._keyManager.activeItem) {\n          this._keyManager.activeItem._selectViaInteraction();\n        }\n      });\n    }\n    /** Drops current option subscriptions and IDs and resets from scratch. */\n    _resetOptions() {\n      const changedOrDestroyed = merge(this.options.changes, this._destroy);\n      this.optionSelectionChanges.pipe(takeUntil(changedOrDestroyed)).subscribe(event => {\n        this._onSelect(event.source, event.isUserInput);\n        if (event.isUserInput && !this.multiple && this._panelOpen) {\n          this.close();\n          this.focus();\n        }\n      });\n      // Listen to changes in the internal state of the options and react accordingly.\n      // Handles cases like the labels of the selected options changing.\n      merge(...this.options.map(option => option._stateChanges)).pipe(takeUntil(changedOrDestroyed)).subscribe(() => {\n        // `_stateChanges` can fire as a result of a change in the label's DOM value which may\n        // be the result of an expression changing. We have to use `detectChanges` in order\n        // to avoid \"changed after checked\" errors (see #14793).\n        this._changeDetectorRef.detectChanges();\n        this.stateChanges.next();\n      });\n    }\n    /** Invoked when an option is clicked. */\n    _onSelect(option, isUserInput) {\n      const wasSelected = this._selectionModel.isSelected(option);\n      if (option.value == null && !this._multiple) {\n        option.deselect();\n        this._selectionModel.clear();\n        if (this.value != null) {\n          this._propagateChanges(option.value);\n        }\n      } else {\n        if (wasSelected !== option.selected) {\n          option.selected ? this._selectionModel.select(option) : this._selectionModel.deselect(option);\n        }\n        if (isUserInput) {\n          this._keyManager.setActiveItem(option);\n        }\n        if (this.multiple) {\n          this._sortValues();\n          if (isUserInput) {\n            // In case the user selected the option with their mouse, we\n            // want to restore focus back to the trigger, in order to\n            // prevent the select keyboard controls from clashing with\n            // the ones from `mat-option`.\n            this.focus();\n          }\n        }\n      }\n      if (wasSelected !== this._selectionModel.isSelected(option)) {\n        this._propagateChanges();\n      }\n      this.stateChanges.next();\n    }\n    /** Sorts the selected values in the selected based on their order in the panel. */\n    _sortValues() {\n      if (this.multiple) {\n        const options = this.options.toArray();\n        this._selectionModel.sort((a, b) => {\n          return this.sortComparator ? this.sortComparator(a, b, options) : options.indexOf(a) - options.indexOf(b);\n        });\n        this.stateChanges.next();\n      }\n    }\n    /** Emits change event to set the model value. */\n    _propagateChanges(fallbackValue) {\n      let valueToEmit;\n      if (this.multiple) {\n        valueToEmit = this.selected.map(option => option.value);\n      } else {\n        valueToEmit = this.selected ? this.selected.value : fallbackValue;\n      }\n      this._value = valueToEmit;\n      this.valueChange.emit(valueToEmit);\n      this._onChange(valueToEmit);\n      this.selectionChange.emit(this._getChangeEvent(valueToEmit));\n      this._changeDetectorRef.markForCheck();\n    }\n    /**\n     * Highlights the selected item. If no option is selected, it will highlight\n     * the first *enabled* option.\n     */\n    _highlightCorrectOption() {\n      if (this._keyManager) {\n        if (this.empty) {\n          // Find the index of the first *enabled* option. Avoid calling `_keyManager.setActiveItem`\n          // because it activates the first option that passes the skip predicate, rather than the\n          // first *enabled* option.\n          let firstEnabledOptionIndex = -1;\n          for (let index = 0; index < this.options.length; index++) {\n            const option = this.options.get(index);\n            if (!option.disabled) {\n              firstEnabledOptionIndex = index;\n              break;\n            }\n          }\n          this._keyManager.setActiveItem(firstEnabledOptionIndex);\n        } else {\n          this._keyManager.setActiveItem(this._selectionModel.selected[0]);\n        }\n      }\n    }\n    /** Whether the panel is allowed to open. */\n    _canOpen() {\n      return !this._panelOpen && !this.disabled && this.options?.length > 0;\n    }\n    /** Focuses the select element. */\n    focus(options) {\n      this._elementRef.nativeElement.focus(options);\n    }\n    /** Gets the aria-labelledby for the select panel. */\n    _getPanelAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      const labelId = this._parentFormField?.getLabelId();\n      const labelExpression = labelId ? labelId + ' ' : '';\n      return this.ariaLabelledby ? labelExpression + this.ariaLabelledby : labelId;\n    }\n    /** Determines the `aria-activedescendant` to be set on the host. */\n    _getAriaActiveDescendant() {\n      if (this.panelOpen && this._keyManager && this._keyManager.activeItem) {\n        return this._keyManager.activeItem.id;\n      }\n      return null;\n    }\n    /** Gets the aria-labelledby of the select component trigger. */\n    _getTriggerAriaLabelledby() {\n      if (this.ariaLabel) {\n        return null;\n      }\n      const labelId = this._parentFormField?.getLabelId();\n      let value = (labelId ? labelId + ' ' : '') + this._valueId;\n      if (this.ariaLabelledby) {\n        value += ' ' + this.ariaLabelledby;\n      }\n      return value;\n    }\n    /** Called when the overlay panel is done animating. */\n    _panelDoneAnimating(isOpen) {\n      this.openedChange.emit(isOpen);\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    setDescribedByIds(ids) {\n      if (ids.length) {\n        this._elementRef.nativeElement.setAttribute('aria-describedby', ids.join(' '));\n      } else {\n        this._elementRef.nativeElement.removeAttribute('aria-describedby');\n      }\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    onContainerClick() {\n      this.focus();\n      this.open();\n    }\n    /**\n     * Implemented as part of MatFormFieldControl.\n     * @docs-private\n     */\n    get shouldLabelFloat() {\n      // Since the panel doesn't overlap the trigger, we\n      // want the label to only float when there's a value.\n      return this.panelOpen || !this.empty || this.focused && !!this.placeholder;\n    }\n    static {\n      this.ɵfac = function MatSelect_Factory(t) {\n        return new (t || MatSelect)(i0.ɵɵdirectiveInject(i1.ViewportRuler), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(i2.ErrorStateMatcher), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i3.Directionality, 8), i0.ɵɵdirectiveInject(i4.NgForm, 8), i0.ɵɵdirectiveInject(i4.FormGroupDirective, 8), i0.ɵɵdirectiveInject(MAT_FORM_FIELD, 8), i0.ɵɵdirectiveInject(i4.NgControl, 10), i0.ɵɵinjectAttribute('tabindex'), i0.ɵɵdirectiveInject(MAT_SELECT_SCROLL_STRATEGY), i0.ɵɵdirectiveInject(i5.LiveAnnouncer), i0.ɵɵdirectiveInject(MAT_SELECT_CONFIG, 8));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: MatSelect,\n        selectors: [[\"mat-select\"]],\n        contentQueries: function MatSelect_ContentQueries(rf, ctx, dirIndex) {\n          if (rf & 1) {\n            i0.ɵɵcontentQuery(dirIndex, MAT_SELECT_TRIGGER, 5);\n            i0.ɵɵcontentQuery(dirIndex, MatOption, 5);\n            i0.ɵɵcontentQuery(dirIndex, MAT_OPTGROUP, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.customTrigger = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.options = _t);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.optionGroups = _t);\n          }\n        },\n        viewQuery: function MatSelect_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n            i0.ɵɵviewQuery(_c1, 5);\n            i0.ɵɵviewQuery(CdkConnectedOverlay, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.trigger = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.panel = _t.first);\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx._overlayDir = _t.first);\n          }\n        },\n        hostAttrs: [\"role\", \"combobox\", \"aria-autocomplete\", \"none\", \"aria-haspopup\", \"listbox\", 1, \"mat-mdc-select\"],\n        hostVars: 19,\n        hostBindings: function MatSelect_HostBindings(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵlistener(\"keydown\", function MatSelect_keydown_HostBindingHandler($event) {\n              return ctx._handleKeydown($event);\n            })(\"focus\", function MatSelect_focus_HostBindingHandler() {\n              return ctx._onFocus();\n            })(\"blur\", function MatSelect_blur_HostBindingHandler() {\n              return ctx._onBlur();\n            });\n          }\n          if (rf & 2) {\n            i0.ɵɵattribute(\"id\", ctx.id)(\"tabindex\", ctx.disabled ? -1 : ctx.tabIndex)(\"aria-controls\", ctx.panelOpen ? ctx.id + \"-panel\" : null)(\"aria-expanded\", ctx.panelOpen)(\"aria-label\", ctx.ariaLabel || null)(\"aria-required\", ctx.required.toString())(\"aria-disabled\", ctx.disabled.toString())(\"aria-invalid\", ctx.errorState)(\"aria-activedescendant\", ctx._getAriaActiveDescendant());\n            i0.ɵɵclassProp(\"mat-mdc-select-disabled\", ctx.disabled)(\"mat-mdc-select-invalid\", ctx.errorState)(\"mat-mdc-select-required\", ctx.required)(\"mat-mdc-select-empty\", ctx.empty)(\"mat-mdc-select-multiple\", ctx.multiple);\n          }\n        },\n        inputs: {\n          userAriaDescribedBy: [0, \"aria-describedby\", \"userAriaDescribedBy\"],\n          panelClass: \"panelClass\",\n          disabled: [2, \"disabled\", \"disabled\", booleanAttribute],\n          disableRipple: [2, \"disableRipple\", \"disableRipple\", booleanAttribute],\n          tabIndex: [2, \"tabIndex\", \"tabIndex\", value => value == null ? 0 : numberAttribute(value)],\n          hideSingleSelectionIndicator: [2, \"hideSingleSelectionIndicator\", \"hideSingleSelectionIndicator\", booleanAttribute],\n          placeholder: \"placeholder\",\n          required: [2, \"required\", \"required\", booleanAttribute],\n          multiple: [2, \"multiple\", \"multiple\", booleanAttribute],\n          disableOptionCentering: [2, \"disableOptionCentering\", \"disableOptionCentering\", booleanAttribute],\n          compareWith: \"compareWith\",\n          value: \"value\",\n          ariaLabel: [0, \"aria-label\", \"ariaLabel\"],\n          ariaLabelledby: [0, \"aria-labelledby\", \"ariaLabelledby\"],\n          errorStateMatcher: \"errorStateMatcher\",\n          typeaheadDebounceInterval: [2, \"typeaheadDebounceInterval\", \"typeaheadDebounceInterval\", numberAttribute],\n          sortComparator: \"sortComparator\",\n          id: \"id\",\n          panelWidth: \"panelWidth\"\n        },\n        outputs: {\n          openedChange: \"openedChange\",\n          _openedStream: \"opened\",\n          _closedStream: \"closed\",\n          selectionChange: \"selectionChange\",\n          valueChange: \"valueChange\"\n        },\n        exportAs: [\"matSelect\"],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: MatFormFieldControl,\n          useExisting: MatSelect\n        }, {\n          provide: MAT_OPTION_PARENT_COMPONENT,\n          useExisting: MatSelect\n        }]), i0.ɵɵInputTransformsFeature, i0.ɵɵNgOnChangesFeature, i0.ɵɵStandaloneFeature],\n        ngContentSelectors: _c3,\n        decls: 11,\n        vars: 8,\n        consts: [[\"fallbackOverlayOrigin\", \"cdkOverlayOrigin\", \"trigger\", \"\"], [\"panel\", \"\"], [\"cdk-overlay-origin\", \"\", 1, \"mat-mdc-select-trigger\", 3, \"click\"], [1, \"mat-mdc-select-value\"], [1, \"mat-mdc-select-placeholder\", \"mat-mdc-select-min-line\"], [1, \"mat-mdc-select-value-text\"], [1, \"mat-mdc-select-arrow-wrapper\"], [1, \"mat-mdc-select-arrow\"], [\"viewBox\", \"0 0 24 24\", \"width\", \"24px\", \"height\", \"24px\", \"focusable\", \"false\", \"aria-hidden\", \"true\"], [\"d\", \"M7 10l5 5 5-5z\"], [\"cdk-connected-overlay\", \"\", \"cdkConnectedOverlayLockPosition\", \"\", \"cdkConnectedOverlayHasBackdrop\", \"\", \"cdkConnectedOverlayBackdropClass\", \"cdk-overlay-transparent-backdrop\", 3, \"backdropClick\", \"attach\", \"detach\", \"cdkConnectedOverlayPanelClass\", \"cdkConnectedOverlayScrollStrategy\", \"cdkConnectedOverlayOrigin\", \"cdkConnectedOverlayOpen\", \"cdkConnectedOverlayPositions\", \"cdkConnectedOverlayWidth\"], [1, \"mat-mdc-select-min-line\"], [\"role\", \"listbox\", \"tabindex\", \"-1\", 3, \"keydown\", \"ngClass\"]],\n        template: function MatSelect_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵprojectionDef(_c2);\n            i0.ɵɵelementStart(0, \"div\", 2, 0);\n            i0.ɵɵlistener(\"click\", function MatSelect_Template_div_click_0_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.open());\n            });\n            i0.ɵɵelementStart(3, \"div\", 3);\n            i0.ɵɵtemplate(4, MatSelect_Conditional_4_Template, 2, 1, \"span\", 4)(5, MatSelect_Conditional_5_Template, 3, 1, \"span\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 6)(7, \"div\", 7);\n            i0.ɵɵnamespaceSVG();\n            i0.ɵɵelementStart(8, \"svg\", 8);\n            i0.ɵɵelement(9, \"path\", 9);\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵtemplate(10, MatSelect_ng_template_10_Template, 3, 9, \"ng-template\", 10);\n            i0.ɵɵlistener(\"backdropClick\", function MatSelect_Template_ng_template_backdropClick_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.close());\n            })(\"attach\", function MatSelect_Template_ng_template_attach_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx._onAttached());\n            })(\"detach\", function MatSelect_Template_ng_template_detach_10_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.close());\n            });\n          }\n          if (rf & 2) {\n            const fallbackOverlayOrigin_r4 = i0.ɵɵreference(1);\n            i0.ɵɵadvance(3);\n            i0.ɵɵattribute(\"id\", ctx._valueId);\n            i0.ɵɵadvance();\n            i0.ɵɵconditional(ctx.empty ? 4 : 5);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"cdkConnectedOverlayPanelClass\", ctx._overlayPanelClass)(\"cdkConnectedOverlayScrollStrategy\", ctx._scrollStrategy)(\"cdkConnectedOverlayOrigin\", ctx._preferredOverlayOrigin || fallbackOverlayOrigin_r4)(\"cdkConnectedOverlayOpen\", ctx.panelOpen)(\"cdkConnectedOverlayPositions\", ctx._positions)(\"cdkConnectedOverlayWidth\", ctx._overlayWidth);\n          }\n        },\n        dependencies: [CdkOverlayOrigin, CdkConnectedOverlay, NgClass],\n        styles: [\".mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:\\\" \\\";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}\"],\n        encapsulation: 2,\n        data: {\n          animation: [matSelectAnimations.transformPanel]\n        },\n        changeDetection: 0\n      });\n    }\n  }\n  return MatSelect;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Allows the user to customize the trigger that is displayed when the select has a value.\n */\nlet MatSelectTrigger = /*#__PURE__*/(() => {\n  class MatSelectTrigger {\n    static {\n      this.ɵfac = function MatSelectTrigger_Factory(t) {\n        return new (t || MatSelectTrigger)();\n      };\n    }\n    static {\n      this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n        type: MatSelectTrigger,\n        selectors: [[\"mat-select-trigger\"]],\n        standalone: true,\n        features: [i0.ɵɵProvidersFeature([{\n          provide: MAT_SELECT_TRIGGER,\n          useExisting: MatSelectTrigger\n        }])]\n      });\n    }\n  }\n  return MatSelectTrigger;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet MatSelectModule = /*#__PURE__*/(() => {\n  class MatSelectModule {\n    static {\n      this.ɵfac = function MatSelectModule_Factory(t) {\n        return new (t || MatSelectModule)();\n      };\n    }\n    static {\n      this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n        type: MatSelectModule\n      });\n    }\n    static {\n      this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n        providers: [MAT_SELECT_SCROLL_STRATEGY_PROVIDER],\n        imports: [CommonModule, OverlayModule, MatOptionModule, MatCommonModule, CdkScrollableModule, MatFormFieldModule, MatOptionModule, MatCommonModule]\n      });\n    }\n  }\n  return MatSelectModule;\n})();\n/*#__PURE__*/(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { MAT_SELECT_CONFIG, MAT_SELECT_SCROLL_STRATEGY, MAT_SELECT_SCROLL_STRATEGY_PROVIDER, MAT_SELECT_SCROLL_STRATEGY_PROVIDER_FACTORY, MAT_SELECT_TRIGGER, MatSelect, MatSelectChange, MatSelectModule, MatSelectTrigger, matSelectAnimations };\n","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date) {\n  const _date = toDate(date);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;","let defaultOptions = {};\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}","import { toDate } from \"./toDate.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link endOfWeek} function options.\n */\n\n/**\n * @name endOfWeek\n * @category Week Helpers\n * @summary Return the end of a week for the given date.\n *\n * @description\n * Return the end of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a week\n *\n * @example\n * // The end of a week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sat Sep 06 2014 23:59:59.999\n *\n * @example\n * // If the week starts on Monday, the end of the week for 2 September 2014 11:55:00:\n * const result = endOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Sun Sep 07 2014 23:59:59.999\n */\nexport function endOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? -7 : 0) + 6 - (day - weekStartsOn);\n  _date.setDate(_date.getDate() + diff);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfWeek;","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name endOfYear\n * @category Year Helpers\n * @summary Return the end of a year for the given date.\n *\n * @description\n * Return the end of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The end of a year\n *\n * @example\n * // The end of a year for 2 September 2014 11:55:00:\n * const result = endOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Dec 31 2014 23:59:59.999\n */\nexport function endOfYear(date) {\n  const _date = toDate(date);\n  const year = _date.getFullYear();\n  _date.setFullYear(year + 1, 0, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfYear;","import { toDate } from \"./toDate.mjs\";\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date) {\n  const _date = toDate(date);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;","import { toDate } from \"./toDate.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const _date = toDate(date);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;","/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from 'date-fns'\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use contrustor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   )\n * }\n */\nexport function constructFrom(date, value) {\n  if (date instanceof Date) {\n    return new date.constructor(value);\n  } else {\n    return new Date(value);\n  }\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;","import { toDate } from \"./toDate.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date) {\n  const cleanDate = toDate(date);\n  const _date = constructFrom(date, 0);\n  _date.setFullYear(cleanDate.getFullYear(), 0, 1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;","import { toDate } from \"./toDate.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount) {\n  const _date = toDate(date);\n  if (isNaN(amount)) return constructFrom(date, NaN);\n  if (!amount) {\n    // If 0 days, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;","import { addDays } from \"./addDays.mjs\";\n\n/**\n * @name subDays\n * @category Day Helpers\n * @summary Subtract the specified number of days from the given date.\n *\n * @description\n * Subtract the specified number of days from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be subtracted.\n *\n * @returns The new date with the days subtracted\n *\n * @example\n * // Subtract 10 days from 1 September 2014:\n * const result = subDays(new Date(2014, 8, 1), 10)\n * //=> Fri Aug 22 2014 00:00:00\n */\nexport function subDays(date, amount) {\n  return addDays(date, -amount);\n}\n\n// Fallback for modularized imports:\nexport default subDays;","import { toDate } from \"./toDate.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount) {\n  const _date = toDate(date);\n  if (isNaN(amount)) return constructFrom(date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(endOfDesiredMonth.getFullYear(), endOfDesiredMonth.getMonth(), dayOfMonth);\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;","import { addMonths } from \"./addMonths.mjs\";\n\n/**\n * @name subMonths\n * @category Month Helpers\n * @summary Subtract the specified number of months from the given date.\n *\n * @description\n * Subtract the specified number of months from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be subtracted.\n *\n * @returns The new date with the months subtracted\n *\n * @example\n * // Subtract 5 months from 1 February 2015:\n * const result = subMonths(new Date(2015, 1, 1), 5)\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function subMonths(date, amount) {\n  return addMonths(date, -amount);\n}\n\n// Fallback for modularized imports:\nexport default subMonths;","import { addDays } from \"./addDays.mjs\";\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of week to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be added.\n *\n * @returns The new date with the weeks added\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\nexport function addWeeks(date, amount) {\n  const days = amount * 7;\n  return addDays(date, days);\n}\n\n// Fallback for modularized imports:\nexport default addWeeks;","import { addWeeks } from \"./addWeeks.mjs\";\n\n/**\n * @name subWeeks\n * @category Week Helpers\n * @summary Subtract the specified number of weeks from the given date.\n *\n * @description\n * Subtract the specified number of weeks from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be subtracted.\n *\n * @returns The new date with the weeks subtracted\n *\n * @example\n * // Subtract 4 weeks from 1 September 2014:\n * const result = subWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Aug 04 2014 00:00:00\n */\nexport function subWeeks(date, amount) {\n  return addWeeks(date, -amount);\n}\n\n// Fallback for modularized imports:\nexport default subWeeks;","import { addMonths } from \"./addMonths.mjs\";\n\n/**\n * @name addYears\n * @category Year Helpers\n * @summary Add the specified number of years to the given date.\n *\n * @description\n * Add the specified number of years to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be added.\n *\n * @returns The new date with the years added\n *\n * @example\n * // Add 5 years to 1 September 2014:\n * const result = addYears(new Date(2014, 8, 1), 5)\n * //=> Sun Sep 01 2019 00:00:00\n */\nexport function addYears(date, amount) {\n  return addMonths(date, amount * 12);\n}\n\n// Fallback for modularized imports:\nexport default addYears;","import { addYears } from \"./addYears.mjs\";\n\n/**\n * @name subYears\n * @category Year Helpers\n * @summary Subtract the specified number of years from the given date.\n *\n * @description\n * Subtract the specified number of years from the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The date to be changed\n * @param amount - The amount of years to be subtracted.\n *\n * @returns The new date with the years subtracted\n *\n * @example\n * // Subtract 5 years from 1 September 2014:\n * const result = subYears(new Date(2014, 8, 1), 5)\n * //=> Tue Sep 01 2009 00:00:00\n */\nexport function subYears(date, amount) {\n  return addYears(date, -amount);\n}\n\n// Fallback for modularized imports:\nexport default subYears;","import { assertNever } from '@app/utils/assert';\nimport { pad2 } from '@app/utils/number';\n\nexport type Duration = Milliseconds;\nexport type Seconds = number;\nexport type Milliseconds = number;\nexport type DurationFn = (now: Milliseconds) => Duration;\n\nexport const formatHours = (value: Duration): string => {\n  if (value <= 0) return '00:00';\n\n  return (['h', 'm'] as const)\n    .map((part) => {\n      switch (part) {\n        case 'h':\n          return pad2(~~(value / 3600000));\n        case 'm':\n          return pad2(~~((value % 3600000) / 60000));\n        default:\n          return assertNever(part);\n      }\n    })\n    .join(':');\n};\n\nexport const daysToMilliseconds = (days: number): Milliseconds => days * 24 * 60 * 60 * 1000;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\"\n  },\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\"\n  },\n  halfAMinute: \"half a minute\",\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\"\n  },\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\"\n  },\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\"\n  },\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\"\n  },\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\"\n  },\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\"\n  },\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\"\n  },\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\"\n  },\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\"\n  },\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\"\n  },\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\"\n  },\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\"\n  },\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\"\n  }\n};\nexport const formatDistance = (token, count, options) => {\n  let result;\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n  return result;\n};","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.mjs\";\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\"\n};\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\"\n};\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\"\n};\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\"\n  }),\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\"\n  }),\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\"\n  })\n};","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\"\n};\nexport const formatRelative = (token, _date, _baseDate, _options) => formatRelativeLocale[token];","/* eslint-disable no-unused-vars */\n\n/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n      valuesArray = args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.mjs\";\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"]\n};\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"]\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n  wide: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"]\n};\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"]\n};\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\"\n  }\n};\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\"\n  }\n};\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\nexport const localize = {\n  ordinalNumber,\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\"\n  }),\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: quarter => quarter - 1\n  }),\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\"\n  }),\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\"\n  }),\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\"\n  })\n};","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n    const matchPattern = width && args.matchPatterns[width] || args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n    const parsePatterns = width && args.parsePatterns[width] || args.parsePatterns[args.defaultParseWidth];\n    const key = Array.isArray(parsePatterns) ? findIndex(parsePatterns, pattern => pattern.test(matchedString)) :\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n    findKey(parsePatterns, pattern => pattern.test(matchedString));\n    let value;\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback ?\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n    options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (Object.prototype.hasOwnProperty.call(object, key) && predicate(object[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback ? args.valueCallback(parseResult[0]) : parseResult[0];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any -- I challange you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n    const rest = string.slice(matchedString.length);\n    return {\n      value,\n      rest\n    };\n  };\n}","import { buildMatchFn } from \"../../_lib/buildMatchFn.mjs\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.mjs\";\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i]\n};\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i]\n};\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i\n};\nconst parseMonthPatterns = {\n  narrow: [/^j/i, /^f/i, /^m/i, /^a/i, /^m/i, /^j/i, /^j/i, /^a/i, /^s/i, /^o/i, /^n/i, /^d/i],\n  any: [/^ja/i, /^f/i, /^mar/i, /^ap/i, /^may/i, /^jun/i, /^jul/i, /^au/i, /^s/i, /^o/i, /^n/i, /^d/i]\n};\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i]\n};\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i\n  }\n};\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: value => parseInt(value, 10)\n  }),\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: index => index + 1\n  }),\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\"\n  }),\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\"\n  })\n};","import { formatDistance } from \"./en-US/_lib/formatDistance.mjs\";\nimport { formatLong } from \"./en-US/_lib/formatLong.mjs\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.mjs\";\nimport { localize } from \"./en-US/_lib/localize.mjs\";\nimport { match } from \"./en-US/_lib/match.mjs\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1\n  }\n};\n\n// Fallback for modularized imports:\nexport default enUS;","import { toDate } from \"../toDate.mjs\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(Date.UTC(_date.getFullYear(), _date.getMonth(), _date.getDate(), _date.getHours(), _date.getMinutes(), _date.getSeconds(), _date.getMilliseconds()));\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}","import { millisecondsInDay } from \"./constants.mjs\";\nimport { startOfDay } from \"./startOfDay.mjs\";\nimport { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.mjs\";\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param dateLeft - The later date\n * @param dateRight - The earlier date\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(dateLeft, dateRight) {\n  const startOfDayLeft = startOfDay(dateLeft);\n  const startOfDayRight = startOfDay(dateRight);\n  const timestampLeft = +startOfDayLeft - getTimezoneOffsetInMilliseconds(startOfDayLeft);\n  const timestampRight = +startOfDayRight - getTimezoneOffsetInMilliseconds(startOfDayRight);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((timestampLeft - timestampRight) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;","import { differenceInCalendarDays } from \"./differenceInCalendarDays.mjs\";\nimport { startOfYear } from \"./startOfYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date) {\n  const _date = toDate(date);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;","import { startOfWeek } from \"./startOfWeek.mjs\";\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date) {\n  return startOfWeek(date, {\n    weekStartsOn: 1\n  });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;","import { constructFrom } from \"./constructFrom.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date) {\n  const _date = toDate(date);\n  const year = _date.getFullYear();\n  const fourthOfJanuaryOfNextYear = constructFrom(date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n  const fourthOfJanuaryOfThisYear = constructFrom(date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;","import { getISOWeekYear } from \"./getISOWeekYear.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { constructFrom } from \"./constructFrom.mjs\";\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date) {\n  const year = getISOWeekYear(date);\n  const fourthOfJanuary = constructFrom(date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;","import { millisecondsInWeek } from \"./constants.mjs\";\nimport { startOfISOWeek } from \"./startOfISOWeek.mjs\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date) {\n  const _date = toDate(date);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;","import { constructFrom } from \"./constructFrom.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { toDate } from \"./toDate.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date);\n  const year = _date.getFullYear();\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const firstWeekOfNextYear = constructFrom(date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n  const firstWeekOfThisYear = constructFrom(date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;","import { constructFrom } from \"./constructFrom.mjs\";\nimport { getWeekYear } from \"./getWeekYear.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;","import { millisecondsInWeek } from \"./constants.mjs\";\nimport { startOfWeek } from \"./startOfWeek.mjs\";\nimport { startOfWeekYear } from \"./startOfWeekYear.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\n\nexport function getWeek(date, options) {\n  const _date = toDate(date);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}","import { addLeadingZeros } from \"../addLeadingZeros.mjs\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(milliseconds * Math.pow(10, numberOfDigits - 3));\n    return addLeadingZeros(fractionalSeconds, token.length);\n  }\n};","import { getDayOfYear } from \"../../getDayOfYear.mjs\";\nimport { getISOWeek } from \"../../getISOWeek.mjs\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.mjs\";\nimport { getWeek } from \"../../getWeek.mjs\";\nimport { getWeekYear } from \"../../getWeekYear.mjs\";\nimport { addLeadingZeros } from \"../addLeadingZeros.mjs\";\nimport { lightFormatters } from \"./lightFormatters.mjs\";\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\"\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, {\n          width: \"abbreviated\"\n        });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, {\n          width: \"narrow\"\n        });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, {\n          width: \"wide\"\n        });\n    }\n  },\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, {\n        unit: \"year\"\n      });\n    }\n    return lightFormatters.y(date, token);\n  },\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, {\n        unit: \"year\"\n      });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, {\n          unit: \"quarter\"\n        });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, {\n          unit: \"month\"\n        });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(week, token.length);\n  },\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, {\n        unit: \"week\"\n      });\n    }\n    return addLeadingZeros(isoWeek, token.length);\n  },\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), {\n        unit: \"date\"\n      });\n    }\n    return lightFormatters.d(date, token);\n  },\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, {\n        unit: \"dayOfYear\"\n      });\n    }\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, {\n          unit: \"day\"\n        });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\"\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\"\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\"\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\"\n        });\n    }\n  },\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, {\n          unit: \"day\"\n        });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\"\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"aaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"bbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        }).toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\"\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\"\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\"\n        });\n    }\n  },\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.h(date, token);\n  },\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), {\n        unit: \"hour\"\n      });\n    }\n    return lightFormatters.H(date, token);\n  },\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, {\n        unit: \"hour\"\n      });\n    }\n    return addLeadingZeros(hours, token.length);\n  },\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), {\n        unit: \"minute\"\n      });\n    }\n    return lightFormatters.m(date, token);\n  },\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), {\n        unit: \"second\"\n      });\n    }\n    return lightFormatters.s(date, token);\n  },\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\":\n        // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(date.getTime() / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    const timestamp = date.getTime();\n    return addLeadingZeros(timestamp, token.length);\n  }\n};\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({\n        width: \"short\"\n      });\n    case \"PP\":\n      return formatLong.date({\n        width: \"medium\"\n      });\n    case \"PPP\":\n      return formatLong.date({\n        width: \"long\"\n      });\n    case \"PPPP\":\n    default:\n      return formatLong.date({\n        width: \"full\"\n      });\n  }\n};\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({\n        width: \"short\"\n      });\n    case \"pp\":\n      return formatLong.time({\n        width: \"medium\"\n      });\n    case \"ppp\":\n      return formatLong.time({\n        width: \"long\"\n      });\n    case \"pppp\":\n    default:\n      return formatLong.time({\n        width: \"full\"\n      });\n  }\n};\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n  let dateTimeFormat;\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"short\"\n      });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"medium\"\n      });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({\n        width: \"long\"\n      });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({\n        width: \"full\"\n      });\n      break;\n  }\n  return dateTimeFormat.replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong)).replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter\n};","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}","import { defaultLocale } from \"./_lib/defaultLocale.mjs\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.mjs\";\nimport { formatters } from \"./_lib/format/formatters.mjs\";\nimport { longFormatters } from \"./_lib/format/longFormatters.mjs\";\nimport { isProtectedDayOfYearToken, isProtectedWeekYearToken, warnOrThrowProtectedError } from \"./_lib/protectedTokens.mjs\";\nimport { isValid } from \"./isValid.mjs\";\nimport { toDate } from \"./toDate.mjs\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp = /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * > ⚠️ Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n  const firstWeekContainsDate = options?.firstWeekContainsDate ?? options?.locale?.options?.firstWeekContainsDate ?? defaultOptions.firstWeekContainsDate ?? defaultOptions.locale?.options?.firstWeekContainsDate ?? 1;\n  const weekStartsOn = options?.weekStartsOn ?? options?.locale?.options?.weekStartsOn ?? defaultOptions.weekStartsOn ?? defaultOptions.locale?.options?.weekStartsOn ?? 0;\n  const originalDate = toDate(date);\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n  let parts = formatStr.match(longFormattingTokensRegExp).map(substring => {\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n      const longFormatter = longFormatters[firstCharacter];\n      return longFormatter(substring, locale.formatLong);\n    }\n    return substring;\n  }).join(\"\").match(formattingTokensRegExp).map(substring => {\n    // Replace two single quote characters with one single quote character\n    if (substring === \"''\") {\n      return {\n        isToken: false,\n        value: \"'\"\n      };\n    }\n    const firstCharacter = substring[0];\n    if (firstCharacter === \"'\") {\n      return {\n        isToken: false,\n        value: cleanEscapedString(substring)\n      };\n    }\n    if (formatters[firstCharacter]) {\n      return {\n        isToken: true,\n        value: substring\n      };\n    }\n    if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n      throw new RangeError(\"Format string contains an unescaped latin alphabet character `\" + firstCharacter + \"`\");\n    }\n    return {\n      isToken: false,\n      value: substring\n    };\n  });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale\n  };\n  return parts.map(part => {\n    if (!part.isToken) return part.value;\n    const token = part.value;\n    if (!options?.useAdditionalWeekYearTokens && isProtectedWeekYearToken(token) || !options?.useAdditionalDayOfYearTokens && isProtectedDayOfYearToken(token)) {\n      warnOrThrowProtectedError(token, formatStr, String(date));\n    }\n    const formatter = formatters[token[0]];\n    return formatter(originalDate, token, locale.localize, formatterOptions);\n  }).join(\"\");\n}\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n  if (!matched) {\n    return input;\n  }\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;","/**\n* Copyright (c) 2024, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uPlot.js (μPlot)\n* A small, fast chart for time series, lines, areas, ohlc & bars\n* https://github.com/leeoniya/uPlot (v1.6.30)\n*/\n\nconst FEAT_TIME = true;\nconst pre = \"u-\";\nconst UPLOT = \"uplot\";\nconst ORI_HZ = pre + \"hz\";\nconst ORI_VT = pre + \"vt\";\nconst TITLE = pre + \"title\";\nconst WRAP = pre + \"wrap\";\nconst UNDER = pre + \"under\";\nconst OVER = pre + \"over\";\nconst AXIS = pre + \"axis\";\nconst OFF = pre + \"off\";\nconst SELECT = pre + \"select\";\nconst CURSOR_X = pre + \"cursor-x\";\nconst CURSOR_Y = pre + \"cursor-y\";\nconst CURSOR_PT = pre + \"cursor-pt\";\nconst LEGEND = pre + \"legend\";\nconst LEGEND_LIVE = pre + \"live\";\nconst LEGEND_INLINE = pre + \"inline\";\nconst LEGEND_SERIES = pre + \"series\";\nconst LEGEND_MARKER = pre + \"marker\";\nconst LEGEND_LABEL = pre + \"label\";\nconst LEGEND_VALUE = pre + \"value\";\nconst WIDTH = \"width\";\nconst HEIGHT = \"height\";\nconst TOP = \"top\";\nconst BOTTOM = \"bottom\";\nconst LEFT = \"left\";\nconst RIGHT = \"right\";\nconst hexBlack = \"#000\";\nconst transparent = hexBlack + \"0\";\nconst mousemove = \"mousemove\";\nconst mousedown = \"mousedown\";\nconst mouseup = \"mouseup\";\nconst mouseenter = \"mouseenter\";\nconst mouseleave = \"mouseleave\";\nconst dblclick = \"dblclick\";\nconst resize = \"resize\";\nconst scroll = \"scroll\";\nconst change = \"change\";\nconst dppxchange = \"dppxchange\";\nconst LEGEND_DISP = \"--\";\nconst domEnv = typeof window != 'undefined';\nconst doc = domEnv ? document : null;\nconst win = domEnv ? window : null;\nconst nav = domEnv ? navigator : null;\nlet pxRatio;\n\n//export const canHover = domEnv && !win.matchMedia('(hover: none)').matches;\n\nlet query;\nfunction setPxRatio() {\n  let _pxRatio = devicePixelRatio;\n\n  // during print preview, Chrome fires off these dppx queries even without changes\n  if (pxRatio != _pxRatio) {\n    pxRatio = _pxRatio;\n    query && off(change, query, setPxRatio);\n    query = matchMedia(`(min-resolution: ${pxRatio - 0.001}dppx) and (max-resolution: ${pxRatio + 0.001}dppx)`);\n    on(change, query, setPxRatio);\n    win.dispatchEvent(new CustomEvent(dppxchange));\n  }\n}\nfunction addClass(el, c) {\n  if (c != null) {\n    let cl = el.classList;\n    !cl.contains(c) && cl.add(c);\n  }\n}\nfunction remClass(el, c) {\n  let cl = el.classList;\n  cl.contains(c) && cl.remove(c);\n}\nfunction setStylePx(el, name, value) {\n  el.style[name] = value + \"px\";\n}\nfunction placeTag(tag, cls, targ, refEl) {\n  let el = doc.createElement(tag);\n  if (cls != null) addClass(el, cls);\n  if (targ != null) targ.insertBefore(el, refEl);\n  return el;\n}\nfunction placeDiv(cls, targ) {\n  return placeTag(\"div\", cls, targ);\n}\nconst xformCache = new WeakMap();\nfunction elTrans(el, xPos, yPos, xMax, yMax) {\n  let xform = \"translate(\" + xPos + \"px,\" + yPos + \"px)\";\n  let xformOld = xformCache.get(el);\n  if (xform != xformOld) {\n    el.style.transform = xform;\n    xformCache.set(el, xform);\n    if (xPos < 0 || yPos < 0 || xPos > xMax || yPos > yMax) addClass(el, OFF);else remClass(el, OFF);\n  }\n}\nconst colorCache = new WeakMap();\nfunction elColor(el, background, borderColor) {\n  let newColor = background + borderColor;\n  let oldColor = colorCache.get(el);\n  if (newColor != oldColor) {\n    colorCache.set(el, newColor);\n    el.style.background = background;\n    el.style.borderColor = borderColor;\n  }\n}\nconst sizeCache = new WeakMap();\nfunction elSize(el, newWid, newHgt, centered) {\n  let newSize = newWid + \"\" + newHgt;\n  let oldSize = sizeCache.get(el);\n  if (newSize != oldSize) {\n    sizeCache.set(el, newSize);\n    el.style.height = newHgt + \"px\";\n    el.style.width = newWid + \"px\";\n    el.style.marginLeft = centered ? -newWid / 2 + \"px\" : 0;\n    el.style.marginTop = centered ? -newHgt / 2 + \"px\" : 0;\n  }\n}\nconst evOpts = {\n  passive: true\n};\nconst evOpts2 = {\n  ...evOpts,\n  capture: true\n};\nfunction on(ev, el, cb, capt) {\n  el.addEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\nfunction off(ev, el, cb, capt) {\n  el.removeEventListener(ev, cb, capt ? evOpts2 : evOpts);\n}\ndomEnv && setPxRatio();\n\n// binary search for index of closest value\nfunction closestIdx(num, arr, lo, hi) {\n  let mid;\n  lo = lo || 0;\n  hi = hi || arr.length - 1;\n  let bitwise = hi <= 2147483647;\n  while (hi - lo > 1) {\n    mid = bitwise ? lo + hi >> 1 : floor((lo + hi) / 2);\n    if (arr[mid] < num) lo = mid;else hi = mid;\n  }\n  if (num - arr[lo] <= arr[hi] - num) return lo;\n  return hi;\n}\nfunction nonNullIdx(data, _i0, _i1, dir) {\n  for (let i = dir == 1 ? _i0 : _i1; i >= _i0 && i <= _i1; i += dir) {\n    if (data[i] != null) return i;\n  }\n  return -1;\n}\nfunction getMinMax(data, _i0, _i1, sorted) {\n  //\tconsole.log(\"getMinMax()\");\n\n  let _min = inf;\n  let _max = -inf;\n  if (sorted == 1) {\n    _min = data[_i0];\n    _max = data[_i1];\n  } else if (sorted == -1) {\n    _min = data[_i1];\n    _max = data[_i0];\n  } else {\n    for (let i = _i0; i <= _i1; i++) {\n      let v = data[i];\n      if (v != null) {\n        if (v < _min) _min = v;\n        if (v > _max) _max = v;\n      }\n    }\n  }\n  return [_min, _max];\n}\nfunction getMinMaxLog(data, _i0, _i1) {\n  //\tconsole.log(\"getMinMax()\");\n\n  let _min = inf;\n  let _max = -inf;\n  for (let i = _i0; i <= _i1; i++) {\n    let v = data[i];\n    if (v != null && v > 0) {\n      if (v < _min) _min = v;\n      if (v > _max) _max = v;\n    }\n  }\n  return [_min, _max];\n}\nfunction rangeLog(min, max, base, fullMags) {\n  let minSign = sign(min);\n  let maxSign = sign(max);\n  if (min == max) {\n    if (minSign == -1) {\n      min *= base;\n      max /= base;\n    } else {\n      min /= base;\n      max *= base;\n    }\n  }\n  let logFn = base == 10 ? log10 : log2;\n  let growMinAbs = minSign == 1 ? floor : ceil;\n  let growMaxAbs = maxSign == 1 ? ceil : floor;\n  let minExp = growMinAbs(logFn(abs(min)));\n  let maxExp = growMaxAbs(logFn(abs(max)));\n  let minIncr = pow(base, minExp);\n  let maxIncr = pow(base, maxExp);\n\n  // fix values like Math.pow(10, -5) === 0.000009999999999999999\n  if (base == 10) {\n    if (minExp < 0) minIncr = roundDec(minIncr, -minExp);\n    if (maxExp < 0) maxIncr = roundDec(maxIncr, -maxExp);\n  }\n  if (fullMags || base == 2) {\n    min = minIncr * minSign;\n    max = maxIncr * maxSign;\n  } else {\n    min = incrRoundDn(min, minIncr);\n    max = incrRoundUp(max, maxIncr);\n  }\n  return [min, max];\n}\nfunction rangeAsinh(min, max, base, fullMags) {\n  let minMax = rangeLog(min, max, base, fullMags);\n  if (min == 0) minMax[0] = 0;\n  if (max == 0) minMax[1] = 0;\n  return minMax;\n}\nconst rangePad = 0.1;\nconst autoRangePart = {\n  mode: 3,\n  pad: rangePad\n};\nconst _eqRangePart = {\n  pad: 0,\n  soft: null,\n  mode: 0\n};\nconst _eqRange = {\n  min: _eqRangePart,\n  max: _eqRangePart\n};\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction rangeNum(_min, _max, mult, extra) {\n  if (isObj(mult)) return _rangeNum(_min, _max, mult);\n  _eqRangePart.pad = mult;\n  _eqRangePart.soft = extra ? 0 : null;\n  _eqRangePart.mode = extra ? 3 : 0;\n  return _rangeNum(_min, _max, _eqRange);\n}\n\n// nullish coalesce\nfunction ifNull(lh, rh) {\n  return lh == null ? rh : lh;\n}\n\n// checks if given index range in an array contains a non-null value\n// aka a range-bounded Array.some()\nfunction hasData(data, idx0, idx1) {\n  idx0 = ifNull(idx0, 0);\n  idx1 = ifNull(idx1, data.length - 1);\n  while (idx0 <= idx1) {\n    if (data[idx0] != null) return true;\n    idx0++;\n  }\n  return false;\n}\nfunction _rangeNum(_min, _max, cfg) {\n  let cmin = cfg.min;\n  let cmax = cfg.max;\n  let padMin = ifNull(cmin.pad, 0);\n  let padMax = ifNull(cmax.pad, 0);\n  let hardMin = ifNull(cmin.hard, -inf);\n  let hardMax = ifNull(cmax.hard, inf);\n  let softMin = ifNull(cmin.soft, inf);\n  let softMax = ifNull(cmax.soft, -inf);\n  let softMinMode = ifNull(cmin.mode, 0);\n  let softMaxMode = ifNull(cmax.mode, 0);\n  let delta = _max - _min;\n  let deltaMag = log10(delta);\n  let scalarMax = max(abs(_min), abs(_max));\n  let scalarMag = log10(scalarMax);\n  let scalarMagDelta = abs(scalarMag - deltaMag);\n\n  // this handles situations like 89.7, 89.69999999999999\n  // by assuming 0.001x deltas are precision errors\n  //\tif (delta > 0 && delta < abs(_max) / 1e3)\n  //\t\tdelta = 0;\n\n  // treat data as flat if delta is less than 1 billionth\n  // or range is 11+ orders of magnitude below raw values, e.g. 99999999.99999996 - 100000000.00000004\n  if (delta < 1e-9 || scalarMagDelta > 10) {\n    delta = 0;\n\n    // if soft mode is 2 and all vals are flat at 0, avoid the 0.1 * 1e3 fallback\n    // this prevents 0,0,0 from ranging to -100,100 when softMin/softMax are -1,1\n    if (_min == 0 || _max == 0) {\n      delta = 1e-9;\n      if (softMinMode == 2 && softMin != inf) padMin = 0;\n      if (softMaxMode == 2 && softMax != -inf) padMax = 0;\n    }\n  }\n  let nonZeroDelta = delta || scalarMax || 1e3;\n  let mag = log10(nonZeroDelta);\n  let base = pow(10, floor(mag));\n  let _padMin = nonZeroDelta * (delta == 0 ? _min == 0 ? .1 : 1 : padMin);\n  let _newMin = roundDec(incrRoundDn(_min - _padMin, base / 10), 9);\n  let _softMin = _min >= softMin && (softMinMode == 1 || softMinMode == 3 && _newMin <= softMin || softMinMode == 2 && _newMin >= softMin) ? softMin : inf;\n  let minLim = max(hardMin, _newMin < _softMin && _min >= _softMin ? _softMin : min(_softMin, _newMin));\n  let _padMax = nonZeroDelta * (delta == 0 ? _max == 0 ? .1 : 1 : padMax);\n  let _newMax = roundDec(incrRoundUp(_max + _padMax, base / 10), 9);\n  let _softMax = _max <= softMax && (softMaxMode == 1 || softMaxMode == 3 && _newMax >= softMax || softMaxMode == 2 && _newMax <= softMax) ? softMax : -inf;\n  let maxLim = min(hardMax, _newMax > _softMax && _max <= _softMax ? _softMax : max(_softMax, _newMax));\n  if (minLim == maxLim && minLim == 0) maxLim = 100;\n  return [minLim, maxLim];\n}\n\n// alternative: https://stackoverflow.com/a/2254896\nconst numFormatter = new Intl.NumberFormat(domEnv ? nav.language : 'en-US');\nconst fmtNum = val => numFormatter.format(val);\nconst M = Math;\nconst PI = M.PI;\nconst abs = M.abs;\nconst floor = M.floor;\nconst round = M.round;\nconst ceil = M.ceil;\nconst min = M.min;\nconst max = M.max;\nconst pow = M.pow;\nconst sign = M.sign;\nconst log10 = M.log10;\nconst log2 = M.log2;\n// TODO: seems like this needs to match asinh impl if the passed v is tweaked?\nconst sinh = (v, linthresh = 1) => M.sinh(v) * linthresh;\nconst asinh = (v, linthresh = 1) => M.asinh(v / linthresh);\nconst inf = Infinity;\nfunction numIntDigits(x) {\n  return (log10((x ^ x >> 31) - (x >> 31)) | 0) + 1;\n}\nfunction clamp(num, _min, _max) {\n  return min(max(num, _min), _max);\n}\nfunction fnOrSelf(v) {\n  return typeof v == \"function\" ? v : () => v;\n}\nconst noop = () => {};\nconst retArg0 = _0 => _0;\nconst retArg1 = (_0, _1) => _1;\nconst retNull = _ => null;\nconst retTrue = _ => true;\nconst retEq = (a, b) => a == b;\n\n// this will probably prevent tick incrs > 14 decimal places\n// (we generate up to 17 dec, see fixedDec const)\nconst fixFloat = v => roundDec(v, 14);\nfunction incrRound(num, incr) {\n  return fixFloat(roundDec(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundUp(num, incr) {\n  return fixFloat(ceil(fixFloat(num / incr)) * incr);\n}\nfunction incrRoundDn(num, incr) {\n  return fixFloat(floor(fixFloat(num / incr)) * incr);\n}\n\n// https://stackoverflow.com/a/48764436\n// rounds half away from zero\nfunction roundDec(val, dec = 0) {\n  if (isInt(val)) return val;\n  //\telse if (dec == 0)\n  //\t\treturn round(val);\n\n  let p = 10 ** dec;\n  let n = val * p * (1 + Number.EPSILON);\n  return round(n) / p;\n}\nconst fixedDec = new Map();\nfunction guessDec(num) {\n  return ((\"\" + num).split(\".\")[1] || \"\").length;\n}\nfunction genIncrs(base, minExp, maxExp, mults) {\n  let incrs = [];\n  let multDec = mults.map(guessDec);\n  for (let exp = minExp; exp < maxExp; exp++) {\n    let expa = abs(exp);\n    let mag = roundDec(pow(base, exp), expa);\n    for (let i = 0; i < mults.length; i++) {\n      let _incr = mults[i] * mag;\n      let dec = (_incr >= 0 && exp >= 0 ? 0 : expa) + (exp >= multDec[i] ? 0 : multDec[i]);\n      let incr = roundDec(_incr, dec);\n      incrs.push(incr);\n      fixedDec.set(incr, dec);\n    }\n  }\n  return incrs;\n}\n\n//export const assign = Object.assign;\n\nconst EMPTY_OBJ = {};\nconst EMPTY_ARR = [];\nconst nullNullTuple = [null, null];\nconst isArr = Array.isArray;\nconst isInt = Number.isInteger;\nconst isUndef = v => v === void 0;\nfunction isStr(v) {\n  return typeof v == 'string';\n}\nfunction isObj(v) {\n  let is = false;\n  if (v != null) {\n    let c = v.constructor;\n    is = c == null || c == Object;\n  }\n  return is;\n}\nfunction fastIsObj(v) {\n  return v != null && typeof v == 'object';\n}\nconst TypedArray = Object.getPrototypeOf(Uint8Array);\nfunction copy(o, _isObj = isObj) {\n  let out;\n  if (isArr(o)) {\n    let val = o.find(v => v != null);\n    if (isArr(val) || _isObj(val)) {\n      out = Array(o.length);\n      for (let i = 0; i < o.length; i++) out[i] = copy(o[i], _isObj);\n    } else out = o.slice();\n  } else if (o instanceof TypedArray)\n    // also (ArrayBuffer.isView(o) && !(o instanceof DataView))\n    out = o.slice();else if (_isObj(o)) {\n    out = {};\n    for (let k in o) out[k] = copy(o[k], _isObj);\n  } else out = o;\n  return out;\n}\nfunction assign(targ) {\n  let args = arguments;\n  for (let i = 1; i < args.length; i++) {\n    let src = args[i];\n    for (let key in src) {\n      if (isObj(targ[key])) assign(targ[key], copy(src[key]));else targ[key] = copy(src[key]);\n    }\n  }\n  return targ;\n}\n\n// nullModes\nconst NULL_REMOVE = 0; // nulls are converted to undefined (e.g. for spanGaps: true)\nconst NULL_RETAIN = 1; // nulls are retained, with alignment artifacts set to undefined (default)\nconst NULL_EXPAND = 2; // nulls are expanded to include any adjacent alignment artifacts\n\n// sets undefined values to nulls when adjacent to existing nulls (minesweeper)\nfunction nullExpand(yVals, nullIdxs, alignedLen) {\n  for (let i = 0, xi, lastNullIdx = -1; i < nullIdxs.length; i++) {\n    let nullIdx = nullIdxs[i];\n    if (nullIdx > lastNullIdx) {\n      xi = nullIdx - 1;\n      while (xi >= 0 && yVals[xi] == null) yVals[xi--] = null;\n      xi = nullIdx + 1;\n      while (xi < alignedLen && yVals[xi] == null) yVals[lastNullIdx = xi++] = null;\n    }\n  }\n}\n\n// nullModes is a tables-matched array indicating how to treat nulls in each series\n// output is sorted ASC on the joined field (table[0]) and duplicate join values are collapsed\nfunction join(tables, nullModes) {\n  if (allHeadersSame(tables)) {\n    //\tconsole.log('cheap join!');\n\n    let table = tables[0].slice();\n    for (let i = 1; i < tables.length; i++) table.push(...tables[i].slice(1));\n    if (!isAsc(table[0])) table = sortCols(table);\n    return table;\n  }\n  let xVals = new Set();\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    let len = xs.length;\n    for (let i = 0; i < len; i++) xVals.add(xs[i]);\n  }\n  let data = [Array.from(xVals).sort((a, b) => a - b)];\n  let alignedLen = data[0].length;\n  let xIdxs = new Map();\n  for (let i = 0; i < alignedLen; i++) xIdxs.set(data[0][i], i);\n  for (let ti = 0; ti < tables.length; ti++) {\n    let t = tables[ti];\n    let xs = t[0];\n    for (let si = 1; si < t.length; si++) {\n      let ys = t[si];\n      let yVals = Array(alignedLen).fill(undefined);\n      let nullMode = nullModes ? nullModes[ti][si] : NULL_RETAIN;\n      let nullIdxs = [];\n      for (let i = 0; i < ys.length; i++) {\n        let yVal = ys[i];\n        let alignedIdx = xIdxs.get(xs[i]);\n        if (yVal === null) {\n          if (nullMode != NULL_REMOVE) {\n            yVals[alignedIdx] = yVal;\n            if (nullMode == NULL_EXPAND) nullIdxs.push(alignedIdx);\n          }\n        } else yVals[alignedIdx] = yVal;\n      }\n      nullExpand(yVals, nullIdxs, alignedLen);\n      data.push(yVals);\n    }\n  }\n  return data;\n}\nconst microTask = typeof queueMicrotask == \"undefined\" ? fn => Promise.resolve().then(fn) : queueMicrotask;\n\n// TODO: https://github.com/dy/sort-ids (~2x faster for 1e5+ arrays)\nfunction sortCols(table) {\n  let head = table[0];\n  let rlen = head.length;\n  let idxs = Array(rlen);\n  for (let i = 0; i < idxs.length; i++) idxs[i] = i;\n  idxs.sort((i0, i1) => head[i0] - head[i1]);\n  let table2 = [];\n  for (let i = 0; i < table.length; i++) {\n    let row = table[i];\n    let row2 = Array(rlen);\n    for (let j = 0; j < rlen; j++) row2[j] = row[idxs[j]];\n    table2.push(row2);\n  }\n  return table2;\n}\n\n// test if we can do cheap join (all join fields same)\nfunction allHeadersSame(tables) {\n  let vals0 = tables[0][0];\n  let len0 = vals0.length;\n  for (let i = 1; i < tables.length; i++) {\n    let vals1 = tables[i][0];\n    if (vals1.length != len0) return false;\n    if (vals1 != vals0) {\n      for (let j = 0; j < len0; j++) {\n        if (vals1[j] != vals0[j]) return false;\n      }\n    }\n  }\n  return true;\n}\nfunction isAsc(vals, samples = 100) {\n  const len = vals.length;\n\n  // empty or single value\n  if (len <= 1) return true;\n\n  // skip leading & trailing nullish\n  let firstIdx = 0;\n  let lastIdx = len - 1;\n  while (firstIdx <= lastIdx && vals[firstIdx] == null) firstIdx++;\n  while (lastIdx >= firstIdx && vals[lastIdx] == null) lastIdx--;\n\n  // all nullish or one value surrounded by nullish\n  if (lastIdx <= firstIdx) return true;\n  const stride = max(1, floor((lastIdx - firstIdx + 1) / samples));\n  for (let prevVal = vals[firstIdx], i = firstIdx + stride; i <= lastIdx; i += stride) {\n    const v = vals[i];\n    if (v != null) {\n      if (v <= prevVal) return false;\n      prevVal = v;\n    }\n  }\n  return true;\n}\nconst months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\nconst days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nfunction slice3(str) {\n  return str.slice(0, 3);\n}\nconst days3 = days.map(slice3);\nconst months3 = months.map(slice3);\nconst engNames = {\n  MMMM: months,\n  MMM: months3,\n  WWWW: days,\n  WWW: days3\n};\nfunction zeroPad2(int) {\n  return (int < 10 ? '0' : '') + int;\n}\nfunction zeroPad3(int) {\n  return (int < 10 ? '00' : int < 100 ? '0' : '') + int;\n}\n\n/*\nfunction suffix(int) {\n\tlet mod10 = int % 10;\n\n\treturn int + (\n\t\tmod10 == 1 && int != 11 ? \"st\" :\n\t\tmod10 == 2 && int != 12 ? \"nd\" :\n\t\tmod10 == 3 && int != 13 ? \"rd\" : \"th\"\n\t);\n}\n*/\n\nconst subs = {\n  // 2019\n  YYYY: d => d.getFullYear(),\n  // 19\n  YY: d => (d.getFullYear() + '').slice(2),\n  // July\n  MMMM: (d, names) => names.MMMM[d.getMonth()],\n  // Jul\n  MMM: (d, names) => names.MMM[d.getMonth()],\n  // 07\n  MM: d => zeroPad2(d.getMonth() + 1),\n  // 7\n  M: d => d.getMonth() + 1,\n  // 09\n  DD: d => zeroPad2(d.getDate()),\n  // 9\n  D: d => d.getDate(),\n  // Monday\n  WWWW: (d, names) => names.WWWW[d.getDay()],\n  // Mon\n  WWW: (d, names) => names.WWW[d.getDay()],\n  // 03\n  HH: d => zeroPad2(d.getHours()),\n  // 3\n  H: d => d.getHours(),\n  // 9 (12hr, unpadded)\n  h: d => {\n    let h = d.getHours();\n    return h == 0 ? 12 : h > 12 ? h - 12 : h;\n  },\n  // AM\n  AA: d => d.getHours() >= 12 ? 'PM' : 'AM',\n  // am\n  aa: d => d.getHours() >= 12 ? 'pm' : 'am',\n  // a\n  a: d => d.getHours() >= 12 ? 'p' : 'a',\n  // 09\n  mm: d => zeroPad2(d.getMinutes()),\n  // 9\n  m: d => d.getMinutes(),\n  // 09\n  ss: d => zeroPad2(d.getSeconds()),\n  // 9\n  s: d => d.getSeconds(),\n  // 374\n  fff: d => zeroPad3(d.getMilliseconds())\n};\nfunction fmtDate(tpl, names) {\n  names = names || engNames;\n  let parts = [];\n  let R = /\\{([a-z]+)\\}|[^{]+/gi,\n    m;\n  while (m = R.exec(tpl)) parts.push(m[0][0] == '{' ? subs[m[1]] : m[0]);\n  return d => {\n    let out = '';\n    for (let i = 0; i < parts.length; i++) out += typeof parts[i] == \"string\" ? parts[i] : parts[i](d, names);\n    return out;\n  };\n}\nconst localTz = new Intl.DateTimeFormat().resolvedOptions().timeZone;\n\n// https://stackoverflow.com/questions/15141762/how-to-initialize-a-javascript-date-to-a-particular-time-zone/53652131#53652131\nfunction tzDate(date, tz) {\n  let date2;\n\n  // perf optimization\n  if (tz == 'UTC' || tz == 'Etc/UTC') date2 = new Date(+date + date.getTimezoneOffset() * 6e4);else if (tz == localTz) date2 = date;else {\n    date2 = new Date(date.toLocaleString('en-US', {\n      timeZone: tz\n    }));\n    date2.setMilliseconds(date.getMilliseconds());\n  }\n  return date2;\n}\n\n//export const series = [];\n\n// default formatters:\n\nconst onlyWhole = v => v % 1 == 0;\nconst allMults = [1, 2, 2.5, 5];\n\n// ...0.01, 0.02, 0.025, 0.05, 0.1, 0.2, 0.25, 0.5\nconst decIncrs = genIncrs(10, -16, 0, allMults);\n\n// 1, 2, 2.5, 5, 10, 20, 25, 50...\nconst oneIncrs = genIncrs(10, 0, 16, allMults);\n\n// 1, 2,      5, 10, 20, 25, 50...\nconst wholeIncrs = oneIncrs.filter(onlyWhole);\nconst numIncrs = decIncrs.concat(oneIncrs);\nconst NL = \"\\n\";\nconst yyyy = \"{YYYY}\";\nconst NLyyyy = NL + yyyy;\nconst md = \"{M}/{D}\";\nconst NLmd = NL + md;\nconst NLmdyy = NLmd + \"/{YY}\";\nconst aa = \"{aa}\";\nconst hmm = \"{h}:{mm}\";\nconst hmmaa = hmm + aa;\nconst NLhmmaa = NL + hmmaa;\nconst ss = \":{ss}\";\nconst _ = null;\nfunction genTimeStuffs(ms) {\n  let s = ms * 1e3,\n    m = s * 60,\n    h = m * 60,\n    d = h * 24,\n    mo = d * 30,\n    y = d * 365;\n\n  // min of 1e-3 prevents setting a temporal x ticks too small since Date objects cannot advance ticks smaller than 1ms\n  let subSecIncrs = ms == 1 ? genIncrs(10, 0, 3, allMults).filter(onlyWhole) : genIncrs(10, -3, 0, allMults);\n  let timeIncrs = subSecIncrs.concat([\n  // minute divisors (# of secs)\n  s, s * 5, s * 10, s * 15, s * 30,\n  // hour divisors (# of mins)\n  m, m * 5, m * 10, m * 15, m * 30,\n  // day divisors (# of hrs)\n  h, h * 2, h * 3, h * 4, h * 6, h * 8, h * 12,\n  // month divisors TODO: need more?\n  d, d * 2, d * 3, d * 4, d * 5, d * 6, d * 7, d * 8, d * 9, d * 10, d * 15,\n  // year divisors (# months, approx)\n  mo, mo * 2, mo * 3, mo * 4, mo * 6,\n  // century divisors\n  y, y * 2, y * 5, y * 10, y * 25, y * 50, y * 100]);\n\n  // [0]:   minimum num secs in the tick incr\n  // [1]:   default tick format\n  // [2-7]: rollover tick formats\n  // [8]:   mode: 0: replace [1] -> [2-7], 1: concat [1] + [2-7]\n  const _timeAxisStamps = [\n  //   tick incr    default          year                    month   day                   hour    min       sec   mode\n  [y, yyyy, _, _, _, _, _, _, 1], [d * 28, \"{MMM}\", NLyyyy, _, _, _, _, _, 1], [d, md, NLyyyy, _, _, _, _, _, 1], [h, \"{h}\" + aa, NLmdyy, _, NLmd, _, _, _, 1], [m, hmmaa, NLmdyy, _, NLmd, _, _, _, 1], [s, ss, NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1], [ms, ss + \".{fff}\", NLmdyy + \" \" + hmmaa, _, NLmd + \" \" + hmmaa, _, NLhmmaa, _, 1]];\n\n  // the ensures that axis ticks, values & grid are aligned to logical temporal breakpoints and not an arbitrary timestamp\n  // https://www.timeanddate.com/time/dst/\n  // https://www.timeanddate.com/time/dst/2019.html\n  // https://www.epochconverter.com/timezones\n  function timeAxisSplits(tzDate) {\n    return (self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace) => {\n      let splits = [];\n      let isYr = foundIncr >= y;\n      let isMo = foundIncr >= mo && foundIncr < y;\n\n      // get the timezone-adjusted date\n      let minDate = tzDate(scaleMin);\n      let minDateTs = roundDec(minDate * ms, 3);\n\n      // get ts of 12am (this lands us at or before the original scaleMin)\n      let minMin = mkDate(minDate.getFullYear(), isYr ? 0 : minDate.getMonth(), isMo || isYr ? 1 : minDate.getDate());\n      let minMinTs = roundDec(minMin * ms, 3);\n      if (isMo || isYr) {\n        let moIncr = isMo ? foundIncr / mo : 0;\n        let yrIncr = isYr ? foundIncr / y : 0;\n        //\tlet tzOffset = scaleMin - minDateTs;\t\t// needed?\n        let split = minDateTs == minMinTs ? minDateTs : roundDec(mkDate(minMin.getFullYear() + yrIncr, minMin.getMonth() + moIncr, 1) * ms, 3);\n        let splitDate = new Date(round(split / ms));\n        let baseYear = splitDate.getFullYear();\n        let baseMonth = splitDate.getMonth();\n        for (let i = 0; split <= scaleMax; i++) {\n          let next = mkDate(baseYear + yrIncr * i, baseMonth + moIncr * i, 1);\n          let offs = next - tzDate(roundDec(next * ms, 3));\n          split = roundDec((+next + offs) * ms, 3);\n          if (split <= scaleMax) splits.push(split);\n        }\n      } else {\n        let incr0 = foundIncr >= d ? d : foundIncr;\n        let tzOffset = floor(scaleMin) - floor(minDateTs);\n        let split = minMinTs + tzOffset + incrRoundUp(minDateTs - minMinTs, incr0);\n        splits.push(split);\n        let date0 = tzDate(split);\n        let prevHour = date0.getHours() + date0.getMinutes() / m + date0.getSeconds() / h;\n        let incrHours = foundIncr / h;\n        let minSpace = self.axes[axisIdx]._space;\n        let pctSpace = foundSpace / minSpace;\n        while (1) {\n          split = roundDec(split + foundIncr, ms == 1 ? 0 : 3);\n          if (split > scaleMax) break;\n          if (incrHours > 1) {\n            let expectedHour = floor(roundDec(prevHour + incrHours, 6)) % 24;\n            let splitDate = tzDate(split);\n            let actualHour = splitDate.getHours();\n            let dstShift = actualHour - expectedHour;\n            if (dstShift > 1) dstShift = -1;\n            split -= dstShift * h;\n            prevHour = (prevHour + incrHours) % 24;\n\n            // add a tick only if it's further than 70% of the min allowed label spacing\n            let prevSplit = splits[splits.length - 1];\n            let pctIncr = roundDec((split - prevSplit) / foundIncr, 3);\n            if (pctIncr * pctSpace >= .7) splits.push(split);\n          } else splits.push(split);\n        }\n      }\n      return splits;\n    };\n  }\n  return [timeIncrs, _timeAxisStamps, timeAxisSplits];\n}\nconst [timeIncrsMs, _timeAxisStampsMs, timeAxisSplitsMs] = genTimeStuffs(1);\nconst [timeIncrsS, _timeAxisStampsS, timeAxisSplitsS] = genTimeStuffs(1e-3);\n\n// base 2\ngenIncrs(2, -53, 53, [1]);\n\n/*\nconsole.log({\n\tdecIncrs,\n\toneIncrs,\n\twholeIncrs,\n\tnumIncrs,\n\ttimeIncrs,\n\tfixedDec,\n});\n*/\n\nfunction timeAxisStamps(stampCfg, fmtDate) {\n  return stampCfg.map(s => s.map((v, i) => i == 0 || i == 8 || v == null ? v : fmtDate(i == 1 || s[8] == 0 ? v : s[1] + v)));\n}\n\n// TODO: will need to accept spaces[] and pull incr into the loop when grid will be non-uniform, eg for log scales.\n// currently we ignore this for months since they're *nearly* uniform and the added complexity is not worth it\nfunction timeAxisVals(tzDate, stamps) {\n  return (self, splits, axisIdx, foundSpace, foundIncr) => {\n    let s = stamps.find(s => foundIncr >= s[0]) || stamps[stamps.length - 1];\n\n    // these track boundaries when a full label is needed again\n    let prevYear;\n    let prevMnth;\n    let prevDate;\n    let prevHour;\n    let prevMins;\n    let prevSecs;\n    return splits.map(split => {\n      let date = tzDate(split);\n      let newYear = date.getFullYear();\n      let newMnth = date.getMonth();\n      let newDate = date.getDate();\n      let newHour = date.getHours();\n      let newMins = date.getMinutes();\n      let newSecs = date.getSeconds();\n      let stamp = newYear != prevYear && s[2] || newMnth != prevMnth && s[3] || newDate != prevDate && s[4] || newHour != prevHour && s[5] || newMins != prevMins && s[6] || newSecs != prevSecs && s[7] || s[1];\n      prevYear = newYear;\n      prevMnth = newMnth;\n      prevDate = newDate;\n      prevHour = newHour;\n      prevMins = newMins;\n      prevSecs = newSecs;\n      return stamp(date);\n    });\n  };\n}\n\n// for when axis.values is defined as a static fmtDate template string\nfunction timeAxisVal(tzDate, dateTpl) {\n  let stamp = fmtDate(dateTpl);\n  return (self, splits, axisIdx, foundSpace, foundIncr) => splits.map(split => stamp(tzDate(split)));\n}\nfunction mkDate(y, m, d) {\n  return new Date(y, m, d);\n}\nfunction timeSeriesStamp(stampCfg, fmtDate) {\n  return fmtDate(stampCfg);\n}\nconst _timeSeriesStamp = '{YYYY}-{MM}-{DD} {h}:{mm}{aa}';\nfunction timeSeriesVal(tzDate, stamp) {\n  return (self, val, seriesIdx, dataIdx) => dataIdx == null ? LEGEND_DISP : stamp(tzDate(val));\n}\nfunction legendStroke(self, seriesIdx) {\n  let s = self.series[seriesIdx];\n  return s.width ? s.stroke(self, seriesIdx) : s.points.width ? s.points.stroke(self, seriesIdx) : null;\n}\nfunction legendFill(self, seriesIdx) {\n  return self.series[seriesIdx].fill(self, seriesIdx);\n}\nconst legendOpts = {\n  show: true,\n  live: true,\n  isolate: false,\n  mount: noop,\n  markers: {\n    show: true,\n    width: 2,\n    stroke: legendStroke,\n    fill: legendFill,\n    dash: \"solid\"\n  },\n  idx: null,\n  idxs: null,\n  values: []\n};\nfunction cursorPointShow(self, si) {\n  let o = self.cursor.points;\n  let pt = placeDiv();\n  let size = o.size(self, si);\n  setStylePx(pt, WIDTH, size);\n  setStylePx(pt, HEIGHT, size);\n  let mar = size / -2;\n  setStylePx(pt, \"marginLeft\", mar);\n  setStylePx(pt, \"marginTop\", mar);\n  let width = o.width(self, si, size);\n  width && setStylePx(pt, \"borderWidth\", width);\n  return pt;\n}\nfunction cursorPointFill(self, si) {\n  let sp = self.series[si].points;\n  return sp._fill || sp._stroke;\n}\nfunction cursorPointStroke(self, si) {\n  let sp = self.series[si].points;\n  return sp._stroke || sp._fill;\n}\nfunction cursorPointSize(self, si) {\n  let sp = self.series[si].points;\n  return sp.size;\n}\nconst moveTuple = [0, 0];\nfunction cursorMove(self, mouseLeft1, mouseTop1) {\n  moveTuple[0] = mouseLeft1;\n  moveTuple[1] = mouseTop1;\n  return moveTuple;\n}\nfunction filtBtn0(self, targ, handle, onlyTarg = true) {\n  return e => {\n    e.button == 0 && (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nfunction filtTarg(self, targ, handle, onlyTarg = true) {\n  return e => {\n    (!onlyTarg || e.target == targ) && handle(e);\n  };\n}\nconst cursorOpts = {\n  show: true,\n  x: true,\n  y: true,\n  lock: false,\n  move: cursorMove,\n  points: {\n    show: cursorPointShow,\n    size: cursorPointSize,\n    width: 0,\n    stroke: cursorPointStroke,\n    fill: cursorPointFill\n  },\n  bind: {\n    mousedown: filtBtn0,\n    mouseup: filtBtn0,\n    click: filtBtn0,\n    // legend clicks, not .u-over clicks\n    dblclick: filtBtn0,\n    mousemove: filtTarg,\n    mouseleave: filtTarg,\n    mouseenter: filtTarg\n  },\n  drag: {\n    setScale: true,\n    x: true,\n    y: false,\n    dist: 0,\n    uni: null,\n    click: (self, e) => {\n      //\te.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    },\n    _x: false,\n    _y: false\n  },\n  focus: {\n    dist: (self, seriesIdx, dataIdx, valPos, curPos) => valPos - curPos,\n    prox: -1,\n    bias: 0\n  },\n  hover: {\n    skip: [void 0],\n    prox: null,\n    bias: 0\n  },\n  left: -10,\n  top: -10,\n  idx: null,\n  dataIdx: null,\n  idxs: null,\n  event: null\n};\nconst axisLines = {\n  show: true,\n  stroke: \"rgba(0,0,0,0.07)\",\n  width: 2\n  //\tdash: [],\n};\nconst grid = assign({}, axisLines, {\n  filter: retArg1\n});\nconst ticks = assign({}, grid, {\n  size: 10\n});\nconst border = assign({}, axisLines, {\n  show: false\n});\nconst font = '12px system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\"';\nconst labelFont = \"bold \" + font;\nconst lineGap = 1.5; // font-size multiplier\n\nconst xAxisOpts = {\n  show: true,\n  scale: \"x\",\n  stroke: hexBlack,\n  space: 50,\n  gap: 5,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 2,\n  //\tclass: \"x-vals\",\n  //\tincrs: timeIncrs,\n  //\tvalues: timeVals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\nconst numSeriesLabel = \"Value\";\nconst timeSeriesLabel = \"Time\";\nconst xSeriesOpts = {\n  show: true,\n  scale: \"x\",\n  auto: false,\n  sorted: 1,\n  //\tlabel: \"Time\",\n  //\tvalue: v => stamp(new Date(v * 1e3)),\n\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: []\n};\nfunction numAxisVals(self, splits, axisIdx, foundSpace, foundIncr) {\n  return splits.map(v => v == null ? \"\" : fmtNum(v));\n}\nfunction numAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let splits = [];\n  let numDec = fixedDec.get(foundIncr) || 0;\n  scaleMin = forceMin ? scaleMin : roundDec(incrRoundUp(scaleMin, foundIncr), numDec);\n  for (let val = scaleMin; val <= scaleMax; val = roundDec(val + foundIncr, numDec)) splits.push(Object.is(val, -0) ? 0 : val); // coalesces -0\n\n  return splits;\n}\n\n// this doesnt work for sin, which needs to come off from 0 independently in pos and neg dirs\nfunction logAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  const splits = [];\n  const logBase = self.scales[self.axes[axisIdx].scale].log;\n  const logFn = logBase == 10 ? log10 : log2;\n  const exp = floor(logFn(scaleMin));\n  foundIncr = pow(logBase, exp);\n  if (logBase == 10 && exp < 0) foundIncr = roundDec(foundIncr, -exp);\n  let split = scaleMin;\n  do {\n    splits.push(split);\n    split = split + foundIncr;\n    if (logBase == 10) split = roundDec(split, fixedDec.get(foundIncr));\n    if (split >= foundIncr * logBase) foundIncr = split;\n  } while (split <= scaleMax);\n  return splits;\n}\nfunction asinhAxisSplits(self, axisIdx, scaleMin, scaleMax, foundIncr, foundSpace, forceMin) {\n  let sc = self.scales[self.axes[axisIdx].scale];\n  let linthresh = sc.asinh;\n  let posSplits = scaleMax > linthresh ? logAxisSplits(self, axisIdx, max(linthresh, scaleMin), scaleMax, foundIncr) : [linthresh];\n  let zero = scaleMax >= 0 && scaleMin <= 0 ? [0] : [];\n  let negSplits = scaleMin < -linthresh ? logAxisSplits(self, axisIdx, max(linthresh, -scaleMax), -scaleMin, foundIncr) : [linthresh];\n  return negSplits.reverse().map(v => -v).concat(zero, posSplits);\n}\nconst RE_ALL = /./;\nconst RE_12357 = /[12357]/;\nconst RE_125 = /[125]/;\nconst RE_1 = /1/;\nconst _filt = (splits, distr, re, keepMod) => splits.map((v, i) => distr == 4 && v == 0 || i % keepMod == 0 && re.test(v.toExponential()[v < 0 ? 1 : 0]) ? v : null);\nfunction log10AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let sc = self.scales[scaleKey];\n\n  //\tif (sc.distr == 3 && sc.log == 2)\n  //\t\treturn splits;\n\n  let valToPos = self.valToPos;\n  let minSpace = axis._space;\n  let _10 = valToPos(10, scaleKey);\n  let re = valToPos(9, scaleKey) - _10 >= minSpace ? RE_ALL : valToPos(7, scaleKey) - _10 >= minSpace ? RE_12357 : valToPos(5, scaleKey) - _10 >= minSpace ? RE_125 : RE_1;\n  if (re == RE_1) {\n    let magSpace = abs(valToPos(1, scaleKey) - _10);\n    if (magSpace < minSpace) return _filt(splits.slice().reverse(), sc.distr, re, ceil(minSpace / magSpace)).reverse(); // max->min skip\n  }\n  return _filt(splits, sc.distr, re, 1);\n}\nfunction log2AxisValsFilt(self, splits, axisIdx, foundSpace, foundIncr) {\n  let axis = self.axes[axisIdx];\n  let scaleKey = axis.scale;\n  let minSpace = axis._space;\n  let valToPos = self.valToPos;\n  let magSpace = abs(valToPos(1, scaleKey) - valToPos(2, scaleKey));\n  if (magSpace < minSpace) return _filt(splits.slice().reverse(), 3, RE_ALL, ceil(minSpace / magSpace)).reverse(); // max->min skip\n\n  return splits;\n}\nfunction numSeriesVal(self, val, seriesIdx, dataIdx) {\n  return dataIdx == null ? LEGEND_DISP : val == null ? \"\" : fmtNum(val);\n}\nconst yAxisOpts = {\n  show: true,\n  scale: \"y\",\n  stroke: hexBlack,\n  space: 30,\n  gap: 5,\n  size: 50,\n  labelGap: 0,\n  labelSize: 30,\n  labelFont,\n  side: 3,\n  //\tclass: \"y-vals\",\n  //\tincrs: numIncrs,\n  //\tvalues: (vals, space) => vals,\n  //\tfilter: retArg1,\n  grid,\n  ticks,\n  border,\n  font,\n  lineGap,\n  rotate: 0\n};\n\n// takes stroke width\nfunction ptDia(width, mult) {\n  let dia = 3 + (width || 1) * 2;\n  return roundDec(dia * mult, 3);\n}\nfunction seriesPointsShow(self, si) {\n  let {\n    scale,\n    idxs\n  } = self.series[0];\n  let xData = self._data[0];\n  let p0 = self.valToPos(xData[idxs[0]], scale, true);\n  let p1 = self.valToPos(xData[idxs[1]], scale, true);\n  let dim = abs(p1 - p0);\n  let s = self.series[si];\n  //\tconst dia = ptDia(s.width, pxRatio);\n  let maxPts = dim / (s.points.space * pxRatio);\n  return idxs[1] - idxs[0] <= maxPts;\n}\nconst facet = {\n  scale: null,\n  auto: true,\n  sorted: 0,\n  // internal caches\n  min: inf,\n  max: -inf\n};\nconst gaps = (self, seriesIdx, idx0, idx1, nullGaps) => nullGaps;\nconst xySeriesOpts = {\n  show: true,\n  auto: true,\n  sorted: 0,\n  gaps,\n  alpha: 1,\n  facets: [assign({}, facet, {\n    scale: 'x'\n  }), assign({}, facet, {\n    scale: 'y'\n  })]\n};\nconst ySeriesOpts = {\n  scale: \"y\",\n  auto: true,\n  sorted: 0,\n  show: true,\n  spanGaps: false,\n  gaps,\n  alpha: 1,\n  points: {\n    show: seriesPointsShow,\n    filter: null\n    //  paths:\n    //\tstroke: \"#000\",\n    //\tfill: \"#fff\",\n    //\twidth: 1,\n    //\tsize: 10,\n  },\n  //\tlabel: \"Value\",\n  //\tvalue: v => v,\n  values: null,\n  // internal caches\n  min: inf,\n  max: -inf,\n  idxs: [],\n  path: null,\n  clip: null\n};\nfunction clampScale(self, val, scaleMin, scaleMax, scaleKey) {\n  /*\n  \tif (val < 0) {\n  \t\tlet cssHgt = self.bbox.height / pxRatio;\n  \t\tlet absPos = self.valToPos(abs(val), scaleKey);\n  \t\tlet fromBtm = cssHgt - absPos;\n  \t\treturn self.posToVal(cssHgt + fromBtm, scaleKey);\n  \t}\n  */\n  return scaleMin / 10;\n}\nconst xScaleOpts = {\n  time: FEAT_TIME,\n  auto: true,\n  distr: 1,\n  log: 10,\n  asinh: 1,\n  min: null,\n  max: null,\n  dir: 1,\n  ori: 0\n};\nconst yScaleOpts = assign({}, xScaleOpts, {\n  time: false,\n  ori: 1\n});\nconst syncs = {};\nfunction _sync(key, opts) {\n  let s = syncs[key];\n  if (!s) {\n    s = {\n      key,\n      plots: [],\n      sub(plot) {\n        s.plots.push(plot);\n      },\n      unsub(plot) {\n        s.plots = s.plots.filter(c => c != plot);\n      },\n      pub(type, self, x, y, w, h, i) {\n        for (let j = 0; j < s.plots.length; j++) s.plots[j] != self && s.plots[j].pub(type, self, x, y, w, h, i);\n      }\n    };\n    if (key != null) syncs[key] = s;\n  }\n  return s;\n}\nconst BAND_CLIP_FILL = 1 << 0;\nconst BAND_CLIP_STROKE = 1 << 1;\nfunction orient(u, seriesIdx, cb) {\n  const mode = u.mode;\n  const series = u.series[seriesIdx];\n  const data = mode == 2 ? u._data[seriesIdx] : u._data;\n  const scales = u.scales;\n  const bbox = u.bbox;\n  let dx = data[0],\n    dy = mode == 2 ? data[1] : data[seriesIdx],\n    sx = mode == 2 ? scales[series.facets[0].scale] : scales[u.series[0].scale],\n    sy = mode == 2 ? scales[series.facets[1].scale] : scales[series.scale],\n    l = bbox.left,\n    t = bbox.top,\n    w = bbox.width,\n    h = bbox.height,\n    H = u.valToPosH,\n    V = u.valToPosV;\n  return sx.ori == 0 ? cb(series, dx, dy, sx, sy, H, V, l, t, w, h, moveToH, lineToH, rectH, arcH, bezierCurveToH) : cb(series, dx, dy, sx, sy, V, H, t, l, h, w, moveToV, lineToV, rectV, arcV, bezierCurveToV);\n}\nfunction bandFillClipDirs(self, seriesIdx) {\n  let fillDir = 0;\n\n  // 2 bits, -1 | 1\n  let clipDirs = 0;\n  let bands = ifNull(self.bands, EMPTY_ARR);\n  for (let i = 0; i < bands.length; i++) {\n    let b = bands[i];\n\n    // is a \"from\" band edge\n    if (b.series[0] == seriesIdx) fillDir = b.dir;\n    // is a \"to\" band edge\n    else if (b.series[1] == seriesIdx) {\n      if (b.dir == 1) clipDirs |= 1;else clipDirs |= 2;\n    }\n  }\n  return [fillDir, clipDirs == 1 ? -1 :\n  // neg only\n  clipDirs == 2 ? 1 :\n  // pos only\n  clipDirs == 3 ? 2 :\n  // both\n  0 // neither\n  ];\n}\nfunction seriesFillTo(self, seriesIdx, dataMin, dataMax, bandFillDir) {\n  let mode = self.mode;\n  let series = self.series[seriesIdx];\n  let scaleKey = mode == 2 ? series.facets[1].scale : series.scale;\n  let scale = self.scales[scaleKey];\n  return bandFillDir == -1 ? scale.min : bandFillDir == 1 ? scale.max : scale.distr == 3 ? scale.dir == 1 ? scale.min : scale.max : 0;\n}\n\n// creates inverted band clip path (from stroke path -> yMax || yMin)\n// clipDir is always inverse of fillDir\n// default clip dir is upwards (1), since default band fill is downwards/fillBelowTo (-1) (highIdx -> lowIdx)\nfunction clipBandLine(self, seriesIdx, idx0, idx1, strokePath, clipDir) {\n  return orient(self, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n    let pxRound = series.pxRound;\n    const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n    const lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n    let frIdx, toIdx;\n    if (dir == 1) {\n      frIdx = idx0;\n      toIdx = idx1;\n    } else {\n      frIdx = idx1;\n      toIdx = idx0;\n    }\n\n    // path start\n    let x0 = pxRound(valToPosX(dataX[frIdx], scaleX, xDim, xOff));\n    let y0 = pxRound(valToPosY(dataY[frIdx], scaleY, yDim, yOff));\n    // path end x\n    let x1 = pxRound(valToPosX(dataX[toIdx], scaleX, xDim, xOff));\n    // upper or lower y limit\n    let yLimit = pxRound(valToPosY(clipDir == 1 ? scaleY.max : scaleY.min, scaleY, yDim, yOff));\n    let clip = new Path2D(strokePath);\n    lineTo(clip, x1, yLimit);\n    lineTo(clip, x0, yLimit);\n    lineTo(clip, x0, y0);\n    return clip;\n  });\n}\nfunction clipGaps(gaps, ori, plotLft, plotTop, plotWid, plotHgt) {\n  let clip = null;\n\n  // create clip path (invert gaps and non-gaps)\n  if (gaps.length > 0) {\n    clip = new Path2D();\n    const rect = ori == 0 ? rectH : rectV;\n    let prevGapEnd = plotLft;\n    for (let i = 0; i < gaps.length; i++) {\n      let g = gaps[i];\n      if (g[1] > g[0]) {\n        let w = g[0] - prevGapEnd;\n        w > 0 && rect(clip, prevGapEnd, plotTop, w, plotTop + plotHgt);\n        prevGapEnd = g[1];\n      }\n    }\n    let w = plotLft + plotWid - prevGapEnd;\n\n    // hack to ensure we expand the clip enough to avoid cutting off strokes at edges\n    let maxStrokeWidth = 10;\n    w > 0 && rect(clip, prevGapEnd, plotTop - maxStrokeWidth / 2, w, plotTop + plotHgt + maxStrokeWidth);\n  }\n  return clip;\n}\nfunction addGap(gaps, fromX, toX) {\n  let prevGap = gaps[gaps.length - 1];\n  if (prevGap && prevGap[0] == fromX)\n    // TODO: gaps must be encoded at stroke widths?\n    prevGap[1] = toX;else gaps.push([fromX, toX]);\n}\nfunction findGaps(xs, ys, idx0, idx1, dir, pixelForX, align) {\n  let gaps = [];\n  let len = xs.length;\n  for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n    let yVal = ys[i];\n    if (yVal === null) {\n      let fr = i,\n        to = i;\n      if (dir == 1) {\n        while (++i <= idx1 && ys[i] === null) to = i;\n      } else {\n        while (--i >= idx0 && ys[i] === null) to = i;\n      }\n      let frPx = pixelForX(xs[fr]);\n      let toPx = to == fr ? frPx : pixelForX(xs[to]);\n\n      // if value adjacent to edge null is same pixel, then it's partially\n      // filled and gap should start at next pixel\n      let fri2 = fr - dir;\n      let frPx2 = align <= 0 && fri2 >= 0 && fri2 < len ? pixelForX(xs[fri2]) : frPx;\n      //\tif (frPx2 == frPx)\n      //\t\tfrPx++;\n      //\telse\n      frPx = frPx2;\n      let toi2 = to + dir;\n      let toPx2 = align >= 0 && toi2 >= 0 && toi2 < len ? pixelForX(xs[toi2]) : toPx;\n      //\tif (toPx2 == toPx)\n      //\t\ttoPx--;\n      //\telse\n      toPx = toPx2;\n      if (toPx >= frPx) gaps.push([frPx, toPx]); // addGap\n    }\n  }\n  return gaps;\n}\nfunction pxRoundGen(pxAlign) {\n  return pxAlign == 0 ? retArg0 : pxAlign == 1 ? round : v => incrRound(v, pxAlign);\n}\nfunction rect(ori) {\n  let moveTo = ori == 0 ? moveToH : moveToV;\n  let arcTo = ori == 0 ? (p, x1, y1, x2, y2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  } : (p, y1, x1, y2, x2, r) => {\n    p.arcTo(x1, y1, x2, y2, r);\n  };\n  let rect = ori == 0 ? (p, x, y, w, h) => {\n    p.rect(x, y, w, h);\n  } : (p, y, x, h, w) => {\n    p.rect(x, y, w, h);\n  };\n\n  // TODO (pending better browser support): https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/roundRect\n  return (p, x, y, w, h, endRad = 0, baseRad = 0) => {\n    if (endRad == 0 && baseRad == 0) rect(p, x, y, w, h);else {\n      endRad = min(endRad, w / 2, h / 2);\n      baseRad = min(baseRad, w / 2, h / 2);\n\n      // adapted from https://stackoverflow.com/questions/1255512/how-to-draw-a-rounded-rectangle-using-html-canvas/7838871#7838871\n      moveTo(p, x + endRad, y);\n      arcTo(p, x + w, y, x + w, y + h, endRad);\n      arcTo(p, x + w, y + h, x, y + h, baseRad);\n      arcTo(p, x, y + h, x, y, baseRad);\n      arcTo(p, x, y, x + w, y, endRad);\n      p.closePath();\n    }\n  };\n}\n\n// orientation-inverting canvas functions\nconst moveToH = (p, x, y) => {\n  p.moveTo(x, y);\n};\nconst moveToV = (p, y, x) => {\n  p.moveTo(x, y);\n};\nconst lineToH = (p, x, y) => {\n  p.lineTo(x, y);\n};\nconst lineToV = (p, y, x) => {\n  p.lineTo(x, y);\n};\nconst rectH = rect(0);\nconst rectV = rect(1);\nconst arcH = (p, x, y, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst arcV = (p, y, x, r, startAngle, endAngle) => {\n  p.arc(x, y, r, startAngle, endAngle);\n};\nconst bezierCurveToH = (p, bp1x, bp1y, bp2x, bp2y, p2x, p2y) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\nconst bezierCurveToV = (p, bp1y, bp1x, bp2y, bp2x, p2y, p2x) => {\n  p.bezierCurveTo(bp1x, bp1y, bp2x, bp2y, p2x, p2y);\n};\n\n// TODO: drawWrap(seriesIdx, drawPoints) (save, restore, translate, clip)\nfunction points(opts) {\n  return (u, seriesIdx, idx0, idx1, filtIdxs) => {\n    //\tlog(\"drawPoints()\", arguments);\n\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let {\n        pxRound,\n        points\n      } = series;\n      let moveTo, arc;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        arc = arcH;\n      } else {\n        moveTo = moveToV;\n        arc = arcV;\n      }\n      const width = roundDec(points.width * pxRatio, 3);\n      let rad = (points.size - points.width) / 2 * pxRatio;\n      let dia = roundDec(rad * 2, 3);\n      let fill = new Path2D();\n      let clip = new Path2D();\n      let {\n        left: lft,\n        top: top,\n        width: wid,\n        height: hgt\n      } = u.bbox;\n      rectH(clip, lft - dia, top - dia, wid + dia * 2, hgt + dia * 2);\n      const drawPoint = pi => {\n        if (dataY[pi] != null) {\n          let x = pxRound(valToPosX(dataX[pi], scaleX, xDim, xOff));\n          let y = pxRound(valToPosY(dataY[pi], scaleY, yDim, yOff));\n          moveTo(fill, x + rad, y);\n          arc(fill, x, y, rad, 0, PI * 2);\n        }\n      };\n      if (filtIdxs) filtIdxs.forEach(drawPoint);else {\n        for (let pi = idx0; pi <= idx1; pi++) drawPoint(pi);\n      }\n      return {\n        stroke: width > 0 ? fill : null,\n        fill,\n        clip,\n        flags: BAND_CLIP_FILL | BAND_CLIP_STROKE\n      };\n    });\n  };\n}\nfunction _drawAcc(lineTo) {\n  return (stroke, accX, minY, maxY, inY, outY) => {\n    if (minY != maxY) {\n      if (inY != minY && outY != minY) lineTo(stroke, accX, minY);\n      if (inY != maxY && outY != maxY) lineTo(stroke, accX, maxY);\n      lineTo(stroke, accX, outY);\n    }\n  };\n}\nconst drawAccH = _drawAcc(lineToH);\nconst drawAccV = _drawAcc(lineToV);\nfunction linear(opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo, drawAcc;\n      if (scaleX.ori == 0) {\n        lineTo = lineToH;\n        drawAcc = drawAccH;\n      } else {\n        lineTo = lineToV;\n        drawAcc = drawAccV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let minY = inf,\n        maxY = -inf,\n        inY,\n        outY,\n        drawnAtX;\n      let accX = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n\n      // data edges\n      let lftIdx = nonNullIdx(dataY, idx0, idx1, 1 * dir);\n      let rgtIdx = nonNullIdx(dataY, idx0, idx1, -1 * dir);\n      let lftX = pixelForX(dataX[lftIdx]);\n      let rgtX = pixelForX(dataX[rgtIdx]);\n      let hasGap = false;\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let x = pixelForX(dataX[i]);\n        let yVal = dataY[i];\n        if (x == accX) {\n          if (yVal != null) {\n            outY = pixelForY(yVal);\n            if (minY == inf) {\n              lineTo(stroke, x, outY);\n              inY = outY;\n            }\n            minY = min(outY, minY);\n            maxY = max(outY, maxY);\n          } else {\n            if (yVal === null) hasGap = true;\n          }\n        } else {\n          if (minY != inf) {\n            drawAcc(stroke, accX, minY, maxY, inY, outY);\n            drawnAtX = accX;\n          }\n          if (yVal != null) {\n            outY = pixelForY(yVal);\n            lineTo(stroke, x, outY);\n            minY = maxY = inY = outY;\n          } else {\n            minY = inf;\n            maxY = -inf;\n            if (yVal === null) hasGap = true;\n          }\n          accX = x;\n        }\n      }\n      if (minY != inf && minY != maxY && drawnAtX != accX) drawAcc(stroke, accX, minY, maxY, inY, outY);\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillToVal = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillToVal);\n        lineTo(fill, rgtX, fillToY);\n        lineTo(fill, lftX, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        hasGap && gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\n\n// BUG: align: -1 behaves like align: 1 when scale.dir: -1\nfunction stepped(opts) {\n  const align = ifNull(opts.align, 1);\n  // whether to draw ascenders/descenders at null/gap bondaries\n  const ascDesc = ifNull(opts.ascDesc, false);\n  const alignGaps = ifNull(opts.alignGaps, 0);\n  const extend = ifNull(opts.extend, false);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let {\n        left,\n        width\n      } = u.bbox;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let lineTo = scaleX.ori == 0 ? lineToH : lineToV;\n      const _paths = {\n        stroke: new Path2D(),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      idx0 = nonNullIdx(dataY, idx0, idx1, 1);\n      idx1 = nonNullIdx(dataY, idx0, idx1, -1);\n      let prevYPos = pixelForY(dataY[dir == 1 ? idx0 : idx1]);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let firstXPosExt = firstXPos;\n      if (extend && align == -1) {\n        firstXPosExt = left;\n        lineTo(stroke, firstXPosExt, prevYPos);\n      }\n      lineTo(stroke, firstXPos, prevYPos);\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal1 = dataY[i];\n        if (yVal1 == null) continue;\n        let x1 = pixelForX(dataX[i]);\n        let y1 = pixelForY(yVal1);\n        if (align == 1) lineTo(stroke, x1, prevYPos);else lineTo(stroke, prevXPos, y1);\n        lineTo(stroke, x1, y1);\n        prevYPos = y1;\n        prevXPos = x1;\n      }\n      let prevXPosExt = prevXPos;\n      if (extend && align == 1) {\n        prevXPosExt = left + width;\n        lineTo(stroke, prevXPosExt, prevYPos);\n      }\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPosExt, fillToY);\n        lineTo(fill, firstXPosExt, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        // expand/contract clips for ascenders/descenders\n        let halfStroke = series.width * pxRatio / 2;\n        let startsOffset = ascDesc || align == 1 ? halfStroke : -halfStroke;\n        let endsOffset = ascDesc || align == -1 ? -halfStroke : halfStroke;\n        gaps.forEach(g => {\n          g[0] += startsOffset;\n          g[1] += endsOffset;\n        });\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n    });\n  };\n}\nfunction findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid = inf) {\n  if (dataX.length > 1) {\n    // prior index with non-undefined y data\n    let prevIdx = null;\n\n    // scan full dataset for smallest adjacent delta\n    // will not work properly for non-linear x scales, since does not do expensive valToPosX calcs till end\n    for (let i = 0, minDelta = Infinity; i < dataX.length; i++) {\n      if (dataY[i] !== undefined) {\n        if (prevIdx != null) {\n          let delta = abs(dataX[i] - dataX[prevIdx]);\n          if (delta < minDelta) {\n            minDelta = delta;\n            colWid = abs(valToPosX(dataX[i], scaleX, xDim, xOff) - valToPosX(dataX[prevIdx], scaleX, xDim, xOff));\n          }\n        }\n        prevIdx = i;\n      }\n    }\n  }\n  return colWid;\n}\nfunction bars(opts) {\n  opts = opts || EMPTY_OBJ;\n  const size = ifNull(opts.size, [0.6, inf, 1]);\n  const align = opts.align || 0;\n  const _extraGap = opts.gap || 0;\n  let ro = opts.radius;\n  ro =\n  // [valueRadius, baselineRadius]\n  ro == null ? [0, 0] : typeof ro == 'number' ? [ro, 0] : ro;\n  const radiusFn = fnOrSelf(ro);\n  const gapFactor = 1 - size[0];\n  const _maxWidth = ifNull(size[1], inf);\n  const _minWidth = ifNull(size[2], 1);\n  const disp = ifNull(opts.disp, EMPTY_OBJ);\n  const _each = ifNull(opts.each, _ => {});\n  const {\n    fill: dispFills,\n    stroke: dispStrokes\n  } = disp;\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let _align = align;\n      let extraGap = _extraGap * pxRatio;\n      let maxWidth = _maxWidth * pxRatio;\n      let minWidth = _minWidth * pxRatio;\n      let valRadius, baseRadius;\n      if (scaleX.ori == 0) [valRadius, baseRadius] = radiusFn(u, seriesIdx);else [baseRadius, valRadius] = radiusFn(u, seriesIdx);\n      const _dirX = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      //\tconst _dirY = scaleY.dir * (scaleY.ori == 1 ? 1 : -1);\n\n      let rect = scaleX.ori == 0 ? rectH : rectV;\n      let each = scaleX.ori == 0 ? _each : (u, seriesIdx, i, top, lft, hgt, wid) => {\n        _each(u, seriesIdx, i, lft, top, wid, hgt);\n      };\n\n      // band where this series is the \"from\" edge\n      let band = ifNull(u.bands, EMPTY_ARR).find(b => b.series[0] == seriesIdx);\n      let fillDir = band != null ? band.dir : 0;\n      let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, fillDir);\n      let fillToY = pxRound(valToPosY(fillTo, scaleY, yDim, yOff));\n\n      // barWid is to center of stroke\n      let xShift,\n        barWid,\n        fullGap,\n        colWid = xDim;\n      let strokeWidth = pxRound(series.width * pxRatio);\n      let multiPath = false;\n      let fillColors = null;\n      let fillPaths = null;\n      let strokeColors = null;\n      let strokePaths = null;\n      if (dispFills != null && (strokeWidth == 0 || dispStrokes != null)) {\n        multiPath = true;\n        fillColors = dispFills.values(u, seriesIdx, idx0, idx1);\n        fillPaths = new Map();\n        new Set(fillColors).forEach(color => {\n          if (color != null) fillPaths.set(color, new Path2D());\n        });\n        if (strokeWidth > 0) {\n          strokeColors = dispStrokes.values(u, seriesIdx, idx0, idx1);\n          strokePaths = new Map();\n          new Set(strokeColors).forEach(color => {\n            if (color != null) strokePaths.set(color, new Path2D());\n          });\n        }\n      }\n      let {\n        x0,\n        size\n      } = disp;\n      if (x0 != null && size != null) {\n        _align = 1;\n        dataX = x0.values(u, seriesIdx, idx0, idx1);\n        if (x0.unit == 2) dataX = dataX.map(pct => u.posToVal(xOff + pct * xDim, scaleX.key, true));\n\n        // assumes uniform sizes, for now\n        let sizes = size.values(u, seriesIdx, idx0, idx1);\n        if (size.unit == 2) barWid = sizes[0] * xDim;else barWid = valToPosX(sizes[0], scaleX, xDim, xOff) - valToPosX(0, scaleX, xDim, xOff); // assumes linear scale (delta from 0)\n\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid - barWid;\n        fullGap = gapWid + extraGap;\n      } else {\n        colWid = findColWidth(dataX, dataY, valToPosX, scaleX, xDim, xOff, colWid);\n        let gapWid = colWid * gapFactor;\n        fullGap = gapWid + extraGap;\n        barWid = colWid - fullGap;\n      }\n      if (fullGap < 1) fullGap = 0;\n      if (strokeWidth >= barWid / 2) strokeWidth = 0;\n\n      // for small gaps, disable pixel snapping since gap inconsistencies become noticible and annoying\n      if (fullGap < 5) pxRound = retArg0;\n      let insetStroke = fullGap > 0;\n      let rawBarWid = colWid - fullGap - (insetStroke ? strokeWidth : 0);\n      barWid = pxRound(clamp(rawBarWid, minWidth, maxWidth));\n      xShift = (_align == 0 ? barWid / 2 : _align == _dirX ? 0 : barWid) - _align * _dirX * ((_align == 0 ? extraGap / 2 : 0) + (insetStroke ? strokeWidth / 2 : 0));\n      const _paths = {\n        stroke: null,\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: 0\n      }; // disp, geom\n\n      const stroke = multiPath ? null : new Path2D();\n      let dataY0 = null;\n      if (band != null) dataY0 = u.data[band.series[1]];else {\n        let {\n          y0,\n          y1\n        } = disp;\n        if (y0 != null && y1 != null) {\n          dataY = y1.values(u, seriesIdx, idx0, idx1);\n          dataY0 = y0.values(u, seriesIdx, idx0, idx1);\n        }\n      }\n      let radVal = valRadius * barWid;\n      let radBase = baseRadius * barWid;\n      for (let i = _dirX == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += _dirX) {\n        let yVal = dataY[i];\n        if (yVal == null) continue;\n        if (dataY0 != null) {\n          let yVal0 = dataY0[i] ?? 0;\n          if (yVal - yVal0 == 0) continue;\n          fillToY = valToPosY(yVal0, scaleY, yDim, yOff);\n        }\n        let xVal = scaleX.distr != 2 || disp != null ? dataX[i] : i;\n\n        // TODO: all xPos can be pre-computed once for all series in aligned set\n        let xPos = valToPosX(xVal, scaleX, xDim, xOff);\n        let yPos = valToPosY(ifNull(yVal, fillTo), scaleY, yDim, yOff);\n        let lft = pxRound(xPos - xShift);\n        let btm = pxRound(max(yPos, fillToY));\n        let top = pxRound(min(yPos, fillToY));\n        // this includes the stroke\n        let barHgt = btm - top;\n        if (yVal != null) {\n          // && yVal != fillTo (0 height bar)\n          let rv = yVal < 0 ? radBase : radVal;\n          let rb = yVal < 0 ? radVal : radBase;\n          if (multiPath) {\n            if (strokeWidth > 0 && strokeColors[i] != null) rect(strokePaths.get(strokeColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n            if (fillColors[i] != null) rect(fillPaths.get(fillColors[i]), lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          } else rect(stroke, lft, top + floor(strokeWidth / 2), barWid, max(0, barHgt - strokeWidth), rv, rb);\n          each(u, seriesIdx, i, lft - strokeWidth / 2, top, barWid + strokeWidth, barHgt);\n        }\n      }\n      if (strokeWidth > 0) _paths.stroke = multiPath ? strokePaths : stroke;else if (!multiPath) {\n        _paths._fill = series.width == 0 ? series._fill : series._stroke ?? series._fill;\n        _paths.width = 0;\n      }\n      _paths.fill = multiPath ? fillPaths : stroke;\n      return _paths;\n    });\n  };\n}\nfunction splineInterp(interp, opts) {\n  const alignGaps = ifNull(opts?.alignGaps, 0);\n  return (u, seriesIdx, idx0, idx1) => {\n    return orient(u, seriesIdx, (series, dataX, dataY, scaleX, scaleY, valToPosX, valToPosY, xOff, yOff, xDim, yDim) => {\n      let pxRound = series.pxRound;\n      let pixelForX = val => pxRound(valToPosX(val, scaleX, xDim, xOff));\n      let pixelForY = val => pxRound(valToPosY(val, scaleY, yDim, yOff));\n      let moveTo, bezierCurveTo, lineTo;\n      if (scaleX.ori == 0) {\n        moveTo = moveToH;\n        lineTo = lineToH;\n        bezierCurveTo = bezierCurveToH;\n      } else {\n        moveTo = moveToV;\n        lineTo = lineToV;\n        bezierCurveTo = bezierCurveToV;\n      }\n      const dir = scaleX.dir * (scaleX.ori == 0 ? 1 : -1);\n      idx0 = nonNullIdx(dataY, idx0, idx1, 1);\n      idx1 = nonNullIdx(dataY, idx0, idx1, -1);\n      let firstXPos = pixelForX(dataX[dir == 1 ? idx0 : idx1]);\n      let prevXPos = firstXPos;\n      let xCoords = [];\n      let yCoords = [];\n      for (let i = dir == 1 ? idx0 : idx1; i >= idx0 && i <= idx1; i += dir) {\n        let yVal = dataY[i];\n        if (yVal != null) {\n          let xVal = dataX[i];\n          let xPos = pixelForX(xVal);\n          xCoords.push(prevXPos = xPos);\n          yCoords.push(pixelForY(dataY[i]));\n        }\n      }\n      const _paths = {\n        stroke: interp(xCoords, yCoords, moveTo, lineTo, bezierCurveTo, pxRound),\n        fill: null,\n        clip: null,\n        band: null,\n        gaps: null,\n        flags: BAND_CLIP_FILL\n      };\n      const stroke = _paths.stroke;\n      let [bandFillDir, bandClipDir] = bandFillClipDirs(u, seriesIdx);\n      if (series.fill != null || bandFillDir != 0) {\n        let fill = _paths.fill = new Path2D(stroke);\n        let fillTo = series.fillTo(u, seriesIdx, series.min, series.max, bandFillDir);\n        let fillToY = pixelForY(fillTo);\n        lineTo(fill, prevXPos, fillToY);\n        lineTo(fill, firstXPos, fillToY);\n      }\n      if (!series.spanGaps) {\n        //\tconsole.time('gaps');\n        let gaps = [];\n        gaps.push(...findGaps(dataX, dataY, idx0, idx1, dir, pixelForX, alignGaps));\n\n        //\tconsole.timeEnd('gaps');\n\n        //\tconsole.log('gaps', JSON.stringify(gaps));\n\n        _paths.gaps = gaps = series.gaps(u, seriesIdx, idx0, idx1, gaps);\n        _paths.clip = clipGaps(gaps, scaleX.ori, xOff, yOff, xDim, yDim);\n      }\n      if (bandClipDir != 0) {\n        _paths.band = bandClipDir == 2 ? [clipBandLine(u, seriesIdx, idx0, idx1, stroke, -1), clipBandLine(u, seriesIdx, idx0, idx1, stroke, 1)] : clipBandLine(u, seriesIdx, idx0, idx1, stroke, bandClipDir);\n      }\n      return _paths;\n\n      //  if FEAT_PATHS: false in rollup.config.js\n      //\tu.ctx.save();\n      //\tu.ctx.beginPath();\n      //\tu.ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n      //\tu.ctx.clip();\n      //\tu.ctx.strokeStyle = u.series[sidx].stroke;\n      //\tu.ctx.stroke(stroke);\n      //\tu.ctx.fillStyle = u.series[sidx].fill;\n      //\tu.ctx.fill(fill);\n      //\tu.ctx.restore();\n      //\treturn null;\n    });\n  };\n}\nfunction monotoneCubic(opts) {\n  return splineInterp(_monotoneCubic, opts);\n}\n\n// Monotone Cubic Spline interpolation, adapted from the Chartist.js implementation:\n// https://github.com/gionkunz/chartist-js/blob/e7e78201bffe9609915e5e53cfafa29a5d6c49f9/src/scripts/interpolation.js#L240-L369\nfunction _monotoneCubic(xs, ys, moveTo, lineTo, bezierCurveTo, pxRound) {\n  const n = xs.length;\n  if (n < 2) return null;\n  const path = new Path2D();\n  moveTo(path, xs[0], ys[0]);\n  if (n == 2) lineTo(path, xs[1], ys[1]);else {\n    let ms = Array(n),\n      ds = Array(n - 1),\n      dys = Array(n - 1),\n      dxs = Array(n - 1);\n\n    // calc deltas and derivative\n    for (let i = 0; i < n - 1; i++) {\n      dys[i] = ys[i + 1] - ys[i];\n      dxs[i] = xs[i + 1] - xs[i];\n      ds[i] = dys[i] / dxs[i];\n    }\n\n    // determine desired slope (m) at each point using Fritsch-Carlson method\n    // http://math.stackexchange.com/questions/45218/implementation-of-monotone-cubic-interpolation\n    ms[0] = ds[0];\n    for (let i = 1; i < n - 1; i++) {\n      if (ds[i] === 0 || ds[i - 1] === 0 || ds[i - 1] > 0 !== ds[i] > 0) ms[i] = 0;else {\n        ms[i] = 3 * (dxs[i - 1] + dxs[i]) / ((2 * dxs[i] + dxs[i - 1]) / ds[i - 1] + (dxs[i] + 2 * dxs[i - 1]) / ds[i]);\n        if (!isFinite(ms[i])) ms[i] = 0;\n      }\n    }\n    ms[n - 1] = ds[n - 2];\n    for (let i = 0; i < n - 1; i++) {\n      bezierCurveTo(path, xs[i] + dxs[i] / 3, ys[i] + ms[i] * dxs[i] / 3, xs[i + 1] - dxs[i] / 3, ys[i + 1] - ms[i + 1] * dxs[i] / 3, xs[i + 1], ys[i + 1]);\n    }\n  }\n  return path;\n}\nconst cursorPlots = new Set();\nfunction invalidateRects() {\n  for (let u of cursorPlots) u.syncRect(true);\n}\nif (domEnv) {\n  on(resize, win, invalidateRects);\n  on(scroll, win, invalidateRects, true);\n  on(dppxchange, win, () => {\n    uPlot.pxRatio = pxRatio;\n  });\n}\nconst linearPath = linear();\nconst pointsPath = points();\nfunction setDefaults(d, xo, yo, initY) {\n  let d2 = initY ? [d[0], d[1]].concat(d.slice(2)) : [d[0]].concat(d.slice(1));\n  return d2.map((o, i) => setDefault(o, i, xo, yo));\n}\nfunction setDefaults2(d, xyo) {\n  return d.map((o, i) => i == 0 ? null : assign({}, xyo, o)); // todo: assign() will not merge facet arrays\n}\nfunction setDefault(o, i, xo, yo) {\n  return assign({}, i == 0 ? xo : yo, o);\n}\nfunction snapNumX(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : [dataMin, dataMax];\n}\nconst snapTimeX = snapNumX;\n\n// this ensures that non-temporal/numeric y-axes get multiple-snapped padding added above/below\n// TODO: also account for incrs when snapping to ensure top of axis gets a tick & value\nfunction snapNumY(self, dataMin, dataMax) {\n  return dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, rangePad, true);\n}\nfunction snapLogY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeLog(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapLogX = snapLogY;\nfunction snapAsinhY(self, dataMin, dataMax, scale) {\n  return dataMin == null ? nullNullTuple : rangeAsinh(dataMin, dataMax, self.scales[scale].log, false);\n}\nconst snapAsinhX = snapAsinhY;\n\n// dim is logical (getClientBoundingRect) pixels, not canvas pixels\nfunction findIncr(minVal, maxVal, incrs, dim, minSpace) {\n  let intDigits = max(numIntDigits(minVal), numIntDigits(maxVal));\n  let delta = maxVal - minVal;\n  let incrIdx = closestIdx(minSpace / dim * delta, incrs);\n  do {\n    let foundIncr = incrs[incrIdx];\n    let foundSpace = dim * foundIncr / delta;\n    if (foundSpace >= minSpace && intDigits + (foundIncr < 5 ? fixedDec.get(foundIncr) : 0) <= 17) return [foundIncr, foundSpace];\n  } while (++incrIdx < incrs.length);\n  return [0, 0];\n}\nfunction pxRatioFont(font) {\n  let fontSize, fontSizeCss;\n  font = font.replace(/(\\d+)px/, (m, p1) => (fontSize = round((fontSizeCss = +p1) * pxRatio)) + 'px');\n  return [font, fontSize, fontSizeCss];\n}\nfunction syncFontSize(axis) {\n  if (axis.show) {\n    [axis.font, axis.labelFont].forEach(f => {\n      let size = roundDec(f[2] * pxRatio, 1);\n      f[0] = f[0].replace(/[0-9.]+px/, size + 'px');\n      f[1] = size;\n    });\n  }\n}\nfunction uPlot(opts, data, then) {\n  const self = {\n    mode: ifNull(opts.mode, 1)\n  };\n  const mode = self.mode;\n\n  // TODO: cache denoms & mins scale.cache = {r, min, }\n  function getValPct(val, scale) {\n    let _val = scale.distr == 3 ? log10(val > 0 ? val : scale.clamp(self, val, scale.min, scale.max, scale.key)) : scale.distr == 4 ? asinh(val, scale.asinh) : val;\n    return (_val - scale._min) / (scale._max - scale._min);\n  }\n  function getHPos(val, scale, dim, off) {\n    let pct = getValPct(val, scale);\n    return off + dim * (scale.dir == -1 ? 1 - pct : pct);\n  }\n  function getVPos(val, scale, dim, off) {\n    let pct = getValPct(val, scale);\n    return off + dim * (scale.dir == -1 ? pct : 1 - pct);\n  }\n  function getPos(val, scale, dim, off) {\n    return scale.ori == 0 ? getHPos(val, scale, dim, off) : getVPos(val, scale, dim, off);\n  }\n  self.valToPosH = getHPos;\n  self.valToPosV = getVPos;\n  let ready = false;\n  self.status = 0;\n  const root = self.root = placeDiv(UPLOT);\n  if (opts.id != null) root.id = opts.id;\n  addClass(root, opts.class);\n  if (opts.title) {\n    let title = placeDiv(TITLE, root);\n    title.textContent = opts.title;\n  }\n  const can = placeTag(\"canvas\");\n  const ctx = self.ctx = can.getContext(\"2d\");\n  const wrap = placeDiv(WRAP, root);\n  on(\"click\", wrap, e => {\n    if (e.target === over) {\n      let didDrag = mouseLeft1 != mouseLeft0 || mouseTop1 != mouseTop0;\n      didDrag && drag.click(self, e);\n    }\n  }, true);\n  const under = self.under = placeDiv(UNDER, wrap);\n  wrap.appendChild(can);\n  const over = self.over = placeDiv(OVER, wrap);\n  opts = copy(opts);\n  const pxAlign = +ifNull(opts.pxAlign, 1);\n  const pxRound = pxRoundGen(pxAlign);\n  (opts.plugins || []).forEach(p => {\n    if (p.opts) opts = p.opts(self, opts) || opts;\n  });\n  const ms = opts.ms || 1e-3;\n  const series = self.series = mode == 1 ? setDefaults(opts.series || [], xSeriesOpts, ySeriesOpts, false) : setDefaults2(opts.series || [null], xySeriesOpts);\n  const axes = self.axes = setDefaults(opts.axes || [], xAxisOpts, yAxisOpts, true);\n  const scales = self.scales = {};\n  const bands = self.bands = opts.bands || [];\n  bands.forEach(b => {\n    b.fill = fnOrSelf(b.fill || null);\n    b.dir = ifNull(b.dir, -1);\n  });\n  const xScaleKey = mode == 2 ? series[1].facets[0].scale : series[0].scale;\n  const drawOrderMap = {\n    axes: drawAxesGrid,\n    series: drawSeries\n  };\n  const drawOrder = (opts.drawOrder || [\"axes\", \"series\"]).map(key => drawOrderMap[key]);\n  function initScale(scaleKey) {\n    let sc = scales[scaleKey];\n    if (sc == null) {\n      let scaleOpts = (opts.scales || EMPTY_OBJ)[scaleKey] || EMPTY_OBJ;\n      if (scaleOpts.from != null) {\n        // ensure parent is initialized\n        initScale(scaleOpts.from);\n        // dependent scales inherit\n        scales[scaleKey] = assign({}, scales[scaleOpts.from], scaleOpts, {\n          key: scaleKey\n        });\n      } else {\n        sc = scales[scaleKey] = assign({}, scaleKey == xScaleKey ? xScaleOpts : yScaleOpts, scaleOpts);\n        sc.key = scaleKey;\n        let isTime = sc.time;\n        let rn = sc.range;\n        let rangeIsArr = isArr(rn);\n        if (scaleKey != xScaleKey || mode == 2 && !isTime) {\n          // if range array has null limits, it should be auto\n          if (rangeIsArr && (rn[0] == null || rn[1] == null)) {\n            rn = {\n              min: rn[0] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[0],\n                soft: rn[0]\n              },\n              max: rn[1] == null ? autoRangePart : {\n                mode: 1,\n                hard: rn[1],\n                soft: rn[1]\n              }\n            };\n            rangeIsArr = false;\n          }\n          if (!rangeIsArr && isObj(rn)) {\n            let cfg = rn;\n            // this is similar to snapNumY\n            rn = (self, dataMin, dataMax) => dataMin == null ? nullNullTuple : rangeNum(dataMin, dataMax, cfg);\n          }\n        }\n        sc.range = fnOrSelf(rn || (isTime ? snapTimeX : scaleKey == xScaleKey ? sc.distr == 3 ? snapLogX : sc.distr == 4 ? snapAsinhX : snapNumX : sc.distr == 3 ? snapLogY : sc.distr == 4 ? snapAsinhY : snapNumY));\n        sc.auto = fnOrSelf(rangeIsArr ? false : sc.auto);\n        sc.clamp = fnOrSelf(sc.clamp || clampScale);\n\n        // caches for expensive ops like asinh() & log()\n        sc._min = sc._max = null;\n      }\n    }\n  }\n  initScale(\"x\");\n  initScale(\"y\");\n\n  // TODO: init scales from facets in mode: 2\n  if (mode == 1) {\n    series.forEach(s => {\n      initScale(s.scale);\n    });\n  }\n  axes.forEach(a => {\n    initScale(a.scale);\n  });\n  for (let k in opts.scales) initScale(k);\n  const scaleX = scales[xScaleKey];\n  const xScaleDistr = scaleX.distr;\n  let valToPosX, valToPosY;\n  if (scaleX.ori == 0) {\n    addClass(root, ORI_HZ);\n    valToPosX = getHPos;\n    valToPosY = getVPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotWid;\n    \txOffCan = plotLft;\n    \tyDimCan = plotHgt;\n    \tyOffCan = plotTop;\n    \t\txDimCss = plotWidCss;\n    \txOffCss = plotLftCss;\n    \tyDimCss = plotHgtCss;\n    \tyOffCss = plotTopCss;\n    };\n    */\n  } else {\n    addClass(root, ORI_VT);\n    valToPosX = getVPos;\n    valToPosY = getHPos;\n    /*\n    updOriDims = () => {\n    \txDimCan = plotHgt;\n    \txOffCan = plotTop;\n    \tyDimCan = plotWid;\n    \tyOffCan = plotLft;\n    \t\txDimCss = plotHgtCss;\n    \txOffCss = plotTopCss;\n    \tyDimCss = plotWidCss;\n    \tyOffCss = plotLftCss;\n    };\n    */\n  }\n  const pendScales = {};\n\n  // explicitly-set initial scales\n  for (let k in scales) {\n    let sc = scales[k];\n    if (sc.min != null || sc.max != null) {\n      pendScales[k] = {\n        min: sc.min,\n        max: sc.max\n      };\n      sc.min = sc.max = null;\n    }\n  }\n\n  //\tself.tz = opts.tz || Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const _tzDate = opts.tzDate || (ts => new Date(round(ts / ms)));\n  const _fmtDate = opts.fmtDate || fmtDate;\n  const _timeAxisSplits = ms == 1 ? timeAxisSplitsMs(_tzDate) : timeAxisSplitsS(_tzDate);\n  const _timeAxisVals = timeAxisVals(_tzDate, timeAxisStamps(ms == 1 ? _timeAxisStampsMs : _timeAxisStampsS, _fmtDate));\n  const _timeSeriesVal = timeSeriesVal(_tzDate, timeSeriesStamp(_timeSeriesStamp, _fmtDate));\n  const activeIdxs = [];\n  const legend = self.legend = assign({}, legendOpts, opts.legend);\n  const showLegend = legend.show;\n  const markers = legend.markers;\n  {\n    legend.idxs = activeIdxs;\n    markers.width = fnOrSelf(markers.width);\n    markers.dash = fnOrSelf(markers.dash);\n    markers.stroke = fnOrSelf(markers.stroke);\n    markers.fill = fnOrSelf(markers.fill);\n  }\n  let legendTable;\n  let legendHead;\n  let legendBody;\n  let legendRows = [];\n  let legendCells = [];\n  let legendCols;\n  let multiValLegend = false;\n  let NULL_LEGEND_VALUES = {};\n  if (legend.live) {\n    const getMultiVals = series[1] ? series[1].values : null;\n    multiValLegend = getMultiVals != null;\n    legendCols = multiValLegend ? getMultiVals(self, 1, 0) : {\n      _: 0\n    };\n    for (let k in legendCols) NULL_LEGEND_VALUES[k] = LEGEND_DISP;\n  }\n  if (showLegend) {\n    legendTable = placeTag(\"table\", LEGEND, root);\n    legendBody = placeTag(\"tbody\", null, legendTable);\n\n    // allows legend to be moved out of root\n    legend.mount(self, legendTable);\n    if (multiValLegend) {\n      legendHead = placeTag(\"thead\", null, legendTable, legendBody);\n      let head = placeTag(\"tr\", null, legendHead);\n      placeTag(\"th\", null, head);\n      for (var key in legendCols) placeTag(\"th\", LEGEND_LABEL, head).textContent = key;\n    } else {\n      addClass(legendTable, LEGEND_INLINE);\n      legend.live && addClass(legendTable, LEGEND_LIVE);\n    }\n  }\n  const son = {\n    show: true\n  };\n  const soff = {\n    show: false\n  };\n  function initLegendRow(s, i) {\n    if (i == 0 && (multiValLegend || !legend.live || mode == 2)) return nullNullTuple;\n    let cells = [];\n    let row = placeTag(\"tr\", LEGEND_SERIES, legendBody, legendBody.childNodes[i]);\n    addClass(row, s.class);\n    if (!s.show) addClass(row, OFF);\n    let label = placeTag(\"th\", null, row);\n    if (markers.show) {\n      let indic = placeDiv(LEGEND_MARKER, label);\n      if (i > 0) {\n        let width = markers.width(self, i);\n        if (width) indic.style.border = width + \"px \" + markers.dash(self, i) + \" \" + markers.stroke(self, i);\n        indic.style.background = markers.fill(self, i);\n      }\n    }\n    let text = placeDiv(LEGEND_LABEL, label);\n    text.textContent = s.label;\n    if (i > 0) {\n      if (!markers.show) text.style.color = s.width > 0 ? markers.stroke(self, i) : markers.fill(self, i);\n      onMouse(\"click\", label, e => {\n        if (cursor._lock) return;\n        setCursorEvent(e);\n        let seriesIdx = series.indexOf(s);\n        if ((e.ctrlKey || e.metaKey) != legend.isolate) {\n          // if any other series is shown, isolate this one. else show all\n          let isolate = series.some((s, i) => i > 0 && i != seriesIdx && s.show);\n          series.forEach((s, i) => {\n            i > 0 && setSeries(i, isolate ? i == seriesIdx ? son : soff : son, true, syncOpts.setSeries);\n          });\n        } else setSeries(seriesIdx, {\n          show: !s.show\n        }, true, syncOpts.setSeries);\n      }, false);\n      if (cursorFocus) {\n        onMouse(mouseenter, label, e => {\n          if (cursor._lock) return;\n          setCursorEvent(e);\n          setSeries(series.indexOf(s), FOCUS_TRUE, true, syncOpts.setSeries);\n        }, false);\n      }\n    }\n    for (var key in legendCols) {\n      let v = placeTag(\"td\", LEGEND_VALUE, row);\n      v.textContent = \"--\";\n      cells.push(v);\n    }\n    return [row, cells];\n  }\n  const mouseListeners = new Map();\n  function onMouse(ev, targ, fn, onlyTarg = true) {\n    const targListeners = mouseListeners.get(targ) || {};\n    const listener = cursor.bind[ev](self, targ, fn, onlyTarg);\n    if (listener) {\n      on(ev, targ, targListeners[ev] = listener);\n      mouseListeners.set(targ, targListeners);\n    }\n  }\n  function offMouse(ev, targ, fn) {\n    const targListeners = mouseListeners.get(targ) || {};\n    for (let k in targListeners) {\n      if (ev == null || k == ev) {\n        off(k, targ, targListeners[k]);\n        delete targListeners[k];\n      }\n    }\n    if (ev == null) mouseListeners.delete(targ);\n  }\n  let fullWidCss = 0;\n  let fullHgtCss = 0;\n  let plotWidCss = 0;\n  let plotHgtCss = 0;\n\n  // plot margins to account for axes\n  let plotLftCss = 0;\n  let plotTopCss = 0;\n\n  // previous values for diffing\n  let _plotLftCss = plotLftCss;\n  let _plotTopCss = plotTopCss;\n  let _plotWidCss = plotWidCss;\n  let _plotHgtCss = plotHgtCss;\n  let plotLft = 0;\n  let plotTop = 0;\n  let plotWid = 0;\n  let plotHgt = 0;\n  self.bbox = {};\n  let shouldSetScales = false;\n  let shouldSetSize = false;\n  let shouldConvergeSize = false;\n  let shouldSetCursor = false;\n  let shouldSetSelect = false;\n  let shouldSetLegend = false;\n  function _setSize(width, height, force) {\n    if (force || width != self.width || height != self.height) calcSize(width, height);\n    resetYSeries(false);\n    shouldConvergeSize = true;\n    shouldSetSize = true;\n    commit();\n  }\n  function calcSize(width, height) {\n    //\tlog(\"calcSize()\", arguments);\n\n    self.width = fullWidCss = plotWidCss = width;\n    self.height = fullHgtCss = plotHgtCss = height;\n    plotLftCss = plotTopCss = 0;\n    calcPlotRect();\n    calcAxesRects();\n    let bb = self.bbox;\n    plotLft = bb.left = incrRound(plotLftCss * pxRatio, 0.5);\n    plotTop = bb.top = incrRound(plotTopCss * pxRatio, 0.5);\n    plotWid = bb.width = incrRound(plotWidCss * pxRatio, 0.5);\n    plotHgt = bb.height = incrRound(plotHgtCss * pxRatio, 0.5);\n\n    //\tupdOriDims();\n  }\n\n  // ensures size calc convergence\n  const CYCLE_LIMIT = 3;\n  function convergeSize() {\n    let converged = false;\n    let cycleNum = 0;\n    while (!converged) {\n      cycleNum++;\n      let axesConverged = axesCalc(cycleNum);\n      let paddingConverged = paddingCalc(cycleNum);\n      converged = cycleNum == CYCLE_LIMIT || axesConverged && paddingConverged;\n      if (!converged) {\n        calcSize(self.width, self.height);\n        shouldSetSize = true;\n      }\n    }\n  }\n  function setSize({\n    width,\n    height\n  }) {\n    _setSize(width, height);\n  }\n  self.setSize = setSize;\n\n  // accumulate axis offsets, reduce canvas width\n  function calcPlotRect() {\n    // easements for edge labels\n    let hasTopAxis = false;\n    let hasBtmAxis = false;\n    let hasRgtAxis = false;\n    let hasLftAxis = false;\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let {\n          side,\n          _size\n        } = axis;\n        let isVt = side % 2;\n        let labelSize = axis.label != null ? axis.labelSize : 0;\n        let fullSize = _size + labelSize;\n        if (fullSize > 0) {\n          if (isVt) {\n            plotWidCss -= fullSize;\n            if (side == 3) {\n              plotLftCss += fullSize;\n              hasLftAxis = true;\n            } else hasRgtAxis = true;\n          } else {\n            plotHgtCss -= fullSize;\n            if (side == 0) {\n              plotTopCss += fullSize;\n              hasTopAxis = true;\n            } else hasBtmAxis = true;\n          }\n        }\n      }\n    });\n    sidesWithAxes[0] = hasTopAxis;\n    sidesWithAxes[1] = hasRgtAxis;\n    sidesWithAxes[2] = hasBtmAxis;\n    sidesWithAxes[3] = hasLftAxis;\n\n    // hz padding\n    plotWidCss -= _padding[1] + _padding[3];\n    plotLftCss += _padding[3];\n\n    // vt padding\n    plotHgtCss -= _padding[2] + _padding[0];\n    plotTopCss += _padding[0];\n  }\n  function calcAxesRects() {\n    // will accum +\n    let off1 = plotLftCss + plotWidCss;\n    let off2 = plotTopCss + plotHgtCss;\n    // will accum -\n    let off3 = plotLftCss;\n    let off0 = plotTopCss;\n    function incrOffset(side, size) {\n      switch (side) {\n        case 1:\n          off1 += size;\n          return off1 - size;\n        case 2:\n          off2 += size;\n          return off2 - size;\n        case 3:\n          off3 -= size;\n          return off3 + size;\n        case 0:\n          off0 -= size;\n          return off0 + size;\n      }\n    }\n    axes.forEach((axis, i) => {\n      if (axis.show && axis._show) {\n        let side = axis.side;\n        axis._pos = incrOffset(side, axis._size);\n        if (axis.label != null) axis._lpos = incrOffset(side, axis.labelSize);\n      }\n    });\n  }\n  const cursor = self.cursor = assign({}, cursorOpts, {\n    drag: {\n      y: mode == 2\n    }\n  }, opts.cursor);\n  if (cursor.dataIdx == null) {\n    let hov = cursor.hover;\n    let skip = hov.skip = new Set(hov.skip ?? []);\n    skip.add(void 0); // alignment artifacts\n    let prox = hov.prox = fnOrSelf(hov.prox);\n    let bias = hov.bias ??= 0;\n\n    // TODO: only scan between in-view idxs (i0, i1)\n    cursor.dataIdx = (self, seriesIdx, cursorIdx, valAtPosX) => {\n      if (seriesIdx == 0) return cursorIdx;\n      let idx2 = cursorIdx;\n      let _prox = prox(self, seriesIdx, cursorIdx, valAtPosX) ?? inf;\n      let withProx = _prox >= 0 && _prox < inf;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n      let cursorLft = cursor.left;\n      let xValues = data[0];\n      let yValues = data[seriesIdx];\n      if (skip.has(yValues[cursorIdx])) {\n        idx2 = null;\n        let nonNullLft = null,\n          nonNullRgt = null,\n          j;\n        if (bias == 0 || bias == -1) {\n          j = cursorIdx;\n          while (nonNullLft == null && j-- > 0) {\n            if (!skip.has(yValues[j])) nonNullLft = j;\n          }\n        }\n        if (bias == 0 || bias == 1) {\n          j = cursorIdx;\n          while (nonNullRgt == null && j++ < yValues.length) {\n            if (!skip.has(yValues[j])) nonNullRgt = j;\n          }\n        }\n        if (nonNullLft != null || nonNullRgt != null) {\n          if (withProx) {\n            let lftPos = nonNullLft == null ? -Infinity : valToPosX(xValues[nonNullLft], scaleX, xDim, 0);\n            let rgtPos = nonNullRgt == null ? Infinity : valToPosX(xValues[nonNullRgt], scaleX, xDim, 0);\n            let lftDelta = cursorLft - lftPos;\n            let rgtDelta = rgtPos - cursorLft;\n            if (lftDelta <= rgtDelta) {\n              if (lftDelta <= _prox) idx2 = nonNullLft;\n            } else {\n              if (rgtDelta <= _prox) idx2 = nonNullRgt;\n            }\n          } else {\n            idx2 = nonNullRgt == null ? nonNullLft : nonNullLft == null ? nonNullRgt : cursorIdx - nonNullLft <= nonNullRgt - cursorIdx ? nonNullLft : nonNullRgt;\n          }\n        }\n      } else if (withProx) {\n        let dist = abs(cursorLft - valToPosX(xValues[cursorIdx], scaleX, xDim, 0));\n        if (dist > _prox) idx2 = null;\n      }\n      return idx2;\n    };\n  }\n  const setCursorEvent = e => {\n    cursor.event = e;\n  };\n  cursor.idxs = activeIdxs;\n  cursor._lock = false;\n  let points = cursor.points;\n  points.show = fnOrSelf(points.show);\n  points.size = fnOrSelf(points.size);\n  points.stroke = fnOrSelf(points.stroke);\n  points.width = fnOrSelf(points.width);\n  points.fill = fnOrSelf(points.fill);\n  const focus = self.focus = assign({}, opts.focus || {\n    alpha: 0.3\n  }, cursor.focus);\n  const cursorFocus = focus.prox >= 0;\n\n  // series-intersection markers\n  let cursorPts = [null];\n  // position caches in CSS pixels\n  let cursorPtsLft = [null];\n  let cursorPtsTop = [null];\n  function initCursorPt(s, si) {\n    if (si > 0) {\n      let pt = cursor.points.show(self, si);\n      if (pt) {\n        addClass(pt, CURSOR_PT);\n        addClass(pt, s.class);\n        elTrans(pt, -10, -10, plotWidCss, plotHgtCss);\n        over.insertBefore(pt, cursorPts[si]);\n        return pt;\n      }\n    }\n  }\n  function initSeries(s, i) {\n    if (mode == 1 || i > 0) {\n      let isTime = mode == 1 && scales[s.scale].time;\n      let sv = s.value;\n      s.value = isTime ? isStr(sv) ? timeSeriesVal(_tzDate, timeSeriesStamp(sv, _fmtDate)) : sv || _timeSeriesVal : sv || numSeriesVal;\n      s.label = s.label || (isTime ? timeSeriesLabel : numSeriesLabel);\n    }\n    if (i > 0) {\n      s.width = s.width == null ? 1 : s.width;\n      s.paths = s.paths || linearPath || retNull;\n      s.fillTo = fnOrSelf(s.fillTo || seriesFillTo);\n      s.pxAlign = +ifNull(s.pxAlign, pxAlign);\n      s.pxRound = pxRoundGen(s.pxAlign);\n      s.stroke = fnOrSelf(s.stroke || null);\n      s.fill = fnOrSelf(s.fill || null);\n      s._stroke = s._fill = s._paths = s._focus = null;\n      let _ptDia = ptDia(max(1, s.width), 1);\n      let points = s.points = assign({}, {\n        size: _ptDia,\n        width: max(1, _ptDia * .2),\n        stroke: s.stroke,\n        space: _ptDia * 2,\n        paths: pointsPath,\n        _stroke: null,\n        _fill: null\n      }, s.points);\n      points.show = fnOrSelf(points.show);\n      points.filter = fnOrSelf(points.filter);\n      points.fill = fnOrSelf(points.fill);\n      points.stroke = fnOrSelf(points.stroke);\n      points.paths = fnOrSelf(points.paths);\n      points.pxAlign = s.pxAlign;\n    }\n    if (showLegend) {\n      let rowCells = initLegendRow(s, i);\n      legendRows.splice(i, 0, rowCells[0]);\n      legendCells.splice(i, 0, rowCells[1]);\n      legend.values.push(null); // NULL_LEGEND_VALS not yet avil here :(\n    }\n    if (cursor.show) {\n      activeIdxs.splice(i, 0, null);\n      let pt = initCursorPt(s, i);\n      if (pt != null) {\n        cursorPts.splice(i, 0, pt);\n        cursorPtsLft.splice(i, 0, 0);\n        cursorPtsTop.splice(i, 0, 0);\n      }\n    }\n    fire(\"addSeries\", i);\n  }\n  function addSeries(opts, si) {\n    si = si == null ? series.length : si;\n    opts = mode == 1 ? setDefault(opts, si, xSeriesOpts, ySeriesOpts) : setDefault(opts, si, null, xySeriesOpts);\n    series.splice(si, 0, opts);\n    initSeries(series[si], si);\n  }\n  self.addSeries = addSeries;\n  function delSeries(i) {\n    series.splice(i, 1);\n    if (showLegend) {\n      legend.values.splice(i, 1);\n      legendCells.splice(i, 1);\n      let tr = legendRows.splice(i, 1)[0];\n      offMouse(null, tr.firstChild);\n      tr.remove();\n    }\n    if (cursor.show) {\n      activeIdxs.splice(i, 1);\n      if (cursorPts.length > 1) {\n        cursorPts.splice(i, 1)[0].remove();\n        cursorPtsLft.splice(i, 1);\n        cursorPtsTop.splice(i, 1);\n      }\n    }\n\n    // TODO: de-init no-longer-needed scales?\n\n    fire(\"delSeries\", i);\n  }\n  self.delSeries = delSeries;\n  const sidesWithAxes = [false, false, false, false];\n  function initAxis(axis, i) {\n    axis._show = axis.show;\n    if (axis.show) {\n      let isVt = axis.side % 2;\n      let sc = scales[axis.scale];\n\n      // this can occur if all series specify non-default scales\n      if (sc == null) {\n        axis.scale = isVt ? series[1].scale : xScaleKey;\n        sc = scales[axis.scale];\n      }\n\n      // also set defaults for incrs & values based on axis distr\n      let isTime = sc.time;\n      axis.size = fnOrSelf(axis.size);\n      axis.space = fnOrSelf(axis.space);\n      axis.rotate = fnOrSelf(axis.rotate);\n      if (isArr(axis.incrs)) {\n        axis.incrs.forEach(incr => {\n          !fixedDec.has(incr) && fixedDec.set(incr, guessDec(incr));\n        });\n      }\n      axis.incrs = fnOrSelf(axis.incrs || (sc.distr == 2 ? wholeIncrs : isTime ? ms == 1 ? timeIncrsMs : timeIncrsS : numIncrs));\n      axis.splits = fnOrSelf(axis.splits || (isTime && sc.distr == 1 ? _timeAxisSplits : sc.distr == 3 ? logAxisSplits : sc.distr == 4 ? asinhAxisSplits : numAxisSplits));\n      axis.stroke = fnOrSelf(axis.stroke);\n      axis.grid.stroke = fnOrSelf(axis.grid.stroke);\n      axis.ticks.stroke = fnOrSelf(axis.ticks.stroke);\n      axis.border.stroke = fnOrSelf(axis.border.stroke);\n      let av = axis.values;\n      axis.values =\n      // static array of tick values\n      isArr(av) && !isArr(av[0]) ? fnOrSelf(av) :\n      // temporal\n      isTime ?\n      // config array of fmtDate string tpls\n      isArr(av) ? timeAxisVals(_tzDate, timeAxisStamps(av, _fmtDate)) :\n      // fmtDate string tpl\n      isStr(av) ? timeAxisVal(_tzDate, av) : av || _timeAxisVals : av || numAxisVals;\n      axis.filter = fnOrSelf(axis.filter || (sc.distr >= 3 && sc.log == 10 ? log10AxisValsFilt : sc.distr == 3 && sc.log == 2 ? log2AxisValsFilt : retArg1));\n      axis.font = pxRatioFont(axis.font);\n      axis.labelFont = pxRatioFont(axis.labelFont);\n      axis._size = axis.size(self, null, i, 0);\n      axis._space = axis._rotate = axis._incrs = axis._found =\n      // foundIncrSpace\n      axis._splits = axis._values = null;\n      if (axis._size > 0) {\n        sidesWithAxes[i] = true;\n        axis._el = placeDiv(AXIS, wrap);\n      }\n\n      // debug\n      //\taxis._el.style.background = \"#\"  + Math.floor(Math.random()*16777215).toString(16) + '80';\n    }\n  }\n  function autoPadSide(self, side, sidesWithAxes, cycleNum) {\n    let [hasTopAxis, hasRgtAxis, hasBtmAxis, hasLftAxis] = sidesWithAxes;\n    let ori = side % 2;\n    let size = 0;\n    if (ori == 0 && (hasLftAxis || hasRgtAxis)) size = side == 0 && !hasTopAxis || side == 2 && !hasBtmAxis ? round(xAxisOpts.size / 3) : 0;\n    if (ori == 1 && (hasTopAxis || hasBtmAxis)) size = side == 1 && !hasRgtAxis || side == 3 && !hasLftAxis ? round(yAxisOpts.size / 2) : 0;\n    return size;\n  }\n  const padding = self.padding = (opts.padding || [autoPadSide, autoPadSide, autoPadSide, autoPadSide]).map(p => fnOrSelf(ifNull(p, autoPadSide)));\n  const _padding = self._padding = padding.map((p, i) => p(self, i, sidesWithAxes, 0));\n  let dataLen;\n\n  // rendered data window\n  let i0 = null;\n  let i1 = null;\n  const idxs = mode == 1 ? series[0].idxs : null;\n  let data0 = null;\n  let viaAutoScaleX = false;\n  function setData(_data, _resetScales) {\n    data = _data == null ? [] : _data;\n    self.data = self._data = data;\n    if (mode == 2) {\n      dataLen = 0;\n      for (let i = 1; i < series.length; i++) dataLen += data[i][0].length;\n    } else {\n      if (data.length == 0) self.data = self._data = data = [[]];\n      data0 = data[0];\n      dataLen = data0.length;\n      let scaleData = data;\n      if (xScaleDistr == 2) {\n        scaleData = data.slice();\n        let _data0 = scaleData[0] = Array(dataLen);\n        for (let i = 0; i < dataLen; i++) _data0[i] = i;\n      }\n      self._data = data = scaleData;\n    }\n    resetYSeries(true);\n    fire(\"setData\");\n\n    // forces x axis tick values to re-generate when neither x scale nor y scale changes\n    // in ordinal mode, scale range is by index, so will not change if new data has same length, but tick values are from data\n    if (xScaleDistr == 2) {\n      shouldConvergeSize = true;\n\n      /* or somewhat cheaper, and uglier:\n      if (ready) {\n      \t// logic extracted from axesCalc()\n      \tlet i = 0;\n      \tlet axis = axes[i];\n      \tlet _splits = axis._splits.map(i => data0[i]);\n      \tlet [_incr, _space] = axis._found;\n      \tlet incr = data0[_splits[1]] - data0[_splits[0]];\n      \taxis._values = axis.values(self, axis.filter(self, _splits, i, _space, incr), i, _space, incr);\n      }\n      */\n    }\n    if (_resetScales !== false) {\n      let xsc = scaleX;\n      if (xsc.auto(self, viaAutoScaleX)) autoScaleX();else _setScale(xScaleKey, xsc.min, xsc.max);\n      shouldSetCursor = shouldSetCursor || cursor.left >= 0;\n      shouldSetLegend = true;\n      commit();\n    }\n  }\n  self.setData = setData;\n  function autoScaleX() {\n    viaAutoScaleX = true;\n    let _min, _max;\n    if (mode == 1) {\n      if (dataLen > 0) {\n        i0 = idxs[0] = 0;\n        i1 = idxs[1] = dataLen - 1;\n        _min = data[0][i0];\n        _max = data[0][i1];\n        if (xScaleDistr == 2) {\n          _min = i0;\n          _max = i1;\n        } else if (_min == _max) {\n          if (xScaleDistr == 3) [_min, _max] = rangeLog(_min, _min, scaleX.log, false);else if (xScaleDistr == 4) [_min, _max] = rangeAsinh(_min, _min, scaleX.log, false);else if (scaleX.time) _max = _min + round(86400 / ms);else [_min, _max] = rangeNum(_min, _max, rangePad, true);\n        }\n      } else {\n        i0 = idxs[0] = _min = null;\n        i1 = idxs[1] = _max = null;\n      }\n    }\n    _setScale(xScaleKey, _min, _max);\n  }\n  let ctxStroke, ctxFill, ctxWidth, ctxDash, ctxJoin, ctxCap, ctxFont, ctxAlign, ctxBaseline;\n  let ctxAlpha;\n  function setCtxStyle(stroke, width, dash, cap, fill, join) {\n    stroke ??= transparent;\n    dash ??= EMPTY_ARR;\n    cap ??= \"butt\"; // (‿|‿)\n    fill ??= transparent;\n    join ??= \"round\";\n    if (stroke != ctxStroke) ctx.strokeStyle = ctxStroke = stroke;\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (width != ctxWidth) ctx.lineWidth = ctxWidth = width;\n    if (join != ctxJoin) ctx.lineJoin = ctxJoin = join;\n    if (cap != ctxCap) ctx.lineCap = ctxCap = cap;\n    if (dash != ctxDash) ctx.setLineDash(ctxDash = dash);\n  }\n  function setFontStyle(font, fill, align, baseline) {\n    if (fill != ctxFill) ctx.fillStyle = ctxFill = fill;\n    if (font != ctxFont) ctx.font = ctxFont = font;\n    if (align != ctxAlign) ctx.textAlign = ctxAlign = align;\n    if (baseline != ctxBaseline) ctx.textBaseline = ctxBaseline = baseline;\n  }\n  function accScale(wsc, psc, facet, data, sorted = 0) {\n    if (data.length > 0 && wsc.auto(self, viaAutoScaleX) && (psc == null || psc.min == null)) {\n      let _i0 = ifNull(i0, 0);\n      let _i1 = ifNull(i1, data.length - 1);\n\n      // only run getMinMax() for invalidated series data, else reuse\n      let minMax = facet.min == null ? wsc.distr == 3 ? getMinMaxLog(data, _i0, _i1) : getMinMax(data, _i0, _i1, sorted) : [facet.min, facet.max];\n\n      // initial min/max\n      wsc.min = min(wsc.min, facet.min = minMax[0]);\n      wsc.max = max(wsc.max, facet.max = minMax[1]);\n    }\n  }\n  const AUTOSCALE = {\n    min: null,\n    max: null\n  };\n  function setScales() {\n    //\tlog(\"setScales()\", arguments);\n\n    // implicitly add auto scales, and unranged scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && (\n      // scales that have never been set (on init)\n      sc.min == null ||\n      // or auto scales when the x scale was explicitly set\n      pendScales[xScaleKey] != null && sc.auto(self, viaAutoScaleX))) {\n        pendScales[k] = AUTOSCALE;\n      }\n    }\n\n    // implicitly add dependent scales\n    for (let k in scales) {\n      let sc = scales[k];\n      if (pendScales[k] == null && sc.from != null && pendScales[sc.from] != null) pendScales[k] = AUTOSCALE;\n    }\n\n    // explicitly setting the x-scale invalidates everything (acts as redraw)\n    if (pendScales[xScaleKey] != null) resetYSeries(true); // TODO: only reset series on auto scales?\n\n    let wipScales = {};\n    for (let k in pendScales) {\n      let psc = pendScales[k];\n      if (psc != null) {\n        let wsc = wipScales[k] = copy(scales[k], fastIsObj);\n        if (psc.min != null) assign(wsc, psc);else if (k != xScaleKey || mode == 2) {\n          if (dataLen == 0 && wsc.from == null) {\n            let minMax = wsc.range(self, null, null, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n          } else {\n            wsc.min = inf;\n            wsc.max = -inf;\n          }\n        }\n      }\n    }\n    if (dataLen > 0) {\n      // pre-range y-scales from y series' data values\n      series.forEach((s, i) => {\n        if (mode == 1) {\n          let k = s.scale;\n          let psc = pendScales[k];\n          if (psc == null) return;\n          let wsc = wipScales[k];\n          if (i == 0) {\n            let minMax = wsc.range(self, wsc.min, wsc.max, k);\n            wsc.min = minMax[0];\n            wsc.max = minMax[1];\n            i0 = closestIdx(wsc.min, data[0]);\n            i1 = closestIdx(wsc.max, data[0]);\n\n            // don't try to contract same or adjacent idxs\n            if (i1 - i0 > 1) {\n              // closest indices can be outside of view\n              if (data[0][i0] < wsc.min) i0++;\n              if (data[0][i1] > wsc.max) i1--;\n            }\n            s.min = data0[i0];\n            s.max = data0[i1];\n          } else if (s.show && s.auto) accScale(wsc, psc, s, data[i], s.sorted);\n          s.idxs[0] = i0;\n          s.idxs[1] = i1;\n        } else {\n          if (i > 0) {\n            if (s.show && s.auto) {\n              // TODO: only handles, assumes and requires facets[0] / 'x' scale, and facets[1] / 'y' scale\n              let [xFacet, yFacet] = s.facets;\n              let xScaleKey = xFacet.scale;\n              let yScaleKey = yFacet.scale;\n              let [xData, yData] = data[i];\n              let wscx = wipScales[xScaleKey];\n              let wscy = wipScales[yScaleKey];\n\n              // null can happen when only x is zoomed, but y has static range and doesnt get auto-added to pending\n              wscx != null && accScale(wscx, pendScales[xScaleKey], xFacet, xData, xFacet.sorted);\n              wscy != null && accScale(wscy, pendScales[yScaleKey], yFacet, yData, yFacet.sorted);\n\n              // temp\n              s.min = yFacet.min;\n              s.max = yFacet.max;\n            }\n          }\n        }\n      });\n\n      // range independent scales\n      for (let k in wipScales) {\n        let wsc = wipScales[k];\n        let psc = pendScales[k];\n        if (wsc.from == null && (psc == null || psc.min == null)) {\n          let minMax = wsc.range(self, wsc.min == inf ? null : wsc.min, wsc.max == -inf ? null : wsc.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n\n    // range dependent scales\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      if (wsc.from != null) {\n        let base = wipScales[wsc.from];\n        if (base.min == null) wsc.min = wsc.max = null;else {\n          let minMax = wsc.range(self, base.min, base.max, k);\n          wsc.min = minMax[0];\n          wsc.max = minMax[1];\n        }\n      }\n    }\n    let changed = {};\n    let anyChanged = false;\n    for (let k in wipScales) {\n      let wsc = wipScales[k];\n      let sc = scales[k];\n      if (sc.min != wsc.min || sc.max != wsc.max) {\n        sc.min = wsc.min;\n        sc.max = wsc.max;\n        let distr = sc.distr;\n        sc._min = distr == 3 ? log10(sc.min) : distr == 4 ? asinh(sc.min, sc.asinh) : sc.min;\n        sc._max = distr == 3 ? log10(sc.max) : distr == 4 ? asinh(sc.max, sc.asinh) : sc.max;\n        changed[k] = anyChanged = true;\n      }\n    }\n    if (anyChanged) {\n      // invalidate paths of all series on changed scales\n      series.forEach((s, i) => {\n        if (mode == 2) {\n          if (i > 0 && changed.y) s._paths = null;\n        } else {\n          if (changed[s.scale]) s._paths = null;\n        }\n      });\n      for (let k in changed) {\n        shouldConvergeSize = true;\n        fire(\"setScale\", k);\n      }\n      if (cursor.show && cursor.left >= 0) shouldSetCursor = shouldSetLegend = true;\n    }\n    for (let k in pendScales) pendScales[k] = null;\n  }\n\n  // grabs the nearest indices with y data outside of x-scale limits\n  function getOuterIdxs(ydata) {\n    let _i0 = clamp(i0 - 1, 0, dataLen - 1);\n    let _i1 = clamp(i1 + 1, 0, dataLen - 1);\n    while (ydata[_i0] == null && _i0 > 0) _i0--;\n    while (ydata[_i1] == null && _i1 < dataLen - 1) _i1++;\n    return [_i0, _i1];\n  }\n  function drawSeries() {\n    if (dataLen > 0) {\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          cacheStrokeFill(i, false);\n          cacheStrokeFill(i, true);\n          if (s._paths == null) {\n            if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n            let _idxs = mode == 2 ? [0, data[i][0].length - 1] : getOuterIdxs(data[i]);\n            s._paths = s.paths(self, i, _idxs[0], _idxs[1]);\n            if (ctxAlpha != 1) ctx.globalAlpha = ctxAlpha = 1;\n          }\n        }\n      });\n      series.forEach((s, i) => {\n        if (i > 0 && s.show) {\n          if (ctxAlpha != s.alpha) ctx.globalAlpha = ctxAlpha = s.alpha;\n          s._paths != null && drawPath(i, false);\n          {\n            let _gaps = s._paths != null ? s._paths.gaps : null;\n            let show = s.points.show(self, i, i0, i1, _gaps);\n            let idxs = s.points.filter(self, i, show, _gaps);\n            if (show || idxs) {\n              s.points._paths = s.points.paths(self, i, i0, i1, idxs);\n              drawPath(i, true);\n            }\n          }\n          if (ctxAlpha != 1) ctx.globalAlpha = ctxAlpha = 1;\n          fire(\"drawSeries\", i);\n        }\n      });\n    }\n  }\n  function cacheStrokeFill(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    s._stroke = s.stroke(self, si);\n    s._fill = s.fill(self, si);\n  }\n  function drawPath(si, _points) {\n    let s = _points ? series[si].points : series[si];\n    let {\n      stroke,\n      fill,\n      clip: gapsClip,\n      flags,\n      _stroke: strokeStyle = s._stroke,\n      _fill: fillStyle = s._fill,\n      _width: width = s.width\n    } = s._paths;\n    width = roundDec(width * pxRatio, 3);\n    let boundsClip = null;\n    let offset = width % 2 / 2;\n    if (_points && fillStyle == null) fillStyle = width > 0 ? \"#fff\" : strokeStyle;\n    let _pxAlign = s.pxAlign == 1 && offset > 0;\n    _pxAlign && ctx.translate(offset, offset);\n    if (!_points) {\n      let lft = plotLft - width / 2,\n        top = plotTop - width / 2,\n        wid = plotWid + width,\n        hgt = plotHgt + width;\n      boundsClip = new Path2D();\n      boundsClip.rect(lft, top, wid, hgt);\n    }\n\n    // the points pathbuilder's gapsClip is its boundsClip, since points dont need gaps clipping, and bounds depend on point size\n    if (_points) strokeFill(strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, gapsClip);else fillStroke(si, strokeStyle, width, s.dash, s.cap, fillStyle, stroke, fill, flags, boundsClip, gapsClip);\n    _pxAlign && ctx.translate(-offset, -offset);\n  }\n  function fillStroke(si, strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip) {\n    let didStrokeFill = false;\n\n    // for all bands where this series is the top edge, create upwards clips using the bottom edges\n    // and apply clips + fill with band fill or dfltFill\n    flags != 0 && bands.forEach((b, bi) => {\n      // isUpperEdge?\n      if (b.series[0] == si) {\n        let lowerEdge = series[b.series[1]];\n        let lowerData = data[b.series[1]];\n        let bandClip = (lowerEdge._paths || EMPTY_OBJ).band;\n        if (isArr(bandClip)) bandClip = b.dir == 1 ? bandClip[0] : bandClip[1];\n        let gapsClip2;\n        let _fillStyle = null;\n\n        // hasLowerEdge?\n        if (lowerEdge.show && bandClip && hasData(lowerData, i0, i1)) {\n          _fillStyle = b.fill(self, bi) || fillStyle;\n          gapsClip2 = lowerEdge._paths.clip;\n        } else bandClip = null;\n        strokeFill(strokeStyle, lineWidth, lineDash, lineCap, _fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip);\n        didStrokeFill = true;\n      }\n    });\n    if (!didStrokeFill) strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip);\n  }\n  const CLIP_FILL_STROKE = BAND_CLIP_FILL | BAND_CLIP_STROKE;\n  function strokeFill(strokeStyle, lineWidth, lineDash, lineCap, fillStyle, strokePath, fillPath, flags, boundsClip, gapsClip, gapsClip2, bandClip) {\n    setCtxStyle(strokeStyle, lineWidth, lineDash, lineCap, fillStyle);\n    if (boundsClip || gapsClip || bandClip) {\n      ctx.save();\n      boundsClip && ctx.clip(boundsClip);\n      gapsClip && ctx.clip(gapsClip);\n    }\n    if (bandClip) {\n      if ((flags & CLIP_FILL_STROKE) == CLIP_FILL_STROKE) {\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_STROKE) {\n        doFill(fillStyle, fillPath);\n        ctx.clip(bandClip);\n        doStroke(strokeStyle, strokePath, lineWidth);\n      } else if (flags & BAND_CLIP_FILL) {\n        ctx.save();\n        ctx.clip(bandClip);\n        gapsClip2 && ctx.clip(gapsClip2);\n        doFill(fillStyle, fillPath);\n        ctx.restore();\n        doStroke(strokeStyle, strokePath, lineWidth);\n      }\n    } else {\n      doFill(fillStyle, fillPath);\n      doStroke(strokeStyle, strokePath, lineWidth);\n    }\n    if (boundsClip || gapsClip || bandClip) ctx.restore();\n  }\n  function doStroke(strokeStyle, strokePath, lineWidth) {\n    if (lineWidth > 0) {\n      if (strokePath instanceof Map) {\n        strokePath.forEach((strokePath, strokeStyle) => {\n          ctx.strokeStyle = ctxStroke = strokeStyle;\n          ctx.stroke(strokePath);\n        });\n      } else strokePath != null && strokeStyle && ctx.stroke(strokePath);\n    }\n  }\n  function doFill(fillStyle, fillPath) {\n    if (fillPath instanceof Map) {\n      fillPath.forEach((fillPath, fillStyle) => {\n        ctx.fillStyle = ctxFill = fillStyle;\n        ctx.fill(fillPath);\n      });\n    } else fillPath != null && fillStyle && ctx.fill(fillPath);\n  }\n  function getIncrSpace(axisIdx, min, max, fullDim) {\n    let axis = axes[axisIdx];\n    let incrSpace;\n    if (fullDim <= 0) incrSpace = [0, 0];else {\n      let minSpace = axis._space = axis.space(self, axisIdx, min, max, fullDim);\n      let incrs = axis._incrs = axis.incrs(self, axisIdx, min, max, fullDim, minSpace);\n      incrSpace = findIncr(min, max, incrs, fullDim, minSpace);\n    }\n    return axis._found = incrSpace;\n  }\n  function drawOrthoLines(offs, filts, ori, side, pos0, len, width, stroke, dash, cap) {\n    let offset = width % 2 / 2;\n    pxAlign == 1 && ctx.translate(offset, offset);\n    setCtxStyle(stroke, width, dash, cap, stroke);\n    ctx.beginPath();\n    let x0,\n      y0,\n      x1,\n      y1,\n      pos1 = pos0 + (side == 0 || side == 3 ? -len : len);\n    if (ori == 0) {\n      y0 = pos0;\n      y1 = pos1;\n    } else {\n      x0 = pos0;\n      x1 = pos1;\n    }\n    for (let i = 0; i < offs.length; i++) {\n      if (filts[i] != null) {\n        if (ori == 0) x0 = x1 = offs[i];else y0 = y1 = offs[i];\n        ctx.moveTo(x0, y0);\n        ctx.lineTo(x1, y1);\n      }\n    }\n    ctx.stroke();\n    pxAlign == 1 && ctx.translate(-offset, -offset);\n  }\n  function axesCalc(cycleNum) {\n    //\tlog(\"axesCalc()\", arguments);\n\n    let converged = true;\n    axes.forEach((axis, i) => {\n      if (!axis.show) return;\n      let scale = scales[axis.scale];\n      if (scale.min == null) {\n        if (axis._show) {\n          converged = false;\n          axis._show = false;\n          resetYSeries(false);\n        }\n        return;\n      } else {\n        if (!axis._show) {\n          converged = false;\n          axis._show = true;\n          resetYSeries(false);\n        }\n      }\n      let side = axis.side;\n      let ori = side % 2;\n      let {\n        min,\n        max\n      } = scale; // \t\t// should this toggle them ._show = false\n\n      let [_incr, _space] = getIncrSpace(i, min, max, ori == 0 ? plotWidCss : plotHgtCss);\n      if (_space == 0) return;\n\n      // if we're using index positions, force first tick to match passed index\n      let forceMin = scale.distr == 2;\n      let _splits = axis._splits = axis.splits(self, i, min, max, _incr, _space, forceMin);\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let values = axis._values = axis.values(self, axis.filter(self, splits, i, _space, incr), i, _space, incr);\n\n      // rotating of labels only supported on bottom x axis\n      axis._rotate = side == 2 ? axis.rotate(self, values, i, _space) : 0;\n      let oldSize = axis._size;\n      axis._size = ceil(axis.size(self, values, i, cycleNum));\n      if (oldSize != null && axis._size != oldSize)\n        // ready && ?\n        converged = false;\n    });\n    return converged;\n  }\n  function paddingCalc(cycleNum) {\n    let converged = true;\n    padding.forEach((p, i) => {\n      let _p = p(self, i, sidesWithAxes, cycleNum);\n      if (_p != _padding[i]) converged = false;\n      _padding[i] = _p;\n    });\n    return converged;\n  }\n  function drawAxesGrid() {\n    for (let i = 0; i < axes.length; i++) {\n      let axis = axes[i];\n      if (!axis.show || !axis._show) continue;\n      let side = axis.side;\n      let ori = side % 2;\n      let x, y;\n      let fillStyle = axis.stroke(self, i);\n      let shiftDir = side == 0 || side == 3 ? -1 : 1;\n\n      // axis label\n      if (axis.label) {\n        let shiftAmt = axis.labelGap * shiftDir;\n        let baseLpos = round((axis._lpos + shiftAmt) * pxRatio);\n        setFontStyle(axis.labelFont[0], fillStyle, \"center\", side == 2 ? TOP : BOTTOM);\n        ctx.save();\n        if (ori == 1) {\n          x = y = 0;\n          ctx.translate(baseLpos, round(plotTop + plotHgt / 2));\n          ctx.rotate((side == 3 ? -PI : PI) / 2);\n        } else {\n          x = round(plotLft + plotWid / 2);\n          y = baseLpos;\n        }\n        ctx.fillText(axis.label, x, y);\n        ctx.restore();\n      }\n      let [_incr, _space] = axis._found;\n      if (_space == 0) continue;\n      let scale = scales[axis.scale];\n      let plotDim = ori == 0 ? plotWid : plotHgt;\n      let plotOff = ori == 0 ? plotLft : plotTop;\n      let axisGap = round(axis.gap * pxRatio);\n      let _splits = axis._splits;\n\n      // tick labels\n      // BOO this assumes a specific data/series\n      let splits = scale.distr == 2 ? _splits.map(i => data0[i]) : _splits;\n      let incr = scale.distr == 2 ? data0[_splits[1]] - data0[_splits[0]] : _incr;\n      let ticks = axis.ticks;\n      let border = axis.border;\n      let tickSize = ticks.show ? round(ticks.size * pxRatio) : 0;\n\n      // rotating of labels only supported on bottom x axis\n      let angle = axis._rotate * -PI / 180;\n      let basePos = pxRound(axis._pos * pxRatio);\n      let shiftAmt = (tickSize + axisGap) * shiftDir;\n      let finalPos = basePos + shiftAmt;\n      y = ori == 0 ? finalPos : 0;\n      x = ori == 1 ? finalPos : 0;\n      let font = axis.font[0];\n      let textAlign = axis.align == 1 ? LEFT : axis.align == 2 ? RIGHT : angle > 0 ? LEFT : angle < 0 ? RIGHT : ori == 0 ? \"center\" : side == 3 ? RIGHT : LEFT;\n      let textBaseline = angle || ori == 1 ? \"middle\" : side == 2 ? TOP : BOTTOM;\n      setFontStyle(font, fillStyle, textAlign, textBaseline);\n      let lineHeight = axis.font[1] * axis.lineGap;\n      let canOffs = _splits.map(val => pxRound(getPos(val, scale, plotDim, plotOff)));\n      let _values = axis._values;\n      for (let i = 0; i < _values.length; i++) {\n        let val = _values[i];\n        if (val != null) {\n          if (ori == 0) x = canOffs[i];else y = canOffs[i];\n          val = \"\" + val;\n          let _parts = val.indexOf(\"\\n\") == -1 ? [val] : val.split(/\\n/gm);\n          for (let j = 0; j < _parts.length; j++) {\n            let text = _parts[j];\n            if (angle) {\n              ctx.save();\n              ctx.translate(x, y + j * lineHeight); // can this be replaced with position math?\n              ctx.rotate(angle); // can this be done once?\n              ctx.fillText(text, 0, 0);\n              ctx.restore();\n            } else ctx.fillText(text, x, y + j * lineHeight);\n          }\n        }\n      }\n\n      // ticks\n      if (ticks.show) {\n        drawOrthoLines(canOffs, ticks.filter(self, splits, i, _space, incr), ori, side, basePos, tickSize, roundDec(ticks.width * pxRatio, 3), ticks.stroke(self, i), ticks.dash, ticks.cap);\n      }\n\n      // grid\n      let grid = axis.grid;\n      if (grid.show) {\n        drawOrthoLines(canOffs, grid.filter(self, splits, i, _space, incr), ori, ori == 0 ? 2 : 1, ori == 0 ? plotTop : plotLft, ori == 0 ? plotHgt : plotWid, roundDec(grid.width * pxRatio, 3), grid.stroke(self, i), grid.dash, grid.cap);\n      }\n      if (border.show) {\n        drawOrthoLines([basePos], [1], ori == 0 ? 1 : 0, ori == 0 ? 1 : 2, ori == 1 ? plotTop : plotLft, ori == 1 ? plotHgt : plotWid, roundDec(border.width * pxRatio, 3), border.stroke(self, i), border.dash, border.cap);\n      }\n    }\n    fire(\"drawAxes\");\n  }\n  function resetYSeries(minMax) {\n    //\tlog(\"resetYSeries()\", arguments);\n\n    series.forEach((s, i) => {\n      if (i > 0) {\n        s._paths = null;\n        if (minMax) {\n          if (mode == 1) {\n            s.min = null;\n            s.max = null;\n          } else {\n            s.facets.forEach(f => {\n              f.min = null;\n              f.max = null;\n            });\n          }\n        }\n      }\n    });\n  }\n  let queuedCommit = false;\n  let deferHooks = false;\n  let hooksQueue = [];\n  function flushHooks() {\n    deferHooks = false;\n    for (let i = 0; i < hooksQueue.length; i++) fire(...hooksQueue[i]);\n    hooksQueue.length = 0;\n  }\n  function commit() {\n    if (!queuedCommit) {\n      microTask(_commit);\n      queuedCommit = true;\n    }\n  }\n\n  // manual batching (aka immediate mode), skips microtask queue\n  function batch(fn, _deferHooks = false) {\n    queuedCommit = true;\n    deferHooks = _deferHooks;\n    fn(self);\n    _commit();\n    if (_deferHooks && hooksQueue.length > 0) queueMicrotask(flushHooks);\n  }\n  self.batch = batch;\n  function _commit() {\n    //\tlog(\"_commit()\", arguments);\n\n    if (shouldSetScales) {\n      setScales();\n      shouldSetScales = false;\n    }\n    if (shouldConvergeSize) {\n      convergeSize();\n      shouldConvergeSize = false;\n    }\n    if (shouldSetSize) {\n      setStylePx(under, LEFT, plotLftCss);\n      setStylePx(under, TOP, plotTopCss);\n      setStylePx(under, WIDTH, plotWidCss);\n      setStylePx(under, HEIGHT, plotHgtCss);\n      setStylePx(over, LEFT, plotLftCss);\n      setStylePx(over, TOP, plotTopCss);\n      setStylePx(over, WIDTH, plotWidCss);\n      setStylePx(over, HEIGHT, plotHgtCss);\n      setStylePx(wrap, WIDTH, fullWidCss);\n      setStylePx(wrap, HEIGHT, fullHgtCss);\n\n      // NOTE: mutating this during print preview in Chrome forces transparent\n      // canvas pixels to white, even when followed up with clearRect() below\n      can.width = round(fullWidCss * pxRatio);\n      can.height = round(fullHgtCss * pxRatio);\n      axes.forEach(({\n        _el,\n        _show,\n        _size,\n        _pos,\n        side\n      }) => {\n        if (_el != null) {\n          if (_show) {\n            let posOffset = side === 3 || side === 0 ? _size : 0;\n            let isVt = side % 2 == 1;\n            setStylePx(_el, isVt ? \"left\" : \"top\", _pos - posOffset);\n            setStylePx(_el, isVt ? \"width\" : \"height\", _size);\n            setStylePx(_el, isVt ? \"top\" : \"left\", isVt ? plotTopCss : plotLftCss);\n            setStylePx(_el, isVt ? \"height\" : \"width\", isVt ? plotHgtCss : plotWidCss);\n            remClass(_el, OFF);\n          } else addClass(_el, OFF);\n        }\n      });\n\n      // invalidate ctx style cache\n      ctxStroke = ctxFill = ctxWidth = ctxJoin = ctxCap = ctxFont = ctxAlign = ctxBaseline = ctxDash = null;\n      ctxAlpha = 1;\n      syncRect(true);\n      if (plotLftCss != _plotLftCss || plotTopCss != _plotTopCss || plotWidCss != _plotWidCss || plotHgtCss != _plotHgtCss) {\n        resetYSeries(false);\n        let pctWid = plotWidCss / _plotWidCss;\n        let pctHgt = plotHgtCss / _plotHgtCss;\n        if (cursor.show && !shouldSetCursor && cursor.left >= 0) {\n          cursor.left *= pctWid;\n          cursor.top *= pctHgt;\n          vCursor && elTrans(vCursor, round(cursor.left), 0, plotWidCss, plotHgtCss);\n          hCursor && elTrans(hCursor, 0, round(cursor.top), plotWidCss, plotHgtCss);\n          for (let i = 1; i < cursorPts.length; i++) {\n            cursorPtsLft[i] *= pctWid;\n            cursorPtsTop[i] *= pctHgt;\n            elTrans(cursorPts[i], incrRoundUp(cursorPtsLft[i], 1), incrRoundUp(cursorPtsTop[i], 1), plotWidCss, plotHgtCss);\n          }\n        }\n        if (select.show && !shouldSetSelect && select.left >= 0 && select.width > 0) {\n          select.left *= pctWid;\n          select.width *= pctWid;\n          select.top *= pctHgt;\n          select.height *= pctHgt;\n          for (let prop in _hideProps) setStylePx(selectDiv, prop, select[prop]);\n        }\n        _plotLftCss = plotLftCss;\n        _plotTopCss = plotTopCss;\n        _plotWidCss = plotWidCss;\n        _plotHgtCss = plotHgtCss;\n      }\n      fire(\"setSize\");\n      shouldSetSize = false;\n    }\n    if (fullWidCss > 0 && fullHgtCss > 0) {\n      ctx.clearRect(0, 0, can.width, can.height);\n      fire(\"drawClear\");\n      drawOrder.forEach(fn => fn());\n      fire(\"draw\");\n    }\n    if (select.show && shouldSetSelect) {\n      setSelect(select);\n      shouldSetSelect = false;\n    }\n    if (cursor.show && shouldSetCursor) {\n      updateCursor(null, true, false);\n      shouldSetCursor = false;\n    }\n    if (legend.show && legend.live && shouldSetLegend) {\n      setLegend();\n      shouldSetLegend = false; // redundant currently\n    }\n    if (!ready) {\n      ready = true;\n      self.status = 1;\n      fire(\"ready\");\n    }\n    viaAutoScaleX = false;\n    queuedCommit = false;\n  }\n  self.redraw = (rebuildPaths, recalcAxes) => {\n    shouldConvergeSize = recalcAxes || false;\n    if (rebuildPaths !== false) _setScale(xScaleKey, scaleX.min, scaleX.max);else commit();\n  };\n\n  // redraw() => setScale('x', scales.x.min, scales.x.max);\n\n  // explicit, never re-ranged (is this actually true? for x and y)\n  function setScale(key, opts) {\n    let sc = scales[key];\n    if (sc.from == null) {\n      if (dataLen == 0) {\n        let minMax = sc.range(self, opts.min, opts.max, key);\n        opts.min = minMax[0];\n        opts.max = minMax[1];\n      }\n      if (opts.min > opts.max) {\n        let _min = opts.min;\n        opts.min = opts.max;\n        opts.max = _min;\n      }\n      if (dataLen > 1 && opts.min != null && opts.max != null && opts.max - opts.min < 1e-16) return;\n      if (key == xScaleKey) {\n        if (sc.distr == 2 && dataLen > 0) {\n          opts.min = closestIdx(opts.min, data[0]);\n          opts.max = closestIdx(opts.max, data[0]);\n          if (opts.min == opts.max) opts.max++;\n        }\n      }\n\n      //\tlog(\"setScale()\", arguments);\n\n      pendScales[key] = opts;\n      shouldSetScales = true;\n      commit();\n    }\n  }\n  self.setScale = setScale;\n\n  //\tINTERACTION\n\n  let xCursor;\n  let yCursor;\n  let vCursor;\n  let hCursor;\n\n  // starting position before cursor.move\n  let rawMouseLeft0;\n  let rawMouseTop0;\n\n  // starting position\n  let mouseLeft0;\n  let mouseTop0;\n\n  // current position before cursor.move\n  let rawMouseLeft1;\n  let rawMouseTop1;\n\n  // current position\n  let mouseLeft1;\n  let mouseTop1;\n  let dragging = false;\n  const drag = cursor.drag;\n  let dragX = drag.x;\n  let dragY = drag.y;\n  if (cursor.show) {\n    if (cursor.x) xCursor = placeDiv(CURSOR_X, over);\n    if (cursor.y) yCursor = placeDiv(CURSOR_Y, over);\n    if (scaleX.ori == 0) {\n      vCursor = xCursor;\n      hCursor = yCursor;\n    } else {\n      vCursor = yCursor;\n      hCursor = xCursor;\n    }\n    mouseLeft1 = cursor.left;\n    mouseTop1 = cursor.top;\n  }\n  const select = self.select = assign({\n    show: true,\n    over: true,\n    left: 0,\n    width: 0,\n    top: 0,\n    height: 0\n  }, opts.select);\n  const selectDiv = select.show ? placeDiv(SELECT, select.over ? over : under) : null;\n  function setSelect(opts, _fire) {\n    if (select.show) {\n      for (let prop in opts) {\n        select[prop] = opts[prop];\n        if (prop in _hideProps) setStylePx(selectDiv, prop, opts[prop]);\n      }\n      _fire !== false && fire(\"setSelect\");\n    }\n  }\n  self.setSelect = setSelect;\n  function toggleDOM(i, onOff) {\n    let s = series[i];\n    let label = showLegend ? legendRows[i] : null;\n    if (s.show) label && remClass(label, OFF);else {\n      label && addClass(label, OFF);\n      cursorPts.length > 1 && elTrans(cursorPts[i], -10, -10, plotWidCss, plotHgtCss);\n    }\n  }\n  function _setScale(key, min, max) {\n    setScale(key, {\n      min,\n      max\n    });\n  }\n  function setSeries(i, opts, _fire, _pub) {\n    //\tlog(\"setSeries()\", arguments);\n\n    if (opts.focus != null) setFocus(i);\n    if (opts.show != null) {\n      series.forEach((s, si) => {\n        if (si > 0 && (i == si || i == null)) {\n          s.show = opts.show;\n          toggleDOM(si, opts.show);\n          if (mode == 2) {\n            _setScale(s.facets[0].scale, null, null);\n            _setScale(s.facets[1].scale, null, null);\n          } else _setScale(s.scale, null, null);\n          commit();\n        }\n      });\n    }\n    _fire !== false && fire(\"setSeries\", i, opts);\n    _pub && pubSync(\"setSeries\", self, i, opts);\n  }\n  self.setSeries = setSeries;\n  function setBand(bi, opts) {\n    assign(bands[bi], opts);\n  }\n  function addBand(opts, bi) {\n    opts.fill = fnOrSelf(opts.fill || null);\n    opts.dir = ifNull(opts.dir, -1);\n    bi = bi == null ? bands.length : bi;\n    bands.splice(bi, 0, opts);\n  }\n  function delBand(bi) {\n    if (bi == null) bands.length = 0;else bands.splice(bi, 1);\n  }\n  self.addBand = addBand;\n  self.setBand = setBand;\n  self.delBand = delBand;\n  function setAlpha(i, value) {\n    series[i].alpha = value;\n    if (cursor.show && cursorPts[i]) cursorPts[i].style.opacity = value;\n    if (showLegend && legendRows[i]) legendRows[i].style.opacity = value;\n  }\n\n  // y-distance\n  let closestDist;\n  let closestSeries;\n  let focusedSeries;\n  const FOCUS_TRUE = {\n    focus: true\n  };\n  function setFocus(i) {\n    if (i != focusedSeries) {\n      //\tlog(\"setFocus()\", arguments);\n\n      let allFocused = i == null;\n      let _setAlpha = focus.alpha != 1;\n      series.forEach((s, i2) => {\n        if (mode == 1 || i2 > 0) {\n          let isFocused = allFocused || i2 == 0 || i2 == i;\n          s._focus = allFocused ? null : isFocused;\n          _setAlpha && setAlpha(i2, isFocused ? 1 : focus.alpha);\n        }\n      });\n      focusedSeries = i;\n      _setAlpha && commit();\n    }\n  }\n  if (showLegend && cursorFocus) {\n    onMouse(mouseleave, legendTable, e => {\n      if (cursor._lock) return;\n      setCursorEvent(e);\n      if (focusedSeries != null) setSeries(null, FOCUS_TRUE, true, syncOpts.setSeries);\n    });\n  }\n  function posToVal(pos, scale, can) {\n    let sc = scales[scale];\n    if (can) pos = pos / pxRatio - (sc.ori == 1 ? plotTopCss : plotLftCss);\n    let dim = plotWidCss;\n    if (sc.ori == 1) {\n      dim = plotHgtCss;\n      pos = dim - pos;\n    }\n    if (sc.dir == -1) pos = dim - pos;\n    let _min = sc._min,\n      _max = sc._max,\n      pct = pos / dim;\n    let sv = _min + (_max - _min) * pct;\n    let distr = sc.distr;\n    return distr == 3 ? pow(10, sv) : distr == 4 ? sinh(sv, sc.asinh) : sv;\n  }\n  function closestIdxFromXpos(pos, can) {\n    let v = posToVal(pos, xScaleKey, can);\n    return closestIdx(v, data[0], i0, i1);\n  }\n  self.valToIdx = val => closestIdx(val, data[0]);\n  self.posToIdx = closestIdxFromXpos;\n  self.posToVal = posToVal;\n  self.valToPos = (val, scale, can) => scales[scale].ori == 0 ? getHPos(val, scales[scale], can ? plotWid : plotWidCss, can ? plotLft : 0) : getVPos(val, scales[scale], can ? plotHgt : plotHgtCss, can ? plotTop : 0);\n  self.setCursor = (opts, _fire, _pub) => {\n    mouseLeft1 = opts.left;\n    mouseTop1 = opts.top;\n    //\tassign(cursor, opts);\n    updateCursor(null, _fire, _pub);\n  };\n  function setSelH(off, dim) {\n    setStylePx(selectDiv, LEFT, select.left = off);\n    setStylePx(selectDiv, WIDTH, select.width = dim);\n  }\n  function setSelV(off, dim) {\n    setStylePx(selectDiv, TOP, select.top = off);\n    setStylePx(selectDiv, HEIGHT, select.height = dim);\n  }\n  let setSelX = scaleX.ori == 0 ? setSelH : setSelV;\n  let setSelY = scaleX.ori == 1 ? setSelH : setSelV;\n  function syncLegend() {\n    if (showLegend && legend.live) {\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        if (i == 0 && multiValLegend) continue;\n        let vals = legend.values[i];\n        let j = 0;\n        for (let k in vals) legendCells[i][j++].firstChild.nodeValue = vals[k];\n      }\n    }\n  }\n  function setLegend(opts, _fire) {\n    if (opts != null) {\n      if (opts.idxs) {\n        opts.idxs.forEach((didx, sidx) => {\n          activeIdxs[sidx] = didx;\n        });\n      } else if (!isUndef(opts.idx)) activeIdxs.fill(opts.idx);\n      legend.idx = activeIdxs[0];\n    }\n    for (let sidx = 0; sidx < series.length; sidx++) {\n      if (sidx > 0 || mode == 1 && !multiValLegend) setLegendValues(sidx, activeIdxs[sidx]);\n    }\n    if (showLegend && legend.live) syncLegend();\n    shouldSetLegend = false;\n    _fire !== false && fire(\"setLegend\");\n  }\n  self.setLegend = setLegend;\n  function setLegendValues(sidx, idx) {\n    let s = series[sidx];\n    let src = sidx == 0 && xScaleDistr == 2 ? data0 : data[sidx];\n    let val;\n    if (multiValLegend) val = s.values(self, sidx, idx) ?? NULL_LEGEND_VALUES;else {\n      val = s.value(self, idx == null ? null : src[idx], sidx, idx);\n      val = val == null ? NULL_LEGEND_VALUES : {\n        _: val\n      };\n    }\n    legend.values[sidx] = val;\n  }\n  function updateCursor(src, _fire, _pub) {\n    //\tts == null && log(\"updateCursor()\", arguments);\n\n    rawMouseLeft1 = mouseLeft1;\n    rawMouseTop1 = mouseTop1;\n    [mouseLeft1, mouseTop1] = cursor.move(self, mouseLeft1, mouseTop1);\n    cursor.left = mouseLeft1;\n    cursor.top = mouseTop1;\n    if (cursor.show) {\n      vCursor && elTrans(vCursor, round(mouseLeft1), 0, plotWidCss, plotHgtCss);\n      hCursor && elTrans(hCursor, 0, round(mouseTop1), plotWidCss, plotHgtCss);\n    }\n    let idx;\n\n    // when zooming to an x scale range between datapoints the binary search\n    // for nearest min/max indices results in this condition. cheap hack :D\n    let noDataInRange = i0 > i1; // works for mode 1 only\n\n    closestDist = inf;\n\n    // TODO: extract\n    let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss;\n    let yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss;\n\n    // if cursor hidden, hide points & clear legend vals\n    if (mouseLeft1 < 0 || dataLen == 0 || noDataInRange) {\n      idx = cursor.idx = null;\n      for (let i = 0; i < series.length; i++) {\n        if (i > 0) {\n          cursorPts.length > 1 && elTrans(cursorPts[i], -10, -10, plotWidCss, plotHgtCss);\n        }\n      }\n      if (cursorFocus) setSeries(null, FOCUS_TRUE, true, src == null && syncOpts.setSeries);\n      if (legend.live) {\n        activeIdxs.fill(idx);\n        shouldSetLegend = true;\n      }\n    } else {\n      //\tlet pctY = 1 - (y / rect.height);\n\n      let mouseXPos, valAtPosX, xPos;\n      if (mode == 1) {\n        mouseXPos = scaleX.ori == 0 ? mouseLeft1 : mouseTop1;\n        valAtPosX = posToVal(mouseXPos, xScaleKey);\n        idx = cursor.idx = closestIdx(valAtPosX, data[0], i0, i1);\n        xPos = valToPosX(data[0][idx], scaleX, xDim, 0);\n      }\n      for (let i = mode == 2 ? 1 : 0; i < series.length; i++) {\n        let s = series[i];\n        let idx1 = activeIdxs[i];\n        let yVal1 = idx1 == null ? null : mode == 1 ? data[i][idx1] : data[i][1][idx1];\n        let idx2 = cursor.dataIdx(self, i, idx, valAtPosX);\n        let yVal2 = idx2 == null ? null : mode == 1 ? data[i][idx2] : data[i][1][idx2];\n        shouldSetLegend = shouldSetLegend || yVal2 != yVal1 || idx2 != idx1;\n        activeIdxs[i] = idx2;\n        let xPos2 = idx2 == idx ? xPos : valToPosX(mode == 1 ? data[0][idx2] : data[i][0][idx2], scaleX, xDim, 0);\n        if (i > 0 && s.show) {\n          // this doesnt really work for state timeline, heatmap, status history (where the value maps to color, not y coords)\n          let yPos = yVal2 == null ? -10 : valToPosY(yVal2, mode == 1 ? scales[s.scale] : scales[s.facets[1].scale], yDim, 0);\n          if (cursorFocus && yVal2 != null) {\n            let mouseYPos = scaleX.ori == 1 ? mouseLeft1 : mouseTop1;\n            let dist = abs(focus.dist(self, i, idx2, yPos, mouseYPos));\n            if (dist < closestDist) {\n              let bias = focus.bias;\n              if (bias != 0) {\n                let mouseYVal = posToVal(mouseYPos, s.scale);\n                let seriesYValSign = yVal2 >= 0 ? 1 : -1;\n                let mouseYValSign = mouseYVal >= 0 ? 1 : -1;\n\n                // with a focus bias, we will never cross zero when prox testing\n                // it's either closest towards zero, or closest away from zero\n                if (mouseYValSign == seriesYValSign && (mouseYValSign == 1 ? bias == 1 ? yVal2 >= mouseYVal : yVal2 <= mouseYVal :\n                // >= 0\n                bias == 1 ? yVal2 <= mouseYVal : yVal2 >= mouseYVal //  < 0\n                )) {\n                  closestDist = dist;\n                  closestSeries = i;\n                }\n              } else {\n                closestDist = dist;\n                closestSeries = i;\n              }\n            }\n          }\n          let hPos, vPos;\n          if (scaleX.ori == 0) {\n            hPos = xPos2;\n            vPos = yPos;\n          } else {\n            hPos = yPos;\n            vPos = xPos2;\n          }\n          if (shouldSetLegend && cursorPts.length > 1) {\n            elColor(cursorPts[i], cursor.points.fill(self, i), cursor.points.stroke(self, i));\n            let ptWid,\n              ptHgt,\n              ptLft,\n              ptTop,\n              centered = true,\n              getBBox = cursor.points.bbox;\n            if (getBBox != null) {\n              centered = false;\n              let bbox = getBBox(self, i);\n              ptLft = bbox.left;\n              ptTop = bbox.top;\n              ptWid = bbox.width;\n              ptHgt = bbox.height;\n            } else {\n              ptLft = hPos;\n              ptTop = vPos;\n              ptWid = ptHgt = cursor.points.size(self, i);\n            }\n            elSize(cursorPts[i], ptWid, ptHgt, centered);\n            cursorPtsLft[i] = ptLft;\n            cursorPtsTop[i] = ptTop;\n            elTrans(cursorPts[i], incrRoundUp(ptLft, 1), incrRoundUp(ptTop, 1), plotWidCss, plotHgtCss);\n          }\n        }\n      }\n    }\n\n    // nit: cursor.drag.setSelect is assumed always true\n    if (select.show && dragging) {\n      if (src != null) {\n        let [xKey, yKey] = syncOpts.scales;\n        let [matchXKeys, matchYKeys] = syncOpts.match;\n        let [xKeySrc, yKeySrc] = src.cursor.sync.scales;\n\n        // match the dragX/dragY implicitness/explicitness of src\n        let sdrag = src.cursor.drag;\n        dragX = sdrag._x;\n        dragY = sdrag._y;\n        if (dragX || dragY) {\n          let {\n            left,\n            top,\n            width,\n            height\n          } = src.select;\n          let sori = src.scales[xKey].ori;\n          let sPosToVal = src.posToVal;\n          let sOff, sDim, sc, a, b;\n          let matchingX = xKey != null && matchXKeys(xKey, xKeySrc);\n          let matchingY = yKey != null && matchYKeys(yKey, yKeySrc);\n          if (matchingX && dragX) {\n            if (sori == 0) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[xKey];\n            a = valToPosX(sPosToVal(sOff, xKeySrc), sc, xDim, 0);\n            b = valToPosX(sPosToVal(sOff + sDim, xKeySrc), sc, xDim, 0);\n            setSelX(min(a, b), abs(b - a));\n          } else setSelX(0, xDim);\n          if (matchingY && dragY) {\n            if (sori == 1) {\n              sOff = left;\n              sDim = width;\n            } else {\n              sOff = top;\n              sDim = height;\n            }\n            sc = scales[yKey];\n            a = valToPosY(sPosToVal(sOff, yKeySrc), sc, yDim, 0);\n            b = valToPosY(sPosToVal(sOff + sDim, yKeySrc), sc, yDim, 0);\n            setSelY(min(a, b), abs(b - a));\n          } else setSelY(0, yDim);\n        } else hideSelect();\n      } else {\n        let rawDX = abs(rawMouseLeft1 - rawMouseLeft0);\n        let rawDY = abs(rawMouseTop1 - rawMouseTop0);\n        if (scaleX.ori == 1) {\n          let _rawDX = rawDX;\n          rawDX = rawDY;\n          rawDY = _rawDX;\n        }\n        dragX = drag.x && rawDX >= drag.dist;\n        dragY = drag.y && rawDY >= drag.dist;\n        let uni = drag.uni;\n        if (uni != null) {\n          // only calc drag status if they pass the dist thresh\n          if (dragX && dragY) {\n            dragX = rawDX >= uni;\n            dragY = rawDY >= uni;\n\n            // force unidirectionality when both are under uni limit\n            if (!dragX && !dragY) {\n              if (rawDY > rawDX) dragY = true;else dragX = true;\n            }\n          }\n        } else if (drag.x && drag.y && (dragX || dragY))\n          // if omni with no uni then both dragX / dragY should be true if either is true\n          dragX = dragY = true;\n        let p0, p1;\n        if (dragX) {\n          if (scaleX.ori == 0) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelX(min(p0, p1), abs(p1 - p0));\n          if (!dragY) setSelY(0, yDim);\n        }\n        if (dragY) {\n          if (scaleX.ori == 1) {\n            p0 = mouseLeft0;\n            p1 = mouseLeft1;\n          } else {\n            p0 = mouseTop0;\n            p1 = mouseTop1;\n          }\n          setSelY(min(p0, p1), abs(p1 - p0));\n          if (!dragX) setSelX(0, xDim);\n        }\n\n        // the drag didn't pass the dist requirement\n        if (!dragX && !dragY) {\n          setSelX(0, 0);\n          setSelY(0, 0);\n        }\n      }\n    }\n    drag._x = dragX;\n    drag._y = dragY;\n    if (src == null) {\n      if (_pub) {\n        if (syncKey != null) {\n          let [xSyncKey, ySyncKey] = syncOpts.scales;\n          syncOpts.values[0] = xSyncKey != null ? posToVal(scaleX.ori == 0 ? mouseLeft1 : mouseTop1, xSyncKey) : null;\n          syncOpts.values[1] = ySyncKey != null ? posToVal(scaleX.ori == 1 ? mouseLeft1 : mouseTop1, ySyncKey) : null;\n        }\n        pubSync(mousemove, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, idx);\n      }\n      if (cursorFocus) {\n        let shouldPub = _pub && syncOpts.setSeries;\n        let p = focus.prox;\n        if (focusedSeries == null) {\n          if (closestDist <= p) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        } else {\n          if (closestDist > p) setSeries(null, FOCUS_TRUE, true, shouldPub);else if (closestSeries != focusedSeries) setSeries(closestSeries, FOCUS_TRUE, true, shouldPub);\n        }\n      }\n    }\n    if (shouldSetLegend) {\n      legend.idx = idx;\n      setLegend();\n    }\n    _fire !== false && fire(\"setCursor\");\n  }\n  let rect = null;\n  Object.defineProperty(self, 'rect', {\n    get() {\n      if (rect == null) syncRect(false);\n      return rect;\n    }\n  });\n  function syncRect(defer = false) {\n    if (defer) rect = null;else {\n      rect = over.getBoundingClientRect();\n      fire(\"syncRect\", rect);\n    }\n  }\n  function mouseMove(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n\n    // Chrome on Windows has a bug which triggers a stray mousemove event after an initial mousedown event\n    // when clicking into a plot as part of re-focusing the browser window.\n    // we gotta ignore it to avoid triggering a phantom drag / setSelect\n    // However, on touch-only devices Chrome-based browsers trigger a 0-distance mousemove before mousedown\n    // so we don't ignore it when mousedown has set the dragging flag\n    if (dragging && e != null && e.movementX == 0 && e.movementY == 0) return;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, e != null);\n    if (e != null) updateCursor(null, true, true);else updateCursor(src, true, false);\n  }\n  function cacheMouse(e, src, _l, _t, _w, _h, _i, initial, snap) {\n    if (rect == null) syncRect(false);\n    setCursorEvent(e);\n    if (e != null) {\n      _l = e.clientX - rect.left;\n      _t = e.clientY - rect.top;\n    } else {\n      if (_l < 0 || _t < 0) {\n        mouseLeft1 = -10;\n        mouseTop1 = -10;\n        return;\n      }\n      let [xKey, yKey] = syncOpts.scales;\n      let syncOptsSrc = src.cursor.sync;\n      let [xValSrc, yValSrc] = syncOptsSrc.values;\n      let [xKeySrc, yKeySrc] = syncOptsSrc.scales;\n      let [matchXKeys, matchYKeys] = syncOpts.match;\n      let rotSrc = src.axes[0].side % 2 == 1;\n      let xDim = scaleX.ori == 0 ? plotWidCss : plotHgtCss,\n        yDim = scaleX.ori == 1 ? plotWidCss : plotHgtCss,\n        _xDim = rotSrc ? _h : _w,\n        _yDim = rotSrc ? _w : _h,\n        _xPos = rotSrc ? _t : _l,\n        _yPos = rotSrc ? _l : _t;\n      if (xKeySrc != null) _l = matchXKeys(xKey, xKeySrc) ? getPos(xValSrc, scales[xKey], xDim, 0) : -10;else _l = xDim * (_xPos / _xDim);\n      if (yKeySrc != null) _t = matchYKeys(yKey, yKeySrc) ? getPos(yValSrc, scales[yKey], yDim, 0) : -10;else _t = yDim * (_yPos / _yDim);\n      if (scaleX.ori == 1) {\n        let __l = _l;\n        _l = _t;\n        _t = __l;\n      }\n    }\n    if (snap) {\n      if (_l <= 1 || _l >= plotWidCss - 1) _l = incrRound(_l, plotWidCss);\n      if (_t <= 1 || _t >= plotHgtCss - 1) _t = incrRound(_t, plotHgtCss);\n    }\n    if (initial) {\n      rawMouseLeft0 = _l;\n      rawMouseTop0 = _t;\n      [mouseLeft0, mouseTop0] = cursor.move(self, _l, _t);\n    } else {\n      mouseLeft1 = _l;\n      mouseTop1 = _t;\n    }\n  }\n  const _hideProps = {\n    width: 0,\n    height: 0,\n    left: 0,\n    top: 0\n  };\n  function hideSelect() {\n    setSelect(_hideProps, false);\n  }\n  let downSelectLeft;\n  let downSelectTop;\n  let downSelectWidth;\n  let downSelectHeight;\n  function mouseDown(e, src, _l, _t, _w, _h, _i) {\n    dragging = true;\n    dragX = dragY = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, true, false);\n    if (e != null) {\n      onMouse(mouseup, doc, mouseUp, false);\n      pubSync(mousedown, self, mouseLeft0, mouseTop0, plotWidCss, plotHgtCss, null);\n    }\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    downSelectLeft = left;\n    downSelectTop = top;\n    downSelectWidth = width;\n    downSelectHeight = height;\n    hideSelect();\n  }\n  function mouseUp(e, src, _l, _t, _w, _h, _i) {\n    dragging = drag._x = drag._y = false;\n    cacheMouse(e, src, _l, _t, _w, _h, _i, false, true);\n    let {\n      left,\n      top,\n      width,\n      height\n    } = select;\n    let hasSelect = width > 0 || height > 0;\n    let chgSelect = downSelectLeft != left || downSelectTop != top || downSelectWidth != width || downSelectHeight != height;\n    hasSelect && chgSelect && setSelect(select);\n    if (drag.setScale && hasSelect && chgSelect) {\n      //\tif (syncKey != null) {\n      //\t\tdragX = drag.x;\n      //\t\tdragY = drag.y;\n      //\t}\n\n      let xOff = left,\n        xDim = width,\n        yOff = top,\n        yDim = height;\n      if (scaleX.ori == 1) {\n        xOff = top, xDim = height, yOff = left, yDim = width;\n      }\n      if (dragX) {\n        _setScale(xScaleKey, posToVal(xOff, xScaleKey), posToVal(xOff + xDim, xScaleKey));\n      }\n      if (dragY) {\n        for (let k in scales) {\n          let sc = scales[k];\n          if (k != xScaleKey && sc.from == null && sc.min != inf) {\n            _setScale(k, posToVal(yOff + yDim, k), posToVal(yOff, k));\n          }\n        }\n      }\n      hideSelect();\n    } else if (cursor.lock) {\n      cursor._lock = !cursor._lock;\n      if (!cursor._lock) updateCursor(null, true, false);\n    }\n    if (e != null) {\n      offMouse(mouseup, doc);\n      pubSync(mouseup, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n    }\n  }\n  function mouseLeave(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    let _dragging = dragging;\n    if (dragging) {\n      // handle case when mousemove aren't fired all the way to edges by browser\n      let snapH = true;\n      let snapV = true;\n      let snapProx = 10;\n      let dragH, dragV;\n      if (scaleX.ori == 0) {\n        dragH = dragX;\n        dragV = dragY;\n      } else {\n        dragH = dragY;\n        dragV = dragX;\n      }\n      if (dragH && dragV) {\n        // maybe omni corner snap\n        snapH = mouseLeft1 <= snapProx || mouseLeft1 >= plotWidCss - snapProx;\n        snapV = mouseTop1 <= snapProx || mouseTop1 >= plotHgtCss - snapProx;\n      }\n      if (dragH && snapH) mouseLeft1 = mouseLeft1 < mouseLeft0 ? 0 : plotWidCss;\n      if (dragV && snapV) mouseTop1 = mouseTop1 < mouseTop0 ? 0 : plotHgtCss;\n      updateCursor(null, true, true);\n      dragging = false;\n    }\n    mouseLeft1 = -10;\n    mouseTop1 = -10;\n\n    // passing a non-null timestamp to force sync/mousemove event\n    updateCursor(null, true, true);\n    if (_dragging) dragging = _dragging;\n  }\n  function dblClick(e, src, _l, _t, _w, _h, _i) {\n    if (cursor._lock) return;\n    setCursorEvent(e);\n    autoScaleX();\n    hideSelect();\n    if (e != null) pubSync(dblclick, self, mouseLeft1, mouseTop1, plotWidCss, plotHgtCss, null);\n  }\n  function syncPxRatio() {\n    axes.forEach(syncFontSize);\n    _setSize(self.width, self.height, true);\n  }\n  on(dppxchange, win, syncPxRatio);\n\n  // internal pub/sub\n  const events = {};\n  events.mousedown = mouseDown;\n  events.mousemove = mouseMove;\n  events.mouseup = mouseUp;\n  events.dblclick = dblClick;\n  events[\"setSeries\"] = (e, src, idx, opts) => {\n    let seriesIdxMatcher = syncOpts.match[2];\n    idx = seriesIdxMatcher(self, src, idx);\n    idx != -1 && setSeries(idx, opts, true, false);\n  };\n  if (cursor.show) {\n    onMouse(mousedown, over, mouseDown);\n    onMouse(mousemove, over, mouseMove);\n    onMouse(mouseenter, over, e => {\n      setCursorEvent(e);\n      syncRect(false);\n    });\n    onMouse(mouseleave, over, mouseLeave);\n    onMouse(dblclick, over, dblClick);\n    cursorPlots.add(self);\n    self.syncRect = syncRect;\n  }\n\n  // external on/off\n  const hooks = self.hooks = opts.hooks || {};\n  function fire(evName, a1, a2) {\n    if (deferHooks) hooksQueue.push([evName, a1, a2]);else {\n      if (evName in hooks) {\n        hooks[evName].forEach(fn => {\n          fn.call(null, self, a1, a2);\n        });\n      }\n    }\n  }\n  (opts.plugins || []).forEach(p => {\n    for (let evName in p.hooks) hooks[evName] = (hooks[evName] || []).concat(p.hooks[evName]);\n  });\n  const seriesIdxMatcher = (self, src, srcSeriesIdx) => srcSeriesIdx;\n  const syncOpts = assign({\n    key: null,\n    setSeries: false,\n    filters: {\n      pub: retTrue,\n      sub: retTrue\n    },\n    scales: [xScaleKey, series[1] ? series[1].scale : null],\n    match: [retEq, retEq, seriesIdxMatcher],\n    values: [null, null]\n  }, cursor.sync);\n  if (syncOpts.match.length == 2) syncOpts.match.push(seriesIdxMatcher);\n  cursor.sync = syncOpts;\n  const syncKey = syncOpts.key;\n  const sync = _sync(syncKey);\n  function pubSync(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.pub(type, src, x, y, w, h, i)) sync.pub(type, src, x, y, w, h, i);\n  }\n  sync.sub(self);\n  function pub(type, src, x, y, w, h, i) {\n    if (syncOpts.filters.sub(type, src, x, y, w, h, i)) events[type](null, src, x, y, w, h, i);\n  }\n  self.pub = pub;\n  function destroy() {\n    sync.unsub(self);\n    cursorPlots.delete(self);\n    mouseListeners.clear();\n    off(dppxchange, win, syncPxRatio);\n    root.remove();\n    legendTable?.remove(); // in case mounted outside of root\n    fire(\"destroy\");\n  }\n  self.destroy = destroy;\n  function _init() {\n    fire(\"init\", opts, data);\n    setData(data || opts.data, false);\n    if (pendScales[xScaleKey]) setScale(xScaleKey, pendScales[xScaleKey]);else autoScaleX();\n    shouldSetSelect = select.show && (select.width > 0 || select.height > 0);\n    shouldSetCursor = shouldSetLegend = true;\n    _setSize(opts.width, opts.height);\n  }\n  series.forEach(initSeries);\n  axes.forEach(initAxis);\n  if (then) {\n    if (then instanceof HTMLElement) {\n      then.appendChild(root);\n      _init();\n    } else then(self, _init);\n  } else _init();\n  return self;\n}\nuPlot.assign = assign;\nuPlot.fmtNum = fmtNum;\nuPlot.rangeNum = rangeNum;\nuPlot.rangeLog = rangeLog;\nuPlot.rangeAsinh = rangeAsinh;\nuPlot.orient = orient;\nuPlot.pxRatio = pxRatio;\n{\n  uPlot.join = join;\n}\n{\n  uPlot.fmtDate = fmtDate;\n  uPlot.tzDate = tzDate;\n}\nuPlot.sync = _sync;\n{\n  uPlot.addGap = addGap;\n  uPlot.clipGaps = clipGaps;\n  let paths = uPlot.paths = {\n    points\n  };\n  paths.linear = linear;\n  paths.stepped = stepped;\n  paths.bars = bars;\n  paths.spline = monotoneCubic;\n}\nexport { uPlot as default };","import {\n  ChangeDetectionStrategy,\n  Component,\n  DestroyRef,\n  ElementRef,\n  ViewEncapsulation,\n  afterNextRender,\n  effect,\n  inject,\n  input,\n  output,\n} from '@angular/core';\nimport { ScaleRange } from '@app/domain/chart';\nimport { Milliseconds, Seconds, daysToMilliseconds, formatHours } from '@app/domain/date-time';\nimport { AppStore } from '@app/providers/state';\nimport { isNumber } from '@app/utils/assert';\nimport { format } from 'date-fns/format';\nimport { millisecondsToSeconds } from 'date-fns/millisecondsToSeconds';\nimport { secondsToMilliseconds } from 'date-fns/secondsToMilliseconds';\nimport uPlot, { AlignedData, Plugin } from 'uplot';\n\nconst barChartPlugin = (params: { colors: (string | null)[]; minRangeInMs: Milliseconds }): Plugin => {\n  const minRangeInSeconds: Seconds = millisecondsToSeconds(params.minRangeInMs);\n\n  const getVisibleRangeLength = (u: uPlot): number => {\n    const visibleRangeMin = u.scales.x?.min;\n    const visibleRangeMax = u.scales.x?.max;\n    if (visibleRangeMin === undefined || visibleRangeMax === undefined) return Number.POSITIVE_INFINITY;\n    return visibleRangeMax - visibleRangeMin;\n  };\n\n  const drawBarChart: uPlot.Series.Points.Show = (self: uPlot, seriesIndex: number, i0: number, i1: number) => {\n    let { ctx } = self;\n    let scale = self.series[seriesIndex]?.scale;\n    if (!scale) return;\n    const maxY = self.valToPos(0, scale, true);\n    const color = params.colors[seriesIndex];\n    if (!color) return false;\n    ctx.fillStyle = color;\n\n    let j = i0;\n\n    while (j <= i1) {\n      const data0J = self.data[0][j];\n      const dataIJ = self.data[seriesIndex]?.[j];\n      if (typeof data0J !== 'number' || typeof dataIJ !== 'number') continue;\n      let cx = Math.round(self.valToPos(data0J, 'x', true));\n      let cy = Math.round(self.valToPos(dataIJ, scale, true));\n      const range = getVisibleRangeLength(self);\n      if (cy < maxY && range <= minRangeInSeconds) {\n        ctx.beginPath();\n        ctx.rect(cx, cy, 1, maxY - cy);\n        ctx.fill();\n      }\n      j++;\n    }\n\n    ctx.restore();\n    return false;\n  };\n\n  return {\n    hooks: {},\n    opts: (u: uPlot, opts: uPlot.Options) => {\n      opts.series\n        .filter((s) => s.scale === 'm')\n        .forEach((s) => {\n          s.points = {\n            show: drawBarChart,\n          };\n        });\n    },\n  };\n};\n\n@Component({\n  selector: 'timeline-chart-uplot',\n  template: ``,\n  styleUrl: '/node_modules/uplot/dist/uPlot.min.css',\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [\n    `\n      timeline-chart-uplot {\n        display: block;\n        width: 100%;\n        height: 100%;\n        position: relative;\n        overflow: hidden;\n\n        .uplot {\n          position: absolute;\n          font-family: Roboto, 'Helvetica Neue', sans-serif !important;\n\n          & th {\n            font-weight: 400 !important;\n          }\n          .u-value {\n            vertical-align: -1px;\n          }\n        }\n        .hidden {\n          display: none;\n        }\n      }\n    `,\n  ],\n  standalone: true,\n})\nexport class TimelineChartUplotComponent {\n  private elementRef = inject<ElementRef<HTMLElement>>(ElementRef);\n  private destroyRef = inject(DestroyRef);\n  private store = inject(AppStore);\n\n  public chartData = input<AlignedData>();\n  public range = input<ScaleRange>();\n  public rangeChange = output<ScaleRange>();\n\n  private setRange(value: ScaleRange | undefined) {\n    if (!value) return;\n    const chartData = this.chartData();\n    const oldMin = Math.round(this.uplot?.scales.x?.min ?? -1);\n    const oldMax = Math.round(this.uplot?.scales.x?.max ?? -1);\n    const dataMin = chartData?.[0]?.[0];\n    const dataMax = chartData?.[0][chartData?.[0].length - 1] ?? [];\n    const newMin =\n      value[0] instanceof Date\n        ? millisecondsToSeconds(value[0].valueOf())\n        : isNumber(dataMin)\n          ? dataMin\n          : millisecondsToSeconds(Date.now());\n    const newMax =\n      value[1] instanceof Date\n        ? millisecondsToSeconds(value[1].valueOf())\n        : isNumber(dataMax)\n          ? dataMax\n          : millisecondsToSeconds(Date.now());\n    if (oldMin === newMin && oldMax === newMax) return;\n    // Wait until visible\n    this.uplot?.setScale('x', { min: newMin, max: newMax });\n  }\n  private firstRangeChangeSkipped = false;\n  private uplot?: uPlot;\n  private readonly headerHeight = 31;\n  private resizeObserver?: ResizeObserver;\n  constructor() {\n    effect(() => {\n      this.store.theme();\n\n      const stroke = window.getComputedStyle(this.elementRef.nativeElement).color;\n      const primaryColor = window\n        .getComputedStyle(this.elementRef.nativeElement)\n        .getPropertyValue('--mdc-outlined-text-field-focus-label-text-color');\n      const secondaryColor = window\n        .getComputedStyle(this.elementRef.nativeElement)\n        .getPropertyValue('--mdc-filled-text-field-container-color');\n\n      this.uplot?.batch((uPlot: uPlot) => {\n        uPlot?.axes.forEach((a) => (a.stroke = () => stroke));\n        uPlot?.series.forEach((s, i) => {\n          if (i === 1) s.fill = () => primaryColor;\n          if (i === 2) s.fill = () => secondaryColor;\n        });\n        uPlot?.redraw(true);\n      });\n    });\n    effect(() => {\n      const chartData = this.chartData();\n      if (chartData) {\n        this.uplot?.batch((uPlot: uPlot) => {\n          uPlot.setData(chartData);\n        });\n      }\n    });\n    effect(() => {\n      const range = this.range();\n      this.setRange(range);\n    });\n    this.destroyRef.onDestroy(() => {\n      this.resizeObserver?.unobserve(this.elementRef.nativeElement);\n      this.uplot?.destroy();\n    });\n    afterNextRender(() => {\n      this.resizeObserver = new ResizeObserver(([entry]) => {\n        if (entry)\n          this.uplot?.setSize({\n            width: Math.floor(entry.contentRect.width),\n            height: Math.floor(entry.contentRect.height - this.headerHeight),\n          });\n      });\n      this.resizeObserver.observe(this.elementRef.nativeElement);\n      this.uplot = new uPlot(\n        {\n          width: this.elementRef.nativeElement.offsetWidth,\n          height: this.elementRef.nativeElement.offsetHeight - this.headerHeight,\n          plugins: [\n            barChartPlugin({\n              colors: [null, 'hsl(87, 74%, 40%)', 'hsl(87, 0%, 40%)'],\n              minRangeInMs: daysToMilliseconds(365),\n            }),\n          ],\n          hooks: {\n            setScale: [\n              (self: uPlot, key: string) => {\n                if (!this.firstRangeChangeSkipped) {\n                  this.firstRangeChangeSkipped = true;\n                  return;\n                }\n                const scale = self.scales[key];\n                if (key !== 'x' || !scale || !isNumber(scale.min) || !isNumber(scale.max)) {\n                  return;\n                }\n                const dataMin = self.data[0][0];\n                const dataMax = self.data[0][self.data[0].length - 1];\n                const min = scale.min === dataMin ? null : new Date(secondsToMilliseconds(scale.min));\n                const max = scale.max === dataMax ? null : new Date(secondsToMilliseconds(scale.max));\n                const event = [min, max] as const;\n                this.rangeChange.emit(event);\n              },\n            ],\n          },\n          scales: {\n            m: {\n              auto: true,\n            },\n            x: {\n              time: true,\n              auto: true,\n              range(self, min, max) {\n                const currentMin = self.scales.x!.min!;\n                const currentMax = self.scales.x!.max!;\n                const minRangeWidthInSeconds: Seconds = millisecondsToSeconds(daysToMilliseconds(0.99));\n                const missingRange: Seconds = max - min;\n                if (missingRange <= minRangeWidthInSeconds) {\n                  return [currentMin - missingRange * 0.5, currentMax + missingRange * 0.5];\n                } else {\n                  return [min, max];\n                }\n              },\n            },\n          },\n          series: [\n            {\n              value: (_, value) => (!value ? '-' : format(new Date(secondsToMilliseconds(value)), 'yyyy-MM-dd')),\n              label: 'Day',\n            },\n            {\n              show: true,\n              label: this.getLegendLabel(),\n              scale: 'm',\n              value: (self, rawValue, seriesIndex, idx) => {\n                const otherBarValue = typeof idx === 'number' ? self.data[seriesIndex + 1]?.[idx] : undefined;\n                const valueToShow =\n                  rawValue === 0 && otherBarValue !== 0 && typeof otherBarValue === 'number' ? otherBarValue : rawValue;\n                return this.getLegendValue(valueToShow);\n              },\n            },\n            {\n              show: true,\n              scale: 'm',\n              class: 'hidden',\n            },\n          ],\n          axes: [\n            {},\n            {\n              scale: 'm',\n              size: 50,\n              label: this.getLegendLabel(),\n              values: (_, ticks) => ticks.map((raw) => this.getLegendValue(raw)),\n            },\n          ],\n        },\n        this.chartData(),\n        this.elementRef.nativeElement,\n      );\n    });\n  }\n  getLegendValue(value: number) {\n    return value ? formatHours(value) : '--:--';\n  }\n\n  getLegendLabel() {\n    return 'Hours';\n  }\n}\n","import { animate, style, transition, trigger } from '@angular/animations';\nimport { A11yModule } from '@angular/cdk/a11y';\nimport { NgTemplateOutlet } from '@angular/common';\nimport { ChangeDetectionStrategy, Component, DestroyRef, computed, effect, inject } from '@angular/core';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { FormControl, FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { MatIconButton } from '@angular/material/button';\nimport { MatFormField, MatLabel, MatSuffix } from '@angular/material/form-field';\nimport { MatIcon } from '@angular/material/icon';\nimport { MatInput } from '@angular/material/input';\nimport { MatMenu, MatMenuItem, MatMenuTrigger } from '@angular/material/menu';\nimport { MatOption, MatSelect } from '@angular/material/select';\nimport { MatTooltip } from '@angular/material/tooltip';\nimport { Router } from '@angular/router';\nimport { DatetimeLocalDirective } from '@app/directives/datetime-local.directive';\nimport { ScaleRange, hasChartData } from '@app/domain/chart';\nimport { FilterMatrixParams, encodeFilterParams } from '@app/domain/router';\nimport { MapPipe } from '@app/pipes/map.pipe';\nimport { AppStore } from '@app/providers/state';\nimport { deepEquals } from '@app/utils/assert';\nimport { endOfDay } from 'date-fns/endOfDay';\nimport { endOfMonth } from 'date-fns/endOfMonth';\nimport { endOfWeek } from 'date-fns/endOfWeek';\nimport { endOfYear } from 'date-fns/endOfYear';\nimport { startOfDay } from 'date-fns/startOfDay';\nimport { startOfMonth } from 'date-fns/startOfMonth';\nimport { startOfWeek } from 'date-fns/startOfWeek';\nimport { startOfYear } from 'date-fns/startOfYear';\nimport { subDays } from 'date-fns/subDays';\nimport { subMonths } from 'date-fns/subMonths';\nimport { subWeeks } from 'date-fns/subWeeks';\nimport { subYears } from 'date-fns/subYears';\nimport { debounceTime, distinctUntilChanged } from 'rxjs';\nimport { ButtonResetInputComponent } from '../../directives/button-reset-input.component';\nimport { TimelineChartUplotComponent } from './timeline-chart-uplot.component';\n\ntype Wrap<T> = Required<{ [Key in keyof T]: FormControl<T[Key]> }>;\n\n@Component({\n  selector: 'tasks-filter',\n  templateUrl: './tasks-filter.component.html',\n  styleUrls: ['./tasks-filter.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [\n    trigger('inOutAnimation', [\n      transition(':enter', [style({ opacity: 0 }), animate('300ms ease-out', style({ opacity: 1 }))]),\n    ]),\n  ],\n  standalone: true,\n  imports: [\n    MatIconButton,\n    MatSelect,\n    MatOption,\n    MatIcon,\n    MatMenu,\n    MatMenuTrigger,\n    MatMenuItem,\n    MatFormField,\n    MatSuffix,\n    MatLabel,\n    MatInput,\n    ReactiveFormsModule,\n    A11yModule,\n    MapPipe,\n    TimelineChartUplotComponent,\n    ButtonResetInputComponent,\n    DatetimeLocalDirective,\n    NgTemplateOutlet,\n    MatTooltip,\n  ],\n})\nexport class TasksFilterComponent {\n  private store = inject(AppStore);\n  private router = inject<Router>(Router);\n  private destroyRef = inject(DestroyRef);\n\n  public dataRange = computed(() => {\n    const data = this.store.filterChartData();\n    const range = this.store.filterRange();\n    if (!hasChartData(data) || !range) return undefined;\n    return { data, range } as const;\n  });\n\n  constructor() {\n    this.destroyRef.onDestroy(() => {\n      this.router.navigate([], { queryParams: {} });\n    });\n    effect(() => {\n      const decodedFilterParams = this.store.decodedFilterParams();\n      this.form.patchValue(decodedFilterParams);\n    });\n    this.form.valueChanges\n      .pipe(debounceTime(10), distinctUntilChanged(deepEquals), takeUntilDestroyed())\n      .subscribe((value) => this.router.navigate([], { queryParams: encodeFilterParams(value) }));\n  }\n\n  hasChartData = hasChartData;\n  form = new FormGroup<Wrap<FilterMatrixParams>>({\n    search: new FormControl(),\n    from: new FormControl(),\n    to: new FormControl(),\n    durationSort: new FormControl(),\n  });\n\n  onChartRangeChange(e: ScaleRange) {\n    this.form.patchValue({\n      from: e[0] ?? undefined,\n      to: e[1] ?? undefined,\n    });\n  }\n\n  setAnyTime() {\n    this.form.patchValue({\n      from: undefined,\n      to: undefined,\n    });\n  }\n  setToday() {\n    this.form.patchValue({\n      from: startOfDay(new Date()),\n      to: endOfDay(new Date()),\n    });\n  }\n  setYesterday() {\n    this.form.patchValue({\n      from: startOfDay(subDays(new Date(), 1)),\n      to: endOfDay(subDays(new Date(), 1)),\n    });\n  }\n  setThisWeek() {\n    this.form.patchValue({\n      from: startOfWeek(new Date(), { weekStartsOn: 1 }),\n      to: endOfWeek(new Date(), { weekStartsOn: 1 }),\n    });\n  }\n  setPreviousWeek() {\n    this.form.patchValue({\n      from: startOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n      to: endOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\n    });\n  }\n  setThisMonth() {\n    this.form.patchValue({\n      from: startOfMonth(new Date()),\n      to: endOfMonth(new Date()),\n    });\n  }\n  setPreviousMonth() {\n    this.form.patchValue({\n      from: startOfMonth(subMonths(new Date(), 1)),\n      to: endOfMonth(subMonths(new Date(), 1)),\n    });\n  }\n  setThisYear() {\n    this.form.patchValue({\n      from: startOfYear(new Date()),\n      to: endOfYear(new Date()),\n    });\n  }\n  setPreviousYear() {\n    this.form.patchValue({\n      from: startOfYear(subYears(new Date(), 1)),\n      to: endOfYear(subYears(new Date(), 1)),\n    });\n  }\n}\n","<form\n  class=\"mat-body\"\n  (submit)=\"$event.preventDefault()\"\n  [formGroup]=\"form\"\n  cdkTrapFocus\n  [cdkTrapFocusAutoCapture]=\"true\"\n>\n  <mat-form-field class=\"name\">\n    <mat-label>Name</mat-label>\n    <input\n      type=\"search\"\n      matInput\n      placeholder=\"Search\"\n      name=\"search\"\n      formControlName=\"search\"\n      #searchInput\n      cdkFocusRegionStart\n      cdkFocusInitial\n    />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.search.value\"\n      (reset)=\"form.controls.search.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"duration\">\n    <mat-label>Sort by duration</mat-label>\n    <mat-select formControlName=\"durationSort\">\n      <mat-option>Default</mat-option>\n      <mat-option value=\"longestFirst\">Longest first</mat-option>\n      <mat-option value=\"shortestFirst\">Shortest first</mat-option>\n    </mat-select>\n  </mat-form-field>\n  <mat-form-field class=\"from\">\n    <mat-label>From</mat-label>\n    <input matInput placeholder=\"From\" formControlName=\"from\" type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.from.value\"\n      (reset)=\"form.controls.from.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <mat-form-field class=\"to\">\n    <mat-label>To</mat-label>\n    <input matInput placeholder=\"To\" formControlName=\"to\" cdkFocusRegionEnd type=\"datetime-local\" />\n    <button-reset-input-control\n      matSuffix\n      [value]=\"form.controls.to.value\"\n      (reset)=\"form.controls.to.reset()\"\n    ></button-reset-input-control>\n  </mat-form-field>\n  <button class=\"dates-menu\" mat-icon-button matSuffix [matMenuTriggerFor]=\"fromMenu\" matTooltip=\"Choose range preset\">\n    <mat-icon svgIcon=\"date_range\"></mat-icon>\n  </button>\n</form>\n<mat-menu #fromMenu=\"matMenu\">\n  <button mat-menu-item (click)=\"setAnyTime()\">Any time</button>\n  <button mat-menu-item (click)=\"setToday()\">Today</button>\n  <button mat-menu-item (click)=\"setYesterday()\">Yesterday</button>\n  <button mat-menu-item (click)=\"setThisWeek()\">This week</button>\n  <button mat-menu-item (click)=\"setPreviousWeek()\">Previous week</button>\n  <button mat-menu-item (click)=\"setThisMonth()\">This month</button>\n  <button mat-menu-item (click)=\"setPreviousMonth()\">Previous month</button>\n  <button mat-menu-item (click)=\"setThisYear()\">This year</button>\n  <button mat-menu-item (click)=\"setPreviousYear()\">Previous year</button>\n</mat-menu>\n@if (dataRange(); as dataRange) {\n  @defer {\n    <timeline-chart-uplot\n      [@inOutAnimation]\n      [chartData]=\"dataRange.data\"\n      barWidth=\"day\"\n      [range]=\"dataRange.range\"\n      (rangeChange)=\"onChartRangeChange($event)\"\n    ></timeline-chart-uplot>\n  }\n} @else {\n  <timeline-chart-uplot [chartData]=\"[[], []]\" barWidth=\"day\"></timeline-chart-uplot>\n}\n\n<svg style=\"display: none\">\n  <style>\n    .u-value {\n      vertical-align: -3px;\n    }\n  </style>\n</svg>\n"],"mappings":"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","names":["_c0","_c1","_c2","_c3","MatSelect_Conditional_4_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r1","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate","MatSelect_Conditional_5_Conditional_1_Template","ɵɵprojection","MatSelect_Conditional_5_Conditional_2_Template","MatSelect_Conditional_5_Template","ɵɵtemplate","ɵɵconditional","MatSelect_ng_template_10_Template","_r3","ɵɵgetCurrentView","ɵɵlistener","$event","ɵɵrestoreView","ɵɵresetView","ɵɵclassMapInterpolate1","ɵɵproperty","ɵɵattribute","matSelectAnimations","trigger","transition","query","animateChild","state","style","animate","nextUniqueId","MAT_SELECT_SCROLL_STRATEGY","InjectionToken","overlay","inject","Overlay","MAT_SELECT_CONFIG","InjectionToken","MAT_SELECT_TRIGGER","InjectionToken","MatSelectChange","source","value","MatSelect","index","option","panel","labelCount","_countGroupLabelsBeforeOption","element","_getOptionScrollPosition","Validators","fn","newValue","_viewportRuler","_changeDetectorRef","_unusedNgZone","defaultErrorStateMatcher","_elementRef","_dir","parentForm","parentFormGroup","_parentFormField","ngControl","tabIndex","scrollStrategyFactory","_liveAnnouncer","_defaultOptions","o1","o2","nextUniqueId","Subject","defer","options","startWith","switchMap","merge","EventEmitter","filter","o","map","_ErrorStateTracker","SelectionModel","distinctUntilChanged","takeUntil","event","newAriaLabelledby","changes","modal","panelId","removeAriaReferencedId","addAriaReferencedId","isDisabled","selectedOptions","keyCode","isArrowKey","isOpenKey","manager","hasModifierKey","previouslySelectedOption","selectedOption","isTyping","hasDeselectedOptions","opt","previouslyFocusedIndex","take","currentValue","correspondingOption","preferredOrigin","CdkOverlayOrigin","ActiveDescendantKeyManager","changedOrDestroyed","isUserInput","wasSelected","a","b","fallbackValue","valueToEmit","firstEnabledOptionIndex","labelId","labelExpression","isOpen","ids","t","ɵɵdirectiveInject","ViewportRuler","ChangeDetectorRef","NgZone","ErrorStateMatcher","ElementRef","Directionality","NgForm","FormGroupDirective","MAT_FORM_FIELD","NgControl","ɵɵinjectAttribute","MAT_SELECT_SCROLL_STRATEGY","LiveAnnouncer","MAT_SELECT_CONFIG","ɵɵdefineComponent","rf","ctx","dirIndex","ɵɵcontentQuery","MatOption","MAT_OPTGROUP","_t","ɵɵqueryRefresh","ɵɵloadQuery","ɵɵviewQuery","_c0","_c1","CdkConnectedOverlay","ɵɵlistener","$event","ɵɵattribute","ɵɵclassProp","booleanAttribute","numberAttribute","ɵɵProvidersFeature","MatFormFieldControl","MAT_OPTION_PARENT_COMPONENT","ɵɵInputTransformsFeature","ɵɵNgOnChangesFeature","ɵɵStandaloneFeature","_c3","_r1","ɵɵgetCurrentView","ɵɵprojectionDef","_c2","ɵɵelementStart","ɵɵrestoreView","ɵɵresetView","ɵɵtemplate","MatSelect_Conditional_4_Template","MatSelect_Conditional_5_Template","ɵɵelementEnd","ɵɵnamespaceSVG","ɵɵelement","MatSelect_ng_template_10_Template","fallbackOverlayOrigin_r4","ɵɵreference","ɵɵadvance","ɵɵconditional","ɵɵproperty","NgClass","matSelectAnimations","endOfMonth","date","_date","toDate","month","defaultOptions","getDefaultOptions","endOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","endOfYear","date","_date","toDate","year","startOfMonth","date","_date","toDate","startOfWeek","date","options","defaultOptions","getDefaultOptions","weekStartsOn","_date","toDate","day","diff","constructFrom","date","value","startOfYear","date","cleanDate","toDate","_date","constructFrom","addDays","date","amount","_date","toDate","constructFrom","subDays","date","amount","addDays","addMonths","date","amount","_date","toDate","constructFrom","dayOfMonth","endOfDesiredMonth","daysInMonth","subMonths","date","amount","addMonths","addWeeks","date","amount","days","addDays","subWeeks","date","amount","addWeeks","addYears","date","amount","addMonths","subYears","date","amount","addYears","formatHours","value","map","part","pad2","assertNever","join","daysToMilliseconds","days","formatDistanceLocale","formatDistance","token","count","options","result","tokenValue","buildFormatLongFn","args","options","width","dateFormats","timeFormats","dateTimeFormats","formatLong","buildFormatLongFn","formatRelativeLocale","formatRelative","token","_date","_baseDate","_options","buildLocalizeFn","args","value","options","context","valuesArray","defaultWidth","width","index","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","_options","number","rem100","localize","buildLocalizeFn","quarter","buildMatchFn","args","string","options","width","matchPattern","matchResult","matchedString","parsePatterns","key","findIndex","pattern","findKey","value","rest","object","predicate","array","buildMatchPatternFn","args","string","options","matchResult","matchedString","parseResult","value","rest","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","match","buildMatchPatternFn","value","buildMatchFn","index","enUS","formatDistance","formatLong","formatRelative","localize","match","getTimezoneOffsetInMilliseconds","date","_date","toDate","utcDate","differenceInCalendarDays","dateLeft","dateRight","startOfDayLeft","startOfDay","startOfDayRight","timestampLeft","getTimezoneOffsetInMilliseconds","timestampRight","millisecondsInDay","getDayOfYear","date","_date","toDate","differenceInCalendarDays","startOfYear","startOfISOWeek","date","startOfWeek","getISOWeekYear","date","_date","toDate","year","fourthOfJanuaryOfNextYear","constructFrom","startOfNextYear","startOfISOWeek","fourthOfJanuaryOfThisYear","startOfThisYear","startOfISOWeekYear","date","year","getISOWeekYear","fourthOfJanuary","constructFrom","startOfISOWeek","getISOWeek","date","_date","toDate","diff","startOfISOWeek","startOfISOWeekYear","millisecondsInWeek","getWeekYear","date","options","_date","toDate","year","defaultOptions","getDefaultOptions","firstWeekContainsDate","firstWeekOfNextYear","constructFrom","startOfNextYear","startOfWeek","firstWeekOfThisYear","startOfThisYear","startOfWeekYear","date","options","defaultOptions","getDefaultOptions","firstWeekContainsDate","year","getWeekYear","firstWeek","constructFrom","startOfWeek","getWeek","date","options","_date","toDate","diff","startOfWeek","startOfWeekYear","millisecondsInWeek","addLeadingZeros","number","targetLength","sign","output","lightFormatters","date","token","signedYear","year","addLeadingZeros","month","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","date","token","localize","era","signedYear","year","lightFormatters","options","signedWeekYear","getWeekYear","weekYear","twoDigitYear","addLeadingZeros","isoWeekYear","getISOWeekYear","quarter","month","week","getWeek","isoWeek","getISOWeek","dayOfYear","getDayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","dayPeriodEnumValue","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","offset","delimiter","sign","absOffset","minutes","dateLongFormatter","pattern","formatLong","timeLongFormatter","dateTimeLongFormatter","matchResult","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","token","isProtectedWeekYearToken","warnOrThrowProtectedError","format","input","_message","message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","format","date","formatStr","options","defaultOptions","getDefaultOptions","locale","enUS","firstWeekContainsDate","weekStartsOn","originalDate","toDate","isValid","parts","longFormattingTokensRegExp","substring","firstCharacter","longFormatter","longFormatters","formattingTokensRegExp","cleanEscapedString","formatters","unescapedLatinCharacterRegExp","formatterOptions","part","token","isProtectedWeekYearToken","isProtectedDayOfYearToken","warnOrThrowProtectedError","formatter","input","matched","escapedStringRegExp","doubleQuoteRegExp","pre","UPLOT","ORI_HZ","ORI_VT","TITLE","WRAP","UNDER","OVER","AXIS","OFF","SELECT","CURSOR_X","CURSOR_Y","CURSOR_PT","LEGEND","LEGEND_LIVE","LEGEND_INLINE","LEGEND_SERIES","LEGEND_MARKER","LEGEND_LABEL","LEGEND_VALUE","WIDTH","HEIGHT","TOP","BOTTOM","LEFT","RIGHT","hexBlack","transparent","mousemove","mousedown","mouseup","mouseenter","mouseleave","dblclick","resize","scroll","change","dppxchange","LEGEND_DISP","domEnv","doc","win","nav","pxRatio","query","setPxRatio","_pxRatio","off","on","addClass","el","c","cl","remClass","setStylePx","name","value","placeTag","tag","cls","targ","refEl","placeDiv","xformCache","elTrans","xPos","yPos","xMax","yMax","xform","xformOld","colorCache","elColor","background","borderColor","newColor","oldColor","sizeCache","elSize","newWid","newHgt","centered","newSize","oldSize","evOpts","evOpts2","__spreadProps","__spreadValues","ev","cb","capt","closestIdx","num","arr","lo","hi","mid","bitwise","floor","nonNullIdx","data","_i0","_i1","dir","i","getMinMax","sorted","_min","inf","_max","v","getMinMaxLog","rangeLog","min","max","base","fullMags","minSign","sign","maxSign","logFn","log10","log2","growMinAbs","ceil","growMaxAbs","minExp","abs","maxExp","minIncr","pow","maxIncr","roundDec","incrRoundDn","incrRoundUp","rangeAsinh","minMax","rangePad","autoRangePart","_eqRangePart","_eqRange","rangeNum","mult","extra","isObj","_rangeNum","ifNull","lh","rh","hasData","idx0","idx1","cfg","cmin","cmax","padMin","padMax","hardMin","hardMax","softMin","softMax","softMinMode","softMaxMode","delta","deltaMag","scalarMax","scalarMag","scalarMagDelta","nonZeroDelta","mag","_padMin","_newMin","_softMin","minLim","_padMax","_newMax","_softMax","maxLim","numFormatter","fmtNum","val","M","PI","round","sinh","linthresh","asinh","numIntDigits","x","clamp","fnOrSelf","noop","retArg0","_0","retArg1","_1","retNull","_","retTrue","retEq","a","b","fixFloat","incrRound","incr","dec","isInt","p","fixedDec","guessDec","genIncrs","mults","incrs","multDec","exp","expa","_incr","EMPTY_OBJ","EMPTY_ARR","nullNullTuple","isArr","isUndef","isStr","is","fastIsObj","TypedArray","copy","o","_isObj","out","k","assign","args","src","key","NULL_REMOVE","NULL_RETAIN","NULL_EXPAND","nullExpand","yVals","nullIdxs","alignedLen","xi","lastNullIdx","nullIdx","join","tables","nullModes","allHeadersSame","table","isAsc","sortCols","xVals","ti","xs","len","xIdxs","t","si","ys","nullMode","yVal","alignedIdx","microTask","fn","head","rlen","idxs","i0","i1","table2","row","row2","j","vals0","len0","vals1","vals","samples","firstIdx","lastIdx","stride","prevVal","months","days","slice3","str","days3","months3","engNames","zeroPad2","int","zeroPad3","subs","d","names","h","fmtDate","tpl","parts","R","m","localTz","tzDate","date","tz","date2","onlyWhole","allMults","decIncrs","oneIncrs","wholeIncrs","numIncrs","NL","yyyy","NLyyyy","md","NLmd","NLmdyy","aa","hmm","hmmaa","NLhmmaa","ss","genTimeStuffs","ms","s","mo","y","timeIncrs","_timeAxisStamps","timeAxisSplits","self","axisIdx","scaleMin","scaleMax","foundIncr","foundSpace","splits","isYr","isMo","minDate","minDateTs","minMin","mkDate","minMinTs","moIncr","yrIncr","split","splitDate","baseYear","baseMonth","next","offs","incr0","tzOffset","date0","prevHour","incrHours","minSpace","pctSpace","expectedHour","dstShift","prevSplit","timeIncrsMs","_timeAxisStampsMs","timeAxisSplitsMs","timeIncrsS","_timeAxisStampsS","timeAxisSplitsS","timeAxisStamps","stampCfg","timeAxisVals","stamps","prevYear","prevMnth","prevDate","prevMins","prevSecs","newYear","newMnth","newDate","newHour","newMins","newSecs","stamp","timeAxisVal","dateTpl","timeSeriesStamp","_timeSeriesStamp","timeSeriesVal","seriesIdx","dataIdx","legendStroke","legendFill","legendOpts","cursorPointShow","pt","size","mar","width","cursorPointFill","sp","cursorPointStroke","cursorPointSize","moveTuple","cursorMove","mouseLeft1","mouseTop1","filtBtn0","handle","onlyTarg","e","filtTarg","cursorOpts","valPos","curPos","axisLines","grid","ticks","border","font","labelFont","lineGap","xAxisOpts","numSeriesLabel","timeSeriesLabel","xSeriesOpts","numAxisVals","numAxisSplits","forceMin","numDec","logAxisSplits","logBase","asinhAxisSplits","posSplits","zero","RE_ALL","RE_12357","RE_125","RE_1","_filt","distr","re","keepMod","log10AxisValsFilt","axis","scaleKey","sc","valToPos","_10","magSpace","log2AxisValsFilt","numSeriesVal","yAxisOpts","ptDia","dia","seriesPointsShow","scale","xData","p0","p1","dim","maxPts","facet","gaps","nullGaps","xySeriesOpts","ySeriesOpts","clampScale","xScaleOpts","yScaleOpts","syncs","_sync","opts","plot","type","w","BAND_CLIP_FILL","BAND_CLIP_STROKE","orient","u","mode","series","scales","bbox","dx","dy","sx","sy","l","H","V","moveToH","lineToH","rectH","arcH","bezierCurveToH","moveToV","lineToV","rectV","arcV","bezierCurveToV","bandFillClipDirs","fillDir","clipDirs","bands","seriesFillTo","dataMin","dataMax","bandFillDir","clipBandLine","strokePath","clipDir","dataX","dataY","scaleX","scaleY","valToPosX","valToPosY","xOff","yOff","xDim","yDim","pxRound","lineTo","frIdx","toIdx","x0","y0","x1","yLimit","clip","clipGaps","ori","plotLft","plotTop","plotWid","plotHgt","rect","prevGapEnd","g","maxStrokeWidth","addGap","fromX","toX","prevGap","findGaps","pixelForX","align","fr","to","frPx","toPx","fri2","toi2","pxRoundGen","pxAlign","moveTo","arcTo","y1","x2","y2","r","endRad","baseRad","startAngle","endAngle","bp1x","bp1y","bp2x","bp2y","p2x","p2y","points","filtIdxs","arc","rad","fill","lft","top","wid","hgt","drawPoint","pi","_drawAcc","stroke","accX","minY","maxY","inY","outY","drawAccH","drawAccV","linear","alignGaps","pixelForY","drawAcc","_paths","drawnAtX","lftIdx","rgtIdx","lftX","rgtX","hasGap","bandClipDir","fillToVal","fillToY","stepped","ascDesc","extend","left","prevYPos","firstXPos","prevXPos","firstXPosExt","yVal1","prevXPosExt","fillTo","halfStroke","startsOffset","endsOffset","findColWidth","colWid","prevIdx","minDelta","bars","_extraGap","ro","radiusFn","gapFactor","_maxWidth","_minWidth","disp","_each","dispFills","dispStrokes","_align","extraGap","maxWidth","minWidth","valRadius","baseRadius","_dirX","each","band","xShift","barWid","fullGap","strokeWidth","multiPath","fillColors","fillPaths","strokeColors","strokePaths","color","pct","sizes","insetStroke","rawBarWid","dataY0","radVal","radBase","yVal0","xVal","btm","barHgt","rv","rb","splineInterp","interp","bezierCurveTo","xCoords","yCoords","monotoneCubic","_monotoneCubic","n","path","ds","dys","dxs","cursorPlots","invalidateRects","uPlot","linearPath","pointsPath","setDefaults","xo","yo","initY","setDefault","setDefaults2","xyo","snapNumX","snapTimeX","snapNumY","snapLogY","snapLogX","snapAsinhY","snapAsinhX","findIncr","minVal","maxVal","intDigits","incrIdx","pxRatioFont","fontSize","fontSizeCss","syncFontSize","f","then","getValPct","getHPos","getVPos","getPos","ready","root","title","can","ctx","wrap","over","mouseLeft0","mouseTop0","drag","under","axes","xScaleKey","drawOrderMap","drawAxesGrid","drawSeries","drawOrder","initScale","scaleOpts","isTime","rn","rangeIsArr","xScaleDistr","pendScales","_tzDate","ts","_fmtDate","_timeAxisSplits","_timeAxisVals","_timeSeriesVal","activeIdxs","legend","showLegend","markers","legendTable","legendHead","legendBody","legendRows","legendCells","legendCols","multiValLegend","NULL_LEGEND_VALUES","getMultiVals","son","soff","initLegendRow","cells","label","indic","text","onMouse","cursor","setCursorEvent","isolate","setSeries","syncOpts","cursorFocus","FOCUS_TRUE","mouseListeners","targListeners","listener","offMouse","fullWidCss","fullHgtCss","plotWidCss","plotHgtCss","plotLftCss","plotTopCss","_plotLftCss","_plotTopCss","_plotWidCss","_plotHgtCss","shouldSetScales","shouldSetSize","shouldConvergeSize","shouldSetCursor","shouldSetSelect","shouldSetLegend","_setSize","height","force","calcSize","resetYSeries","commit","calcPlotRect","calcAxesRects","bb","CYCLE_LIMIT","convergeSize","converged","cycleNum","axesConverged","axesCalc","paddingConverged","paddingCalc","setSize","hasTopAxis","hasBtmAxis","hasRgtAxis","hasLftAxis","side","_size","isVt","labelSize","fullSize","sidesWithAxes","_padding","off1","off2","off3","off0","incrOffset","hov","skip","prox","bias","cursorIdx","valAtPosX","idx2","_prox","withProx","cursorLft","xValues","yValues","nonNullLft","nonNullRgt","lftPos","rgtPos","lftDelta","rgtDelta","focus","cursorPts","cursorPtsLft","cursorPtsTop","initCursorPt","initSeries","sv","_ptDia","rowCells","fire","addSeries","delSeries","tr","initAxis","av","autoPadSide","padding","dataLen","data0","viaAutoScaleX","setData","_data","_resetScales","scaleData","_data0","xsc","autoScaleX","_setScale","ctxStroke","ctxFill","ctxWidth","ctxDash","ctxJoin","ctxCap","ctxFont","ctxAlign","ctxBaseline","ctxAlpha","setCtxStyle","dash","cap","setFontStyle","baseline","accScale","wsc","psc","AUTOSCALE","setScales","wipScales","xFacet","yFacet","yScaleKey","yData","wscx","wscy","changed","anyChanged","getOuterIdxs","ydata","cacheStrokeFill","_idxs","drawPath","_gaps","show","_points","gapsClip","flags","strokeStyle","fillStyle","boundsClip","offset","_pxAlign","strokeFill","fillStroke","lineWidth","lineDash","lineCap","fillPath","didStrokeFill","bi","lowerEdge","lowerData","bandClip","gapsClip2","_fillStyle","CLIP_FILL_STROKE","doFill","doStroke","getIncrSpace","fullDim","incrSpace","drawOrthoLines","filts","pos0","pos1","_space","_splits","values","_p","shiftDir","shiftAmt","baseLpos","plotDim","plotOff","axisGap","tickSize","angle","basePos","finalPos","textAlign","textBaseline","lineHeight","canOffs","_values","_parts","queuedCommit","deferHooks","hooksQueue","flushHooks","_commit","batch","_deferHooks","_el","_show","_pos","posOffset","syncRect","pctWid","pctHgt","vCursor","hCursor","select","prop","_hideProps","selectDiv","setSelect","updateCursor","setLegend","rebuildPaths","recalcAxes","setScale","xCursor","yCursor","rawMouseLeft0","rawMouseTop0","rawMouseLeft1","rawMouseTop1","dragging","dragX","dragY","_fire","toggleDOM","onOff","_pub","setFocus","pubSync","setBand","addBand","delBand","setAlpha","closestDist","closestSeries","focusedSeries","allFocused","_setAlpha","i2","isFocused","posToVal","pos","closestIdxFromXpos","setSelH","setSelV","setSelX","setSelY","syncLegend","didx","sidx","setLegendValues","idx","noDataInRange","mouseXPos","yVal2","xPos2","mouseYPos","dist","mouseYVal","seriesYValSign","mouseYValSign","hPos","vPos","ptWid","ptHgt","ptLft","ptTop","getBBox","xKey","yKey","matchXKeys","matchYKeys","xKeySrc","yKeySrc","sdrag","sori","sPosToVal","sOff","sDim","matchingX","matchingY","hideSelect","rawDX","rawDY","_rawDX","uni","syncKey","xSyncKey","ySyncKey","shouldPub","defer","mouseMove","_l","_t","_w","_h","_i","cacheMouse","initial","snap","syncOptsSrc","xValSrc","yValSrc","rotSrc","_xDim","_yDim","_xPos","_yPos","__l","downSelectLeft","downSelectTop","downSelectWidth","downSelectHeight","mouseDown","mouseUp","hasSelect","chgSelect","mouseLeave","_dragging","snapH","snapV","snapProx","dragH","dragV","dblClick","syncPxRatio","events","seriesIdxMatcher","hooks","evName","a1","a2","srcSeriesIdx","sync","pub","destroy","_init","paths","barChartPlugin","params","minRangeInSeconds","millisecondsToSeconds","minRangeInMs","getVisibleRangeLength","u","visibleRangeMin","scales","x","min","visibleRangeMax","max","undefined","Number","POSITIVE_INFINITY","drawBarChart","self","seriesIndex","i0","i1","ctx","scale","series","maxY","valToPos","color","colors","fillStyle","j","data0J","data","dataIJ","cx","Math","round","cy","range","beginPath","rect","fill","restore","hooks","opts","filter","s","forEach","points","show","TimelineChartUplotComponent","elementRef","inject","ElementRef","destroyRef","DestroyRef","store","AppStore","chartData","input","rangeChange","output","setRange","value","oldMin","uplot","oldMax","dataMin","dataMax","length","newMin","Date","valueOf","isNumber","now","newMax","setScale","firstRangeChangeSkipped","headerHeight","resizeObserver","constructor","effect","theme","stroke","window","getComputedStyle","nativeElement","primaryColor","getPropertyValue","secondaryColor","batch","uPlot","axes","a","i","redraw","setData","onDestroy","unobserve","destroy","afterNextRender","ResizeObserver","entry","setSize","width","floor","contentRect","height","observe","offsetWidth","offsetHeight","plugins","daysToMilliseconds","key","secondsToMilliseconds","event","emit","m","auto","time","currentMin","currentMax","minRangeWidthInSeconds","missingRange","_","format","label","getLegendLabel","rawValue","idx","otherBarValue","valueToShow","getLegendValue","class","size","values","ticks","map","raw","formatHours","selectors","inputs","outputs","standalone","features","ɵɵStandaloneFeature","decls","vars","template","rf","styles","encapsulation","changeDetection","TimelineChartUplotComponent","ɵɵelementStart","ɵɵlistener","$event","ɵɵrestoreView","_r2","ctx_r2","ɵɵnextContext","ɵɵresetView","onChartRangeChange","ɵɵelementEnd","ɵɵproperty","undefined","dataRange_r4","data","range","ɵɵtemplate","TasksFilterComponent_Conditional_49_Defer_0_Template","ɵɵdefer","TasksFilterComponent_Conditional_49_Defer_1_DepsFn","ɵɵelement","ɵɵpureFunction2","_c1","ɵɵpureFunction0","_c0","TasksFilterComponent","store","inject","AppStore","router","Router","destroyRef","DestroyRef","dataRange","computed","filterChartData","filterRange","hasChartData","constructor","onDestroy","navigate","queryParams","effect","decodedFilterParams","form","patchValue","valueChanges","pipe","debounceTime","distinctUntilChanged","deepEquals","takeUntilDestroyed","subscribe","value","encodeFilterParams","FormGroup","search","FormControl","from","to","durationSort","e","setAnyTime","setToday","startOfDay","Date","endOfDay","setYesterday","subDays","setThisWeek","startOfWeek","weekStartsOn","endOfWeek","setPreviousWeek","subWeeks","setThisMonth","startOfMonth","endOfMonth","setPreviousMonth","subMonths","setThisYear","startOfYear","endOfYear","setPreviousYear","subYears","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","rf","ctx","i0","_r1","preventDefault","ɵɵtext","controls","reset","TasksFilterComponent_Conditional_49_Template","TasksFilterComponent_Conditional_50_Template","ɵɵadvance","fromMenu_r5","ɵɵconditional","tmp_8_0","MatIconButton","MatSelect","MatOption","MatIcon","MatMenu","MatMenuTrigger","MatMenuItem","MatFormField","MatSuffix","MatLabel","MatInput","ReactiveFormsModule","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","A11yModule","CdkTrapFocus","ButtonResetInputComponent","DatetimeLocalDirective","MatTooltip","styles","animation","trigger","transition","style","opacity","animate","changeDetection"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44]}